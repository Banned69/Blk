function ba(a){throw a;}var g=void 0,i=!0,l=null,m=!1;function ca(){return function(){}}function da(a){return function(b){this[a]=b}}function p(a){return function(){return this[a]}}function ea(a){return function(){return a}}var t,fa=fa||{},u=this;function ga(a,b){var c=a.split("."),d=u;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&x(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function ha(a){a=a.split(".");for(var b=u,c;c=a.shift();)if(b[c]!=l)b=b[c];else return l;return b}function z(){}
function ia(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function x(a){return a!==g}function ja(a){var b=ia(a);return"array"==b||"object"==b&&"number"==typeof a.length}function A(a){return"string"==typeof a}function ka(a){return"function"==ia(a)}function la(a){var b=typeof a;return"object"==b&&a!=l||"function"==b}function ma(a){return a[na]||(a[na]=++oa)}var na="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),oa=0;
function pa(a,b,c){return a.call.apply(a.bind,arguments)}function qa(a,b,c){a||ba(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function B(a,b,c){B=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?pa:qa;return B.apply(l,arguments)}
function ra(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var sa=Date.now||function(){return+new Date};function C(a,b){function c(){}c.prototype=b.prototype;a.a=b.prototype;a.prototype=new c;a.prototype.constructor=a};function ta(a){Error.captureStackTrace?Error.captureStackTrace(this,ta):this.stack=Error().stack||"";a&&(this.message=String(a))}C(ta,Error);ta.prototype.name="CustomError";function ua(a){return a.replace(/\xa0|\s/g," ")}function va(a){return a.replace(/\xa0|[ \t]+/g," ")}function xa(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function ya(a){if(!za.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Aa,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Ba,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Ca,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Da,"&quot;"));return a}var Aa=/&/g,Ba=/</g,Ca=/>/g,Da=/\"/g,za=/[&<>\"]/;
function Ea(a,b){var c=x(b)?a.toFixed(b):String(a),d=c.indexOf(".");-1==d&&(d=c.length);d=Math.max(0,1-d);return Array(d+1).join("0")+c};var Fa=Array.prototype,Ga=Fa.indexOf?function(a,b,c){return Fa.indexOf.call(a,b,c)}:function(a,b,c){c=c==l?0:0>c?Math.max(0,a.length+c):c;if(A(a))return!A(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Ha=Fa.forEach?function(a,b,c){Fa.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=A(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Ia=Fa.filter?function(a,b,c){return Fa.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,
h=A(a)?a.split(""):a,j=0;j<d;j++)if(j in h){var k=h[j];b.call(c,k,j,a)&&(e[f++]=k)}return e},Ja=Fa.some?function(a,b,c){return Fa.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=A(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return i;return m};function D(a,b){var c=Ga(a,b),d;(d=0<=c)&&Fa.splice.call(a,c,1);return d}function Ka(a){return Fa.concat.apply(Fa,arguments)}function La(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}
function Ma(a,b){Fa.sort.call(a,b||Na)}function Na(a,b){return a>b?1:a<b?-1:0};function Xa(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function Ya(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function Za(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function $a(a){for(var b in a)delete a[b]}function ab(a,b){var c;(c=b in a)&&delete a[b];return c}function bb(a){var b={},c;for(c in a)b[c]=a[c];return b}var cb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function db(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<cb.length;f++)c=cb[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function eb(a){if("function"==typeof a.Cb)return a.Cb();if(A(a))return a.split("");if(ja(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Ya(a)}function fb(a,b,c){if("function"==typeof a.forEach)a.forEach(b,c);else if(ja(a)||A(a))Ha(a,b,c);else{var d;if("function"==typeof a.cd)d=a.cd();else if("function"!=typeof a.Cb)if(ja(a)||A(a)){d=[];for(var e=a.length,f=0;f<e;f++)d.push(f)}else d=Za(a);else d=g;for(var e=eb(a),f=e.length,h=0;h<f;h++)b.call(c,e[h],d&&d[h],a)}};function gb(a,b){this.r={};this.h=[];var c=arguments.length;if(1<c){c%2&&ba(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){a instanceof gb?(c=a.cd(),d=a.Cb()):(c=Za(a),d=Ya(a));for(var e=0;e<c.length;e++)this.set(c[e],d[e])}}t=gb.prototype;t.i=0;t.Wk=0;t.kb=p("i");t.Cb=function(){hb(this);for(var a=[],b=0;b<this.h.length;b++)a.push(this.r[this.h[b]]);return a};t.cd=function(){hb(this);return this.h.concat()};
t.nc=function(a){return ib(this.r,a)};t.clear=function(){this.r={};this.Wk=this.i=this.h.length=0};t.remove=function(a){return ib(this.r,a)?(delete this.r[a],this.i--,this.Wk++,this.h.length>2*this.i&&hb(this),i):m};function hb(a){if(a.i!=a.h.length){for(var b=0,c=0;b<a.h.length;){var d=a.h[b];ib(a.r,d)&&(a.h[c++]=d);b++}a.h.length=c}if(a.i!=a.h.length){for(var e={},c=b=0;b<a.h.length;)d=a.h[b],ib(e,d)||(a.h[c++]=d,e[d]=1),b++;a.h.length=c}}t.get=function(a,b){return ib(this.r,a)?this.r[a]:b};
t.set=function(a,b){ib(this.r,a)||(this.i++,this.h.push(a),this.Wk++);this.r[a]=b};t.q=function(){return new gb(this)};function ib(a,b){return Object.prototype.hasOwnProperty.call(a,b)};var jb,kb,lb,mb,nb,ob,pb;function qb(){return u.navigator?u.navigator.userAgent:l}nb=mb=lb=kb=jb=m;var rb;if(rb=qb()){var sb=u.navigator;jb=0==rb.indexOf("Opera");kb=!jb&&-1!=rb.indexOf("MSIE");mb=(lb=!jb&&-1!=rb.indexOf("WebKit"))&&-1!=rb.indexOf("Mobile");nb=!jb&&!lb&&"Gecko"==sb.product}var tb=jb,F=kb,ub=nb,vb=lb,wb=mb,xb,yb=u.navigator;xb=yb&&yb.platform||"";ob=-1!=xb.indexOf("Mac");pb=-1!=xb.indexOf("Win");var zb=-1!=xb.indexOf("Linux");
function Ab(){var a=u.document;return a?a.documentMode:g}var Bb;a:{var Cb="",Db;if(tb&&u.opera)var Eb=u.opera.version,Cb="function"==typeof Eb?Eb():Eb;else if(ub?Db=/rv\:([^\);]+)(\)|;)/:F?Db=/MSIE\s+([^\);]+)(\)|;)/:vb&&(Db=/WebKit\/(\S+)/),Db)var Fb=Db.exec(qb()),Cb=Fb?Fb[1]:"";if(F){var Gb=Ab();if(Gb>parseFloat(Cb)){Bb=String(Gb);break a}}Bb=Cb}var Hb={};
function Ib(a){var b;if(!(b=Hb[a])){b=0;for(var c=xa(String(Bb)).split("."),d=xa(String(a)).split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var h=c[f]||"",j=d[f]||"",k=RegExp("(\\d*)(\\D*)","g"),n=RegExp("(\\d*)(\\D*)","g");do{var q=k.exec(h)||["","",""],r=n.exec(j)||["","",""];if(0==q[0].length&&0==r[0].length)break;b=((0==q[1].length?0:parseInt(q[1],10))<(0==r[1].length?0:parseInt(r[1],10))?-1:(0==q[1].length?0:parseInt(q[1],10))>(0==r[1].length?0:parseInt(r[1],10))?1:0)||((0==q[2].length)<
(0==r[2].length)?-1:(0==q[2].length)>(0==r[2].length)?1:0)||(q[2]<r[2]?-1:q[2]>r[2]?1:0)}while(0==b)}b=Hb[a]=0<=b}return b}var Jb=u.document,Kb=!Jb||!F?g:Ab()||("CSS1Compat"==Jb.compatMode?parseInt(Bb,10):5);var Lb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function Mb(a,b){var c;if(a instanceof Mb)this.Ra=x(b)?b:a.Ra,Nb(this,a.$b),c=a.ti,Ob(this),this.ti=c,c=a.Yc,Ob(this),this.Yc=c,Pb(this,a.Gf),c=a.zh,Ob(this),this.zh=c,Qb(this,a.Fc.q()),c=a.Wg,Ob(this),this.Wg=c;else if(a&&(c=String(a).match(Lb))){this.Ra=!!b;Nb(this,c[1]||"",i);var d=c[2]||"";Ob(this);this.ti=d?decodeURIComponent(d):"";d=c[3]||"";Ob(this);this.Yc=d?decodeURIComponent(d):"";Pb(this,c[4]);d=c[5]||"";Ob(this);this.zh=d?decodeURIComponent(d):"";Qb(this,c[6]||"",i);c=c[7]||"";Ob(this);
this.Wg=c?decodeURIComponent(c):""}else this.Ra=!!b,this.Fc=new Rb(l,0,this.Ra)}t=Mb.prototype;t.$b="";t.ti="";t.Yc="";t.Gf=l;t.zh="";t.Wg="";t.Ho=m;t.Ra=m;
t.toString=function(){var a=[],b=this.$b;b&&a.push(Sb(b,Tb),":");if(b=this.Yc){a.push("//");var c=this.ti;c&&a.push(Sb(c,Tb),"@");a.push(encodeURIComponent(String(b)));b=this.Gf;b!=l&&a.push(":",String(b))}if(b=this.zh)this.Yc&&"/"!=b.charAt(0)&&a.push("/"),a.push(Sb(b,"/"==b.charAt(0)?Ub:Vb));(b=this.Fc.toString())&&a.push("?",b);(b=this.Wg)&&a.push("#",Sb(b,Wb));return a.join("")};t.q=function(){return new Mb(this)};
function Nb(a,b,c){Ob(a);a.$b=c?b?decodeURIComponent(b):"":b;a.$b&&(a.$b=a.$b.replace(/:$/,""))}function Pb(a,b){Ob(a);b?(b=Number(b),(isNaN(b)||0>b)&&ba(Error("Bad port number "+b)),a.Gf=b):a.Gf=l}function Qb(a,b,c){Ob(a);b instanceof Rb?(a.Fc=b,a.Fc.Bk(a.Ra)):(c||(b=Sb(b,Xb)),a.Fc=new Rb(b,0,a.Ra))}function Ob(a){a.Ho&&ba(Error("Tried to modify a read-only Uri"))}t.Bk=function(a){this.Ra=a;this.Fc&&this.Fc.Bk(a);return this};function Sb(a,b){return A(a)?encodeURI(a).replace(b,Yb):l}
function Yb(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Tb=/[#\/\?@]/g,Vb=/[\#\?:]/g,Ub=/[\#\?]/g,Xb=/[\#\?@]/g,Wb=/#/g;function Rb(a,b,c){this.Ca=a||l;this.Ra=!!c}function Zb(a){if(!a.D&&(a.D=new gb,a.i=0,a.Ca))for(var b=a.Ca.split("&"),c=0;c<b.length;c++){var d=b[c].indexOf("="),e=l,f=l;0<=d?(e=b[c].substring(0,d),f=b[c].substring(d+1)):e=b[c];e=decodeURIComponent(e.replace(/\+/g," "));e=$b(a,e);a.add(e,f?decodeURIComponent(f.replace(/\+/g," ")):"")}}t=Rb.prototype;
t.D=l;t.i=l;t.kb=function(){Zb(this);return this.i};t.add=function(a,b){Zb(this);this.Ca=l;a=$b(this,a);var c=this.D.get(a);c||this.D.set(a,c=[]);c.push(b);this.i++;return this};t.remove=function(a){Zb(this);a=$b(this,a);return this.D.nc(a)?(this.Ca=l,this.i-=this.D.get(a).length,this.D.remove(a)):m};t.clear=function(){this.D=this.Ca=l;this.i=0};t.nc=function(a){Zb(this);a=$b(this,a);return this.D.nc(a)};
t.cd=function(){Zb(this);for(var a=this.D.Cb(),b=this.D.cd(),c=[],d=0;d<b.length;d++)for(var e=a[d],f=0;f<e.length;f++)c.push(b[d]);return c};t.Cb=function(a){Zb(this);var b=[];if(a)this.nc(a)&&(b=Ka(b,this.D.get($b(this,a))));else{a=this.D.Cb();for(var c=0;c<a.length;c++)b=Ka(b,a[c])}return b};t.set=function(a,b){Zb(this);this.Ca=l;a=$b(this,a);this.nc(a)&&(this.i-=this.D.get(a).length);this.D.set(a,[b]);this.i++;return this};
t.get=function(a,b){var c=a?this.Cb(a):[];return 0<c.length?String(c[0]):b};t.toString=function(){if(this.Ca)return this.Ca;if(!this.D)return"";for(var a=[],b=this.D.cd(),c=0;c<b.length;c++)for(var d=b[c],e=encodeURIComponent(String(d)),d=this.Cb(d),f=0;f<d.length;f++){var h=e;""!==d[f]&&(h+="="+encodeURIComponent(String(d[f])));a.push(h)}return this.Ca=a.join("&")};t.q=function(){var a=new Rb;a.Ca=this.Ca;this.D&&(a.D=this.D.q(),a.i=this.i);return a};
function $b(a,b){var c=String(b);a.Ra&&(c=c.toLowerCase());return c}t.Bk=function(a){a&&!this.Ra&&(Zb(this),this.Ca=l,fb(this.D,function(a,c){var d=c.toLowerCase();c!=d&&(this.remove(c),this.remove(d),0<a.length&&(this.Ca=l,this.D.set($b(this,d),La(a)),this.i+=a.length))},this));this.Ra=a};t.extend=function(a){for(var b=0;b<arguments.length;b++)fb(arguments[b],function(a,b){this.add(b,a)},this)};function ac(a,b,c){this.Li=a;db(this.Li,{buildServer:{help:"Build server daemon address.",type:String,defaultValue:l}});this.uri=new Mb(b);this.Gh=new Rb(g,0,i);(a=this.uri.Fc)&&this.Gh.extend(a);this.Gh.extend(c);this.fq=bc(this,"buildServer")}function cc(a,b){var c=parseFloat(a.Li[b].defaultValue),d=a.Gh.get(b,c);return!x(d)?c:Number(d)}function bc(a,b){var c=a.Li[b].defaultValue,d=a.Gh.get(b,c);return!x(d)||!d||!d.length||/^[\s\xa0]*$/.test(String(d))?c:String(d)};function dc(a,b){ac.call(this,{simulatedLatency:{help:"Extra latency, in ms, to add to send/recv.",type:Number,defaultValue:0},userName:{help:"User name for multiplayer.",type:String,defaultValue:l},host:{help:"Host endpoint for connections.",type:String,defaultValue:l},sharedWorkers:{help:"Whether to enable shared web workers.",type:Number,defaultValue:1}},a,b);this.bc=cc(this,"simulatedLatency");this.host=bc(this,"host");this.Bp=cc(this,"sharedWorkers")}C(dc,ac);var ec=u.performance&&u.performance.webkitNow?function(){return u.performance.webkitNow()}:sa;function fc(a,b,c){this.type=a;this.path=b;this.size=c}function gc(a,b){return a.size-b.size};function G(){0!=hc&&(this.lq=Error().stack,ic[ma(this)]=this)}var hc=0,ic={};G.prototype.ij=m;G.prototype.hj=function(){if(!this.ij&&(this.ij=i,this.b(),0!=hc)){var a=ma(this);delete ic[a]}};function H(a,b){a.Fg||(a.Fg=[]);a.Fg.push(b)}G.prototype.b=function(){this.Fg&&jc.apply(l,this.Fg);if(this.hm)for(;this.hm.length;)this.hm.shift()()};function K(a){a&&"function"==typeof a.hj&&a.hj()}function jc(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];ja(d)?jc.apply(l,d):K(d)}};function kc(a,b,c){G.call(this);this.name=a;this.Xo=b;this.mk=this.Yk=0;this.Rj=l;this.mb=c;for(a=0;a<this.mb.length;a++)this.Yk+=this.mb[a].Xk;Ma(this.mb,lc)}C(kc,G);function mc(a){if(a.mb.length){if(1==a.mb.length)return a.mb[0]}else return l;switch(a.Xo){case 0:return nc(a,i);case 1:return nc(a,m);case 2:var b=a.mb[a.mk];a.mk=(a.mk+1)%a.mb.length;return b;default:return nc(a,i)}}
function nc(a,b){for(var c=0;5>c;c++){for(var d=l,e=Math.random()*a.Yk,f=0;f<a.mb.length;f++){d=a.mb[f];if(e<d.Xk)break;e-=d.Xk}if(b||d!=a.Rj)return a.Rj=d}return a.Rj||a.mb[0]}function L(a,b){this.start=a;this.duration=b;this.Xk=x(g)?g:1;this.jm=0}function lc(a,b){return a.jm-b.jm};var oc=!F||F&&9<=Kb,pc=F&&!Ib("9");!vb||Ib("528");ub&&Ib("1.9b")||F&&Ib("8")||tb&&Ib("9.5")||vb&&Ib("528");ub&&!Ib("8")||F&&Ib("9");function qc(a,b){this.type=a;this.currentTarget=this.target=b}t=qc.prototype;t.b=ca();t.hj=ca();t.nd=m;t.defaultPrevented=m;t.Lh=i;t.stopPropagation=function(){this.nd=i};t.preventDefault=function(){this.defaultPrevented=i;this.Lh=m};function rc(a){rc[" "](a);return a}rc[" "]=z;function sc(a,b){a&&this.zc(a,b)}C(sc,qc);t=sc.prototype;t.target=l;t.relatedTarget=l;t.offsetX=0;t.offsetY=0;t.clientX=0;t.clientY=0;t.screenX=0;t.screenY=0;t.button=0;t.keyCode=0;t.charCode=0;t.ctrlKey=m;t.altKey=m;t.shiftKey=m;t.metaKey=m;t.Vo=m;t.uc=l;
t.zc=function(a,b){var c=this.type=a.type;qc.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(ub){var e;a:{try{rc(d.nodeName);e=i;break a}catch(f){}e=m}e||(d=l)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=vb||a.offsetX!==g?a.offsetX:a.layerX;this.offsetY=vb||a.offsetY!==g?a.offsetY:a.layerY;this.clientX=a.clientX!==g?a.clientX:a.pageX;this.clientY=a.clientY!==g?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Vo=ob?a.metaKey:a.ctrlKey;this.state=a.state;this.uc=a;a.defaultPrevented&&this.preventDefault();delete this.nd};t.stopPropagation=function(){sc.a.stopPropagation.call(this);this.uc.stopPropagation?this.uc.stopPropagation():this.uc.cancelBubble=i};
t.preventDefault=function(){sc.a.preventDefault.call(this);var a=this.uc;if(a.preventDefault)a.preventDefault();else if(a.returnValue=m,pc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};t.b=ca();function tc(){}var uc=0;t=tc.prototype;t.key=0;t.pd=m;t.ug=m;t.zc=function(a,b,c,d,e,f){ka(a)?this.Rl=i:a&&a.handleEvent&&ka(a.handleEvent)?this.Rl=m:ba(Error("Invalid listener argument"));this.listener=a;this.sm=b;this.src=c;this.type=d;this.capture=!!e;this.ah=f;this.ug=m;this.key=++uc;this.pd=m};t.handleEvent=function(a){return this.Rl?this.listener.call(this.ah||this.src,a):this.listener.handleEvent.call(this.listener,a)};var vc={},wc={},xc={},yc={};
function zc(a,b,c,d,e){if("array"==ia(b)){for(var f=0;f<b.length;f++)zc(a,b[f],c,d,e);return l}a:{b||ba(Error("Invalid event type"));d=!!d;var h=wc;b in h||(h[b]={i:0,Ta:0});h=h[b];d in h||(h[d]={i:0,Ta:0},h.i++);var h=h[d],f=ma(a),j;h.Ta++;if(h[f]){j=h[f];for(var k=0;k<j.length;k++)if(h=j[k],h.listener==c&&h.ah==e){if(h.pd)break;j[k].ug=m;a=j[k].key;break a}}else j=h[f]=[],h.i++;var n=Ac,q=oc?function(a){return n.call(q.src,q.key,a)}:function(a){a=n.call(q.src,q.key,a);if(!a)return a},k=q;k.src=
a;h=new tc;h.zc(c,k,a,b,d,e);h.ug=m;c=h.key;k.key=c;j.push(h);vc[c]=h;xc[f]||(xc[f]=[]);xc[f].push(h);a.addEventListener?(a==u||!a.wl)&&a.addEventListener(b,k,d):a.attachEvent(b in yc?yc[b]:yc[b]="on"+b,k);a=c}return a}function Bc(a,b,c,d,e){if("array"==ia(b))for(var f=0;f<b.length;f++)Bc(a,b[f],c,d,e);else if(d=!!d,a=Cc(a,b,d))for(f=0;f<a.length;f++)if(a[f].listener==c&&a[f].capture==d&&a[f].ah==e){Dc(a[f].key);break}}
function Dc(a){if(!vc[a])return m;var b=vc[a];if(b.pd)return m;var c=b.src,d=b.type,e=b.sm,f=b.capture;c.removeEventListener?(c==u||!c.wl)&&c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(d in yc?yc[d]:yc[d]="on"+d,e);c=ma(c);xc[c]&&(e=xc[c],D(e,b),0==e.length&&delete xc[c]);b.pd=i;if(b=wc[d][f][c])b.dm=i,Ec(d,f,c,b);delete vc[a];return i}
function Ec(a,b,c,d){if(!d.sh&&d.dm){for(var e=0,f=0;e<d.length;e++)d[e].pd?d[e].sm.src=l:(e!=f&&(d[f]=d[e]),f++);d.length=f;d.dm=m;0==f&&(delete wc[a][b][c],wc[a][b].i--,0==wc[a][b].i&&(delete wc[a][b],wc[a].i--),0==wc[a].i&&delete wc[a])}}function Cc(a,b,c){var d=wc;return b in d&&(d=d[b],c in d&&(d=d[c],a=ma(a),d[a]))?d[a]:l}
function Fc(a,b,c,d,e){var f=1;b=ma(b);if(a[b]){a.Ta--;a=a[b];a.sh?a.sh++:a.sh=1;try{for(var h=a.length,j=0;j<h;j++){var k=a[j];k&&!k.pd&&(f&=Gc(k,e)!==m)}}finally{a.sh--,Ec(c,d,b,a)}}return Boolean(f)}function Gc(a,b){a.ug&&Dc(a.key);return a.handleEvent(b)}
function Ac(a,b){if(!vc[a])return i;var c=vc[a],d=c.type,e=wc;if(!(d in e))return i;var e=e[d],f,h;if(!oc){f=b||ha("window.event");var j=i in e,k=m in e;if(j){if(0>f.keyCode||f.returnValue!=g)return i;a:{var n=m;if(0==f.keyCode)try{f.keyCode=-1;break a}catch(q){n=i}if(n||f.returnValue==g)f.returnValue=i}}n=new sc;n.zc(f,this);f=i;try{if(j){for(var r=[],v=n.currentTarget;v;v=v.parentNode)r.push(v);h=e[i];h.Ta=h.i;for(var s=r.length-1;!n.nd&&0<=s&&h.Ta;s--)n.currentTarget=r[s],f&=Fc(h,r[s],d,i,n);if(k){h=
e[m];h.Ta=h.i;for(s=0;!n.nd&&s<r.length&&h.Ta;s++)n.currentTarget=r[s],f&=Fc(h,r[s],d,m,n)}}else f=Gc(c,n)}finally{r&&(r.length=0)}return f}d=new sc(b,this);return f=Gc(c,d)}var Hc=0;function Ic(a){G.call(this);this.Jl=a;this.h=[]}C(Ic,G);var Jc=[];Ic.prototype.listen=function(a,b,c,d,e){"array"!=ia(b)&&(Jc[0]=b,b=Jc);for(var f=0;f<b.length;f++){var h=zc(a,b[f],c||this,d||m,e||this.Jl||this);this.h.push(h)}return this};
function Kc(a,b,c,d,e,f){if("array"==ia(c))for(var h=0;h<c.length;h++)Kc(a,b,c[h],d,e,f);else{a:{d=d||a;f=f||a.Jl||a;e=!!e;if(b=Cc(b,c,e))for(c=0;c<b.length;c++)if(!b[c].pd&&b[c].listener==d&&b[c].capture==e&&b[c].ah==f){b=b[c];break a}b=l}b&&(b=b.key,Dc(b),D(a.h,b))}}function Lc(a){Ha(a.h,Dc);a.h.length=0}Ic.prototype.b=function(){Ic.a.b.call(this);Lc(this)};Ic.prototype.handleEvent=function(){ba(Error("EventHandler.handleEvent not implemented"))};function Mc(){G.call(this);this.Q=new Ic(this);H(this,this.Q)}C(Mc,G);Mc.prototype.load=function(a){a.w(l)};Mc.prototype.cancel=z;function Nc(){G.call(this)}C(Nc,G);t=Nc.prototype;t.wl=i;t.kk=l;t.addEventListener=function(a,b,c,d){zc(this,a,b,c,d)};t.removeEventListener=function(a,b,c,d){Bc(this,a,b,c,d)};
t.dispatchEvent=function(a){var b=a.type||a,c=wc;if(b in c){if(A(a))a=new qc(a,this);else if(a instanceof qc)a.target=a.target||this;else{var d=a;a=new qc(b,this);db(a,d)}var d=1,e,c=c[b],b=i in c,f;if(b){e=[];for(f=this;f;f=f.kk)e.push(f);f=c[i];f.Ta=f.i;for(var h=e.length-1;!a.nd&&0<=h&&f.Ta;h--)a.currentTarget=e[h],d&=Fc(f,e[h],a.type,i,a)&&a.Lh!=m}if(m in c)if(f=c[m],f.Ta=f.i,b)for(h=0;!a.nd&&h<e.length&&f.Ta;h++)a.currentTarget=e[h],d&=Fc(f,e[h],a.type,m,a)&&a.Lh!=m;else for(e=this;!a.nd&&e&&
f.Ta;e=e.kk)a.currentTarget=e,d&=Fc(f,e,a.type,m,a)&&a.Lh!=m;a=Boolean(d)}else a=i;return a};t.b=function(){Nc.a.b.call(this);var a=0;if(this!=l){var b=ma(this);if(xc[b])for(var b=xc[b],c=b.length-1;0<=c;c--)Dc(b[c].key),a++}else Xa(vc,function(b,c){Dc(c);a++});this.kk=l};var Oc=u.window;function Pc(a,b,c){ka(a)?c&&(a=B(a,c)):a&&"function"==typeof a.handleEvent?a=B(a.handleEvent,a):ba(Error("Invalid listener argument"));return 2147483647<b?-1:Oc.setTimeout(a,b||0)};function Qc(a){return Rc(a||arguments.callee.caller,[])}
function Rc(a,b){var c=[];if(0<=Ga(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(Sc(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){0<e&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=String(f);break;case "boolean":f=f?"true":"false";break;case "function":f=(f=Sc(f))?f:"[fn]";break;default:f=typeof f}40<f.length&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(Rc(a.caller,b))}catch(h){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function Sc(a){if(Tc[a])return Tc[a];a=String(a);if(!Tc[a]){var b=/function ([^\(]+)/.exec(a);Tc[a]=b?b[1]:"[Anonymous]"}return Tc[a]}var Tc={};function Uc(a,b,c,d,e){this.reset(a,b,c,d,e)}Uc.prototype.np=0;Uc.prototype.Al=l;Uc.prototype.zl=l;var Vc=0;Uc.prototype.reset=function(a,b,c,d,e){this.np="number"==typeof e?e:Vc++;this.Tf=d||sa();this.uf=a;this.Po=b;this.sq=c;delete this.Al;delete this.zl};Uc.prototype.zm=da("uf");function Wc(a){this.Qo=a}Wc.prototype.ia=l;Wc.prototype.uf=l;Wc.prototype.M=l;Wc.prototype.jf=l;function Xc(a,b){this.name=a;this.value=b}Xc.prototype.toString=p("name");var Yc=new Xc("SEVERE",1E3),Zc=new Xc("WARNING",900),$c=new Xc("INFO",800),ad=new Xc("CONFIG",700),bd=new Xc("FINE",500);t=Wc.prototype;t.getParent=p("ia");t.Dl=function(){this.M||(this.M={});return this.M};t.zm=da("uf");function cd(a){return a.uf?a.uf:a.ia?cd(a.ia):l}
t.log=function(a,b,c){if(a.value>=cd(this).value){a=this.On(a,b,c);b="log:"+a.Po;u.console&&(u.console.timeStamp?u.console.timeStamp(b):u.console.markTimeline&&u.console.markTimeline(b));u.msWriteProfilerMark&&u.msWriteProfilerMark(b);for(b=this;b;){c=b;var d=a;if(c.jf)for(var e=0,f=g;f=c.jf[e];e++)f(d);b=b.getParent()}}};
t.On=function(a,b,c){var d=new Uc(a,String(b),this.Qo);if(c){d.Al=c;var e;var f=arguments.callee.caller;try{var h;var j=ha("window.location.href");if(A(c))h={message:c,name:"Unknown error",lineNumber:"Not available",fileName:j,stack:"Not available"};else{var k,n,q=m;try{k=c.lineNumber||c.qq||"Not available"}catch(r){k="Not available",q=i}try{n=c.fileName||c.filename||c.sourceURL||j}catch(v){n="Not available",q=i}h=q||!c.lineNumber||!c.fileName||!c.stack?{message:c.message,name:c.name,lineNumber:k,
fileName:n,stack:c.stack||"Not available"}:c}e="Message: "+ya(h.message)+'\nUrl: <a href="view-source:'+h.fileName+'" target="_new">'+h.fileName+"</a>\nLine: "+h.lineNumber+"\n\nBrowser stack:\n"+ya(h.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+ya(Qc(f)+"-> ")}catch(s){e="Exception trying to expose exception! You win, we lose. "+s}d.zl=e}return d};t.info=function(a,b){this.log($c,a,b)};function dd(a,b){a.log(bd,b,g)}t.Ji=function(a,b){this.Dl()[a]=b};var ed={},fd=l;
function gd(a){fd||(fd=new Wc(""),ed[""]=fd,fd.zm(ad));var b;if(!(b=ed[a])){b=new Wc(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=gd(a.substr(0,c));c.Ji(d,b);b.ia=c;ed[a]=b}return b};function hd(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}ba(Error("Invalid JSON string: "+a))};function id(){}id.prototype.ql=l;function jd(a){var b;if(!(b=a.ql))b={},kd(a)&&(b[0]=i,b[1]=i),b=a.ql=b;return b};var ld;function md(){}C(md,id);md.prototype.Me=function(){var a=kd(this);return a?new ActiveXObject(a):new XMLHttpRequest};
function kd(a){if(!a.Ll&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.Ll=d}catch(e){}}ba(Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed"))}return a.Ll}ld=new md;function nd(a){G.call(this);this.headers=new gb;this.Fi=a||l}C(nd,Nc);nd.prototype.ga=gd("goog.net.XhrIo");var od=/^https?$/i;t=nd.prototype;t.Za=m;t.k=l;t.Ei=l;t.mh="";t.Vl="";t.qf=0;t.rf="";t.rj=m;t.fh=m;t.Jj=m;t.fd=m;t.Uf=0;t.xd=l;t.qd="";t.Sp=m;
t.send=function(a,b,c,d){this.k&&ba(Error("[goog.net.XhrIo] Object is active with another request="+this.mh+"; newUri="+a));b=b?b.toUpperCase():"GET";this.mh=a;this.rf="";this.qf=0;this.Vl=b;this.rj=m;this.Za=i;this.k=this.Fi?this.Fi.Me():ld.Me();this.Ei=this.Fi?jd(this.Fi):jd(ld);this.k.onreadystatechange=B(this.im,this);try{dd(this.ga,pd(this,"Opening Xhr")),this.Jj=i,this.k.open(b,a,i),this.Jj=m}catch(e){dd(this.ga,pd(this,"Error opening Xhr: "+e.message));qd(this,e);return}a=c||"";var f=this.headers.q();
d&&fb(d,function(a,b){f.set(b,a)});d=u.FormData&&a instanceof u.FormData;"POST"==b&&(!f.nc("Content-Type")&&!d)&&f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");fb(f,function(a,b){this.k.setRequestHeader(b,a)},this);this.qd&&(this.k.responseType=this.qd);"withCredentials"in this.k&&(this.k.withCredentials=this.Sp);try{this.xd&&(Oc.clearTimeout(this.xd),this.xd=l),0<this.Uf&&(dd(this.ga,pd(this,"Will abort after "+this.Uf+"ms if incomplete")),this.xd=Oc.setTimeout(B(this.Jp,
this),this.Uf)),dd(this.ga,pd(this,"Sending request")),this.fh=i,this.k.send(a),this.fh=m}catch(h){dd(this.ga,pd(this,"Send error: "+h.message)),qd(this,h)}};t.Jp=function(){"undefined"!=typeof fa&&this.k&&(this.rf="Timed out after "+this.Uf+"ms, aborting",this.qf=8,dd(this.ga,pd(this,this.rf)),this.dispatchEvent("timeout"),this.abort(8))};function qd(a,b){a.Za=m;a.k&&(a.fd=i,a.k.abort(),a.fd=m);a.rf=b;a.qf=5;rd(a);sd(a)}
function rd(a){a.rj||(a.rj=i,a.dispatchEvent("complete"),a.dispatchEvent("error"))}t.abort=function(a){this.k&&this.Za&&(dd(this.ga,pd(this,"Aborting")),this.Za=m,this.fd=i,this.k.abort(),this.fd=m,this.qf=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),sd(this))};t.b=function(){this.k&&(this.Za&&(this.Za=m,this.fd=i,this.k.abort(),this.fd=m),sd(this,i));nd.a.b.call(this)};t.im=function(){!this.Jj&&!this.fh&&!this.fd?this.To():td(this)};t.To=function(){td(this)};
function td(a){if(a.Za&&"undefined"!=typeof fa)if(a.Ei[1]&&4==a.df()&&2==ud(a))dd(a.ga,pd(a,"Local request error detected and ignored"));else if(a.fh&&4==a.df())Oc.setTimeout(B(a.im,a),0);else if(a.dispatchEvent("readystatechange"),4==a.df()){dd(a.ga,pd(a,"Request complete"));a.Za=m;try{var b=ud(a),c,d;a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:d=i;break a;default:d=m}if(!(c=d)){var e;if(e=0===b){var f=String(a.mh).match(Lb)[1]||l;if(!f&&self.location)var h=self.location.protocol,
f=h.substr(0,h.length-1);e=!od.test(f?f.toLowerCase():"")}c=e}if(c)a.dispatchEvent("complete"),a.dispatchEvent("success");else{a.qf=6;var j;try{j=2<a.df()?a.k.statusText:""}catch(k){dd(a.ga,"Can not get status: "+k.message),j=""}a.rf=j+" ["+ud(a)+"]";rd(a)}}finally{sd(a)}}}
function sd(a,b){if(a.k){var c=a.k,d=a.Ei[0]?z:l;a.k=l;a.Ei=l;a.xd&&(Oc.clearTimeout(a.xd),a.xd=l);b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){a.ga.log(Yc,"Problem encountered resetting onreadystatechange: "+e.message,g)}}}t.Ql=function(){return!!this.k};t.df=function(){return this.k?this.k.readyState:0};function ud(a){try{return 2<a.df()?a.k.status:-1}catch(b){return a.ga.log(Zc,"Can not get status: "+b.message,g),-1}}
function vd(a){try{if(!a.k)return l;if("response"in a.k)return a.k.response;switch(a.qd){case "":case "text":return a.k.responseText;case "arraybuffer":if("mozResponseArrayBuffer"in a.k)return a.k.mozResponseArrayBuffer}a.ga.log(Yc,"Response type "+a.qd+" is not supported on this browser",g);return l}catch(b){return dd(a.ga,"Can not get response: "+b.message),l}}function pd(a,b){return b+" ["+a.Vl+" "+a.mh+" "+ud(a)+"]"};function wd(a,b,c){Mc.call(this);this.url=a;this.contentType=b;this.timeout=c||0;this.n=this.za=l}C(wd,Mc);wd.prototype.load=function(a){this.n=a;this.za=new nd;H(this,this.za);this.za.Uf=Math.max(0,this.timeout);switch(this.contentType){default:case 0:case 1:this.za.qd="";break;case 2:this.za.qd="arraybuffer";break;case 3:this.za.qd="blob"}this.Q.listen(this.za,"success",this.ed);this.Q.listen(this.za,["abort","error","timeout"],this.ff);this.za.send(this.url)};
wd.prototype.cancel=function(){this.za&&this.za.abort()};wd.prototype.ed=function(){var a;switch(this.contentType){default:case 0:var b=this.za;try{a=b.k?b.k.responseText:""}catch(c){dd(b.ga,"Can not get responseText: "+c.message),a=""}break;case 1:a=this.za;a=a.k?hd(a.k.responseText):g;break;case 2:case 3:a=vd(this.za)}this.n.w(a);this.n=l};wd.prototype.ff=function(){this.n.A(l);this.n=l};var xd=u.postMessage?[u]:[];function M(a){for(var b=0;b<xd.length;b++){for(var c=Array(arguments.length),d=0;d<c.length;d++)c[d]=arguments[d];try{xd[b].postMessage({type:"gf_log",args:c},l)}catch(e){}}}if(u.console)var yd=u.console,M=B(yd.log,yd);function zd(a,b,c,d){G.call(this);this.context=a;this.cue=c;this.Pm=d;this.Ec=this.Kc=l;a&&(a=a.createBufferSource(),a.buffer=b,this.Ec=this.Kc=a)}C(zd,G);zd.prototype.b=function(){this.Ec&&(this.Ec.disconnect(),this.Kc=this.Ec=l);zd.a.b.call(this)};zd.prototype.play=function(a){this.Kc&&this.Kc.noteGrainOn(a||0,this.Pm.start/1E3,this.Pm.duration/1E3)};function Ad(a,b,c,d){zd.call(this,a,b,c,d);this.Kc&&(this.Ec=this.Kc,this.Ec.connect(a.destination))}C(Ad,zd);
function Bd(a,b,c,d){zd.call(this,a,b,c,d);this.Df=l;this.Kc&&(b=a.createPanner(),b.panningModel=0,b.distanceModel=2,b.refDistance=5,b.maxDistance=1E3,b.rolloffFactor=1.4,b.setPosition(0,0,0),b.setOrientation(0,0,0,0,0,0),b.setVelocity(0,0,0),this.Df=b,this.Kc.connect(b),this.Ec=b,this.Ec.connect(a.destination))}C(Bd,zd);Bd.prototype.b=function(){this.Df&&(this.Df.disconnect(),this.Df=l);Bd.a.b.call(this)};Bd.prototype.setPosition=function(a){var b=this.Df;b&&b.setPosition(a[0],a[1],a[2])};var Cd,Dd=!ub&&!F||F&&F&&9<=Kb||ub&&Ib("1.9.1");F&&Ib("9");var Ed=F||tb||vb;function Fd(a,b){this.width=a;this.height=b}t=Fd.prototype;t.q=function(){return new Fd(this.width,this.height)};t.dg=function(){return this.width/this.height};t.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};t.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};t.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function Gd(a,b){var c=b||document;return c.querySelectorAll&&c.querySelector?c.querySelectorAll("."+a):c.getElementsByClassName?c.getElementsByClassName(a):Hd(a,b)}
function Hd(a,b){var c,d,e,f;c=document;c=b||c;if(c.querySelectorAll&&c.querySelector&&a)return c.querySelectorAll(""+(a?"."+a:""));if(a&&c.getElementsByClassName){var h=c.getElementsByClassName(a);return h}h=c.getElementsByTagName("*");if(a){f={};for(d=e=0;c=h[d];d++){var j=c.className;"function"==typeof j.split&&0<=Ga(j.split(/\s+/),a)&&(f[e++]=c)}f.length=e;return f}return h}
function Id(a){a=a.document;a="CSS1Compat"==a.compatMode?a.documentElement:a.body;return new Fd(a.clientWidth,a.clientHeight)}function Jd(a){for(var b;b=a.firstChild;)a.removeChild(b)}function Kd(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function Ld(a){this.P=a||u.document||document}function Md(a,b,c){c=(a=c||a.P)||document;var d=l;return(d=c.querySelectorAll&&c.querySelector?c.querySelector("."+b):Gd(b,a)[0])||l}t=Ld.prototype;t.createElement=function(a){return this.P.createElement(a)};
t.createTextNode=function(a){return this.P.createTextNode(a)};t.appendChild=function(a,b){a.appendChild(b)};t.append=function(a,b){function c(a){a&&e.appendChild(A(a)?d.createTextNode(a):a)}for(var d=Kd(a),e=a,f=arguments,h=1;h<f.length;h++){var j=f[h];if(ja(j)&&!(la(j)&&0<j.nodeType)){var k=Ha,n;a:{if((n=j)&&"number"==typeof n.length){if(la(n)){n="function"==typeof n.item||"string"==typeof n.item;break a}if(ka(n)){n="function"==typeof n.item;break a}}n=m}k(n?La(j):j,c)}else c(j)}};
t.removeNode=function(a){return a&&a.parentNode?a.parentNode.removeChild(a):l};t.Dl=function(a){return Dd&&a.children!=g?a.children:Ia(a.childNodes,function(a){return 1==a.nodeType})};var Nd=["audio/mpeg","audio/ogg","audio/wav","audio/mp4"],Od=l;function Pd(a){for(var b=0;b<a.length;b++){var c=a[b],d=c.type;if(!Od){var e={},f=document.createElement("AUDIO");if(f&&f.canPlayType)for(var h=0;h<Nd.length;h++){var j=Nd[h];e[j]=!!f.canPlayType(j)}Od=e}if(Od[d])return c}return l};function Qd(a){for(var b=arguments[0],c=1;c<arguments.length;c++){var d=arguments[c];if(0==d.lastIndexOf("/",0))b=d;else{var e;if(!(e=""==b))e=d.length-1,e=0<=e&&d.indexOf("/",e)==e;b=e?b+d:b+("/"+d)}}return b};function Rd(a,b,c,d,e,f){G.call(this);this.Be=a;this.context=b;this.path=c;this.name=d||"Unknown";this.Md=e||[];e&&(this.Md=e,Ma(this.Md,gc));this.vl={};if(f)for(a=0;a<f.length;a++)b=f[a],this.vl[b.name]=b;this.n=this.Pi=l}C(Rd,G);t=Rd.prototype;t.b=function(){this.n&&(this.n.cancel(),this.n=l);Rd.a.b.call(this)};t.load=function(){this.Ti()};t.Ti=function(){if(this.context){var a=Pd(this.Md);a&&(a=new wd(Qd(this.path,a.path),2),this.n=this.Be.load(a),N(this.n,this.ed,this.handleError,this))}};
t.ed=function(a){this.n=l;var b=this.context;b&&b.decodeAudioData(a,B(da("Pi"),this),B(function(){M("failed to load audio buffer data")},this))};t.handleError=function(){this.n=l};function Sd(a,b,c){if(!a.Pi)return l;var d;d=A(b)?a.vl[b]:b;if(!d)return M("WARNING: cue "+b+" not found in bank "+a.name),l;b=mc(d);if(!b)return l;a=new c(a.context,a.Pi,d,b);a.play();return a};function Td(a,b){Rd.call(this,a,b,"../assets/audio/base","BaseSounds",[new fc("audio/wav","base_optimized.wav",137870),new fc("audio/ogg","base_optimized.ogg",16480),new fc("audio/mpeg","base_optimized.mp3",12955)],[new kc("player_leave",0,[new L(820,641)]),new kc("click",0,[new L(0,105)]),new kc("player_join",0,[new L(205,515)])])}C(Td,Rd);function Ud(a){switch(a){case 1:return"OES_texture_float";case 2:return"OES_texture_half_float";case 3:return"WEBGL_lose_context";case 4:return"OES_standard_derivatives";case 5:return"OES_vertex_array_object";case 6:return"WEBGL_debug_renderer_info";case 7:return"WEBGL_debug_shaders";case 8:return"WEBGL_compressed_texture_s3tc";case 9:return"OES_depth_texture";case 10:return"OES_element_index_uint";case 11:return"EXT_texture_filter_anisotropic";default:return l}}
function Vd(){this.Fl=l;this.Rf=Array(11);this.tj=Array(11)}Vd.prototype.oe=function(a){this.Fl=a;a=a.getSupportedExtensions();for(var b=0;b<this.Rf.length;b++){this.Rf[b]=m;this.tj[b]=l;var c=Ud(b);if(c)for(var d=0;d<a.length;d++){var e=a[d],f=e.indexOf(c);if(-1!=f&&c.length==e.length-f){this.Rf[b]=i;break}}}};Vd.prototype.isSupported=function(a){return!!this.Rf[a]};Vd.prototype.enable=function(a){return!!this.get(a)};
Vd.prototype.get=function(a){var b=this.tj[a];if(!b&&this.Rf[a]){b=Ud(a);if(!b)return l;b=this.Fl.getExtension(b);this.tj[a]=b}return b};function Wd(a,b,c){this.width=a;this.height=b;this.Vc=15;this.oh=c}
function Xd(a,b){var c=xa(b.type),d,e,f=c.indexOf(";");-1!=f?(d=c.substr(0,f),e=xa(c.substr(f+1))):(d=c,e="");switch(a.Vc){case Yd:c="a";break;case Zd:c="ra";break;case $d:c="rgb";break;case ae:c="rgba";break;default:return l}switch(d){case "image/gif":f="gif";break;case "image/jpeg":f="jpeg";break;case "image/png":f="png";break;case "image/webp":f="webp";break;case "application/octet-stream":f=l;break;default:return l}e=e.split(",");for(var h=0;h<e.length;h++){var j=e[h].split("=");if(!(2>j.length)){var k=
xa(j[0]).toLowerCase(),j=xa(j[1]).toLowerCase();"codec"==k?f=j:"format"==k&&(c=j)}}if(!f)return l;e=6408;h=l;switch(f){case "s3tc.dxt1":h=8;switch(c){case "rgb":e=33776;break;case "rgba":e=33777;break;default:return l}break;case "s3tc.dxt3":h=8;e=33778;if("rgba"!=c)return l;break;case "s3tc.dxt5":h=8;e=33779;if("rgba"!=c)return l;break;default:switch(c){case "a":e=6406;break;case "ra":e=6410;break;case "rgb":e=6407;break;case "rgba":e=6408;break;default:return l}}return new be(d,f,c,e,h)}
var Yd=8,Zd=9,$d=7,ae=15;function be(a,b,c,d,e){this.tn=a;this.iq=b;this.Fn=c;this.Sc=d;this.Bq=e};function ce(a,b){Mc.call(this);this.d=a;this.url=b;this.n=this.va=this.crossOrigin=l}C(ce,Mc);t=ce.prototype;t.b=function(){Lc(this.Q);this.va&&(this.va.src="",this.va=l);ce.a.b.call(this)};t.load=function(a){this.n=a;this.va=this.d.createElement("IMG");this.crossOrigin&&(this.va.crossOrigin=this.crossOrigin);this.Q.listen(this.va,"load",this.ed);this.Q.listen(this.va,["abort","error"],this.ff);this.va.src=this.url};
t.cancel=function(){this.va&&(Lc(this.Q),this.va.src="",this.va=l,this.n.A(l),this.n=l)};t.ed=function(){var a=this.va;this.va=l;this.n.w(a);this.n=l};t.ff=function(){this.va=l;this.n.A(l);this.n=l};function O(a){G.call(this);this.g=a;this.xm=String(de++);a=this.g;a.Gd[this.xm]=this;a.Vj++}C(O,G);O.prototype.b=function(){var a=this.g;ab(a.Gd,this.xm);a.Vj--;this.u();O.a.b.call(this)};var de=0;O.prototype.u=z;O.prototype.restore=z;function ee(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}ee.prototype.BYTES_PER_ELEMENT=4;ee.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};ee.prototype.toString=Array.prototype.join;"undefined"==typeof Float32Array&&(ee.BYTES_PER_ELEMENT=4,ee.prototype.BYTES_PER_ELEMENT=ee.prototype.BYTES_PER_ELEMENT,ee.prototype.set=ee.prototype.set,ee.prototype.toString=ee.prototype.toString,ga("Float32Array",ee));function fe(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}fe.prototype.BYTES_PER_ELEMENT=8;fe.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};fe.prototype.toString=Array.prototype.join;if("undefined"==typeof Float64Array){try{fe.BYTES_PER_ELEMENT=8}catch(ge){}fe.prototype.BYTES_PER_ELEMENT=fe.prototype.BYTES_PER_ELEMENT;fe.prototype.set=fe.prototype.set;fe.prototype.toString=fe.prototype.toString;ga("Float64Array",fe)};function Q(){return new Float32Array(4)}function he(a,b,c,d){var e=Q();ie(e,a,b,c,d);return e}function ie(a,b,c,d,e){a[0]=b;a[1]=c;a[2]=d;a[3]=e}function je(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3]}function ke(a,b){var c=1/256;b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c;b[3]=a[3]*c}function le(a,b){return a.length==b.length&&a[0]==b[0]&&a[1]==b[1]&&a[2]==b[2]&&a[3]==b[3]};function me(a,b,c,d){O.call(this,a);this.width=b;this.height=c;this.Fn=d;this.Xc=0;this.ak=9986;this.Xj=9729;this.Wp=this.Vp=10497;this.Jo=1;this.handle=this.$h=l}C(me,O);me.prototype.u=function(){this.g.f.deleteTexture(this.handle);this.handle=l;me.a.u.call(this)};me.prototype.restore=function(){var a=this.g.f;me.a.restore.call(this);this.handle&&a.deleteTexture(this.handle);this.handle=a.createTexture();this.Xc=4294967295};
me.prototype.bind=function(){var a=this.g.f;a.bindTexture(3553,this.handle);var b=this.Xc;this.Xc=0;b&1&&a.texParameteri(3553,10241,this.ak);b&2&&a.texParameteri(3553,10240,this.Xj);b&4&&a.texParameteri(3553,10242,this.Vp);b&8&&a.texParameteri(3553,10243,this.Wp);b&16&&this.g.Tg.isSupported(11)&&a.texParameteri(3553,34046,this.Jo)};function ne(a){9728!=a.ak&&(a.Xc|=1,a.ak=9728);9728!=a.Xj&&(a.Xc|=2,a.Xj=9728)}
function oe(a,b,c){a.$h=[];b=a.width/b;c=a.height/c;for(var d=0,e=0;d<c;d++)for(var f=d/c,h=0;h<b;h++,e++){var j=h/b;a.$h[e]=he(j,f,j+1/b,f+1/c)}}function pe(a,b,c){a.$h&&(a=a.$h[b])&&je(c,a);return c};function qe(a,b,c,d,e){me.call(this,b,e?e.width:1,e?e.height:1,6408);this.Be=a;this.path=c;this.name=d;this.Ml=this.lf=l;this.Go=m;this.n=l;if(e){this.lf=e;this.width=e.width;this.height=e.height;for(a=0;a<this.lf.oh.length;a++)Ma(this.lf.oh[a],gc)}}C(qe,me);t=qe.prototype;t.b=function(){this.n&&(this.n.cancel(),this.n=l);qe.a.b.call(this)};t.restore=function(){qe.a.restore.call(this);this.n||this.load()};t.load=function(){this.Ti()};
t.Ti=function(){var a=this.Be.d,b;a:{var c=this.lf;b=this.g;var d;d=Math.min(Math.max(0,0),c.oh.length-1);d=c.oh[d];for(var e=0;e<d.length;e++){var f=d[e],h=Xd(c,f);if(h&&("image/webp"!=h.tn||b.vj.Fk)){switch(h.Sc){case 33776:case 33777:case 33778:case 33779:if(!b.vj.Em)continue}b=f;break a}}b=l}if(b&&(c=Xd(this.lf,b))){this.Ml=c;b=Qd(this.path,b.path);d=l;a:switch(c.Sc){case 33776:case 33777:case 33778:case 33779:c=i;break a;default:c=m}d=c?new wd(b,2):new ce(a,b);this.n=this.Be.load(d);N(this.n,
this.ed,this.handleError,this)}};t.ed=function(a){this.n=l;re(this,a)};t.handleError=function(){this.n=l;var a=this.g.d.createElement("CANVAS");a.width=16;a.height=16;var b=a.getContext("2d");b.fillStyle="rgb(255,0,0)";b.fillRect(0,0,a.width,a.height);re(this,a)};
function re(a,b){var c=a.g.f;se(a.g,a);a.handle.O=a.name;var d=a.width,e=a.height,f=a.Ml;if(b instanceof HTMLCanvasElement||b instanceof HTMLImageElement)c.texImage2D(3553,0,f.Sc,f.Sc,5121,b);else if(b instanceof ArrayBuffer)switch(f.Sc){default:c.texImage2D(3553,0,f.Sc,d,e,0,f.Sc,5121,b);break;case 33776:case 33777:case 33778:case 33779:c.compressedTexImage2D(3553,0,f.Sc,d,e,0,b)}a.Go=i};function te(a,b){qe.call(this,a,b,"../assets/blocksets","simple",new Wd(256,256,[[new fc("image/png","simple.png",23183)]]));oe(this,16,16)}C(te,qe);function ue(a,b,c,d){O.call(this,a);this.Ni=b;this.lineHeight=c;this.Zl=2;this.pn=0;this.Gl=[];for(a=0;a<d.length;a+=4){c=d[a];var e=0;c.length?e=c.charCodeAt(0):(e=c,c=String.fromCharCode(e));var f=d[a+1],h=d[a+2],j=d[a+3],k=pe(b,a/4,Q());this.Gl[e]=new ve(c,f,h,j,k)}}C(ue,O);
function we(a,b,c,d,e){b.Pa(c.length);for(var f=1/a.Ni.width,h=1/a.Ni.height,j=0,k=0,n=0,q=0,r=i,v=0,s=0;s<c.length;s++){var y=c[s];if("\r"!=y)if("\n"==y)k=Math.max(j+v,k),v=j=0,n+=a.lineHeight+a.Zl,q+=a.Zl,r=i;else if(y=a.Gl[y.charCodeAt(0)])r?q=Math.max(q,a.lineHeight):j+=a.pn+v,v=y.ln,j+=y.Wm,b.add(y.Fm[0],y.Fm[1],y.Qi*f,a.lineHeight*h,d,0+j,e+n,y.Qi,a.lineHeight),j+=y.Qi,r=m}k=Math.max(j+v,k);return[k,q]}function ve(a,b,c,d,e){this.hq=a;this.Wm=b;this.Qi=c;this.ln=d;this.Fm=e};function xe(a,b,c){a=new qe(b,c,"../assets/fonts","monospace",new Wd(128,128,[[new fc("image/png","monospace.png",1256)]]));oe(a,8,8);ne(a);ue.call(this,c,a,8,ye);H(this,a)}C(xe,ue);
var ye=[0,0,8,0,1,0,8,0,2,0,8,0,3,0,8,0,4,0,8,0,5,0,8,0,6,0,8,0,7,0,8,0,8,0,8,0,9,0,8,0,10,0,8,0,11,0,8,0,12,0,8,0,13,0,8,0,14,0,8,0,15,0,8,0,16,0,8,0,17,0,8,0,18,0,8,0,19,0,8,0,20,0,8,0,21,0,8,0,22,0,8,0,23,0,8,0,24,0,8,0,25,0,8,0,26,0,8,0,27,0,8,0,28,0,8,0,29,0,8,0,30,0,8,0,31,0,8,0," ",0,8,0,"!",0,8,0,'"',0,8,0,"#",0,8,0,"$",0,8,0,"%",0,8,0,"&",0,8,0,"'",0,8,0,"(",0,8,0,")",0,8,0,"*",0,8,0,"+",0,8,0,",",0,8,0,"-",0,8,0,".",0,8,0,"/",0,8,0,"0",0,8,0,"1",0,8,0,"2",0,8,0,"3",0,8,0,"4",0,8,0,"5",0,
8,0,"6",0,8,0,"7",0,8,0,"8",0,8,0,"9",0,8,0,":",0,8,0,";",0,8,0,"<",0,8,0,"=",0,8,0,">",0,8,0,"?",0,8,0,"@",0,8,0,"A",0,8,0,"B",0,8,0,"C",0,8,0,"D",0,8,0,"E",0,8,0,"F",0,8,0,"G",0,8,0,"H",0,8,0,"I",0,8,0,"J",0,8,0,"K",0,8,0,"L",0,8,0,"M",0,8,0,"N",0,8,0,"O",0,8,0,"P",0,8,0,"Q",0,8,0,"R",0,8,0,"S",0,8,0,"T",0,8,0,"U",0,8,0,"V",0,8,0,"W",0,8,0,"X",0,8,0,"Y",0,8,0,"Z",0,8,0,"[",0,8,0,"\\",0,8,0,"]",0,8,0,"^",0,8,0,"_",0,8,0,"`",0,8,0,"a",0,8,0,"b",0,8,0,"c",0,8,0,"d",0,8,0,"e",0,8,0,"f",0,8,0,"g",0,
8,0,"h",0,8,0,"i",0,8,0,"j",0,8,0,"k",0,8,0,"l",0,8,0,"m",0,8,0,"n",0,8,0,"o",0,8,0,"p",0,8,0,"q",0,8,0,"r",0,8,0,"s",0,8,0,"t",0,8,0,"u",0,8,0,"v",0,8,0,"w",0,8,0,"x",0,8,0,"y",0,8,0,"z",0,8,0,"{",0,8,0,"|",0,8,0,"}",0,8,0,"~",0,8,0,"\u2302",0,8,0,"\u00c7",0,8,0,"\u00fc",0,8,0,"\u00e9",0,8,0,"\u00e2",0,8,0,"\u00e4",0,8,0,"\u00e0",0,8,0,"\u00e5",0,8,0,"\u00e7",0,8,0,"\u00ea",0,8,0,"\u00eb",0,8,0,"\u00e8",0,8,0,"\u00ef",0,8,0,"\u00ee",0,8,0,"\u00ec",0,8,0,"\u00c4",0,8,0,"\u00c5",0,8,0,"\u00c9",0,8,
0,"\u00e6",0,8,0,"\u00c6",0,8,0,"\u00f4",0,8,0,"\u00f6",0,8,0,"\u00f2",0,8,0,"\u00fb",0,8,0,"\u00f9",0,8,0,"\u00ff",0,8,0,"\u00d6",0,8,0,"\u00dc",0,8,0,"\u00f8",0,8,0,"\u00a3",0,8,0,"\u00d8",0,8,0,"\u00d7",0,8,0,"\u0192",0,8,0,"\u00e1",0,8,0,"\u00ed",0,8,0,"\u00f3",0,8,0,"\u00fa",0,8,0,"\u00f1",0,8,0,"\u00d1",0,8,0,"\u00aa",0,8,0,"\u00ba",0,8,0,"\u00bf",0,8,0,"\u00ae",0,8,0,"\u00ac",0,8,0,"\u00bd",0,8,0,"\u00bc",0,8,0,"\u00a1",0,8,0,"\u00ab",0,8,0,"\u00bb",0,5,0];function ze(a,b,c,d){O.call(this,a);this.name=b;this.Qm=c||l;this.Cl=d||l;this.gd=this.handle=this.bd=this.zd=l}C(ze,O);t=ze.prototype;t.load=function(){this.restore()};t.u=function(){var a=this.g.f;this.zd&&(a.deleteShader(this.zd),this.zd=l);this.bd&&(a.deleteShader(this.bd),this.bd=l);this.handle&&(a.deleteProgram(this.handle),this.handle=l);ze.a.u.call(this)};t.restore=function(){Ae(this);this.zb()};
function Ae(a){a.Qm&&a.Cl&&(a.gd=l,a.zd=a.createShader(35633,a.Qm),a.bd=a.createShader(35632,a.Cl),a.zd&&a.bd&&(a.handle=a.createProgram(a.zd,a.bd)))}t.zb=function(){var a;if(!(a=!Be(this,35633,this.zd)))if(!(a=!Be(this,35632,this.bd))){a=this.handle;var b=this.g.f,c=xa(b.getProgramInfoLog(a));if(c&&c.length){this.gd=this.gd||[];for(var d=c.split("\n"),e=0;e<d.length;e++){var f=d[e];f.length&&this.gd.push(f)}M("program "+this.name+":"+c)}a=!b.getProgramParameter(a,35714)}return a?(this.u(),m):i};
t.createShader=function(a,b){var c=this.g.f,d=c.createShader(a);if(!d)return l;c.shaderSource(d,b);c.compileShader(d);return d};function Be(a,b,c){var d=a.g.f,e=xa(d.getShaderInfoLog(c));if(e&&e.length){a.gd=a.gd||[];for(var f=e.split("\n"),h=0;h<f.length;h++){var j=f[h];j.length&&a.gd.push(j)}M("shader "+a.name+"/"+b+":"+e)}return!!d.getShaderParameter(c,35713)}
t.createProgram=function(a,b){var c=this.g.f,d=c.createProgram();if(!d)return l;c.attachShader(d,a);c.attachShader(d,b);this.dn(d);c.linkProgram(d);return d};t.dn=z;function Ce(a,b,c){ze.call(this,a,"FaceProgram",b,c);this.Hi=this.ma=this.Dd=-1;this.qi=this.Mc=this.Lk=this.Mk=this.Kk=this.Jm=this.qb=this.rb=this.la=l}C(Ce,ze);Ce.prototype.u=function(){this.Hi=this.ma=this.Dd=-1;this.qi=this.Mc=this.Lk=this.Mk=this.Kk=this.Jm=this.qb=this.rb=this.la=l;Ce.a.u.call(this)};
function De(a){Ce.call(this,a,"precision highp float;uniform mat4 a,d;uniform vec2 b;uniform vec3 c,e,f,g;attribute vec3 j,k;varying vec3 h;void n(){float m=max(dot(j,f),0.);h=e+g*m;}varying vec4 i;attribute vec4 l;void main(){gl_Position=a*vec4(k,1);i=l;n();}","precision mediump float;uniform mat4 a,d;uniform vec2 b,k;uniform vec3 c,e,f,g;vec4 o(vec4 l){float m,n;m=gl_FragCoord.z/gl_FragCoord.w;n=1.-smoothstep(b.x,b.y,m);return vec4(mix(c.rgb,l.rgb,n).rgb,l.a);}varying vec3 h;vec4 p(vec4 l){return vec4(l.rgb*h,l.a);}varying vec4 i;uniform sampler2D j;void main(){vec2 l=(i.xy+1.)/k;vec4 m,n;m=texture2D(j,l);if(m.a==0.)discard;n=m+i.z;gl_FragColor=o(p(n));}")}
C(De,Ce);
De.prototype.zb=function(){var a=this.g.f;if(!De.a.zb.call(this)||!this.handle)return m;this.Dd=a.getAttribLocation(this.handle,"j");this.ma=a.getAttribLocation(this.handle,"k");this.Hi=a.getAttribLocation(this.handle,"l");this.la=a.getUniformLocation(this.handle,"a");this.rb=a.getUniformLocation(this.handle,"b");this.qb=a.getUniformLocation(this.handle,"c");this.Jm=a.getUniformLocation(this.handle,"d");this.Kk=a.getUniformLocation(this.handle,"e");this.Mk=a.getUniformLocation(this.handle,"f");this.Lk=
a.getUniformLocation(this.handle,"g");this.Mc=a.getUniformLocation(this.handle,"j");this.qi=a.getUniformLocation(this.handle,"k");return i};function Ee(a,b,c){ze.call(this,a,"LineProgram",b,c);this.Tc=this.ma=-1;this.qb=this.rb=this.la=l}C(Ee,ze);Ee.prototype.u=function(){this.Tc=this.ma=-1;this.qb=this.rb=this.la=l;Ee.a.u.call(this)};
function Fe(a){Ee.call(this,a,"precision highp float;uniform mat4 a;uniform vec2 b;uniform vec3 c;varying vec4 d;attribute vec3 e;attribute vec4 f;void main(){gl_Position=a*vec4(e,1);d=f;}","precision mediump float;uniform mat4 a;uniform vec2 b;uniform vec3 c;vec4 h(vec4 e){float f,g;f=gl_FragCoord.z/gl_FragCoord.w;g=1.-smoothstep(b.x,b.y,f);return vec4(mix(c.rgb,e.rgb,g).rgb,e.a);}varying vec4 d;void main(){gl_FragColor=h(d);}")}C(Fe,Ee);
Fe.prototype.zb=function(){var a=this.g.f;if(!Fe.a.zb.call(this)||!this.handle)return m;this.ma=a.getAttribLocation(this.handle,"e");this.Tc=a.getAttribLocation(this.handle,"f");this.la=a.getUniformLocation(this.handle,"a");this.rb=a.getUniformLocation(this.handle,"b");this.qb=a.getUniformLocation(this.handle,"c");return i};function Ge(a,b,c){ze.call(this,a,"ModelProgram",b,c);this.Zk=this.Dd=this.ma=-1;this.Mc=this.Im=this.Ok=this.Nk=this.qb=this.rb=this.la=l}C(Ge,ze);Ge.prototype.u=function(){this.Zk=this.Dd=this.ma=-1;this.Mc=this.Im=this.Ok=this.Nk=this.qb=this.rb=this.la=l;Ge.a.u.call(this)};
function He(a){Ge.call(this,a,"precision highp float;uniform mat4 a,d,e,f[20];uniform vec2 b;uniform vec3 c;vec4 l(vec3 k){return d*e*vec4(k,1);}varying vec2 g;attribute vec3 h,i;attribute vec2 j;void main(){gl_Position=l(h);g=j;}","precision mediump float;uniform mat4 a,d,e,f[20];uniform vec2 b;uniform vec3 c;vec4 l(vec4 i){float j,k;j=gl_FragCoord.z/gl_FragCoord.w;k=1.-smoothstep(b.x,b.y,j);return vec4(mix(c.rgb,i.rgb,k).rgb,i.a);}varying vec2 g;uniform sampler2D h;void main(){vec4 i=texture2D(h,g);if(i.a==0.)discard;gl_FragColor=l(i);}")}
C(He,Ge);
He.prototype.zb=function(){var a=this.g.f;if(!He.a.zb.call(this)||!this.handle)return m;this.ma=a.getAttribLocation(this.handle,"h");this.Dd=a.getAttribLocation(this.handle,"i");this.Zk=a.getAttribLocation(this.handle,"j");this.la=a.getUniformLocation(this.handle,"a");this.rb=a.getUniformLocation(this.handle,"b");this.qb=a.getUniformLocation(this.handle,"c");this.Nk=a.getUniformLocation(this.handle,"d");this.Ok=a.getUniformLocation(this.handle,"e");this.Im=a.getUniformLocation(this.handle,"f");this.Mc=
a.getUniformLocation(this.handle,"h");return i};function Ie(a,b,c){ze.call(this,a,"SpriteProgram",b,c);this.Tc=this.Gi=this.ma=-1;this.pi=this.Mc=this.la=l}C(Ie,ze);Ie.prototype.u=function(){this.Tc=this.Gi=this.ma=-1;this.pi=this.Mc=this.la=l;Ie.a.u.call(this)};
function Je(a){Ie.call(this,a,"precision highp float;uniform mat4 a;varying vec2 b;varying vec4 c;attribute vec3 d;attribute vec2 e;attribute vec4 f;void main(){gl_Position=a*vec4(d,1);b=e;c=f;}","precision mediump float;uniform mat4 a;varying vec2 b;varying vec4 c;uniform sampler2D d;uniform vec4 e;void main(){vec4 f,g;f=texture2D(d,b);g=f*c*e;if(g.a==0.)discard;gl_FragColor=g;}")}C(Je,Ie);
Je.prototype.zb=function(){var a=this.g.f;if(!Je.a.zb.call(this)||!this.handle)return m;this.ma=a.getAttribLocation(this.handle,"d");this.Gi=a.getAttribLocation(this.handle,"e");this.Tc=a.getAttribLocation(this.handle,"f");this.la=a.getUniformLocation(this.handle,"a");this.Mc=a.getUniformLocation(this.handle,"d");this.pi=a.getUniformLocation(this.handle,"e");return i};function Ke(a,b){qe.call(this,a,b,"../assets/textures","ui",new Wd(256,256,[[new fc("image/png","ui.png",949)]]));oe(this,16,16)}C(Ke,qe);function R(){return new Float32Array(3)}function Le(a,b,c){var d=R();S(d,a,b,c);return d}function S(a,b,c,d){a[0]=b;a[1]=c;a[2]=d}function Me(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2]}function Ne(a,b,c){c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2]}function Oe(a,b,c){c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b}function Pe(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)}function Qe(a,b){var c=a[0]-b[0],d=a[1]-b[1],e=a[2]-b[2];return c*c+d*d+e*e}
function Re(a,b,c){var d=b[0]-a[0],e=b[1]-a[1];a=b[2]-a[2];(b=Math.sqrt(d*d+e*e+a*a))?(b=1/b,c[0]=d*b,c[1]=e*b,c[2]=a*b):c[0]=c[1]=c[2]=0}function Se(a,b){return a.length==b.length&&a[0]==b[0]&&a[1]==b[1]&&a[2]==b[2]};function Te(){return new Float32Array(16)}function Ue(){var a=Te();a[0]=a[5]=a[10]=a[15]=1;return a}function Ve(a,b,c,d,e,f,h,j,k){a[0]=b;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=d;a[11]=e;a[12]=f;a[13]=h;a[14]=j;a[15]=k}
function We(a,b,c){var d=a[0],e=a[1],f=a[2],h=a[3],j=a[4],k=a[5],n=a[6],q=a[7],r=a[8],v=a[9],s=a[10],y=a[11],w=a[12],E=a[13],I=a[14];a=a[15];var P=b[0],aa=b[1],wa=b[2],Oa=b[3],Pa=b[4],Qa=b[5],Ra=b[6],Sa=b[7],Ta=b[8],Ua=b[9],Va=b[10],Wa=b[11],J=b[12],Xe=b[13],Ye=b[14];b=b[15];c[0]=d*P+j*aa+r*wa+w*Oa;c[1]=e*P+k*aa+v*wa+E*Oa;c[2]=f*P+n*aa+s*wa+I*Oa;c[3]=h*P+q*aa+y*wa+a*Oa;c[4]=d*Pa+j*Qa+r*Ra+w*Sa;c[5]=e*Pa+k*Qa+v*Ra+E*Sa;c[6]=f*Pa+n*Qa+s*Ra+I*Sa;c[7]=h*Pa+q*Qa+y*Ra+a*Sa;c[8]=d*Ta+j*Ua+r*Va+w*Wa;c[9]=
e*Ta+k*Ua+v*Va+E*Wa;c[10]=f*Ta+n*Ua+s*Va+I*Wa;c[11]=h*Ta+q*Ua+y*Va+a*Wa;c[12]=d*J+j*Xe+r*Ye+w*b;c[13]=e*J+k*Xe+v*Ye+E*b;c[14]=f*J+n*Xe+s*Ye+I*b;c[15]=h*J+q*Xe+y*Ye+a*b}
function Ze(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],h=a[4],j=a[5],k=a[6],n=a[7],q=a[8],r=a[9],v=a[10],s=a[11],y=a[12],w=a[13],E=a[14],I=a[15],P=c*j-d*h,aa=c*k-e*h,wa=c*n-f*h,Oa=d*k-e*j,Pa=d*n-f*j,Qa=e*n-f*k,Ra=q*w-r*y,Sa=q*E-v*y,Ta=q*I-s*y,Ua=r*E-v*w,Va=r*I-s*w,Wa=v*I-s*E,J=P*Wa-aa*Va+wa*Ua+Oa*Ta-Pa*Sa+Qa*Ra;0!=J&&(J=1/J,b[0]=(j*Wa-k*Va+n*Ua)*J,b[1]=(-d*Wa+e*Va-f*Ua)*J,b[2]=(w*Qa-E*Pa+I*Oa)*J,b[3]=(-r*Qa+v*Pa-s*Oa)*J,b[4]=(-h*Wa+k*Ta-n*Sa)*J,b[5]=(c*Wa-e*Ta+f*Sa)*J,b[6]=(-y*Qa+E*wa-I*aa)*J,b[7]=(q*Qa-
v*wa+s*aa)*J,b[8]=(h*Va-j*Ta+n*Ra)*J,b[9]=(-c*Va+d*Ta-f*Ra)*J,b[10]=(y*Pa-w*wa+I*P)*J,b[11]=(-q*Pa+r*wa-s*P)*J,b[12]=(-h*Ua+j*Sa-k*Ra)*J,b[13]=(c*Ua-d*Sa+e*Ra)*J,b[14]=(-y*Oa+w*aa-E*P)*J,b[15]=(q*Oa-r*aa+v*P)*J)}function $e(a,b,c){var d=b[0],e=b[1];b=b[2];c[0]=d*a[0]+e*a[4]+b*a[8]+a[12];c[1]=d*a[1]+e*a[5]+b*a[9]+a[13];c[2]=d*a[2]+e*a[6]+b*a[10]+a[14]}function af(a,b,c){var d=b[0],e=b[1];b=b[2];c[0]=d*a[0]+e*a[4]+b*a[8];c[1]=d*a[1]+e*a[5]+b*a[9];c[2]=d*a[2]+e*a[6]+b*a[10]}
function bf(a,b,c){var d=b[0],e=b[1];b=b[2];var f=1/(d*a[3]+e*a[7]+b*a[11]+a[15]);c[0]=(d*a[0]+e*a[4]+b*a[8]+a[12])*f;c[1]=(d*a[1]+e*a[5]+b*a[9]+a[13])*f;c[2]=(d*a[2]+e*a[6]+b*a[10]+a[14])*f}new Float64Array(3);new Float64Array(3);new Float64Array(4);new Float64Array(4);new Float64Array(4);new Float64Array(16);function cf(a){G.call(this);this.Yb=a;this.g=a.g;this.Rd=24576;this.c=new ArrayBuffer(40*this.Rd);this.Pl=new Int8Array(this.c);this.Qk=new Uint8Array(this.c);this.Ye=0}C(cf,G);
var df=new Int8Array([0,0,1,0,0,1,1,1,0,0,1,0,1,0,0,1,0,1,0,0,1,1,1,0,0,1,0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,-1,0,1,0,0,0,1,0,0,0,-1,0,0,0,0,1,1,0,0,0,-1,1,0,0,0,1,0,0,0,0,-1,1,1,0,0,0,1,0,0,1,0,1,0,0,0,0,1,1,0,1,0,1,1,0,0,1,1,1,0,1,0,0,1,0,0,1,1,0,0,1,0,0,0,0,0,0,0,0,0,-1,0,0,0,0,0,1,0,0,0,-1,0,1,0,0,0,1,0,1,0,-1,0,1,1,0,0,0,0,1,0,-1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,1,0,1,0,0,0,0,0,0,1,1,1,1,0,0,1,0,0,0,1,0,1,1,0,0,1,1,0,0,0,0,0,-1,0,0,1,1,0,0,0,0,1,-1,0,0,0,1,0,0,0,1,1,-1,0,0,0,0,0,0,0,1,0,-1,
0,0,1,0,0,0]);cf.prototype.Pa=function(a){a=Math.max(this.Rd,this.Ye+a);return a>this.Rd?this.We(a):i};cf.prototype.We=function(a){a=Math.ceil(a||2*this.Rd);if(10922.5<=a)return m;var b=new ArrayBuffer(40*a);(new Uint8Array(b)).set(new Uint8Array(this.c));this.Rd=a;this.c=b;this.Pl=new Int8Array(this.c);this.Qk=new Uint8Array(this.c);return i};
function ef(a,b,c,d,e,f){for(var h=a.Ye++;h>=a.Rd;)if(!a.We())return;b*=40;var j=a.Pl;a=a.Qk;for(var h=40*h,k=0,n=0;4>k;k++,n+=10)j[h+n+0]=df[b+n+0]+c,j[h+n+1]=df[b+n+1]+d,j[h+n+2]=df[b+n+2]+e,j[h+n+3]=df[b+n+3],j[h+n+4]=df[b+n+4],j[h+n+5]=df[b+n+5],a[h+n+6]=df[b+n+6]?255*f[2]:255*f[0],a[h+n+7]=df[b+n+7]?255*f[3]:255*f[1],a[h+n+8]=df[b+n+8],a[h+n+9]=df[b+n+9]}
cf.prototype.finish=function(a){var b=this.g.f,c=40*this.Ye,d=6*this.Ye;if(!c)return a&&b.deleteBuffer(a),{buffer:l,Se:0,ol:0};a=a||b.createBuffer();b.bindBuffer(34962,a);b.bufferData(34962,this.Qk.subarray(0,c),35048);b={buffer:a,Se:d,ol:c};this.Ye=0;return b};
cf.prototype.pc=function(a,b,c,d){var e=this.g.f,f=this.Yb.vc;if(d){var h=ff;We(a.Rc,b,h);e.uniformMatrix4fv(f.la,m,h);e.bindBuffer(34962,c);e.vertexAttribPointer(f.ma,3,5120,m,10,0);e.vertexAttribPointer(f.Dd,3,5120,m,10,3);e.vertexAttribPointer(f.Hi,4,5121,m,10,6);e.drawElements(4,d,5123,0)}};var ff=Te();function gf(a){G.call(this);this.J=a;this.da=[]}C(gf,G);gf.prototype.flush=function(a){var b=this.J;if(6!=b.mode){b.mode=6;var c=b.g,d=c.f;hf(c,jf);kf(c,lf);mf(c,b.wf);var e=b.vf,f=b.wf;e.ek&&(e.ek=m,d.uniform2f(f.rb,e.af,e.$e),d.uniform3f(f.qb,e.ta[0],e.ta[1],e.ta[2]));se(c,b.La)}b=this.J.g.f;b.uniformMatrix4fv(this.J.wf.Nk,m,a.Rc);a=this.J.wf.Ok;for(c=0;c<this.da.length;c++)e=this.da[c],d=e.Co,e=e.transform,b.uniformMatrix4fv(a,m,e),d.B(e);this.da.length=0;nf(this.J.g,l)};function of(){this.jg=m;this.kg=this.lg=32774;this.pg=1;this.ng=0;this.og=1;this.mg=0;this.blendColor=Q();this.colorMask=pf}var pf=15;of.prototype.jd=function(a,b){this!=b&&(b?this.kd(a,b):this.Cc(a))};
of.prototype.Cc=function(a){this.jg?a.enable(3042):a.disable(3042);a.blendEquationSeparate(this.lg,this.kg);a.blendFuncSeparate(this.pg,this.ng,this.og,this.mg);a.blendColor(this.blendColor[0],this.blendColor[1],this.blendColor[2],this.blendColor[3]);a.colorMask(!!(this.colorMask&1),!!(this.colorMask&2),!!(this.colorMask&4),!!(this.colorMask&8))};
of.prototype.kd=function(a,b){this.jg!=b.jg&&(this.jg?a.enable(3042):a.disable(3042));(this.lg!=b.lg||this.kg!=b.kg)&&a.blendEquationSeparate(this.lg,this.kg);(this.pg!=b.pg||this.ng!=b.ng||this.og!=b.og||this.mg!=b.mg)&&a.blendFuncSeparate(this.pg,this.ng,this.og,this.mg);le(this.blendColor,b.blendColor)||a.blendColor(this.blendColor[0],this.blendColor[1],this.blendColor[2],this.blendColor[3]);this.colorMask!=b.colorMask&&a.colorMask(!!(this.colorMask&1),!!(this.colorMask&2),!!(this.colorMask&4),
!!(this.colorMask&8))};new of;new of;function qf(){this.oc=m;this.depthFunc=513;this.Hg=0;this.Gg=1;this.depthMask=i;this.Ch=m;this.Eh=this.Dh=0}qf.prototype.jd=function(a,b){this!=b&&(b?this.kd(a,b):this.Cc(a))};qf.prototype.Cc=function(a){this.oc?a.enable(2929):a.disable(2929);a.depthFunc(this.depthFunc);a.depthRange(this.Hg,this.Gg);a.depthMask(this.depthMask);this.Ch?a.enable(32823):a.disable(32823);a.polygonOffset(this.Dh,this.Eh)};
qf.prototype.kd=function(a,b){this.oc!=b.oc&&(this.oc?a.enable(2929):a.disable(2929));this.depthFunc!=b.depthFunc&&a.depthFunc(this.depthFunc);(this.Hg!=b.Hg||this.Gg!=b.Gg)&&a.depthRange(this.Hg,this.Gg);this.depthMask!=b.depthMask&&a.depthMask(this.depthMask);this.Ch!=b.Ch&&(this.Ch?a.enable(32823):a.disable(32823));(this.Dh!=b.Dh||this.Eh!=b.Eh)&&a.polygonOffset(this.Dh,this.Eh)};/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
function rf(a,b){this.Vh=[];this.gm=a;this.xl=b||l}t=rf.prototype;t.Ab=m;t.ef=m;t.Vi=m;t.fn=m;t.Dk=m;t.Wi=0;t.cancel=function(a){if(this.Ab)this.Lf instanceof rf&&this.Lf.cancel();else{if(this.ia){var b=this.ia;delete this.ia;a?b.cancel(a):(b.Wi--,0>=b.Wi&&b.cancel())}this.gm?this.gm.call(this.xl,this):this.Dk=i;this.Ab||this.A(new sf(this))}};t.ul=function(a,b){this.Vi=m;tf(this,a,b)};function tf(a,b,c){a.Ab=i;a.Lf=c;a.ef=!b;uf(a)}function vf(a){a.Ab&&(a.Dk||ba(new wf(a)),a.Dk=m)}
t.w=function(a){vf(this);tf(this,i,a)};t.A=function(a){vf(this);tf(this,m,a)};function N(a,b,c,d){a.Vh.push([b,c,d]);a.Ab&&uf(a)}function xf(a){return Ja(a.Vh,function(a){return ka(a[1])})}
function uf(a){a.Sk&&(a.Ab&&xf(a))&&(u.clearTimeout(a.Sk),delete a.Sk);a.ia&&(a.ia.Wi--,delete a.ia);for(var b=a.Lf,c=m,d=m;a.Vh.length&&!a.Vi;){var e=a.Vh.shift(),f=e[0],h=e[1],e=e[2];if(f=a.ef?h:f)try{var j=f.call(e||a.xl,b);x(j)&&(a.ef=a.ef&&(j==b||j instanceof Error),a.Lf=b=j);b instanceof rf&&(d=i,a.Vi=i)}catch(k){b=k,a.ef=i,xf(a)||(c=i)}}a.Lf=b;d&&(N(b,B(a.ul,a,i),B(a.ul,a,m)),b.fn=i);c&&(a.Sk=u.setTimeout(function(){ba(b)},0))}function yf(){var a=new rf;a.w(l);return a}
function wf(a){ta.call(this);this.Qb=a}C(wf,ta);wf.prototype.message="Deferred has already fired";wf.prototype.name="AlreadyCalledError";function sf(a){ta.call(this);this.Qb=a}C(sf,ta);sf.prototype.message="Deferred was cancelled";sf.prototype.name="CancelledError";var zf,Af,Bf,Cf;Cf=Bf=Af=zf=m;var Df=qb();Df&&(-1!=Df.indexOf("Firefox")||-1!=Df.indexOf("Camino")||(-1!=Df.indexOf("iPhone")||-1!=Df.indexOf("iPod")?zf=i:-1!=Df.indexOf("iPad")?Af=i:-1!=Df.indexOf("Android")?Bf=i:-1!=Df.indexOf("Chrome")&&(Cf=i)));var Ef=zf,Ff=Af,Gf=Bf,Hf=Cf;function If(a){G.call(this);this.g=a;this.md=[]}C(If,G);If.prototype.b=function(){Ha(this.md,K);this.md.length=0;If.a.b.call(this)};If.prototype.W=function(a){this.md.push(a)};If.prototype.oe=function(a){for(var b=new rf,c=0;c<this.md.length;c++)Ae(this.md[c]);Hf&&!a?Pc(function(){Jf(this,b)},5,this):Jf(this,b);return b};function Jf(a,b){for(var c=0;c<a.md.length;c++){var d=a.md[c];try{if(!d.zb()){b.A(m);break}}catch(e){b.A(e);break}}b.Ab||b.w(l)};function Kf(){this.Lg=i;this.Ne=m;this.cullFace=1029;this.Xg=2305;this.Nh=m;this.Ph=1;this.Mh=this.Oh=m}Kf.prototype.jd=function(a,b){this!=b&&(b?this.kd(a,b):this.Cc(a))};Kf.prototype.Cc=function(a){this.Lg?a.enable(3024):a.disable(3024);this.Ne?a.enable(2884):a.disable(2884);a.cullFace(this.cullFace);a.frontFace(this.Xg);this.Nh?a.enable(32928):a.disable(32928);a.sampleCoverage(this.Ph,this.Oh);this.Mh?a.enable(32926):a.disable(32926)};
Kf.prototype.kd=function(a,b){this.Lg!=b.Lg&&(this.Lg?a.enable(3024):a.disable(3024));this.Ne!=b.Ne&&(this.Ne?a.enable(2884):a.disable(2884));this.cullFace!=b.cullFace&&a.cullFace(this.cullFace);this.Xg!=b.Xg&&a.frontFace(this.Xg);this.Nh!=b.Nh&&(this.Nh?a.enable(32928):a.disable(32928));(this.Ph!=b.Ph||this.Oh!=b.Oh)&&a.sampleCoverage(this.Ph,this.Oh);this.Mh!=b.Mh&&(this.Mh?a.enable(32926):a.disable(32926))};function Lf(a,b,c,d){O.call(this,a);this.qe=b;this.pe=x(c)?c:16;this.Yn=x(d)?d:32;this.ob=new ArrayBuffer(this.pe*this.qe);this.Ma=l;this.ec=0;this.ri=[];this.Vb=m;this.tb=Number.MAX_VALUE;this.sb=Number.MIN_VALUE}C(Lf,O);t=Lf.prototype;t.u=function(){this.g.f.deleteBuffer(this.Ma);this.Ma=l;this.Vb=i;this.tb=Number.MIN_VALUE;this.sb=Number.MAX_VALUE;Lf.a.u.call(this)};
t.restore=function(){var a=this.g.f;Lf.a.restore.call(this);this.Ma=a.createBuffer();this.Vb=i;this.tb=Number.MIN_VALUE;this.sb=Number.MAX_VALUE;Mf(this)};t.Pa=function(a){a=Math.max(this.pe,this.ec+a);return a>this.pe?this.We(a):i};t.We=function(a){a=a||this.pe+this.Yn;if(65535<=a)return m;var b=new ArrayBuffer(a*this.qe);(new Uint8Array(b)).set(new Uint8Array(this.ob));this.pe=a;this.ob=b;this.Vb=i;this.tb=Number.MIN_VALUE;this.sb=Number.MAX_VALUE;this.bj();return i};
function Nf(a){for(var b=0,b=a.ri.length?a.ri.pop():a.ec++;b>=a.pe;)if(!a.We())return 65535;a.Vb=i;a.tb=Math.min(a.tb,b);a.sb=Math.max(a.sb,b);return b}t.clear=function(){this.ec=0;this.ri.length=0;this.Vb=m;this.tb=Number.MAX_VALUE;this.sb=Number.MIN_VALUE};function Mf(a){var b=a.g.f;b.bindBuffer(34962,a.Ma);a.Vb&&(b.bufferData(34962,a.ob,35048),a.Vb=m,a.tb=Number.MAX_VALUE,a.sb=Number.MIN_VALUE)}t.bj=z;function Of(a,b){Lf.call(this,a,96);this.Cp=b;this.ad=new Float32Array(this.ob);this.ve=new Uint32Array(this.ob)}C(Of,Lf);Of.prototype.bj=function(){this.ad=new Float32Array(this.ob);this.ve=new Uint32Array(this.ob)};var Pf=new Float32Array([0,0,0,0,0,0,0,1,0,0,1,0,1,0,0,1,0,0,1,1,0,1,1,0]);
Of.prototype.add=function(a,b,c,d,e,f,h,j,k,n){var q=Nf(this);if(65535==q)return q;n=n||0;for(var r=this.ad,v=this.ve,s=q*this.qe/4,y=0,w=0;4>y;y++,w+=6)r[s+w+0]=Pf[w+0]*j+f,r[s+w+1]=Pf[w+1]*k+h,r[s+w+2]=Pf[w+2]+n,r[s+w+3]=Pf[w+3]?a+c:a,r[s+w+4]=Pf[w+4]?b+d:b,v[s+w+5]=e;return q};
Of.prototype.update=function(a,b,c,d,e,f,h,j,k,n,q){q=q||0;for(var r=this.ad,v=this.ve,s=a*this.qe/4,y=0,w=0;4>y;y++,w+=6)r[s+w+0]=Pf[w+0]*k+h,r[s+w+1]=Pf[w+1]*n+j,r[s+w+2]=Pf[w+2]+q,r[s+w+3]=Pf[w+3]?b+d:b,r[s+w+4]=Pf[w+4]?c+e:c,v[s+w+5]=f;this.Vb=i;this.tb=Math.min(this.tb,a);this.sb=Math.max(this.sb,a)};
Of.prototype.remove=function(a){for(var b=this.ad,c=a*this.qe,d=0;4>d;d++)b[c+0]=0,b[c+1]=0,b[c+2]=0,c+=96;a==this.ec?this.ec--:(this.ri.push(a),this.Vb=i,this.tb=Math.min(this.tb,a),this.sb=Math.max(this.sb,a))};
Of.prototype.pc=function(a,b,c){var d=this.g.f,e=this.Cp;if(this.ec){if(b){var f=Qf;We(a,b,f);d.uniformMatrix4fv(e.la,m,f)}else d.uniformMatrix4fv(e.la,m,a);x(c)?d.uniform4fv(e.pi,c):d.uniform4f(e.pi,1,1,1,1);Mf(this);d.vertexAttribPointer(e.ma,3,5126,m,24,0);d.vertexAttribPointer(e.Gi,2,5126,m,24,12);d.vertexAttribPointer(e.Tc,4,5121,i,24,20);d.drawElements(4,6*this.ec,5123,0)}};var Qf=Te();function Rf(a,b,c,d,e,f){rf.call(this,e,f);this.da=a;this.dj=[];this.Bl=!!b;this.An=!!c;this.sn=!!d;for(b=0;b<a.length;b++)N(a[b],B(this.Hl,this,b,i),B(this.Hl,this,b,m));0==a.length&&!this.Bl&&this.w(this.dj)}C(Rf,rf);Rf.prototype.fm=0;Rf.prototype.Hl=function(a,b,c){this.fm++;this.dj[a]=[b,c];this.Ab||(this.Bl&&b?this.w([a,c]):this.An&&!b?this.A(c):this.fm==this.da.length&&this.w(this.dj));this.sn&&!b&&(c=l);return c};Rf.prototype.A=function(a){Rf.a.A.call(this,a);Ha(this.da,function(a){a.cancel()})};function Sf(a,b,c){O.call(this,c);this.mode=Tf;this.vf=new Uf;this.Hf=new If(c);H(this,this.Hf);this.ph=new Fe(c);this.Hf.W(this.ph);this.fi=new Je(c);this.Hf.W(this.fi);this.vc=new De(c);this.Hf.W(this.vc);this.wf=new He(c);this.Hf.W(this.wf);this.font=new xe(0,b,c);H(this,this.font);this.La=new te(b,c);H(this,this.La);ne(this.La);this.Pk=new Ke(b,c);ne(this.Pk);H(this,this.Pk);this.De=this.ei=l;this.dl=new cf(this);H(this,this.dl);this.vm=new gf(this);H(this,this.vm)}C(Sf,O);Sf.prototype.oe=function(){return new Rf([])};
var Vf=new Kf;Vf.Ne=i;var Tf=0,jf=new of,lf,Wf=new qf;Wf.oc=i;Wf.depthFunc=515;lf=Wf;var Xf=new of,Yf=new qf;Yf.oc=i;Yf.depthFunc=515;var Zf=new of,$f=new qf;$f.oc=i;$f.depthFunc=515;var ag=new of,bg=new qf;bg.oc=m;bg.depthFunc=515;Sf.prototype.u=function(){var a=this.g.f;a.deleteBuffer(this.ei);this.ei=l;a.deleteBuffer(this.De);this.De=l};
Sf.prototype.restore=function(){for(var a=this.g.f,b=a.createBuffer(),c=Math.floor(10922.5),d=6*c,e=new Uint16Array([0,1,2,2,1,3]),d=new Uint16Array(d),f=0,h=0,j=0;f<c;f++){for(var k=0;k<e.length;k++)d[h+k]=e[k]+j;h+=e.length;j+=4}a.bindBuffer(34963,b);a.bufferData(34963,d,35044);a.bindBuffer(34963,l);this.ei=b;b=a.createBuffer();c=Math.floor(10922.5);d=6*c;e=new Uint16Array([0,1,2,0,2,3]);d=new Uint16Array(d);for(j=h=f=0;f<c;f++){for(k=0;k<e.length;k++)d[h+k]=e[k]+j;h+=e.length;j+=4}a.bindBuffer(34963,
b);a.bufferData(34963,d,35044);a.bindBuffer(34963,l);this.De=b};Sf.prototype.reset=function(a,b){var c=this.g,d=c.f;c.Hh!=Vf&&(Vf&&c.f&&Vf.jd(c.f,c.Hh),c.Hh=Vf);d.viewport(0,0,d.canvas.width,d.canvas.height);d.clearColor(a[0],a[1],a[2],a[3]);d.clearDepth(1);d.clear((b?16384:0)|256);this.mode=Tf};function cg(a,b){a.mode=5;var c=a.g,d=c.f;hf(c,ag);kf(c,bg);mf(c,a.fi);se(c,b);d.bindBuffer(34963,a.ei);d.enableVertexAttribArray(0);d.enableVertexAttribArray(1);d.enableVertexAttribArray(2)}
function Uf(){this.Uc=R();this.vd=R();this.ud=R();this.$e=this.af=0;this.ta=R();this.ek=this.uj=this.Uj=i}Uf.prototype.update=function(a,b,c,d,e,f){var h=m;Se(this.Uc,a)||(Me(this.Uc,a),h=i);if(!Se(this.vd,b)||!Se(this.ud,c))Me(this.vd,b),Me(this.ud,c),h=i;if(this.af!=d||this.$e!=e||!Se(this.ta,f))this.af=d,this.$e=e,Me(this.ta,f),h=i;h&&(this.ek=this.uj=this.Uj=i)};
function dg(a,b,c){a.uj&&(a.uj=m,b.uniform3f(c.Kk,a.Uc[0],a.Uc[1],a.Uc[2]),b.uniform3f(c.Mk,a.vd[0],a.vd[1],a.vd[2]),b.uniform3f(c.Lk,a.ud[0],a.ud[1],a.ud[2]),b.uniform2f(c.rb,a.af,a.$e),b.uniform3f(c.qb,a.ta[0],a.ta[1],a.ta[2]))};function eg(){this.buffer=new Uint8Array(512);this.offset=0;this.sa=new Float32Array(16);this.Da=new Uint8Array(this.sa.buffer);this.Dn=(this.Ze=u.Float64Array?new Float64Array(1):l)?new Uint8Array(this.Ze.buffer):l}t=eg.prototype;t.finish=function(){for(var a=new Uint8Array(this.offset),b=0;b<this.offset;b++)a[b]=this.buffer[b];this.offset=0;return a.buffer};
t.Pa=function(a){if(this.offset+a>this.buffer.length){a=this.offset+a;var b=this.buffer.length;do b+=1024;while(b<a);a=new Uint8Array(b);for(b=0;b<this.offset;b++)a[b]=this.buffer[b];this.buffer=a}};function fg(a,b){a.Pa(2);a.buffer[a.offset++]=b>>8;a.buffer[a.offset++]=b}function gg(a,b){a.Pa(1);a.buffer[a.offset++]=b}function hg(a,b){a.Pa(2);a.buffer[a.offset++]=b>>8;a.buffer[a.offset++]=b}
t.Lb=function(a){this.Pa(4);this.buffer[this.offset++]=a>>24;this.buffer[this.offset++]=a>>16;this.buffer[this.offset++]=a>>8;this.buffer[this.offset++]=a};t.hc=function(a){this.Pa(5);for(a&=4294967295;a&4294967168;)this.buffer[this.offset++]=a&127|128,a>>>=7;this.buffer[this.offset++]=a&127};t.Di=function(a){this.hc(a<<1^a>>31)};
t.Um=function(a){this.Pa(4);this.sa[0]=a;this.buffer[this.offset++]=this.Da[0];this.buffer[this.offset++]=this.Da[1];this.buffer[this.offset++]=this.Da[2];this.buffer[this.offset++]=this.Da[3]};t.Zp=function(a){this.Pa(12);this.sa[0]=a[0];this.sa[1]=a[1];this.sa[2]=a[2];for(a=0;12>a;a++)this.buffer[this.offset++]=this.Da[a]};t.$p=function(a){this.Pa(16);this.sa[0]=a[0];this.sa[1]=a[1];this.sa[2]=a[2];this.sa[3]=a[3];for(a=0;16>a;a++)this.buffer[this.offset++]=this.Da[a]};
t.ba=function(a){65535<=a.length&&(a=a.substr(0,65535));this.Pa(4+3*a.length);hg(this,a.length);var b=this.offset;this.offset+=2;for(var c=0,d=0;d<a.length;d++){var e=a.charCodeAt(d);128>e?(this.buffer[this.offset++]=e,c++):2048>e?(this.buffer[this.offset++]=e>>6|192,this.buffer[this.offset++]=e&63|128,c+=2):(this.buffer[this.offset++]=e>>12|224,this.buffer[this.offset++]=e>>6&63|128,this.buffer[this.offset++]=e&63|128,c+=3)}a=this.offset;this.offset=b;hg(this,c);this.offset=a};var ig=l;
function jg(){ig||(ig=new eg);return ig};var kg=new function(){this.L=this.y=this.x=0},lg=new (ca());function mg(a,b,c,d,e){G.call(this);this.context=a;this.path=b;this.name=c;this.duration=d;this.Md=e;Ma(this.Md,gc);this.na=this.xh=this.ci=l}C(mg,G);mg.prototype.b=function(){this.xh&&(this.xh.disconnect(),this.xh=l);this.ci&&(this.ci.disconnect(),this.ci=l);this.na&&(this.na.pause(),this.na=l);mg.a.b.call(this)};
mg.prototype.play=function(a){if(this.context&&!this.na){var b=Pd(this.Md);b&&(b=Qd(this.path,b.path),this.na=document.createElement("AUDIO"),this.na.autoplay=m,this.na.src=b,b=this.context.createMediaElementSource(this.na),b.connect(this.context.destination),this.xh=this.ci=b)}this.na&&(this.na.loop=a||m,this.na.play())};mg.prototype.stop=function(){this.na&&(this.na.currentTime=0,this.na.pause())};function ng(a,b,c,d,e){G.call(this);this.Be=a;this.context=b;this.path=c;this.name=d||"Unknown";this.Vf={};e&&this.Xh(e)}C(ng,G);ng.prototype.b=function(){ng.a.b.call(this)};ng.prototype.Xh=function(a){for(var b=0;b<a.length;b++){var c=a[b];this.Vf[c.name]=c}};ng.prototype.load=function(){og(this)};ng.prototype.play=function(a,b,c){var d;d=A(a)?this.Vf[a]:a;if(!d)return M("WARNING: track "+a+" not found in list"),l;og(this,c);d.play(b);return d};
function og(a,b){Xa(a.Vf,function(a){a.stop(b)},a)};function pg(a,b){ng.call(this,a,b,"../assets/audio/music","Music",[new mg(b,"../assets/audio/music","track1",383380,[new fc("audio/ogg","track1.ogg",4861360)])])}C(pg,ng);function qg(a,b,c,d,e,f,h){this.N=a;this.fl=b;this.gl=c;this.hl=d;this.ic=e;this.jj=f;this.rm=h};function rg(){var a=R(),b=R();this.min=a;this.max=b}function sg(a,b,c,d,e,f){var h=new rg;h.min[0]=a<d?a:d;h.min[1]=b<e?b:e;h.min[2]=c<f?c:f;h.max[0]=a<d?d:a;h.max[1]=b<e?e:b;h.max[2]=c<f?f:c;return h}
function tg(a,b,c){var d=a.min;a=a.max;var e=ug[0];e[0]=Math.abs(b[3]);e[1]=Math.abs(b[4]);e[2]=Math.abs(b[5]);var f=0,h=1,j=2;e[0]<e[2]&&(f=2,j=0);e[1]<e[j]?(h=j,j=1):e[1]>e[f]&&(h=f,f=1);var k=0,n=Number.MAX_VALUE,q=b[3+f],r=(d[f]-b[f])/q,f=(a[f]-b[f])/q;r>f&&(q=r,r=f,f=q);if(!(r>n||f<k)){r>k&&(k=r);f<n&&(n=f);if(1E-6>e[h]){if(b[h]<d[h]||b[h]>a[h]||b[j]<d[j]||b[j]>a[j])return}else{q=b[3+h];r=(d[h]-b[h])/q;f=(a[h]-b[h])/q;r>f&&(q=r,r=f,f=q);if(r>n||f<k)return;r>k&&(k=r);f<n&&(n=f);if(1E-6>e[j]){if(b[j]<
d[j]||b[j]>a[j])return}else{q=b[3+j];r=(d[j]-b[j])/q;f=(a[j]-b[j])/q;r>f&&(q=r,r=f,f=q);if(r>n||f<k)return;r>k&&(k=r)}}c&&(c[0]=b[0]+b[3]*k,c[1]=b[1]+b[4]*k,c[2]=b[2]+b[5]*k)}}var ug=[R(),R(),R()];function vg(a,b,c,d){this.map=a;this.x=b;this.y=c;this.L=d;this.Nb=sg(b,c,d,b+16,c+128,d+16);this.state=wg;this.Kg=i;this.version=this.je=0;this.ic=new Uint16Array(32768);this.vk=l}var wg=0;vg.prototype.xc=function(a,b,c){return 2==this.state?this.ic[(a&15)+16*(c&15)+256*(b&127)]:0};vg.prototype.ac=function(a,b,c,d){b=(a&15)+16*(c&15)+256*(b&127);a=this.ic[b];this.ic[b]=d;a!=d&&!this.Kg&&(d=this.Kg,this.Kg=i,d||this.map.$m(this));return a};
vg.prototype.Mj=function(a){var b=xg[0];tg(this.Nb,a,b);var c=Math.floor(b[0]),d=Math.floor(b[1]),e=Math.floor(b[2]),f=0==a[3]?0:0>a[3]?-1:1,h=0==a[4]?0:0>a[4]?-1:1,j=0==a[5]?0:0>a[5]?-1:1,k=(c+(0<f?1:0)-b[0])/a[3],n=(d+(0<h?1:0)-b[1])/a[4],q=(e+(0<j?1:0)-b[2])/a[5];isNaN(k)&&(k=Number.POSITIVE_INFINITY);isNaN(n)&&(n=Number.POSITIVE_INFINITY);isNaN(q)&&(q=Number.POSITIVE_INFINITY);var r=f/a[3],v=h/a[4],s=j/a[5];isNaN(r)&&(r=Number.POSITIVE_INFINITY);isNaN(v)&&(v=Number.POSITIVE_INFINITY);isNaN(s)&&
(s=Number.POSITIVE_INFINITY);for(var y=this.ic,w=b=0;256>w;w++){var E=c-this.x,I=d-this.y,P=e-this.L;if(0<=E&&(16>E&&0<=I&&128>I&&0<=P&&16>P)&&(b=y[E+16*P+256*I],b>>8))break;k<n&&k<q?(k+=r,c+=f):n<q?(n+=v,d+=h):(q+=s,e+=j)}return b?(f=yg,h=c+1,j=d+1,k=e+1,S(f.min,c,d,e),S(f.max,h,j,k),f=R(),tg(yg,a,f),new qg(this,c,d,e,b,Math.sqrt(Qe(a,f)),f)):l};var xg=[R(),R()],yg=new rg;function zg(){G.call(this);this.pm=m;this.ai=i;this.ag=[];this.Ad=[];this.Wf=[];this.hd=[];this.ya=0}C(zg,G);zg.prototype.pause=function(){this.pm=i};zg.prototype.kb=p("ya");function Ag(a,b,c){if(b.Hb)switch(b.If){case 0:D(a.ag,b);break;case 1:D(a.Ad,b);break;case 2:D(a.Wf,b);break;default:D(a.hd,b)}else b.Hb=i,a.ya++;b.If=c;switch(c){case 0:a.ag.push(b);break;case 1:a.Ad.push(b);a.ai=i;break;case 2:a.Wf.push(b);break;default:a.hd.push(b),a.ai=i}}
zg.prototype.cancel=function(a){if(a.Hb){switch(a.If){case 0:D(this.ag,a);break;case 1:D(this.Ad,a);break;case 2:D(this.Wf,a);break;default:D(this.hd,a)}this.ya--}};function Bg(a,b){return(a.Kj?0:1E3)+a.kj-((b.Kj?0:1E3)+b.kj)}
zg.prototype.update=function(a,b){if(this.pm||!this.ya)return 0;var c=20,d=ec(),e=a.Sd,f=0,h=this.ag;if(h.length){for(var j=0;j<h.length;j++)f+=Cg(h[j]),h[j].Hb=m;this.ya-=h.length;c-=h.length;h.length=0}if(0>=c)return f;if(this.ai||!(e%32))this.Ad.length&&Dg(a,b,this.Ad),this.hd.length&&Dg(a,b,this.hd),this.ai=m;for(;c&&this.Ad.length;){if(6<ec()-d)return f;e=this.Ad.shift();f+=Cg(e);e.Hb=m;this.ya--;c--}for(;c&&this.Wf.length;){if(6<ec()-d)return f;e=this.Wf.shift();f+=Cg(e);e.Hb=m;this.ya--;c--}for(;c&&
this.hd.length&&!(6<ec()-d);)e=this.hd.shift(),f+=Cg(e),e.Hb=m,this.ya--,c--;return f};function Dg(a,b,c){a=a.Sd;for(var d=0;d<c.length;d++){var e=c[d];e.kj=Math.sqrt(Qe(b.position,e.yg));e.Kj=e.Tl==a}Ma(c,Bg)};function Eg(){G.call(this);this.Qa={};this.Ja=this.i=0}C(Eg,G);t=Eg.prototype;t.kb=p("i");t.yc=p("Ja");t.add=function(a){this.i++;this.Qa[a.id]=a;this.Ja+=a.$c};t.remove=function(a){this.i--;delete this.Qa[a.id];this.Ja-=a.$c};t.forEach=function(a,b){for(var c in this.Qa)a.call(b||u,this.Qa[c])};function Fg(a,b){var c=he(0,0,0,0);this.p=a;this.Xm=b||l;this.Cq=l;this.color=c||Q()};function Gg(a){Lf.call(this,a,32);this.ad=new Float32Array(this.ob);this.ve=new Uint32Array(this.ob);this.restore()}C(Gg,Lf);Gg.prototype.bj=function(){this.ad=new Float32Array(this.ob);this.ve=new Uint32Array(this.ob)};function Hg(a,b,c,d,e,f,h){var j=Nf(a);if(65535!=j){var k=a.ad,n=a.ve;a=j*a.qe/4;k[a+0]=b;k[a+1]=c;k[a+2]=d;n[a+3]=4294967295;k[a+4]=e;k[a+5]=f;k[a+6]=h;n[a+7]=4294967295}}
Gg.prototype.pc=function(a,b,c){var d=this.g.f;a=a.ph;if(this.ec){var e=Ig;We(b.Rc,c,e);d.uniformMatrix4fv(a.la,m,e);Mf(this);d.vertexAttribPointer(a.ma,3,5126,m,16,0);d.vertexAttribPointer(a.Tc,4,5121,i,16,12);d.drawArrays(1,0,2*this.ec)}};var Ig=Te();function Jg(a,b,c,d){O.call(this,b.g);this.id=Kg++;this.Yf=a;this.Yb=b;this.N=c;this.Ee=d;a=c.x;var e=c.y+d,f=c.L,h=Te();Ve(h,1,1,1,0,a,e,f,1);this.Tm=h;this.yg=Le(c.x+8,c.y+d+8,c.L+8);this.Nb=new rg;this.Jd=he(this.yg[0],this.yg[1],this.yg[2],16);this.rg=b.dl;this.el=c.map.Aa;this.fj=i;this.Xe=l;this.$c=this.Ug=0;this.Kj=m;this.Tl=0;this.kj=Number.MAX_VALUE;this.Hb=m;this.If=3;this.cj=m;this.Pb=l}C(Jg,O);Jg.prototype.b=function(){this.sd(m);Jg.a.b.call(this)};var Kg=0;t=Jg.prototype;
t.u=function(){this.g.f.deleteBuffer(this.Xe);this.Xe=l;this.$c=this.Ug=0;this.Pb&&(K(this.Pb),this.Pb=l);Jg.a.u.call(this)};t.restore=function(){Jg.a.restore.call(this);this.cj&&(this.sd(m),this.sd(i));Lg(this.Yf,this.N.x,this.N.y+this.Ee,this.N.L,3)};t.Nj=function(){this.fj=i};
function Cg(a){a.fj=m;for(var b=a.el,c=a.Yb.La,d=a.N.ic,e=Mg,f=Ng,h=a.Ee,j=a.Ee+16-1,k=h;k<=j;k++)for(var n=1;15>n;n++)for(var q=1;15>q;q++){var r=q+16*n+256*k,v=d[r];if(v>>8){f[0]=d[r+16]>>8;f[1]=d[r-16]>>8;f[2]=127<=k?0:d[r+256]>>8;f[3]=(0>=k?v:d[r-256])>>8;f[4]=d[r+1]>>8;f[5]=d[r-1]>>8;for(var r=b.da[v>>8],s=0;6>s;s++)if(!f[s]||f[s]!=v>>8&&b.da[f[s]].th.p&64)pe(c,r.Dj(q,k,n,s,v>>16&255,v&65535),e),ef(a.rg,s,q,k-a.Ee,n,e)}}b=Array(4);b[0]=a.Yf.view.Ea(a.N.x-16,a.N.y,a.N.L);b[1]=a.Yf.view.Ea(a.N.x+
16,a.N.y,a.N.L);b[2]=a.Yf.view.Ea(a.N.x,a.N.y,a.N.L-16);b[3]=a.Yf.view.Ea(a.N.x,a.N.y,a.N.L+16);for(n=q=0;15>n;n++)Og(a,q,h,j,n,b);n=15;for(q=0;15>q;q++)Og(a,q,h,j,n,b);q=15;for(n=1;16>n;n++)Og(a,q,h,j,n,b);n=0;for(q=1;16>q;q++)Og(a,q,h,j,n,b);h=a.rg.finish(a.Xe);a.Xe=h.buffer;a.Ug=h.Se;j=a.$c;a.$c=h.ol;return a.$c-j}
function Og(a,b,c,d,e,f){for(var h=a.el,j=a.Yb.La,k=a.N.ic,n=Mg,q=Ng,r=a.N.x,v=a.N.L;c<=d;c++){var s=b+16*e+256*c,y=k[s];if(y>>8){q[0]=15==e?f[3]?f[3].xc(r+b,c,v+e+1)>>8:0:k[s+16]>>8;q[1]=e?k[s-16]>>8:f[2]?f[2].xc(r+b,c,v+e-1)>>8:0;q[2]=127<=c?0:k[s+256]>>8;q[3]=(0>=c?y:k[s-256])>>8;q[4]=15==b?f[1]?f[1].xc(r+b+1,c,v+e)>>8:0:k[s+1]>>8;q[5]=b?k[s-1]>>8:f[0]?f[0].xc(r+b-1,c,v+e)>>8:0;for(var s=h.da[y>>8],w=0;6>w;w++)if(!q[w]||q[w]!=y>>8&&h.da[q[w]].th.p&64)pe(j,s.Dj(b,c,e,w,y>>16&255,y&65535),n),ef(a.rg,
w,b,c-a.Ee,e,n)}}}
t.sd=function(a){if(this.cj!=a)if(this.cj=a){a=this.Pb=new Gg(this.g);var b=Le(0,0,0),c=Le(16,16,16);Hg(a,b[0],b[1],b[2],c[0],b[1],b[2]);Hg(a,b[0],b[1],b[2],b[0],c[1],b[2]);Hg(a,b[0],b[1],b[2],b[0],b[1],c[2]);Hg(a,c[0],b[1],c[2],b[0],b[1],c[2]);Hg(a,c[0],b[1],c[2],c[0],b[1],b[2]);Hg(a,c[0],b[1],c[2],c[0],c[1],c[2]);Hg(a,c[0],b[1],b[2],c[0],c[1],b[2]);Hg(a,b[0],b[1],c[2],b[0],c[1],c[2]);Hg(a,b[0],c[1],b[2],c[0],c[1],b[2]);Hg(a,b[0],c[1],b[2],b[0],c[1],c[2]);Hg(a,c[0],c[1],c[2],c[0],c[1],b[2]);Hg(a,
c[0],c[1],c[2],b[0],c[1],c[2])}else K(this.Pb),this.Pb=l};t.B=function(a,b){this.Ug&&this.rg.pc(b,this.Tm,this.Xe,this.Ug)};var Mg=Q(),Ng=new Uint16Array(6);function Pg(a,b,c){G.call(this);this.g=a.g;this.Yb=a;this.map=b;this.view=c;this.Oe=m;this.Hc=new Eg;H(this,this.Hc);this.Ob=new zg;H(this,this.Ob);this.eh=[];this.Sj=this.Yl=0;this.Xl=l;this.Rp=Array(512);this.xi=Array(1024);this.tf=0;this.Rm=Array(1024);this.Ul=this.Tj=0;this.view.wa.push(this)}C(Pg,G);t=Pg.prototype;t.b=function(){D(this.view.wa,this);Pg.a.b.call(this)};t.sd=function(a){this.Oe!=a&&(this.Oe=a,this.Hc.forEach(function(b){b.sd(a)}))};
t.Fj=function(){var a;a="Render: "+(this.Hc.kb()+" cached (");a+=Math.floor(this.Hc.yc()/1E3)+"K), ";a+=this.Sj+" visible, ";return a+=this.Ob.kb()+" req"};function Qg(a,b){var c=a.vk;!c&&!b&&(c={Ic:Array(8)},a.vk=c);return c}function Rg(a,b){if(2==b.state)for(var c=Qg(b),d=0;d<c.Ic.length;d++){var e=c.Ic[d];e||(e=new Jg(a,a.Yb,b,16*d),e.sd(a.Oe),c.Ic[d]=e,a.Hc.add(e),Ag(a.Ob,e,3))}}
function Sg(a,b,c,d,e,f,h,j){b--;c--;d--;e++;f++;h++;d>>=4;e>>=4;h>>=4;c>>=4;f>>=4;for(b>>=4;b<=e;b++)for(var k=d;k<=h;k++)for(var n=c;n<=f;n++)Lg(a,b<<4,n<<4,k<<4,j)}function Lg(a,b,c,d,e){if(b=a.view.Ea(b,c,d)){d=Qg(b);c>>=4;var f=d.Ic[c];f||(f=new Jg(a,a.Yb,b,16*c),f.sd(a.Oe),d.Ic[c]=f,a.Hc.add(f),Ag(a.Ob,f,e));if(!f.fj||f.If!=e)f.Nj(),Ag(a.Ob,f,e)}}
t.B=function(a,b){var c=this.Yb,d=this.map;this.Xl=b;this.Tj=this.tf=this.Sj=this.Yl=0;this.Ul=a.Sd;this.view.wj(b,this.xo,this);var e=this.Ob.update(a,b),f=this.Hc;f.Ja+=e;if(!this.Ob.kb()&&this.eh.length){for(e=0;e<this.eh.length;e++)this.eh[e].w(l);this.eh.length=0}e=b.Vg-16;c.vf.update(d.Zc.Uc,d.Zc.vd,d.Zc.ud,0.5*e,0.85*e,d.Zc.ta);if(this.Oe){4!=c.mode&&(c.mode=4,e=c.g,d=e.f,hf(e,Zf),kf(e,$f),mf(e,c.ph),e=c.vf,f=c.ph,e.Uj&&(e.Uj=m,d.uniform2f(f.rb,e.af,e.$e),d.uniform3f(f.qb,e.ta[0],e.ta[1],e.ta[2])),
d.enableVertexAttribArray(0),d.enableVertexAttribArray(1),d.disableVertexAttribArray(2));for(e=0;e<this.tf;e++)d=this.xi[e],d.Pb&&d.Pb.pc(d.Yb,b,d.Tm)}if(this.tf){2!=c.mode&&(c.mode=2,d=c.g,e=d.f,hf(d,jf),kf(d,lf),mf(d,c.vc),dg(c.vf,e,c.vc),se(d,c.La),e.uniform2f(c.vc.qi,c.La.width,c.La.height),e.bindBuffer(34963,c.De),e.enableVertexAttribArray(0),e.enableVertexAttribArray(1),e.enableVertexAttribArray(2));for(e=0;e<this.tf;e++)d=this.xi[e],d.B(a,b),this.xi[e]=l}if(this.Tj){3!=c.mode&&(c.mode=3,d=
c.g,e=d.f,hf(d,Xf),kf(d,Yf),mf(d,c.vc),dg(c.vf,e,c.vc),se(d,c.La),e.uniform2f(c.vc.qi,c.La.width,c.La.height),e.bindBuffer(34963,c.De),e.enableVertexAttribArray(0),e.enableVertexAttribArray(1),e.enableVertexAttribArray(2));for(e=0;e<this.Tj;e++)d=this.Rm[e],d.B(a,b),this.Rm[e]=l}};
t.xo=function(a){this.Rp[this.Yl++]=a;a=Qg(a);for(var b=0;8>b;b++){var c=a.Ic[b],d;if(d=c){a:{d=c.Jd;for(var e=this.Xl.zj,f=0;f<e.length;f++){var h=e[f],h=h[0]*d[0]+h[1]*d[1]+h[2]*d[2]+h[3];if(h<-d[3]){d=-1;break a}if(Math.abs(h)<d[3]){d=0;break a}}d=1}d=-1!=d}if(d&&(c.Hb||0<c.$c))c.Hb&&1<c.If&&Ag(this.Ob,c,1),c.Tl=this.Ul,this.Sj++,this.xi[this.tf++]=c}};function Tg(a,b){Rd.call(this,a,b,"../assets/audio/blocks","BlockSounds",[new fc("audio/wav","blocks_optimized.wav",776760),new fc("audio/ogg","blocks_optimized.ogg",69007),new fc("audio/mpeg","blocks_optimized.mp3",71052)],[new kc("block_grass",0,[new L(2081,328),new L(2509,368),new L(2977,318),new L(3395,373)]),new kc("block_gravel",0,[new L(3868,389),new L(4357,338),new L(4795,313),new L(5208,363)]),new kc("block_cloth",0,[new L(0,404),new L(504,409),new L(1013,378),new L(1491,490)]),new kc("block_stone",
0,[new L(5671,338),new L(6109,338),new L(6547,293),new L(6940,303)]),new kc("block_wood",0,[new L(7343,272),new L(7715,282),new L(8097,262),new L(8459,237)])])}C(Tg,Rd);function Ug(a,b){this.attributes=[new Vg(3,0),new Vg(2,24)];this.cn=a;this.xn=b}function Vg(a,b){this.size=a;this.type=5126;this.zf=m;this.Qf=32;this.offset=b};function Wg(){};function Xg(){this.name=l;this.index=0;this.parent=l;this.children=[];this.transform=Ue();this.Nb=new rg;this.Jd=Q()};function Yg(a){this.bk=a;a=a.sg;this.gn=new Float32Array(16*a.length);this.bq=new Float32Array(16*a.length);this.Kp=i;this.reset()}Yg.prototype.reset=function(){this.Kp=i;for(var a=this.bk.sg,b=0,c=0;b<a.length;b++,c+=16)for(var d=a[b],e=0;16>e;e++)this.gn[c+e]=d.transform[e]};function Zg(a){G.call(this);this.id=a;this.Nb=new rg;this.Jd=Q();this.Gn=l;this.om=[];this.sg=[];this.dq={}}C(Zg,G);Zg.prototype.Ak=da("Gn");Zg.prototype.Me=function(){return new Yg(this)};function $g(){this.th=new Wg;this.primitiveType=4;this.yn=this.Se=0};function ah(a,b,c){G.call(this);this.f=a.f;this.eg=b;this.al=Array(32);for(var d=this.nj=0;d<b.length;d++){var e=b[d];this.al[e.index]=e;this.nj|=1<<e.index}this.Og=c;this.hb=a.Tg.get(5);this.ub=l;this.hb&&(this.ub=this.hb.createVertexArrayOES(),this.hb.bindVertexArrayOES(this.ub),this.Cc(),this.hb.bindVertexArrayOES(l))}C(ah,G);t=ah.prototype;t.b=function(){this.hb&&(this.hb.deleteVertexArrayOES(this.ub),this.ub=l);this.hb=l;ah.a.b.call(this)};
t.jd=function(a){this!=a&&(this.hb?this.hb.bindVertexArrayOES(this.ub):a?this.kd(a):this.Cc())};t.reset=function(){this.hb&&this.hb.bindVertexArrayOES(l)};t.Cc=function(){var a=this.f;a.bindBuffer(34963,this.Og);for(var b=l,c=0;c<this.eg.length;c++){var d=this.eg[c];a.enableVertexAttribArray(d.index);b!=d.buffer&&(b=d.buffer,a.bindBuffer(34962,d.buffer));a.vertexAttribPointer(d.index,d.size,d.type,d.zf,d.Qf,d.offset)}};
t.kd=function(a){var b=this.f;this.Og!=a.Og&&b.bindBuffer(34963,this.Og);for(var c=l,d=0;d<this.eg.length;d++){var e=this.eg[d];a.nj&1<<e.index||b.enableVertexAttribArray(e.index);var f=a.al[e.index];f&&f.pl==e.pl||(c!=e.buffer&&(c=e.buffer,b.bindBuffer(34962,e.buffer)),b.vertexAttribPointer(e.index,e.size,e.type,e.zf,e.Qf,e.offset))}};
function bh(a,b,c,d,e,f,h){this.index=a;this.buffer=b;this.size=c;this.type=d;this.zf=e;this.Qf=f;this.offset=h;this.pl=[this.index,ma(this.buffer),this.size,this.type,this.zf,this.Qf,this.offset].join(":")};function ch(a,b,c){O.call(this,a);this.Zg=b;this.ub=this.Re=this.Ce=l;this.mq=c||l}C(ch,O);ch.prototype.u=function(){var a=this.g.f;K(this.ub);this.ub=l;a.deleteBuffer(this.Ce);this.Ce=l;a.deleteBuffer(this.Re);this.Re=l;ch.a.u.call(this)};
ch.prototype.restore=function(){ch.a.restore.call(this);var a=this.g.f;this.Ce=a.createBuffer();this.Re=a.createBuffer();a.bindBuffer(34962,this.Ce);a.bufferData(34962,this.Zg.cn,35044);a.bindBuffer(34963,this.Re);a.bufferData(34963,this.Zg.xn,35044);for(var a=[],b=0;b<this.Zg.attributes.length;b++){var c=this.Zg.attributes[b];a.push(new bh(b,this.Ce,c.size,c.type,c.zf,c.Qf,c.offset))}this.ub=new ah(this.g,a,this.Re)};ch.prototype.bind=function(){this.ub&&nf(this.g,this.ub)};function dh(a){Yg.call(this,a);this.$=a.$;this.Vd=a.Vd}C(dh,Yg);dh.prototype.B=function(){var a=this.$.f;this.Vd.bind();for(var b=this.bk.om,c=0;c<b.length;c++){var d=b[c];a.drawElements(d.primitiveType,d.Se,5123,d.yn)}};function eh(a,b){Zg.call(this,a);this.$=b;this.Vd=l}C(eh,Zg);eh.prototype.Ak=function(a){eh.a.Ak.call(this,a);this.Vd=new ch(this.$,a,this.id);H(this,this.Vd);this.Vd.restore()};eh.prototype.Me=function(){return new dh(this)};function fh(a,b){var c=new eh("pumpkin",b),d=c.Nb,e=[-0.5,-1,0,0.5,1,0.5],f=d.min,d=d.max;if(e.length){var h=0;S(f,e[h],e[h+1],e[h+2]);S(d,e[h],e[h+1],e[h+2]);h++;for(var j=1;j<e.length/3;j++,h++)e[h]<f[0]?f[0]=e[h]:e[h]>d[0]&&(d[0]=e[h]),e[h+1]<f[1]?f[1]=e[h+1]:e[h+1]>d[1]&&(d[1]=e[h+1]),e[h+2]<f[2]?f[2]=e[h+2]:e[h+2]>d[2]&&(d[2]=e[h+2])}else S(f,0,0,0),S(d,0,0,0);ie(c.Jd,0,0,0,1);e=he(96,112,112,128);f=he(112,112,128,128);d=he(96,96,112,112);ke(e,e);ke(f,f);ke(d,d);e=new Float32Array([-0.5,-1,0.5,
0,0,1,e[2],e[3],0.5,-1,0.5,0,0,1,e[0],e[3],0.5,1,0.5,0,0,1,e[0],e[1],-0.5,1,0.5,0,0,1,e[2],e[1],-0.5,-1,-0.5,0,0,-1,f[0],f[3],-0.5,1,-0.5,0,0,-1,f[0],f[1],0.5,1,-0.5,0,0,-1,f[2],f[1],0.5,-1,-0.5,0,0,-1,f[2],f[3],-0.5,1,-0.5,0,1,0,d[2],d[1],-0.5,1,0.5,0,1,0,d[2],d[3],0.5,1,0.5,0,1,0,d[0],d[3],0.5,1,-0.5,0,1,0,d[0],d[1],-0.5,-1,-0.5,0,-1,0,e[0],e[1],0.5,-1,-0.5,0,-1,0,e[2],e[1],0.5,-1,0.5,0,-1,0,e[2],e[3],-0.5,-1,0.5,0,-1,0,e[0],e[3],0.5,-1,-0.5,1,0,0,e[0],e[3],0.5,1,-0.5,1,0,0,e[0],e[1],0.5,1,0.5,
1,0,0,e[2],e[1],0.5,-1,0.5,1,0,0,e[2],e[3],-0.5,-1,-0.5,-1,0,0,e[2],e[3],-0.5,-1,0.5,-1,0,0,e[0],e[3],-0.5,1,0.5,-1,0,0,e[0],e[1],-0.5,1,-0.5,-1,0,0,e[2],e[1]]);f=new Uint16Array(36);for(j=h=d=0;6>d;d++,h+=6,j+=4)f[h+0]=0+j,f[h+1]=1+j,f[h+2]=2+j,f[h+3]=0+j,f[h+4]=2+j,f[h+5]=3+j;c.Ak(new Ug(e.buffer,f));e=new $g;c.om.push(e);e.primitiveType=4;e.Se=36;e=new Xg;e.index=c.sg.length;e.name=l;e.parent=l;c.sg.push(e);f=e.Nb;d=c.Nb;Me(f.min,d.min);Me(f.max,d.max);je(e.Jd,c.Jd);return c};function gh(){G.call(this);this.xf={}}C(gh,G);gh.prototype.b=function(){for(var a in this.xf)K(this.xf[a]);this.xf={};gh.a.b.call(this)};gh.prototype.update=ca();function hh(a,b){gh.call(this);this.$a=a;this.$=b;this.bm={}}C(hh,gh);function ih(a,b){hh.call(this,a,b);this.bm.pumpkin={id:"pumpkin",wn:fh}}C(ih,hh);function jh(){this.da=Array(256)}function kh(a,b){a.da[b.id]=b};function lh(){G.call(this);this.yb={};this.Nc=[];this.Ja=this.ya=0}C(lh,G);t=lh.prototype;t.b=function(){this.Nc.length=0;lh.a.b.call(this)};t.update=function(){for(;this.Nc.length;){var a=this.Nc.shift();mh(this,a)}};t.yc=p("Ja");t.get=function(a,b,c){return 0!=b>>7?l:this.yb[(a>>4&65535)<<16|c>>4&65535]||l};t.add=function(a){this.yb[(a.x>>4&65535)<<16|a.L>>4&65535]=a;0<a.je||this.Nc.push(a);this.ya++;this.Ja+=65792};t.remove=function(a){mh(this,a);0<a.je||D(this.Nc,a)};
function mh(a,b){delete a.yb[(b.x>>4&65535)<<16|b.L>>4&65535];a.Ja-=65792;a.ya--}t.Yj=function(a){this.Nc.push(a)};t.Zj=function(a){D(this.Nc,a)};function nh(){G.call(this);this.Dm=Le(0,191/255,1);this.Uc=Le(110/255,110/255,110/255);this.vd=Le(1,1,-0.5);this.ud=Le(130/255,130/255,130/255);this.ta=Le(1,1,1);Me(this.ta,this.Dm)}C(nh,G);nh.prototype.update=ca();function oh(a,b,c,d,e){this.id=a;this.name=b;this.th=c;this.p=d;this.Dq=0;this.oq=1;this.Eq=0;this.$k=e}oh.prototype.Dj=p("$k");function ph(a,b,c,d,e){oh.call(this,a,b,c,d,e)}C(ph,oh);var qh=new Fg(17,"block_gravel"),rh=new Fg(17,"block_stone"),sh=new Fg(17,"block_wood"),th=new Fg(97,"block_stone"),uh=new Fg(17,"block_cloth");function vh(){oh.call(this,6,"Red Cloth",uh,17,129)}C(vh,ph);function wh(){oh.call(this,7,"Green Cloth",uh,17,145)}C(wh,ph);function xh(){oh.call(this,8,"Yellow Cloth",uh,17,162)}C(xh,ph);function yh(){oh.call(this,9,"Blue Cloth",uh,17,177)}C(yh,ph);function zh(){oh.call(this,3,"Brick",rh,17,7)}C(zh,ph);function Ah(){oh.call(this,1,"Dirt",qh,17,2)}C(Ah,ph);Ah.prototype.Dj=function(a,b,c,d,e,f){if(f&1)switch(d){case 0:case 1:case 4:case 5:return 3;case 2:return 0;default:case 3:return 2}else return 2};function Bh(){oh.call(this,5,"Glass",th,17,49)}C(Bh,ph);function Ch(){oh.call(this,2,"Stone",rh,17,1)}C(Ch,ph);function Dh(){oh.call(this,4,"Wood",sh,17,4)}C(Dh,ph);function Eh(){G.call(this);this.Aa=new jh;kh(this.Aa,new Ah);kh(this.Aa,new Ch);kh(this.Aa,new zh);kh(this.Aa,new Dh);kh(this.Aa,new Bh);kh(this.Aa,new vh);kh(this.Aa,new wh);kh(this.Aa,new xh);kh(this.Aa,new yh);this.Zc=new nh;H(this,this.Zc);this.Ed=[];this.Oa=new lh;H(this,this.Oa)}C(Eh,G);t=Eh.prototype;t.b=function(){Eh.a.b.call(this)};t.Fj=function(){var a;a="Chunks: "+(this.Oa.ya+" cached (");a+=Math.floor(this.Oa.yc()/1E3)+"K), ";return a+=this.Oa.ya-this.Oa.Nc.length+" used"};
t.update=function(a){this.Zc.update(a);this.Oa.update(a)};t.Ea=function(a,b,c){var d=this.Oa.get(a,b,c);if(d)return d;d=new vg(this,a&-16,b&-128,c&-16);this.Oa.add(d);this.wm(d);return d};t.gk=function(a){for(var b=0;b<this.Ed.length;b++){var c=this.Ed[b],d=c.jc,e=a.Nb,f=d.min,d=d.max,h=e.min,e=e.max;-1!=(d[0]<h[0]||f[0]>e[0]||d[1]<h[1]||f[1]>e[1]||d[2]<h[2]||f[2]>e[2]?-1:f[0]>h[0]||e[0]>d[0]||f[1]>h[1]||e[1]>d[1]||f[2]>h[2]||e[2]>d[2]?0:1)&&c.gk(a)}};t.$m=z;t.Yj=function(a){this.Oa.Yj(a)};t.Zj=function(a){this.Oa.Zj(a)};
t.wm=z;t.xc=function(a,b,c){var d=this.Oa.get(a,b,c);return d?d.xc(a,b,c):0};t.ac=function(a,b,c,d){var e=this.Oa.get(a,b,c);if(e){if(2!=e.state)return M("setBlock before chunk fully loaded - inconsistent state!"),0}else return 0;e=e.ac(a,b,c,d);if(e!=d)for(d=0;d<this.Ed.length;d++)for(var f=this.Ed[d],h=a,j=b,k=c,n=0;n<f.wa.length;n++)Sg(f.wa[n],h,j,k,h,j,k,0);return e};function Fh(){Eh.call(this)}C(Fh,Eh);Fh.prototype.wm=ca();function Gh(){this.buffer=new Uint8Array(0);this.offset=0;this.sa=new Float32Array(16);this.Da=new Uint8Array(this.sa.buffer);this.Dn=(this.Ze=u.Float64Array?new Float64Array(1):l)?new Uint8Array(this.Ze.buffer):l}t=Gh.prototype;t.Ri=function(a,b){this.buffer=a instanceof Uint8Array?a:new Uint8Array(a);this.offset=b};function Hh(a){var b=a.buffer[a.offset++];a=a.buffer[a.offset++];b=b<<8|a;return 32767<b?b-65536:b}
function Ih(a){var b=a.buffer[a.offset++],c=a.buffer[a.offset++],d=a.buffer[a.offset++];a=a.buffer[a.offset++];b=b<<24|c<<16|d<<8|a;return 2147483647<b?b-4294967296:b}function Jh(a){return a.buffer[a.offset++]}function Kh(a){var b=a.buffer[a.offset++];a=a.buffer[a.offset++];return b<<8|a}t.aa=function(){var a=this.buffer[this.offset++],b=this.buffer[this.offset++],c=this.buffer[this.offset++],d=this.buffer[this.offset++];return a<<24|b<<16|c<<8|d};
t.H=function(){for(var a=0,b=0,c;(c=this.buffer[this.offset++]&255)&128;)a|=(c&127)<<b,b+=7;return a|c<<b};t.Ih=function(){var a=this.H();return(a<<31>>31^a)>>1^a&-2147483648};t.tm=function(){this.Da[0]=this.buffer[this.offset++];this.Da[1]=this.buffer[this.offset++];this.Da[2]=this.buffer[this.offset++];this.Da[3]=this.buffer[this.offset++];return this.sa[0]};t.dp=function(){for(var a=0;12>a;a++)this.Da[a]=this.buffer[this.offset++];return this.sa};
t.ep=function(){for(var a=0;16>a;a++)this.Da[a]=this.buffer[this.offset++];return this.sa};t.s=function(){var a=Kh(this);Kh(this);for(var b=Array(a),c=0;c<a;){var d=this.buffer[this.offset++];if(128>d)b[c++]=String.fromCharCode(d);else if(191<d&&224>d){var e=this.buffer[this.offset++];b[c++]=String.fromCharCode((d&31)<<6|e&63)}else{var e=this.buffer[this.offset++],f=this.buffer[this.offset++];b[c++]=String.fromCharCode((d&15)<<12|(e&63)<<6|f&63)}}return b.join("")};var Lh=l;
function Mh(){Lh||(Lh=new Gh);return Lh};function Nh(){this.jq=1}var Oh=l;function Ph(a){this.factory=a;this.se=this.Tf=0}t=Ph.prototype;t.getTime=p("Tf");t.setTime=function(a){this.Tf=(1E3*a|0)/1E3};t.read=function(a){var b=this.factory.p;b&2&&(this.Tf=a.H()/1E3);b&4||(this.se=a.H())};t.write=function(a){var b=this.factory.p;b&2&&a.hc(1E3*this.Tf|0);b&4||a.hc(this.se)};t.ke=function(){this.factory.ke(this)};function Qh(a){Ph.call(this,a);this.yk=this.li=0;this.bh=m}C(Qh,Ph);Qh.prototype.read=function(a){Qh.a.read.call(this,a);this.li=a.H()/1E3;this.bh=m};
Qh.prototype.write=function(a){Qh.a.write.call(this,a);a.hc(1E3*this.li|0)};function Rh(a){Ph.call(this,a);this.yh=0}C(Rh,Ph);Rh.prototype.read=function(a){Rh.a.read.call(this,a);this.yh=a.H()};Rh.prototype.write=function(a){Rh.a.write.call(this,a);a.hc(this.yh)};function Sh(a,b,c,d){G.call(this);this.ja=a;this.factory=b;this.nm=l;this.Qd=c;this.Pd=d;this.ia=l;this.M=[];this.qa=0;this.Ib=Th(b,this);this.ab=d&(Uh|Vh)?Th(b,this):l;this.V=[]}C(Sh,G);t=Sh.prototype;t.b=function(){var a=this.getParent();a&&(D(a.M,this),a.Ld(this));this.factory.td.push(this.Ib);this.ab&&this.factory.td.push(this.ab);for(a=0;a<this.V.length;a++)this.factory.td.push(this.V[a]);Sh.a.b.call(this)};t.Bb=p("ja");t.getParent=p("ia");
function Wh(a,b){if(a.ia!=b){var c=a.ia;a.ia=b;a.jk(c,b);c&&(D(c.M,a),c.Ld(a));b&&b.Ji(a)}}t.Ji=function(a){this.M.push(a);this.zg(a)};t.jk=z;t.zg=z;t.Ld=z;t.Ej=ea(l);function T(a){return a.ab||a.Ib}t.read=function(a){this.Ib.read(a)};t.tk=function(a){this.Ib.tk(a)};t.write=function(a){this.Ib.write(a)};function Xh(a,b){if(a.Pd&Uh){1==a.V.length&&(a.V[0].time=b);var c=Th(a.factory,a);c.time=b;a.Ib.Zi(c);a.V.push(c)}}
t.hh=function(a){var b=this.Pd;if(this.ab){this.Ib.Dg(this.ab);if(b&Uh){var c=this.ab;if(this.V.length&&!(this.V[0].time>a)){for(var d=l,e=1;e<this.V.length&&!(d=this.V[e],d.time>=a);e++);if(e>=this.V.length){d=this.V[this.V.length-1];c.hh(d,d,0);for(c=0;c<this.V.length-1;c++)this.factory.td.push(this.V[c]);this.V.splice(0,this.V.length-1)}else{var f=this.V[e-1];a=(a-f.time)/(d.time-f.time);a=Math.min(Math.max(a,0),1);c.hh(f,d,a);d=1<=a?e:e-1;if(0<d){for(c=0;c<d;c++)this.factory.td.push(this.V[c]);
this.V.splice(0,d)}}}}b&Vh&&this.Ib.$i(this.ab)}};t.Eg=function(a){a=Yh(this.ja.mc[a]||l);a.se=this.Qd;return a};t.gb=function(a){a instanceof Rh&&(0==a.yh?Wh(this,l):Wh(this,this.ja.I[a.yh]||l))};function Zh(a,b,c){a.ij||$h(a.ja.Rh,b,c===g?0:c,a.update,a)}t.ld=function(){this.ab&&this.Ib.Dg(this.ab)};t.Zo=z;t.Nj=function(){var a=!!this.qa;this.qa|=ai;a||(a=this.ja,a.eb[a.cb++]=this)};t.me=function(){this.qa=0;this.Ib.me();this.ab&&this.ab.me()};var Vh=4,Uh=8,ai=2;function bi(a){G.call(this);this.kp=a}C(bi,G);function ci(a){G.call(this);this.lp=a;this.xk=[[],[],[],[],[]];this.Km=[]}C(ci,G);function $h(a,b,c,d,e){var f=a.Km.pop()||new di;f.ap=b;f.wk=a.lp.U.ib;f.hi=-1==c?0:0==c?f.wk+0.0010:c;f.w=d;f.Xi=e||u;a=a.xk[b];b=0;for(c=a.length;b<c;)d=b+c>>1,0<f.hi-a[d].hi?b=d+1:c=d;a.splice(b,0,f)}var ei=Number.MAX_VALUE;
ci.prototype.update=function(a){a=a.time;for(var b=ec(),c=this.xk.length-1;0<=c;c--){for(var d=this.xk[c];d.length;){var e=d[0];if(e.hi>a)break;d.shift();var f=a-e.wk,h=e.w,j=e.Xi;e.w=e.Xi=l;this.Km.push(e);h.call(j,a,f)}if(ec()-b>=ei)break}};function di(){this.ap=fi;this.hi=this.wk=0;this.Xi=this.w=l}var fi=0;function gi(){this.sf=this.vh=this.Eb=this.lm=this.Nl=this.Cf=this.wh=this.nf=this.gh=this.Ue=this.Rg=this.Ve=this.Sg=this.Te=this.Qg=0}gi.prototype.update=function(a){this.Eb+=this.Te;this.Eb+=this.Ve;this.Eb+=this.Ue;this.Eb+=this.nf;this.vh+=this.Cf;1<=a-this.sf&&(this.sf=a,this.Nl=this.Eb,this.lm=this.vh,this.vh=this.Eb=0);this.wh=this.Cf=this.gh=this.nf=this.Rg=this.Ue=this.Sg=this.Ve=this.Qg=this.Te=0};function hi(a,b){for(var c=String(a);c.length<b;)c=" "+c;return c}
gi.prototype.$g=function(){return["i/s:",hi(Math.round(this.Nl),4)," o/s:",hi(Math.round(this.lm),4)," ec:",hi(this.Qg,2),"/",hi(this.Te,4)," eu:",hi(this.Sg,2),"/",hi(this.Ve,4)," ed:",hi(this.Rg,2),"/",hi(this.Ue,4)," ic:",hi(this.gh,2),"/",hi(this.nf,4)," oc:",hi(this.wh,2),"/",hi(this.Cf,4)].join("")};function ii(a,b,c){this.Lc=a;this.rn=b;this.p=c;this.Tk=[]}function Yh(a){return a.Tk.length?(a=a.Tk.pop(),a.se=0,a):new a.rn(a)}ii.prototype.ke=function(a){this.Tk.push(a)};function ji(a,b){bi.call(this,a);this.t=new gi;this.Rh=new ci(a);H(this,this.Rh);this.Zf=[];this.mc={};this.pj={};this.fk=b;this.I={};this.Mf=l;this.eb=Array(256);this.cb=0;var c=new ii(0,Rh,0);this.mc[c.Lc]=c}C(ji,bi);function ki(a,b){a.pj[b.Lc]=b}function li(a){var b=a.fk;a.fk+=2;return b}t=ji.prototype;t.aj=function(a,b){var c=this.pj[a].aj(this,li(this),b);this.Fd(c);return c};t.Fd=function(a){this.I[a.Qd]=a;var b=!!a.qa;a.qa|=1;b||(this.eb[this.cb++]=a);a.Pd&128&&(this.Mf=a)};
t.od=function(a,b){if(!(a.qa&4)){switch(b||mi){default:case mi:for(var c=a.M.length-1;0<=c;c--){var d=a.M[c];a.Ld(d);a.ja.od(d)}if(d=a.Ej())for(c=0;c<d.length;c++)a.ja.od(d[c]);break;case ni:for(c=0;c<a.M.length;c++)Wh(a.M[c],l);if(d=a.Ej())for(c=0;c<d.length;c++)Wh(d[c],l);case oi:}delete this.I[a.Qd];c=!!a.qa;a.qa|=4;c||(this.eb[this.cb++]=a);K(a)}};t.Eg=function(a){a=Yh(this.mc[a]||l);a.se=0;return a};
function pi(a,b,c){for(var d=0;d<c;d++){var e=b[d],f=e.se;0==f?a.gb(e):(f=a.I[f]||l)&&f.gb(e);e instanceof Qh&&(e.bh=i)}}t.gb=z;t.$o=z;var mi=0,ni=1,oi=2;function qi(){this.Mi=[];this.i=0}qi.prototype.compact=ca();qi.prototype.kb=p("i");qi.prototype.ze=function(a){this.Mi[this.i++]=a};function ri(){this.em=1;this.Rk=[];this.yd=0;this.hk=[];this.he=0;this.mm=[];this.ik=0}ri.prototype.compact=ca();ri.prototype.ze=function(a){this.hk[this.he++]=a;a instanceof Qh&&(a.yk=this.em++,a.bh=m,this.mm[this.ik++]=a)};
ri.prototype.write=function(a){a.hc(this.em-1);var b=this.he;a.hc(this.he);for(var c=0;c<this.he;c++){var d=this.hk[c];this.hk[c]=l;a.hc(d.factory.Lc);d.write(a);d instanceof Qh?this.Rk[this.yd++]=d:d.factory.ke(d)}this.ik=this.he=0;1500<this.yd&&M("massive backup of commands, dying");return b};function si(a,b){ji.call(this,a,1);this.Wh=b;b.Sa.W(30,this.so,this);this.ih=[];this.mf=new qi;this.Dc=new ri;this.Wl=0}C(si,ji);t=si.prototype;t.b=function(){si.a.b.call(this)};t.dd=function(a){return this.Wh.Kb[a]||l};t.Fd=function(a){si.a.Fd.call(this,a);a.Pd&(Vh|Uh)&&this.ih.push(a)};t.od=function(a,b){si.a.od.call(this,a,b);a.Pd&(Vh|Uh)&&D(this.ih,a)};
t.update=function(a){var b=ti(this.kp.U);ui(this,b-0.5);pi(this,this.mf.Mi,this.mf.kb());for(var b=this.mf,c=0;c<b.i;c++){var d=b.Mi[c];d.factory.ke(d)}b.i=0;this.Rh.update(a);for(b=0;b<this.cb;b++)c=this.eb[b],c.Zo(a),this.$o(a,c);this.Dc.he&&0.05<=a.time-this.Wl&&(this.Wl=a.time,b=jg(),gg(b,31),c=this.Dc.write(b),this.t.wh+=c,this.t.Cf+=b.offset,this.Wh.send(b.finish()));for(b=0;b<this.cb;b++)c=this.eb[b],this.eb[b]=l,c.me();this.cb=0;15>a.time-this.Io||(this.Io=a.time,this.mf.compact(),this.Dc.compact())};
function ui(a,b){for(var c=0;c<a.ih.length;c++)a.ih[c].hh(b);c=a.Dc;pi(a,c.Rk,c.yd);pi(a,c.mm,c.ik)}
t.so=function(a,b,c){b=c.H()/1E3;var d=c.H(),e=c.H(),f=c.H(),h=c.H();a=c.H();this.t.Qg+=e;this.t.Sg+=f;this.t.Rg+=h;this.t.gh+=a;var j=this.Dc,k=j.Rk,n=j.yd;if(n)if(k[n-1].yk<=d){for(var q=0;q<n;q++){var r=k[q];r.factory.ke(r)}j.yd=0}else{for(var v=n,q=0;q<n;q++){r=k[q];if(r.yk>d){v=q;break}r.factory.ke(r)}k.splice(0,v);j.yd-=v}for(d=0;d<this.cb;d++)j=this.eb[d],this.eb[d]=l,j.me();this.cb=0;k=l;for(d=j=0;d<e;d++){var j=c.offset,q=c.H()<<1,s=c.H(),r=c.H(),v=c.H(),n=c.H(),s=this.pj[s]||l;if(!s)return m;
(v=v?this.Wh.ui[v]||l:l)&&(v!=vi(this.Wh)&&r&Vh)&&(r&=~Vh);q=s.aj(this,q,r);q.nm=v;q.read(c);this.t.Te+=c.offset-j;Xh(q,b);this.Fd(q);n&&(k||(k=[]),k.push([q,n]))}for(d=0;d<f;d++){j=c.offset;q=c.H()<<1;q=this.I[q]||l;if(!q)return m;q.tk(c);this.t.Ve+=c.offset-j;Xh(q,b)}for(d=0;d<h;d++){j=c.offset;q=c.H()<<1;this.t.Ue+=c.offset-j;q=this.I[q]||l;if(!q)return m;this.od(q,oi)}if(k)for(d=0;d<k.length;d++){q=k[d][0];b=this.I[k[d][1]]||l;if(!b)return m;Wh(q,b)}for(b=0;b<this.cb;b++)e=this.eb[b],e.ld();for(b=
0;b<this.cb;b++){e=this.eb[b];this.eb[b]=l;if(e.qa&1)for(f=0;f<this.Zf.length;f++)this.Zf[f].oj(e);if(e.qa&4)for(f=0;f<this.Zf.length;f++)this.Zf[f].qj(e);e.me()}for(d=this.cb=0;d<a;d++){j=c.offset;b=c.H();b=this.mc[b]||l;if(!b)return m;b=Yh(b);b.read(c);this.t.nf+=c.offset-j;this.mf.ze(b)}return i};function wi(a){switch(a){case 0:return"user closed the connection";case 1:return"socket killed or timed out";case 2:return"network protocol mismatch";case 3:return"unexpected data sent/received";case 4:return"access denied";case 5:return"kicked by console";case 6:return"banned";case 7:return"server full";default:return"unknown"}};function xi(){this.kn=this.jn=this.Jq=this.nq=this.tq=this.uq=this.bl=0}xi.prototype.q=function(){return new xi};xi.prototype.toString=ea("[stats]");var yi=function(){var a;return pb?(a=/Windows NT ([0-9.]+)/,(a=a.exec(qb()))?a[1]:"0"):ob?(a=/10[_.][0-9_.]+/,(a=a.exec(qb()))?a[0].replace(/_/g,"."):"10"):""}();function zi(){this.Uk="";this.type=Ai;this.platform=Bi;this.ie="";this.Nd=Ci}zi.prototype.q=function(){var a=new zi;a.Uk=this.Uk;a.type=this.type;a.platform=this.platform;a.ie=this.ie;a.Nd=this.Nd;return a};zi.prototype.toString=function(){return[this.type,this.platform+this.ie,this.Nd].join("/")};var Ai="unknown",Bi="other",Ci="desktop";function Di(){this.gg="none";this.fg="0";this.O="User"}Di.prototype.q=function(){var a=new Di;a.gg=this.gg;a.fg=this.fg;a.O=this.O;return a};Di.prototype.toString=ea("[user]");function Ei(a){a=va(ua(xa(a)));return!a.length?"User":a};function Fi(a,b,c,d,e){this.j=a||"";this.gc=b||0;this.p=c||0;this.info=d||new Di;this.cg=e||new zi;this.Od=0;this.t=new xi;this.data=this.Ia=l}Fi.prototype.toString=function(){return this.info.O+" ("+this.j+"/"+this.gc+")"};function Gi(a){return new Fi(a.j,a.gc,a.p,a.info.q(),a.cg.q())};function Hi(a){a=T(a.ja.Mf);a.Ai===g&&(a.Ai=a.$f?a.ca.Bb().I[a.$f]||l:l);return a.Ai};function Ii(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],h=2*c,j=2*d,k=2*e,n=h*f,q=j*f,f=k*f,h=h*c,r=j*c,c=k*c,j=j*d,d=k*d,e=k*e;b[0]=1-(j+e);b[1]=r+f;b[2]=c-q;b[3]=0;b[4]=r-f;b[5]=1-(h+e);b[6]=d+n;b[7]=0;b[8]=c+q;b[9]=d-n;b[10]=1-(h+j);b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1}
function Ji(a,b,c,d){var e=a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3];if(1<e||-1>e)return je(d,b),d;var f=1;0>e&&(f=-1,e=-e);var h=Math.acos(e);if(1E-6>=h)return je(d,b),d;var j=1/Math.sin(h),e=Math.sin((1-c)*h)*j;c=f*Math.sin(c*h)*j;d[0]=a[0]*e+b[0]*c;d[1]=a[1]*e+b[1]*c;d[2]=a[2]*e+b[2]*c;d[3]=a[3]*e+b[3]*c;return d};function Ki(a,b,c,d){Sh.call(this,a,b,c,d);this.Jb=i;this.Kd=Q();this.Jk=Te();T(this).Bm(Le(1,1,1))}C(Ki,Sh);Ki.prototype.ld=function(){Ki.a.ld.call(this);this.Jb=i};
function Li(a){if(a.Jb){a.Jb=m;var b=T(a),c=b.Wb,d=b.ne,e=b.Qh;a.Kd[0]=c[0];a.Kd[1]=c[1];a.Kd[2]=c[2];a.Kd[3]=b.tg*Math.max(e[0],Math.max(e[1],e[2]));b=a.Jk;Ii(d,b);var d=e[0],f=e[1],e=e[2],h=b[1],j=b[2],k=b[3],n=b[4],q=b[5],r=b[6],v=b[7],s=b[8],y=b[9],w=b[10],E=b[11],I=b[12],P=b[13],aa=b[14],wa=b[15];b[0]*=d;b[1]=h*d;b[2]=j*d;b[3]=k*d;b[4]=n*f;b[5]=q*f;b[6]=r*f;b[7]=v*f;b[8]=s*e;b[9]=y*e;b[10]=w*e;b[11]=E*e;b[12]=I;b[13]=P;b[14]=aa;b[15]=wa;d=c[0];f=c[1];c=c[2];e=b[1];h=b[2];j=b[3];k=b[4];n=b[5];
q=b[6];r=b[7];v=b[8];s=b[9];y=b[10];w=b[11];E=b[12];I=b[13];P=b[14];aa=b[15];b[0]+=d*j;b[1]=e+f*j;b[2]=h+c*j;b[3]=j;b[4]=k+d*r;b[5]=n+f*r;b[6]=q+c*r;b[7]=r;b[8]=v+d*w;b[9]=s+f*w;b[10]=y+c*w;b[11]=w;b[12]=E+d*aa;b[13]=I+f*aa;b[14]=P+c*aa;b[15]=aa;a.getParent()}}
Ki.prototype.Fe=function(a){var b=T(this),c=a.wi,d=b.Wb;Ii(b.ne,c);if(c==c){var b=c[1],e=c[2],f=c[3],h=c[6],j=c[7],k=c[11];c[1]=c[4];c[2]=c[8];c[3]=c[12];c[4]=b;c[6]=c[9];c[7]=c[13];c[8]=e;c[9]=h;c[11]=c[14];c[12]=f;c[13]=j;c[14]=k}else c[0]=c[0],c[1]=c[4],c[2]=c[8],c[3]=c[12],c[4]=c[1],c[5]=c[5],c[6]=c[9],c[7]=c[13],c[8]=c[2],c[9]=c[6],c[10]=c[10],c[11]=c[14],c[12]=c[3],c[13]=c[7],c[14]=c[11],c[15]=c[15];b=-d[0];e=-d[1];d=-d[2];f=c[1]*b+c[5]*e+c[9]*d+c[13];h=c[2]*b+c[6]*e+c[10]*d+c[14];j=c[3]*b+
c[7]*e+c[11]*d+c[15];c[12]=c[0]*b+c[4]*e+c[8]*d+c[12];c[13]=f;c[14]=h;c[15]=j;Mi(a)};function Ni(a,b,c,d){Ki.call(this,a,b,c,d);this.Fb=l;this.Jh=m}C(Ni,Ki);t=Ni.prototype;t.b=function(){K(this.Fb);this.Fb=l;Ni.a.b.call(this)};t.fp=function(){var a=T(this).cf();if(this.Jh){this.Fb&&(K(this.Fb),this.Fb=l);if(a){a:{var b=this.ja.Mf.Yg.am,c=b.xf[a];if(!c){c=b.bm[a];c=!c?l:c.wn(b.$a,b.$);if(!c){a=l;break a}b.xf[a]=c}a=c.Me()}this.Fb=a}this.Jh=m}};t.cf=function(){return T(this).cf()};
t.ld=function(){Ni.a.ld.call(this);var a=T(this).cf(),a=a.length?a:l;if(a!=(this.Fb?this.Fb.bk.id:l)&&!this.Jh)this.Jh=i,$h(this.ja.Rh,fi,0,this.fp,this)};t.B=function(a,b,c,d){if(this.Fb){b=this.Fb;a=Ue();d.da.push({Co:b,transform:a});this.Jb&&Li(this);d=this.Jk;a[0]=d[0];a[1]=d[1];a[2]=d[2];a[3]=d[3];a[4]=d[4];a[5]=d[5];a[6]=d[6];a[7]=d[7];a[8]=d[8];a[9]=d[9];a[10]=d[10];a[11]=d[11];a[12]=d[12];a[13]=d[13];a[14]=d[14];a[15]=d[15];for(d=this.getParent();d!=l;)d instanceof Ki&&We(d.Jk,a,a),d=d.getParent()}};function Oi(a,b,c,d){Ni.call(this,a,b,c,d)}C(Oi,Ni);function Pi(a){a=T(a);a.dh===g&&(a.dh=a.kf?a.ca.Bb().I[a.kf]||l:l);return a.dh};R();R();function Qi(){this.height=this.width=1;this.Mb=g;this.Ro=0.1;this.Vg=100;this.Ef=i;this.Bf=Ue();this.rk=Ue();this.wi=Ue();this.Oj=Ue();this.Rc=Ue();this.ae=Ue();this.position=R();this.direction=R();this.zj=[Q(),Q(),Q(),Q(),Q(),Q()]}function Ri(a,b){var c,d;b instanceof Fd?(c=b.width,d=b.height):(c=b,d=g);if(a.width!=c||a.height!=d)a.width=c,a.height=d,a.Ef=i}function Si(a,b){a.Vg!=b&&(a.Vg=b,a.Ef=i)}
function Mi(a){if(a.Ef){a.Ef=m;var b=2/a.width,c=2/-a.height;Ve(a.Bf,b,c,1,0,-1,1,0,1);var b=a.Mb===g?a.width/a.height:a.Mb,c=a.Ro,d=a.Vg,e=Math.PI/4/2,f=d-c,h=Math.sin(e);0==f||(0==h||0==b)||(e=Math.cos(e)/h,Ve(a.rk,e/b,e,-(d+c)/f,-1,0,0,-(2*c*d)/f,0));We(a.rk,a.wi,a.Rc);Ze(a.Rc,a.ae)}We(a.rk,a.wi,a.Rc);Ze(a.wi,a.Oj);Ze(a.Rc,a.ae);c=a.Rc;b=a.zj;ie(b[0],c[3]+c[0],c[7]+c[4],c[11]+c[8],c[15]+c[12]);ie(b[1],c[3]-c[0],c[7]-c[4],c[11]-c[8],c[15]-c[12]);ie(b[2],c[3]-c[1],c[7]-c[5],c[11]-c[9],c[15]-c[13]);
ie(b[3],c[3]+c[1],c[7]+c[5],c[11]+c[9],c[15]+c[13]);ie(b[4],c[3]+c[2],c[7]+c[6],c[11]+c[10],c[15]+c[14]);ie(b[5],c[3]-c[2],c[7]-c[6],c[11]-c[10],c[15]-c[14]);for(c=0;c<b.length;c++)d=b[c],f=1/Math.sqrt(d[0]*d[0]+d[1]*d[1]+d[2]*d[2]),d[0]*=f,d[1]*=f,d[2]*=f,d[3]*=f;S(a.position,0,0,0);$e(a.Oj,a.position,a.position);b=2*(0.5/a.width)-1;c=1-2*(0.5/a.height);d=Ti[0];f=Ti[1];S(d,b,c,-1);S(f,b,c,1);bf(a.ae,d,d);bf(a.ae,f,f);Re(d,f,a.direction);a=b=a.direction;a[0]=-b[0];a[1]=-b[1];a[2]=-b[2]}
var Ti=[R(),R(),R(),R(),R(),R(),R(),R()];function Ui(a,b){G.call(this);this.map=a;this.Z=Math.min(Math.max(Math.floor(b),1),16);this.nb=2*this.Z+1;this.yb=Array(1*this.nb*this.nb);this.kc=R();this.Y=new Int32Array(3);this.jc=sg(this.kc[0]-16*this.Z,0,this.kc[2]-16*this.Z,this.kc[0]+16*this.Z,128,this.kc[2]+16*this.Z);this.wa=[];this.yo=m}C(Ui,G);t=Ui.prototype;t.b=function(){jc(this.wa);Ui.a.b.call(this)};
t.update=function(a){Me(this.kc,a);var b=a[0]>>4,c=a[2]>>4;a=b-this.Y[0];var d=c-this.Y[2];if(a||d){var b=b<<4,c=c<<4,e=this.jc,f=b+16*this.Z,h=c+16*this.Z;S(e.min,b-16*this.Z,0,c-16*this.Z);S(e.max,f,0,h);this.jc.max[0]+=16;this.jc.max[1]+=128;this.jc.max[2]+=16;this.Y[0]+=a;this.Y[1]+=0;this.Y[2]+=d;Vi(this)}};
function Vi(a){a.Y[0]=a.kc[0]>>4;a.Y[1]=0;a.Y[2]=a.kc[2]>>4;for(var b=a.Y[0]-a.Z,c=a.Y[2]-a.Z,d=a.nb,e=a.nb,f=b;f<b+d;f++)for(var h=c;h<c+e;h++){var j=a,k=Wi(j,f,h);if(!(0>k||k>j.yb.length)){var n=j.map.Ea(f<<4,0,h<<4);if(n!=j.yb[k]){var q=j.yb[k];if(q){for(var r=0;r<j.wa.length;r++){var v=j.wa[r],s=q,y=Qg(s,m);if(y){for(var w=0;w<y.Ic.length;w++){var E=y.Ic[w];E&&(E.Hb&&v.Ob.cancel(E),v.Hc.remove(E),K(E))}s.vk=l}}q.je--;q.je||q.map.Yj(q)}n.je||n.map.Zj(n);n.je++;j.yb[k]=n;for(r=0;r<j.wa.length;r++)Rg(j.wa[r],
n)}}}}function Wi(a,b,c){b%=a.nb;c%=a.nb;0>b&&(b=a.nb+b);0>c&&(c=a.nb+c);return b+c*a.nb}t.gk=function(a){for(var b=0;b<this.wa.length;b++)Rg(this.wa[b],a),Sg(this.wa[b],a.x,a.y,a.L,a.x+16-1,a.y+128-1,a.L+16-1,3)};t.Ea=function(a,b,c){if(0>b||128<=b)return l;a>>=4;c>>=4;var d=Math.abs(c-this.Y[2]);if(Math.abs(a-this.Y[0])>this.Z||0!=b>>7||d>this.Z)return l;b=Wi(this,a,c);return 0>b||b>this.yb.length?l:this.yb[b]};t.wj=function(a,b,c){Xi(this,a,this.Y[0]-this.Z,this.Y[2]-this.Z,this.nb,b,c)};
function Xi(a,b,c,d,e,f,h){var j=Yi,k=16*(c+e),n=16*(d+e);S(j.min,16*c,0,16*d);S(j.max,k,128,n);a:{k=j.min;n=j.max;Me(Ti[0],k);S(Ti[1],k[0],k[1],n[2]);S(Ti[2],k[0],n[1],k[2]);S(Ti[3],k[0],n[1],n[2]);S(Ti[4],n[0],k[1],k[2]);S(Ti[5],n[0],k[1],n[2]);S(Ti[6],n[0],n[1],k[2]);Me(Ti[7],n);for(var k=0,n=b.zj,q=0;q<n.length;q++){for(var r=n[q],v=8,s=1,y=0;8>y;y++){var w=Ti[y];0>r[0]*w[0]+r[1]*w[1]+r[2]*w[2]+r[3]&&(s=0,v--)}if(!v){k=-1;break a}k+=s}k=6==k?1:0}if(1==k){b=j.min[0]>>4;c=j.max[0]>>4;d=j.max[2]>>
4;for(j=j.min[2]>>4;j<d;j++)for(e=b;e<c;e++)(k=a.Ea(e<<4,0,j<<4))&&f.call(h,k)}else if(0==k)if(1>=e)(a=a.Ea(c<<4,0,d<<4))&&f.call(h,a);else{j=e/2|0;for(e=0;1>=e;e++)for(k=0;1>=k;k++)Xi(a,b,c+k*j,d+e*j,j,f,h)}}
t.Mj=function(a,b){var c=l,d=Math.floor(a[0]),e=Math.floor(a[1]),f=Math.floor(a[2]),h=0==a[3]?0:0>a[3]?-1:1,j=0==a[4]?0:0>a[4]?-1:1,k=0==a[5]?0:0>a[5]?-1:1,n=(d+(0<h?1:0)-a[0])/a[3],q=(e+(0<j?1:0)-a[1])/a[4],r=(f+(0<k?1:0)-a[2])/a[5];isNaN(n)&&(n=Number.POSITIVE_INFINITY);isNaN(q)&&(q=Number.POSITIVE_INFINITY);isNaN(r)&&(r=Number.POSITIVE_INFINITY);var v=h/a[3],s=j/a[4],y=k/a[5];isNaN(v)&&(v=Number.POSITIVE_INFINITY);isNaN(s)&&(s=Number.POSITIVE_INFINITY);isNaN(y)&&(y=Number.POSITIVE_INFINITY);for(var w=
Math.min(b,16*this.nb),E=0;E<w;E++){var I=this.Ea(d,e,f);if(I&&(c=I.Mj(a)))break;n<q&&n<r?(n+=v,d+=h):q<r?(q+=s,e+=j):(r+=y,f+=k)}return c&&c.jj>b?l:c};t.xc=function(a,b,c){var d=this.Ea(a,b,c);return d?d.xc(a,b,c):0};t.ac=function(a,b,c,d){var e=this.Ea(a,b,c);if(!e||!e.ac(a,b,c,d))return m;for(d=0;d<this.wa.length;d++)Sg(this.wa[d],a,b,c,a,b,c,0);return i};R();R();var Yi=new rg;function Zi(a){Ph.call(this,a);this.dg=0}C(Zi,Ph);Zi.prototype.read=function(a){Zi.a.read.call(this,a);this.dg=a.tm()};Zi.prototype.write=function(a){Zi.a.write.call(this,a);a.Um(this.dg)};function $i(a,b,c,d){Ki.call(this,a,b,c,d);this.Mb=g;this.wb=this.r=l}C($i,Ki);$i.prototype.b=function(){this.r&&this.wb&&(D(this.r.Ed,this.wb),K(this.wb));$i.a.b.call(this)};$i.prototype.Ck=function(a){this.r=a;this.wb=new Ui(a,16);a.Ed.push(this.wb);a=this.wb;var b=R();Me(a.kc,b);Vi(a);a.yo=i;Zh(this,1,0)};$i.prototype.update=function(){var a=aj,b=this.getParent();b instanceof Ki?(b.Jb&&Li(b),je(a,b.Kd)):(this.Jb&&Li(this),je(a,this.Kd));this.wb.update(a);Zh(this,1,0)};
$i.prototype.Fe=function(a){if(this.Mb){var b=this.Mb;a.Mb!==b&&(a.Mb=b,a.Ef=i)}b=this.getParent();b instanceof Ki?b.Fe(a):$i.a.Fe.call(this,a)};var aj=Q();function bj(a){Qh.call(this,a);this.mi=0}C(bj,Qh);bj.prototype.read=function(a){bj.a.read.call(this,a);this.mi=a.aa()};bj.prototype.write=function(a){bj.a.write.call(this,a);a.Lb(this.mi)};var cj=Qh.aq;function dj(a,b,c,d){Sh.call(this,a,b,c,d)}C(dj,Sh);t=dj.prototype;t.Xd=function(){return this.getParent()};t.zg=function(a){dj.a.zg.call(this,a)};t.Ld=function(a){dj.a.Ld.call(this,a)};t.gb=function(a){dj.a.gb.call(this,a);if(a instanceof bj){var b=this.Xd();a:{for(var c=0;c<this.M.length;c++)if(this.M[c].Qd==a.mi){a=this.M[c];break a}a=l}a&&T(b).ym(a?a.Qd:0)}};
t.Xb=function(a,b){var c=b.T,d=b.G,e=Pi(this.Xd()),f=this.M.length,h=e?Ga(this.M,e):0,e=h;d.sc&&(e=(h+(0<d.sc?1:-1))%f,0>e&&(e=f-1));49 in c.F?e=0:50 in c.F?e=1:51 in c.F?e=2:52 in c.F?e=3:53 in c.F?e=4:54 in c.F?e=5:55 in c.F?e=6:56 in c.F?e=7:57 in c.F?e=8:48 in c.F&&(e=9);e=Math.min(Math.max(e,0),f-1);e!=h&&(c=this.Eg(67),c.mi=(this.M[e]||l).Qd,this.ja.Dc.ze(c),this.ja.Mf.Yg.ea());return i};function ej(a){Qh.call(this,a);this.Zb=this.xa=this.Ya=this.Th=this.Sh=this.xb=this.oi=0}C(ej,Qh);var fj=360*(1/32767)*Math.PI/180;ej.prototype.read=function(a){ej.a.read.call(this,a);this.oi=Jh(a);this.xb=Jh(a);this.xb&1&&(this.Sh=Kh(a),this.Th=Kh(a));this.Ya=Hh(a);this.xa=Hh(a)};ej.prototype.write=function(a){ej.a.write.call(this,a);gg(a,this.oi);gg(a,this.xb);this.xb&1&&(hg(a,this.Sh),hg(a,this.Th));fg(a,this.Ya);fg(a,this.xa)};function gj(){this.yj=i}
gj.prototype.gb=function(a,b){var c=a.li,d=a.Ya*fj,e=a.xa*fj,f=a.Zb*fj,h=hj,j=Math.sin(d/2),d=Math.cos(d/2),k=Math.sin(e/2),e=Math.cos(e/2),n=Math.sin(f/2),f=Math.cos(f/2);h[0]=d*k*f+j*e*n;h[1]=j*e*f-d*k*n;h[2]=d*e*n-j*k*f;h[3]=d*e*f+j*k*n;b.Am(hj);if(this.yj){h=b.Wb;j=ij[4];k=b.ne;d=b.vi;f=ij[5];e=Pe(d);1E-4<e?(n=Math.max(0,e-40*c),Oe(d,n/e,f)):S(f,0,0,0);d=a.oi;e=ij[0];e[0]=0;e[0]+=18*!!(d&1);e[0]-=18*!!(d&2);e[1]=0;e[1]+=18*!!(d&4);e[1]-=18*!!(d&8);e[2]=0;e[2]+=18*!!(d&16);e[2]-=18*!!(d&32);var d=
ij[1],n=k[0]*(k[0]+k[0]),q=k[3]*(k[0]+k[0]),r=k[0]*(k[1]+k[1]),v=k[1]*(k[1]+k[1]),s=k[3]*(k[1]+k[1]),y=k[0]*(k[2]+k[2]),w=k[1]*(k[2]+k[2]),E=k[2]*(k[2]+k[2]),k=k[3]*(k[2]+k[2]),I=e[0],P=e[1],e=e[2];d[0]=I*(1-v-E)+P*(r-k)+e*(y+s);d[1]=I*(r+k)+P*(1-n-E)+e*(w-q);d[2]=I*(y-s)+P*(w+q)+e*(1-n-v);k=ij[2];(e=Pe(d))?Oe(d,1/e,k):S(k,0,0,0);e=Pe(d);18<e&&(Oe(d,18/e,d),e=18);d=e-(f[0]*k[0]+f[1]*k[1]+f[2]*k[2]);0<d&&(e=20*e*c,e>d&&(e=d),Oe(k,e,k),Ne(k,f,f));d=ij[3];Oe(f,c,d);Ne(h,d,j);b.setPosition(j);b.setVelocity(f)}};
var ij=[R(),R(),R(),R(),R(),R()];Q();Q();Q();Te();new Float32Array(6);var hj=Q();function jj(a,b,c,d){Sh.call(this,a,b,c,d)}C(jj,Sh);jj.prototype.Xd=function(){return this.getParent()};function kj(a,b,c,d){Ni.call(this,a,b,c,d)}C(kj,Ni);kj.prototype.jk=function(a,b){kj.a.jk.call(this,a,b)};kj.prototype.lk=z;function lj(a,b,c,d){Sh.call(this,a,b,c,d);this.Qp=new Qi;this.Oo=new gj}C(lj,jj);
lj.prototype.gb=function(a){lj.a.gb.call(this,a);var b=this.Xd();if(b&&a instanceof ej){this.Oo.gb(a,T(b));var c,d=T(this);d.Ah===g&&(d.Ah=d.Ff?d.ca.Bb().I[d.Ff]||l:l);c=d.Ah;var d=mj(T(c)),e=d.wb,f=this.Qp;Si(f,16*d.wb.Z+16);d.Fe(f);if(a.xb&&(d=Pi(b))){var h=nj;h.time=a.getTime();h.viewport=f;h.sl=e;h.nk=c;h.Ym=b;h.screenX=0.5;h.screenY=0.5;a.xb&1&&(h.screenX=a.Sh/65535,h.screenY=a.Th/65535);var b=h.sk,j=2*(h.screenX/f.width)-1,k=1-2*(h.screenY/f.height);c=Ti[0];e=Ti[1];S(c,j,k,-1);S(e,j,k,1);bf(f.ae,
c,c);bf(f.ae,e,e);Re(c,e,e);var f=c[1],j=c[2],k=e[0],n=e[1],e=e[2];b[0]=c[0];b[1]=f;b[2]=j;b[3]=k;b[4]=n;b[5]=e;a.bh||(a=a.xb,a&4&&d.lk(h,0),a&32&&d.lk(h,1))}}};var nj=new function(){this.time=0;this.Ym=this.nk=this.sl=this.viewport=l;this.screenY=this.screenX=0;this.sk=new Float32Array(6)};function oj(a,b,c,d){Ni.call(this,a,b,c,d)}C(oj,kj);oj.prototype.bf=function(){var a=T(this).bf();return Hi(this).r.Aa.da[a]};oj.prototype.zk=function(a){T(this).zk(a.id)};
oj.prototype.lk=function(a,b){var c=a.sl.Mj(a.sk,100);if(c&&100>=c.jj)if(0==b){var d=c.fl,e=c.gl,f=c.hl,h=0,j=0,k=0,c=c.rm;c[0]==d?h--:c[0]==d+1&&h++;c[1]==e?j--:c[1]==e+1&&j++;c[2]==f?k--:c[2]==f+1&&k++;c=d+h;e+=j;f+=k;j=this.bf();k=a.nk;j=j?j.id<<8:0;Hi(this).ac(c,e,f,j,k)}else 1==b&&(f=c.fl,k=c.gl,c=c.hl,e=a.nk,Hi(this).ac(f,k,c,0,e))};function pj(a,b,c,d){Sh.call(this,a,b,c,d)}C(pj,Sh);pj.prototype.dd=function(){var a=T(this);a.si===g&&(a.si=a.we?a.ca.Bb().dd(a.we):l);return a.si};function qj(a){a=T(a);a.jh===g&&(a.jh=a.pf?a.ca.Bb().I[a.pf]||l:l);return a.jh}pj.prototype.Ej=function(){var a=T(this);a.bg===g&&(a.bg=a.ye?a.ca.Bb().I[a.ye]||l:l);return[a.bg,rj(T(this)),mj(T(this)),qj(this)]};pj.prototype.ld=function(){pj.a.ld.call(this);this.qa&1&&(this.Lq=this.Bb().dd(T(this).we))};function sj(a,b,c,d){Sh.call(this,a,b,c,d);this.fe=this.Yg=l}C(sj,Sh);function tj(a){Ph.call(this,a);this.data=this.L=this.y=this.x=0}C(tj,Ph);tj.prototype.read=function(a){tj.a.read.call(this,a);this.x=a.Ih();this.y=a.Ih();this.L=a.Ih();this.data=Kh(a)};tj.prototype.write=function(a){tj.a.write.call(this,a);a.Di(this.x);a.Di(this.y);a.Di(this.L);hg(a,this.data)};function uj(a,b,c){var d=a>>24&255,e=a>>16&255,f=a>>8&255;a&=255;return(d+c*((b>>24&255)-d)&255)<<24|(e+c*((b>>16&255)-e)&255)<<16|(f+c*((b>>8&255)-f)&255)<<8|a+c*((b&255)-a)&255};function U(a,b){this.fc=a;this.Af=0;this.p=b}U.prototype.El=function(a){var b=V(a,this.l);return"target."+V(a,this.m)+"(source."+b+"());"};U.prototype.Wd=function(a){var b=V(a,this.l);return"result."+V(a,this.m)+"(target."+b+"());"};var W=0;function vj(a,b){return(b.p&wj)-(a.p&wj)||a.Af-b.Af}function V(a,b){for(var c in a)if(a[c]===b)return c;return l}var wj=1;function xj(a,b,c,d){U.call(this,a,b);this.l=c;this.m=d}C(xj,U);t=xj.prototype;t.q=function(){return new xj(this.fc,this.p,this.l,this.m)};
t.Sb=function(a){a=V(a,this.m);var b=Mh(),b=V(b,b.Ih);return"target."+a+"(reader."+b+"());"};t.Tb=function(a){a=V(a,this.l);var b=jg();return"writer."+V(b,b.Di)+"(target."+a+"() | 0);"};t.El=function(a){var b=V(a,this.l);return"target."+V(a,this.m)+"(source."+b+"() | 0);"};t.Wd=function(a){var b=V(a,this.l);a=V(a,this.m);return"var _s = source."+b+"();var _t = target."+b+"();target."+a+"((_s + t * (_t - _s)) | 0);"};function yj(a,b,c,d){U.call(this,a,b);this.l=c;this.m=d}C(yj,U);
yj.prototype.q=function(){return new yj(this.fc,this.p,this.l,this.m)};yj.prototype.Sb=function(a){a=V(a,this.m);var b=Mh(),b=V(b,b.tm);return"target."+a+"(reader."+b+"());"};yj.prototype.Tb=function(a){a=V(a,this.l);var b=jg();return"writer."+V(b,b.Um)+"(target."+a+"());"};yj.prototype.Wd=function(a){var b=V(a,this.l);a=V(a,this.m);return"var _s = source."+b+"();var _t = target."+b+"();result."+a+"((_s + t * (_t - _s)));"};function zj(a,b,c,d){U.call(this,a,b);this.l=c;this.m=d}C(zj,U);
zj.prototype.q=function(){return new zj(this.fc,this.p,this.l,this.m)};zj.prototype.Sb=function(a){a=V(a,this.m);var b=Mh(),b=V(b,b.dp);return"target."+a+"(reader."+b+"());"};zj.prototype.Tb=function(a){a=V(a,this.l);var b=jg();return"writer."+V(b,b.Zp)+"(target."+a+"());"};
zj.prototype.Wd=function(a){var b=V(a,this.l),c=V(a,this.m);a=V(a,Aj);return"var _sv3 = source."+b+"();var _tv3 = target."+b+"();var _rv3 = source."+a+";_rv3[0] = (_tv3[0] - _sv3[0]) * t + _sv3[0];_rv3[1] = (_tv3[1] - _sv3[1]) * t + _sv3[1];_rv3[2] = (_tv3[2] - _sv3[2]) * t + _sv3[2];result."+c+"(_rv3);"};function Bj(a,b,c,d,e){U.call(this,a,b);this.l=c;this.m=d;this.So=e}C(Bj,U);Bj.prototype.q=function(){return new Bj(this.fc,this.p,this.l,this.m,this.So)};
Bj.prototype.Sb=function(a){a=V(a,this.m);var b=Mh(),b=V(b,b.ep);return"target."+a+"(reader."+b+"());"};Bj.prototype.Tb=function(a){a=V(a,this.l);var b=jg();return"writer."+V(b,b.$p)+"(target."+a+"());"};Bj.prototype.Wd=function(a){var b=V(a,this.l),c=V(a,this.m),d=V(a,Cj);a=V(a,Ji);return"var _rq = source."+d+";source."+a+"(source."+b+"(), target."+b+"(), t, _rq);result."+c+"(_rq);"};function Dj(a,b,c,d){U.call(this,a,b);this.l=c;this.m=d}C(Dj,U);
Dj.prototype.q=function(){return new Dj(this.fc,this.p,this.l,this.m)};Dj.prototype.Sb=function(a){a=V(a,this.m);var b=Mh(),b=V(b,b.aa);return"target."+a+"(reader."+b+"());"};Dj.prototype.Tb=function(a){a=V(a,this.l);var b=jg();return"writer."+V(b,b.Lb)+"(target."+a+"());"};Dj.prototype.Wd=function(a){var b=V(a,this.l),c=V(a,this.m);a=V(a,uj);return"result."+c+"(source."+a+"(source."+b+"(), target."+b+"(), t));"};function Ej(a,b,c,d){U.call(this,a,b);this.l=c;this.m=d}C(Ej,U);
Ej.prototype.q=function(){return new Ej(this.fc,this.p,this.l,this.m)};Ej.prototype.Sb=function(a){a=V(a,this.m);var b=Mh(),b=V(b,b.s);return"target."+a+"(reader."+b+"());"};Ej.prototype.Tb=function(a){a=V(a,this.l);var b=jg();return"writer."+V(b,b.ba)+"(target."+a+"());"};function Fj(a,b,c,d){U.call(this,a,b);this.l=c;this.m=d}C(Fj,U);Fj.prototype.q=function(){return new Fj(this.fc,this.p,this.l,this.m)};
Fj.prototype.Sb=function(a){a=V(a,this.m);var b=Mh(),b=V(b,b.s);return"target."+a+"(reader."+b+"());"};Fj.prototype.Tb=function(a){a=V(a,this.l);var b=jg();return"writer."+V(b,b.ba)+"(target."+a+"());"};function Gj(a,b,c,d){U.call(this,a,b);this.l=c;this.m=d}C(Gj,U);Gj.prototype.q=function(){return new Gj(this.fc,this.p,this.l,this.m)};Gj.prototype.Sb=function(a){a=V(a,this.m);var b=Mh(),b=V(b,b.H);return"target."+a+"(reader."+b+"());"};
Gj.prototype.Tb=function(a){a=V(a,this.l);var b=jg();return"writer."+V(b,b.hc)+"(target."+a+"());"};var Aj=R(),Cj=Q();function Hj(a,b){for(var c=0;c<a.length;c++)a[c].Af=c;a.sort(vj);this.km={};this.um=Array(a.length);this.Yp=Array(a.length);var d="",e="",f="",h="",j="",k="",n="",q="";this.Om=Array(a.length);for(c=0;c<a.length;c++){var r=a[c].q();this.Om[c]=r;this.km[r.fc]=r;r.Af=c;this.um[c]=new Function("target","reader",r.Sb(b));this.Yp[c]=new Function("target","writer",r.Tb(b));var d=d+r.Sb(b),e=e+r.Tb(b),v=r.El(b),f=f+v;r.p&6||(h+=v);r.p&2&&(k+=v);if(r.p&4){var s=r.Wd(b),n=n+s,j=j+v;r.p&2||(q+=s)}}this.cp=new Function("target",
"reader",d);this.Xp=new Function("target","writer",e);this.kq=new Function("source","target",f);this.Dg=new Function("source","target",h);this.Zi=new Function("source","target",j);this.$i=new Function("source","target",k);this.Eo=new Function("source","target","t","result",n);this.Do=new Function("source","target","t","result",q)}Hj.prototype.kb=function(){return this.Om.length};function X(a,b){return a.km[b].Af}function Ij(a,b,c,d,e){for(a=a.um;c;){if(c&1&&a[b])a[b](d,e);c>>=1;b++}};function Y(a,b){this.ca=a;this.time=0;this.Xa=b;this.Qe=this.Pe=0}t=Y.prototype;t.reset=function(a){this.ca=a;this.Qe=this.Pe=this.time=0};function Jj(a,b){if(!a.Xa){var c=[];a(c);a.Xa=new Hj(c,b)}return a.Xa}function Z(a,b){var c=a.Pe||a.Qe;31>=b?a.Pe|=1<<b:a.Qe|=1<<b-32;c||a.ca.Nj()}t.me=function(){this.Pe=this.Qe=0};t.read=function(a){this.Xa.cp(this,a)};t.tk=function(a){var b=a.H();Ij(this.Xa,0,b,this,a);31<this.Xa.kb()&&(b=a.H(),Ij(this.Xa,32,b,this,a))};t.write=function(a){this.Xa.Xp(this,a)};
t.Dg=function(a){this.Xa.Dg(this,a)};t.$i=function(a){this.Xa.$i(this,a)};t.Zi=function(a){this.Xa.Zi(this,a)};t.hh=function(a,b,c){var d=this.Xa;this.ca.Pd&Vh?d.Do(a,b,c,this):d.Eo(a,b,c,this)};t.Gm=Aj;t.Ik=Cj;t.bp=Ji;t.qn=uj;Y.prototype.Gm[0]=Y.prototype.Gm[1];Y.prototype.bp(Y.prototype.Ik,Y.prototype.Ik,0,Y.prototype.Ik);Y.prototype.qn(0,0,0);function Kj(a,b){var c=b||Jj(Lj,this);Y.call(this,a,c);this.Wb=R();this.Yo=X(c,Mj);this.ne=Q();this.jp=X(c,Nj);this.Qh=R();this.mp=X(c,Oj);this.tg=0;this.hn=X(c,Pj);this.vi=R();this.Pp=X(c,Qj)}C(Kj,Y);var Mj=W++,Nj=W++,Oj=W++,Pj=W++,Qj=W++;t=Kj.prototype;t.Rn=p("Wb");t.setPosition=function(a){Se(this.Wb,a)||(Me(this.Wb,a),Z(this,this.Yo),this.ca.Jb=i)};t.Sn=p("ne");t.Am=function(a){le(this.ne,a)||(je(this.ne,a),Z(this,this.jp),this.ca.Jb=i)};t.Tn=p("Qh");
t.Bm=function(a){Se(this.Qh,a)||(Me(this.Qh,a),Z(this,this.mp),this.ca.Jb=i)};t.Jn=p("tg");t.rp=function(a){this.tg!=a&&(this.tg=a,Z(this,this.hn),this.ca.Jb=i)};t.Wn=p("vi");t.setVelocity=function(a){Se(this.vi,a)||(Me(this.vi,a),Z(this,this.Pp))};
function Lj(a){a.push(new zj(Mj,wj|6,Kj.prototype.Rn,Kj.prototype.setPosition));a.push(new Bj(Nj,wj|6,Kj.prototype.Sn,Kj.prototype.Am,i));a.push(new zj(Oj,wj|6,Kj.prototype.Tn,Kj.prototype.Bm));a.push(new yj(Pj,wj|4,Kj.prototype.Jn,Kj.prototype.rp));a.push(new zj(Qj,wj|2,Kj.prototype.Wn,Kj.prototype.setVelocity))};function Rj(a,b){var c=b||Jj(Sj,this);Kj.call(this,a,c);this.dk="";this.Mo=X(c,Tj);this.ck=0;this.Lo=X(c,Uj);this.Oi=0;this.bn=X(c,Vj)}C(Rj,Kj);var Tj=W++,Uj=W++,Vj=W++;t=Rj.prototype;t.cf=p("dk");t.wp=function(a){this.dk!=a&&(this.dk=a,Z(this,this.Mo))};t.Pn=p("ck");t.vp=function(a){this.ck!=a&&(this.ck=a,Z(this,this.Lo))};t.In=p("Oi");t.qp=function(a){this.Oi!=a&&(this.Oi=a,Z(this,this.bn))};
function Sj(a){Lj(a);a.push(new Ej(Tj,0,Rj.prototype.cf,Rj.prototype.wp));a.push(new Dj(Uj,wj|4,Rj.prototype.Pn,Rj.prototype.vp));a.push(new xj(Vj,0,Rj.prototype.In,Rj.prototype.qp))};function Wj(a,b){var c=b||Jj(Xj,this);Rj.call(this,a,c);this.kf=0;this.dh=g;this.Ao=X(c,Yj)}C(Wj,Rj);var Yj=W++;Wj.prototype.Mn=p("kf");Wj.prototype.ym=function(a){this.kf!=a&&(this.kf=a,Z(this,this.Ao),this.dh=g)};function Xj(a){Sj(a);a.push(new Gj(Yj,0,Wj.prototype.Mn,Wj.prototype.ym))};function Zj(a,b){var c=b||Jj($j,this);Kj.call(this,a,c)}C(Zj,Kj);function $j(a){Lj(a)};function ak(a,b){var c=b||Jj(bk,this);Y.call(this,a,c)}C(ak,Y);function bk(){};function ck(a,b){var c=b||Jj(dk,this);Y.call(this,a,c);this.we="";this.si=g;this.Np=X(c,ek);this.ye=0;this.bg=g;this.Zm=X(c,fk);this.Le=0;this.Cg=g;this.vn=X(c,gk);this.Ge=0;this.vg=g;this.mn=X(c,hk);this.pf=0;this.jh=g;this.Fo=X(c,ik)}C(ck,Y);var ek=W++,fk=W++,gk=W++,hk=W++,ik=W++;t=ck.prototype;t.Vn=p("we");t.zp=function(a){this.we!=a&&(this.we=a,Z(this,this.Np),this.si=g)};t.Hn=p("ye");t.pp=function(a){this.ye!=a&&(this.ye=a,Z(this,this.Zm),this.bg=g)};t.Ln=p("Le");
function rj(a){a.Cg===g&&(a.Cg=a.Le?a.ca.Bb().I[a.Le]||l:l);return a.Cg}t.tp=function(a){this.Le!=a&&(this.Le=a,Z(this,this.vn),this.Cg=g)};t.Kn=p("Ge");function mj(a){a.vg===g&&(a.vg=a.Ge?a.ca.Bb().I[a.Ge]||l:l);return a.vg}t.sp=function(a){this.Ge!=a&&(this.Ge=a,Z(this,this.mn),this.vg=g)};t.Nn=p("pf");t.up=function(a){this.pf!=a&&(this.pf=a,Z(this,this.Fo),this.jh=g)};
function dk(a){a.push(new Fj(ek,0,ck.prototype.Vn,ck.prototype.zp));a.push(new Gj(fk,0,ck.prototype.Hn,ck.prototype.pp));a.push(new Gj(gk,0,ck.prototype.Ln,ck.prototype.tp));a.push(new Gj(hk,0,ck.prototype.Kn,ck.prototype.sp));a.push(new Gj(ik,0,ck.prototype.Nn,ck.prototype.up))};function jk(a,b){var c=b||Jj(kk,this);Y.call(this,a,c);this.$f=0;this.Ai=g;this.Tp=X(c,lk)}C(jk,Y);var lk=W++;jk.prototype.Xn=p("$f");jk.prototype.Ap=function(a){this.$f!=a&&(this.$f=a,Z(this,this.Tp),this.Ai=g)};function kk(a){a.push(new Gj(lk,0,jk.prototype.Xn,jk.prototype.Ap))};function mk(a,b,c,d,e){Sh.call(this,a,b,c,d);this.Ek=e}C(mk,Sh);mk.prototype.zg=function(a){a instanceof Ki&&this.Ek.Fd(a)};mk.prototype.Ld=function(a){a instanceof Ki&&this.Ek.od(a)};function nk(a){this.Gq=a||ok;this.Iq=[]}function ok(){this.sk=new Float32Array(6);this.end=this.start=this.yq=0;this.ca=this.Hq=l;this.rm=R();this.jj=0};function pk(){nk.call(this);this.I=[]}C(pk,nk);pk.prototype.Fd=function(a){this.I.push(a)};pk.prototype.od=function(a){D(this.I,a)};pk.prototype.forEach=function(a,b){for(var c=0;c<this.I.length&&a.call(b||u,this.I[c])!==m;c++);};pk.prototype.wj=function(a,b,c){for(a=0;a<this.I.length&&b.call(c||u,this.I[a],0)!==m;a++);};Q();function qk(a,b,c,d){mk.call(this,a,b,c,d,new pk);this.r=l}C(qk,mk);t=qk.prototype;t.Ck=da("r");t.gb=function(a){qk.a.gb.call(this,a);a instanceof tj&&this.ac(a.x,a.y,a.L,a.data)};t.update=function(a){M("client var = "+T(this).ii);Zh(this,2,a+1)};t.B=function(a,b,c){this.Ek.wj(b,function(d,e){d.B(a,b,e,c)})};
t.ac=function(a,b,c,d){var e=this.r;if(d&&!e.Aa.da[d>>8])M("unknown block type",d);else{var f=e.ac(a,b,c,d);if(f!=d&&(d=(d?d:f)>>8))if(d=(e=e.Aa.da[d])?e.th.Xm:l)if(e=rk,e[0]=a,e[1]=b,e[2]=c,a=this.ja.Mf.Yg,!a.e.Va.Wa&&(b=a.bi.blocks)&&100>Math.sqrt(Qe(a.e.oa.listener.Wb,e)))(a=Sd(b,d,Bd))&&a.setPosition(e)}};var rk=R();function sk(a,b){var c=b||Jj(tk,this);Y.call(this,a,c)}C(sk,Y);function tk(){};function uk(a,b){var c=b||Jj(vk,this);sk.call(this,a,c);this.ii=0;this.Gp=X(c,wk)}C(uk,sk);var wk=W++;uk.prototype.Un=p("ii");uk.prototype.yp=function(a){this.ii!=a&&(this.ii=a,Z(this,this.Gp))};function vk(a){a.push(new yj(wk,0,uk.prototype.Un,uk.prototype.yp))};function xk(a,b,c,d){lj.call(this,a,b,c,d);this.ha=1;this.No=i;this.Id=this.Hd=0;this.Ya=1E-4;this.Mg=this.Zb=this.xa=0;this.yj=i}C(xk,lj);var yk=1/140*Math.PI,zk=85*Math.PI/180;
xk.prototype.Xb=function(a,b,c){if(!this.Xd())return i;var d=b.G;if(!(0>=a.time)){var e;e=b.T;var f=0;87 in e.h&&(f|=32);83 in e.h&&(f|=16);65 in e.h&&(f|=2);68 in e.h&&(f|=1);81 in e.h&&(f|=4);90 in e.h&&(f|=8);32 in e.h&&(f|=128);e=f;var h=b.T,f=b.G;37 in h.h&&(this.Ya+=yk);39 in h.h&&(this.Ya-=yk);38 in h.h&&(this.xa+=yk);40 in h.h&&(this.xa-=yk);219 in h.h&&(this.Zb+=yk);221 in h.h&&(this.Zb-=yk);if(f.S||f.o&1){var j=f.S?0.2:0.25,h=f.qc*j,f=f.rc*j;this.No?(this.Hd=(this.Hd+h)/2,this.Id=(this.Id+
f)/2,0.01>Math.abs(this.Hd)&&(this.Hd=0),0.01>Math.abs(this.Id)&&(this.Id=0)):(this.Hd=h,this.Id=f);f=this.Id*this.ha;this.Ya-=this.Hd*this.ha*yk;this.xa-=f*yk}f=b.T;b=b.G;h=0;69 in f.F?h|=6:69 in f.h?h|=2:69 in f.de&&(h|=8);var j=2,k=4,n=8;f.ctrlKey&&(j=16,k=32,n=64);b.S?(b.Na&1?(h|=k,h|=j):b.o&1?h|=j:b.pa&1&&(h|=n),b.Na&4?(h|=32,h|=16):b.o&4?h|=16:b.pa&4&&(h|=64)):(b.pa&1&&(f.ctrlKey?(this.Mg=Number.MAX_VALUE,h|=k,h|=j,h|=n):4>this.Mg&&(h|=k,h|=j,h|=n)),b.pa&4&&(h|=32,h|=16,h|=64),this.Mg=b.o?this.Mg+
(Math.abs(b.qc)+Math.abs(b.rc)):0);f=h;this.yj||(this.xa=Math.max(-zk,Math.min(zk,this.xa)),this.Zb=0);b=this.Eg(65);b.setTime(a.time);b.li=(1E3*a.ki|0)/1E3;b.oi=e;b.xb=f;a=this.xa;e=this.Zb;b.Ya=32767*(180*this.Ya/Math.PI%360/360)|0;b.xa=32767*(180*a/Math.PI%360/360)|0;b.Zb=32767*(180*e/Math.PI%360/360)|0;f&&!d.S&&(a=d.clientX/c.width,c=d.clientY/c.height,b.xb|=1,b.Sh=65535*a|0,b.Th=65535*c|0);this.ja.Dc.ze(b)}return i};function Ak(a,b){var c=b||Jj(Bk,this);Y.call(this,a,c)}C(Ak,Y);function Bk(){};function Ck(a,b){var c=b||Jj(Dk,this);Ak.call(this,a,c);this.Ff=0;this.Ah=g;this.Wo=X(c,Ek)}C(Ck,Ak);var Ek=W++;Ck.prototype.Qn=p("Ff");Ck.prototype.xp=function(a){this.Ff!=a&&(this.Ff=a,Z(this,this.Wo),this.Ah=g)};function Dk(a){a.push(new Gj(Ek,0,Ck.prototype.Qn,Ck.prototype.xp))};function Fk(a,b){var c=b||Jj(Gk,this);Rj.call(this,a,c)}C(Fk,Rj);function Gk(a){Sj(a)};function Hk(a,b){var c=b||Jj(Ik,this);Fk.call(this,a,c);this.Ui=0;this.en=X(c,Jk)}C(Hk,Fk);var Jk=W++;Hk.prototype.bf=p("Ui");Hk.prototype.zk=function(a){this.Ui!=a&&(this.Ui=a,Z(this,this.en))};function Ik(a){Sj(a);a.push(new xj(Jk,0,Hk.prototype.bf,Hk.prototype.zk))};function Kk(a,b,c,d){Ni.call(this,a,b,c,d)}C(Kk,kj);function Lk(a,b){var c=b||Jj(Mk,this);Fk.call(this,a,c)}C(Lk,Fk);function Mk(a){Sj(a)};function Nk(a,b,c){this.Lc=a;this.zn=b;this.Dp=c;this.td=[]}Nk.prototype.aj=function(a,b,c){return new this.zn(a,this,b,c)};function Th(a,b){if(a.td.length){var c=a.td.pop();c.reset(b);return c}return new a.Dp(b)};function Ok(a,b){A(b)?Pk(a,g,b):Xa(b,ra(Pk,a))}function Pk(a,b,c){var d;a:if(d=String(c).replace(/\-([a-z])/g,function(a,b){return b.toUpperCase()}),a.style[d]===g){var e=vb?"Webkit":ub?"Moz":F?"ms":tb?"O":l,f=A(g)?"undefined".replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"):"\\s";c=c.replace(RegExp("(^"+(f?"|["+f+"]+":"")+")([a-z])","g"),function(a,b,c){return b+c.toUpperCase()});e+=c;if(a.style[e]!==g){d=e;break a}}d&&(a.style[d]=b)}
function Qk(a){var b=a.offsetWidth,c=a.offsetHeight,d=vb&&!b&&!c;return(!x(b)||d)&&a.getBoundingClientRect?(b=a.getBoundingClientRect(),F&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop),new Fd(b.right-b.left,b.bottom-b.top)):new Fd(b,c)}var Rk=ub?"MozUserSelect":vb?"WebkitUserSelect":l;
function Sk(a){var b=a.getElementsByTagName("*");if(Rk){var c="none";a.style[Rk]=c;if(b){a=0;for(var d;d=b[a];a++)d.style[Rk]=c}}else if(F||tb)if(c="on",a.setAttribute("unselectable",c),b)for(a=0;d=b[a];a++)d.setAttribute("unselectable",c)};function Tk(a,b){G.call(this);this.He=b;this.v=a.v;this.$=a.$;this.J=a.J;this.Hk=new Of(this.J.g,this.J.fi);H(this,this.Hk);this.Hk.restore();this.hasFocus=m;this.Qa=[];var c=a.d,d=c.createElement("DIV");Ok(d,{position:"absolute",left:"10px",bottom:"10px",width:"50%",display:"none"});c=c.createElement("INPUT");c.type="text";Ok(c,{"font-family":"monospace-8bit","font-size":"1em",border:"1px solid black","background-color":"#EEE",color:"#000",width:"100%",padding:"3px"});d.appendChild(c);a.z.Ga.parentNode.appendChild(d);
this.Ol=d;this.ji=c;this.R=new Ic(this);H(this,this.R);this.R.listen(c,"keydown",this.Gj)}C(Tk,G);t=Tk.prototype;t.Gj=function(a){switch(a.keyCode){case 27:Uk(this);a.preventDefault();a.stopPropagation();break;case 13:var b=va(ua(xa(this.ji.value)));b.length&&this.He.postMessage("main",b);Uk(this);a.preventDefault();a.stopPropagation()}};function Uk(a){a.ji.value="";a.ji.blur();Ok(a.Ol,{display:"none"});a.v.fa(i);a.v.Fa.focus()}
t.Xb=function(a,b){return 84 in b.T.F?(Ok(this.Ol,{display:""}),this.v.fa(m),u.setTimeout(B(function(){this.ji.focus()},this),10),this.v.T&&this.v.T.reset(),i):m};t.update=function(){var a=this.He.Gb();if(a)for(var b=0;b<a.length;b++){var c=a[b];switch(c.type){case 2:this.log(c.userName+": "+c.value)}}};
t.B=function(a,b,c){var d=this.J.font;if(!(2>=arguments.length)||this.Qa.length){var e=this.Hk;e.clear();for(var f=ec(),h=0;h<this.Qa.length;h++){var j=this.Qa[h];0==j.timestamp?j.timestamp=f:15E3<f-j.timestamp&&(this.Qa.splice(h,1),h--)}f=0;for(h=2;h<arguments.length;h++)arguments[h]&&(j=we(d,e,arguments[h],4294967295,f),f+=j[1]+2);for(var k=this.Qa.length,h=0;h<k;h++)j=this.Qa[h],j=we(d,e,j.value,j.color,f),f+=j[1]+2;h=Vk;Ve(h,2,2,1,0,10,40,0,1);cg(this.J,d.Ni);h[12]+=2;h[13]+=2;e.pc(b.Bf,h,Wk);
h[12]-=2;h[13]-=2;e.pc(b.Bf,h)}};t.log=function(a){var b=new Date,c=String(b.getHours());2>c.length&&(c="0"+c);var d=String(b.getMinutes());2>d.length&&(d="0"+d);b=String(b.getSeconds());2>b.length&&(b="0"+b);c="["+[c,d,b].join(":")+"] ";for(d=0;d<arguments.length;d++)c+=arguments[d],d<arguments.length-1&&(c+=" ");this.add(c);M(c)};t.add=function(a,b){this.Qa.push(new Xk(a,b||4294967295))};var Vk=Te(),Wk=he(0.5,0.5,0.5,1);function Xk(a,b){this.timestamp=0;this.value=a;this.color=b};function Yk(a,b){G.call(this);this.K=l;this.zo=a;this.p=b;this.En=this.Za=i}C(Yk,G);t=Yk.prototype;t.b=function(){this.Rb();Yk.a.b.call(this)};t.Ql=p("Za");t.setActive=da("Za");t.close=function(){Zk(this.K)};t.ra=z;t.Rb=z;t.update=z;t.B=z;var $k={},al={},bl={};function cl(a,b,c){c=c||Cd||(Cd=new Ld);a=a(b||dl,g,g);a=la(a)?m&&(a.Bg===$k||a.Bg===al)?a.content:"zSoyz":String(a);b=c.P;c=b.createElement("div");F?(c.innerHTML="<br>"+a,c.removeChild(c.firstChild)):c.innerHTML=a;if(1==c.childNodes.length)c=c.removeChild(c.firstChild);else{for(a=b.createDocumentFragment();c.firstChild;)a.appendChild(c.firstChild);c=a}return c}var dl={};function el(a,b,c,d,e){Yk.call(this,a,8);this.d=b;this.parentElement=c;this.Q=new Ic(this);H(this,this.Q);this.Lj=this.d.createElement("DIV");this.Lj.className="a";this.root=cl(d,e,this.d);this.Qb=new rf(this.close,this)}C(el,Yk);
el.prototype.ra=function(){el.a.ra.call(this);this.d.appendChild(this.parentElement,this.Lj);this.d.appendChild(this.parentElement,this.root);var a=Gd("v",this.root||this.d.P);Ha(a,function(a){var c=a.getAttribute("data-id"),d;d=a.className;d=A(d)&&d.match(/\S+/g)||[];0<=Ga(d,"x")&&a.focus();this.Q.listen(a,"click",function(){this.cl(c);this.close();this.Qb.w(c)})},this)};el.prototype.Rb=function(){Lc(this.Q);this.d.removeNode(this.root);this.d.removeNode(this.Lj);this.root=l;el.a.Rb.call(this)};
el.prototype.cl=z;F&&Ib(8);function $(a,b){a!=l&&this.append.apply(this,arguments)}t=$.prototype;t.Ma="";t.set=function(a){this.Ma=""+a};t.append=function(a,b,c){this.Ma+=a;if(b!=l)for(var d=1;d<arguments.length;d++)this.Ma+=arguments[d];return this};t.clear=function(){this.Ma=""};t.toString=p("Ma");function fl(a,b){function c(){}c.prototype=a;var d=new c,e;for(e in b)d[e]=b[e];return d}function gl(a){return a&&a.Bg&&a.Bg===$k?a.content:String(a).replace(hl,il)}function jl(a){return a&&a.Bg===bl?"zSoyz":String(a)}var kl={"\x00":"&#0;",'"':"&quot;","&":"&amp;","'":"&#39;","<":"&lt;",">":"&gt;","\t":"&#9;","\n":"&#10;","\x0B":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;","-":"&#45;","/":"&#47;","=":"&#61;","`":"&#96;","\u0085":"&#133;","\u00a0":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};
function il(a){return kl[a]}var hl=/[\x00\x22\x26\x27\x3c\x3e]/g;function ll(a,b){var c=b||new $,d=new $;(d||new $).append('<div class="',"r",'">',gl(a.Zd),"</div>");(d||new $).append('<div class="',"t",'">',jl(a.body),"</div>");(d||new $).append('<div class="',"u",'">',a.o?jl(a.o):"","</div>");d=fl(a,{un:d.toString()});(c||new $).append('<div class="',"p",'"><div class="',"q",'">',jl(d.un),"</div></div>")}function ml(a,b){(b||new $).append('<div class="',"v",a.wc?" x":"",'" data-id="',gl(a.id),'"><a class="',"w",'">',gl(a.label),"</a></div>")}
function nl(a,b){var c=b||new $;ml(fl(a,{id:"close",label:"Close"}),c)}function ol(a){a=a||new $;ml(fl({wc:i},{id:"reload",label:"Reload"}),a)};function pl(a,b){var c=b||new $,d="Error in "+gl(a.location),e=new $;ol(e);nl({wc:m},e);ll(fl(a,{Zd:d,body:gl(a.message)+"<br/>"+gl(a.an),o:e.toString()}),c);return b?"":c.toString()}function ql(a,b){var c=b||new $,d="Trying to connect to "+gl(a.op);ll(fl(a,{Zd:"Connecting...",body:d}),c);return b?"":c.toString()}
function rl(a,b){var c=b||new $,d=new $;switch(a.reason){case 2:d.append("Version mismatch - reload and try again.");break;case 3:d.append("Invalid/broken packet.");break;case 4:d.append("Access denied.");break;case 6:d.append("Banned by an administrator! Go away!");break;case 7:d.append("Server is full. Try again later.");break;default:d.append("Unable to contact the server or a timeout occurred while connecting. Check your network settings and try again, or contact the server admin.")}var e=new $;
ol(e);nl({wc:m},e);ll(fl(a,{Zd:"Connection Failed",body:d.toString(),o:e.toString()}),c);return b?"":c.toString()}
function sl(a,b){var c=b||new $,d=new $;switch(a.reason){case 1:d.append("Timeout while communicating with the server. Check your connection and try again.");break;case 2:d.append("Version mismatch - reload and try again.");break;case 3:d.append("Invalid/broken packet.");break;case 4:d.append("Access denied.");break;case 5:d.append("Kicked by an administrator!");break;case 6:d.append("Banned by an administrator!");break;case 7:d.append("Server is full. Try again later.");break;default:d.append("Whoops.")}var e=
new $;switch(a.reason){case 4:case 5:case 6:nl({wc:i},e);break;default:ol(e),nl({wc:m},e)}ll(fl(a,{Zd:"Connection Lost",body:d.toString(),o:e.toString()}),c);return b?"":c.toString()};function tl(a,b,c,d){el.call(this,"",a,b,c,d)}C(tl,el);function ul(a,b,c,d,e){b=new tl(a.d,b,pl,{location:c,message:d,an:e});vl(a,b);return b.Qb};function wl(a){this.v=a;this.G=this.T=l}wl.prototype.Gb=function(){this.T=this.v.T?this.v.T.Gb():l;this.G=this.v.G?this.v.G.Gb():l};wl.prototype.reset=function(){this.v.Ua();this.G=this.T=l};function xl(a,b,c,d,e,f){this.gq=a;this.type=b;this.Kq=c;this.userName=d;this.timestamp=e;this.value=f||l};function yl(a){G.call(this);this.Ba=a;this.Ka=[];this.sj=[]}C(yl,G);yl.prototype.Ae=function(a){if(0<=Ga(this.Ka,a))return l;this.Ka.push(a);a=new xl(this,0,a.j,a.info.O,sa());this.sj.push(a);return a};yl.prototype.Kh=function(a){return D(this.Ka,a)?(a=new xl(this,1,a.j,a.info.O,sa()),this.sj.push(a),a):l};yl.prototype.postMessage=function(a,b){if(!(0<=Ga(this.Ka,a)))return l;var c=new xl(this,2,a.j,a.info.O,sa(),b);this.sj.push(c);return c};function zl(a){G.call(this);this.X=a;this.Vc={};this.ge=[];this.Yh(a.Sa)}C(zl,G);t=zl.prototype;t.b=function(){Xa(this.Vc,K);this.Vc={};zl.a.b.call(this)};t.Yh=z;function Al(a,b,c){var d=a.Vc[b];!d&&c&&(d=new yl(b),a.Vc[b]=d);return d}t.Gb=function(){if(this.ge.length){var a=this.ge;this.ge=[];return a}return l};t.tl=z;t.yl=z;t.Lm=z;t.Mm=function(a){Xa(this.Vc,function(b){b.Kh(a)})};t.Nm=z;function Bl(){this.Pg="";this.name="Server";this.location="us";this.Bj="unknown";this.Cj="0";this.$j=32;this.Fh={}}Bl.prototype.q=function(){var a=new Bl;a.Pg=this.Pg;a.name=this.name;a.location=this.location;a.Bj=this.Bj;a.Cj=this.Cj;a.$j=this.$j;a.Fh=bb(this.Fh);return a};Bl.prototype.toString=ea("[server]");function Cl(){this.ua=this.gc=0}var Dl=new Cl;function El(a,b){var c=b||new Di;c.gg=a.s();c.fg=a.s();c.O=a.s();return c}function Fl(a,b){a.ba(b.gg);a.ba(b.fg);a.ba(b.O);return i}function Gl(a,b){var c=b||new Fi;c.j=a.s();c.gc=Jh(a);c.p=a.aa();var d;if(!(d=!El(a,c.info)))d=c.cg||new zi,d.type=a.s(),d.platform=a.s(),d.ie=a.s(),d.Nd=a.s(),d=!d;return d?l:c}var Hl=new function(){this.ua=this.Ie=this.Of=0};
function Il(a,b,c){var d=jg();Hl.Of=a;Hl.Ie=b;Hl.ua=c;gg(d,1);d.Lb(Hl.Of);d.Lb(Hl.Ie);d.Lb(Hl.ua);return d.finish()}var Jl=new function(){this.Ie=this.Of=0;this.Xf=[]},Kl=new function(){this.info=new Bl;this.Ka=[]};function Ll(){this.Ki=this.Gk=0;this.Oc=new Fi}var Ml=new Ll,Nl=new Ll;
function Ol(a,b){var c=jg();Nl.Gk=3;Nl.Ki=a;Nl.Oc=b;gg(c,4);hg(c,Nl.Gk);hg(c,Nl.Ki);var d=Nl.Oc;c.ba(d.j);gg(c,d.gc);c.Lb(d.p);var e;if(!(e=!Fl(c,d.info)))d=d.cg,c.ba(d.type),c.ba(d.platform),c.ba(d.ie),c.ba(d.Nd),e=m;return e?(c.offset=0,l):c.finish()}function Pl(){this.reason=0}var Ql=new Pl,Rl=new Pl;function Sl(){var a=jg();Rl.reason=0;gg(a,5);a.Lb(Rl.reason);return a.finish()}var Tl=new function(){this.Oc=new Fi},Ul=new function(){this.j="";this.reason=0};
function Vl(){this.j="";this.info=new Di}var Wl=new Vl,Xl=new Vl;function Yl(a,b){var c=jg();Xl.j=a;Xl.info=b;gg(c,8);c.ba(Xl.j);return!Fl(c,Xl.info)?(c.offset=0,l):c.finish()}function Zl(){this.Ba=this.j="";this.timestamp=0;this.Pc=[]}var $l=new Zl,am=new Zl;function bm(a,b){var c=sa(),d=jg();am.j=a;am.Ba=b;am.timestamp=c;am.Pc=[];gg(d,20);d.ba(am.j);d.ba(am.Ba);d.Lb(am.timestamp);d.Lb(am.Pc.length);for(c=0;c<am.Pc.length;c++)d.ba(am.Pc[c]);return d.finish()}
var cm=new function(){this.Ba=this.j="";this.timestamp=0};function dm(){this.Ba=this.j="";this.timestamp=0;this.message=""}var em=new dm,fm=new dm;function gm(a,b,c,d){var e=jg();fm.j=a;fm.Ba=b;fm.timestamp=c;fm.message=d;gg(e,22);e.ba(fm.j);e.ba(fm.Ba);e.Lb(fm.timestamp);e.ba(fm.message);return e.finish()};function hm(a){zl.call(this,a);this.lc=a}C(hm,zl);t=hm.prototype;t.join=function(a){this.lc.send(bm(this.lc.id,a))};t.postMessage=function(a,b){this.lc.send(gm(this.lc.id,a,sa(),b))};t.Yh=function(a){a.W(20,this.Zn,this);a.W(21,this.$n,this);a.W(22,this.ao,this)};
t.Zn=function(a,b,c){$l.j=c.s();$l.Ba=c.s();$l.timestamp=c.aa();a=c.aa();$l.Pc.length=a;for(b=0;b<a;b++)$l.Pc[b]=c.s();if(!$l)return m;c=this.lc.Kb[$l.j]||l;if(!c)return i;a=Al(this,$l.Ba,i);if(!a)return i;for(b=0;b<$l.Pc.length;b++){var d=this.lc.Kb[$l.Pc[b]]||l;d&&a.Ae(d)}(c=a.Ae(c))&&this.ge.push(c);return i};t.$n=function(a,b,c){cm.j=c.s();cm.Ba=c.s();cm.timestamp=c.aa();if(!cm)return m;a=this.lc.Kb[cm.j]||l;if(!a)return i;b=Al(this,cm.Ba,m);if(!b)return i;(a=b.Kh(a))&&this.ge.push(a);return i};
t.ao=function(a,b,c){em.j=c.s();em.Ba=c.s();em.timestamp=c.aa();em.message=c.s();if(!em)return m;a=this.lc.Kb[em.j]||l;if(!a)return i;b=Al(this,em.Ba,m);if(!b)return i;(a=b.postMessage(a,em.message))&&this.ge.push(a);return i};function im(a,b){G.call(this);a.U=b.U;this.e=a;this.X=b;this.X.Ha.push(this);this.Yh(b.Sa);this.He=new hm(this.X);this.X.Ha.push(this.He);this.r=new Fh;H(this,this.r);this.cc=new si(a,this.X);H(this,this.cc);var c=this.cc,d=new ii(64,Zi,0);c.mc[d.Lc]=d;d=new ii(65,ej,2);c.mc[d.Lc]=d;d=new ii(66,tj,0);c.mc[d.Lc]=d;d=new ii(67,bj,cj);c.mc[d.Lc]=d;c=this.cc;ki(c,new Nk(64,sj,jk));ki(c,new Nk(65,qk,uk));ki(c,new Nk(66,$i,Zj));ki(c,new Nk(67,pj,ck));ki(c,new Nk(68,xk,Ck));ki(c,new Nk(69,Oi,Wj));ki(c,new Nk(70,
dj,ak));ki(c,new Nk(71,Kk,Lk));ki(c,new Nk(72,oj,Hk));this.cc.Zf.push(this);this.of=new wl(this.e.v);this.Nf=new Qi;this.Sm=[];this.bb=new Tk(this.e,this.He);H(this,this.bb);this.bi={};this.Gc=l;this.pk=[];this.fe=l;this.am=new ih(this.e.$a,this.e.$);H(this,this.am);this.X.Ia.bc=this.e.nh.bc;this.bb.log("wsad to move");this.bb.log("left click to place blocks, right click to remove");this.X.be()||this.bb.log("t to chat")}C(im,G);t=im.prototype;
t.b=function(){var a=this.e.oa,b;for(b in this.bi){var c=this.bi[b];D(a.hg,c);K(c)}im.a.b.call(this)};t.Bb=p("cc");t.hf=z;t.load=function(){var a=new rf;this.rh("blocks",new Tg(this.e.$a,this.e.oa.context));a.w(l);return a};t.handleError=function(a,b){M("Error: "+a,b);this.bb.log("Error: "+a,b);this.X.disconnect();jm(this.e);km(this.e);var c=ul(this.e.K,this.e.z.Ga,"game",a,b);N(c,function(a){"reload"==a?window.location.reload(m):window.location.href="http://google.com"},l,g)};
t.uk=function(){var a=this.e.Va,b=vi(this.X).info.q();b.O=a.userName;a=this.X;a.send(Yl(a.id,b))};t.update=function(a){if(2!=this.X.state)if(this.X.Gb(2),2==this.X.state){var b=this.X.Od;this.bb.log("Disconnected: "+wi(b));jm(this.e);km(this.e);a=this.e.K;b=new tl(a.d,this.e.z.Ga,sl,{reason:b});vl(a,b);N(b.Qb,function(a){"reload"==a?window.location.reload(m):window.location.href="http://google.com"},l,g)}else this.r.update(a),this.cc.update(a),this.bb.update(a)};
t.B=function(a){if(2!=this.X.state){Ri(this.Nf,this.e.z.yc());Mi(this.Nf);this.of.Gb();this.bb.Xb(a,this.of)||this.Xb(a,this.of);var b=a.time;a.time-=0.5;ui(this.cc,a.time);var c=this.e.$;c.Ri()&&(this.Si(a),this.mj(a),this.lj(a,this.of),c.end());a.time=b;this.of.reset()}};t.Xb=ea(m);t.Si=ca();t.mj=ca();t.lj=function(a){var b="Sim: "+this.cc.t.$g();this.cc.t.update(a.time);var c=this.r.Fj(),d=this.$g();this.bb.B(a,this.Nf,b,c,d)};t.$g=ea(l);t.rh=function(a,b){this.bi[a]=b;this.e.oa.rh(b)};t.ea=function(){this.e.ea()};
t.oj=function(a){if(a instanceof sj)this.Gc=a,this.Gc.Yg=this;else if(a instanceof pj){var b=a.dd();b.data=a;this.pk.push(a);b==vi(this.X)&&(this.fe=a,this.Gc.fe=a);this.hf()}};t.qj=function(a){a instanceof pj&&(D(this.pk,a),this.hf())};t.Yh=function(a){a.W(73,this.bo,this);a.W(74,this.po,this)};t.Lm=function(a){var b=this.e;b.Va.Wa||Sd(b.ig,"player_join",Ad);this.bb.log(a.info.O+" ("+a.j+") connected on "+a.cg.toString())};
t.Mm=function(a){jm(this.e);this.bb.log(a.info.O+" ("+a.j+") disconnected:",wi(a.Od))};t.Nm=function(){this.hf()};
t.bo=function(a,b,c){kg.x=Ih(c);kg.y=Ih(c);kg.L=Ih(c);if(!kg)return m;a=this.r;Oh||(Oh=new Nh);a:switch(a=a.Ea(kg.x,kg.y,kg.L),Jh(c)){case 1:b:{b=Ih(c);var d=Ih(c),e=Ih(c);a.x=b;a.y=d;a.L=e;var f=a.Nb,h=b+16,j=d+128,k=e+16;S(f.min,b,d,e);S(f.max,h,j,k);d=Jh(c);b=a.ic;switch(d){default:case 0:c.aa();d=0;for(e=c.offset;32768>d;d++,e+=2)b[d]=c.buffer[e+1]<<8|c.buffer[e];break;case 1:f=c.aa();d=c.buffer;e=c.offset;c=0;e=e?e:0;f=f?f:d.length;for(h=e;h<e+f;)if(j=d[h++],255==j)for(var j=d[h++]<<8|d[h++],
k=d[h++]<<8|d[h++],n=0;n<j;n++)b[c++]=k;else b[c++]=j<<8|d[h++];break;case 2:a=m;break b}a.Kg=m;a.state=2;a.map.gk(a);a=i}break a;default:a=m}return!a?m:i};t.po=function(){return!lg?m:i};t.tl=z;t.yl=z;function lm(a,b,c){G.call(this);this.e=a;this.d=a.d;a=a.z.Ga;Ed?a=a.parentElement:(a=a.parentNode,a=la(a)&&1==a.nodeType?a:l);this.parentElement=a;this.Q=new Ic(this);H(this,this.Q);this.root=cl(b,c,this.d)}C(lm,G);lm.prototype.b=function(){this.Rb();lm.a.b.call(this)};lm.prototype.ra=function(){this.d.appendChild(this.parentElement,this.root)};lm.prototype.Rb=function(){Lc(this.Q);this.d.removeNode(this.root)};lm.prototype.Pf=function(a){this.root.style.display=a?"":"none"};function mm(a,b){var c=b||new $;c.append('<div class="',"i",'">');nm({id:"fullscreen",label:"Fullscreen"},c);nm({id:"settings",label:"Settings"},c);nm({id:"help",label:"Help"},c);c.append("</div>");return b?"":c.toString()}function nm(a,b){(b||new $).append('<div class="',"j",'" data-id="',gl(a.id),'"><a class="',"blkMenubarButtonLabel",'">',gl(a.label),"</a></div>")};function om(a){lm.call(this,a,mm,{});Sk(this.root)}C(om,lm);om.prototype.ra=function(){om.a.ra.call(this);var a=Gd("j",this.root||this.d.P);Ha(a,function(a){var c=a.getAttribute("data-id");this.Q.listen(a,"click",function(){switch(c){case "fullscreen":this.e.Hm();break;case "settings":this.e.ea();pm(this.e);break;case "help":this.e.ea(),qm(this.e)}})},this)};function rm(a,b){var c=b||new $;c.append('<div class="',"k",'"><div class="',"blkPlayerListingHeader",'"></div><div class="',"blkPlayerListingBody",'"></div><div class="',"blkPlayerListingFooter",'"></div></div>');return b?"":c.toString()}
function sm(a,b){var c=b||new $;c.append('<div class="',"l",'"><div class="',"m"," ",30>a.ua?"h":60>a.ua?"g":100>a.ua?"f":150>a.ua?"e":"d",'"></div><div class="',"n",'">',gl(a.O),' <span class="',"o",'"> (',gl(a.j),")</span></div></div>");return b?"":c.toString()};function tm(a){lm.call(this,a.e,rm,{});Sk(this.root);this.Wc=a;this.il=Md(this.d,"blkPlayerListingBody",this.root);this.Ac=u.setInterval(B(function(){this.refresh()},this),3E3);this.refresh()}C(tm,lm);tm.prototype.b=function(){u.clearInterval(this.Ac);tm.a.b.call(this)};
tm.prototype.refresh=function(){Jd(this.il);for(var a=this.Wc.pk,b=0;b<a.length;b++)a[b]={index:b,value:a[b]};var c=function(a,b){var c=a.dd().info.O,d=b.dd().info.O,c=String(c).toLowerCase(),d=String(d).toLowerCase();return c<d?-1:c==d?0:1}||Na;Ma(a,function(a,b){return c(a.value,b.value)||a.index-b.index});for(b=0;b<a.length;b++)a[b]=a[b].value;for(b=0;b<a.length;b++){var d=a[b].dd(),d=cl(sm,{j:d.j,O:d.info.O,ua:d.t.bl},this.d);this.il.appendChild(d)}};function um(a,b){im.call(this,a,b);this.di=new Of(this.e.J.g,this.e.J.fi);H(this,this.di);this.di.restore();var c=this.Bh=new tm(this);this.Sm.push(c);H(this,c);c.ra();this.X.be()&&this.Bh.Pf(m);c=this.Ko=new om(this.e);this.Sm.push(c);H(this,c);c.ra();this.cm=new pg(this.e.$a,this.e.oa.context);H(this,this.cm);this.e.uh.Xh(this.cm);this.Bi=l;this.ok=new Qi;this.xe=l}C(um,im);t=um.prototype;
t.oj=function(a){um.a.oj.call(this,a);a instanceof qk?(this.Bi=a,this.Bi.Ck(this.r)):a instanceof $i&&a.nm==vi(this.X)&&(a.Ck(this.r),this.xe=new Pg(this.e.J,this.r,a.wb),H(this,this.xe))};t.qj=function(a){um.a.qj.call(this,a)};t.hf=function(){um.a.hf.call(this);this.Bh.refresh()};t.update=function(a){um.a.update.call(this,a);this.e.oa.listener.update(this.ok.Oj)};
t.Xb=function(a,b){if(um.a.Xb.call(this,a,b))return i;var c=b.T;if(79 in c.F)return this.e.ea(),pm(this.e),i;if(191 in c.F)return this.e.ea(),qm(this.e),i;if(9 in c.F)return this.e.ea(),c=this.Bh,c.root.style.display="none"==c.root.style.display?"":"none",i;77 in c.F&&(this.e.ea(),c=this.e.uh,c.Pj?c.stop():c.qm());var c=this.ok,d=this.fe;if(d){var e=mj(T(d)),f=c.width/c.height;if(f!=e.Mb){e.Mb=f;var h=e.Eg(64);h.dg=f;e.ja.Dc.ze(h)}qj(d).Xb(a,b);if(!rj(T(d)).Xb(a,b,c))return this.handleError("Input backup"),
i}return m};t.Si=function(a){um.a.Si.call(this,a);this.e.J.reset(this.r.Zc.Dm,i)};t.mj=function(a){um.a.mj.call(this,a);var b=this.e.J.vm,c=this.ok,d=this.e.z,e=this.fe;e?(e=mj(T(e)),Si(c,16*e.wb.Z+16),Ri(c,d.yc()),e.Fe(c)):(Si(c,100),Ri(c,d.yc()));this.xe&&this.xe.B(a,c);this.Bi&&this.Bi.B(a,c,b);b.flush(c)};
t.lj=function(a,b){um.a.lj.call(this,a,b);var c=this.e.J,d=this.Nf,e=c.Pk,f=this.di;f.clear();var h=vm;if(b.G.S){var j=d.width/2/2-8,k=d.height/2/2-8;pe(e,11,h);f.add(h[0],h[1],h[2]-h[0],h[3]-h[1],4294967295,j,k,16,16)}h=wm;Ve(h,2,2,1,0,0,0,0,1);cg(c,e);f.pc(d.Bf,h);if(c=this.fe){var f=qj(c),n=Pi(f.Xd()),c=this.e.J,d=this.Nf,q=c.La,r=this.di;r.clear();for(var v=0,e=17*f.M.length,s=vm,h=function(a){var b=a.bf();pe(q,b.$k,s);r.add(s[0],s[1],s[2]-s[0],s[3]-s[1],a==n?4294967295:4286019447,v,0,16,16);
v+=17},j=0;j<f.M.length;j++)h.call(u,f.M[j]);f=wm;Ve(f,2,2,1,0,d.width/2-e,d.height-32-2,0,1);cg(c,q);r.pc(d.Bf,f)}};t.$g=function(){return this.xe?this.xe.Fj():l};var wm=Te(),vm=Q();function xm(a,b){Yk.call(this,"game-url",14);this.jb=a;this.z=a.z;this.Wc=new um(a,b);H(this,this.Wc)}C(xm,Yk);t=xm.prototype;t.ra=function(){xm.a.ra.call(this);N(this.Wc.load(),function(){this.z.Pf(i);ym(this.jb)},ca(),this)};t.Rb=function(){this.z.Pf(m);km(this.jb);xm.a.Rb.call(this)};t.uk=function(){this.Wc.uk()};t.update=function(a){xm.a.update.call(this,a);this.Wc.update(a)};t.B=function(a){xm.a.B.call(this,a);this.Wc.B(a)};function zm(a,b){var c=b||new $,d=new $;nl({wc:i},d);ll(fl(a,{Zd:"Help",body:'Conceptualized and coded by <a href="http://twitter.com/benvanik" target="_blank">@benvanik</a> as a 20% project at Google.<br/>Copyright Google, Inc 2012.<br/><br/><a href="index.html" target="_blank">More information</a>, <a href="https://www.github.com/benvanik/blk-game" target="_blank">source code</a>.<br/><br/><span class="C">Controls:</span><table class="D"><tr><td>Movement</td><td>WSAD</td></tr><tr><td>Place block</td><td>Left click</td></tr><tr><td>Remove block</td><td>Right-click, ctrl-click</td></tr><tr><td>Change block type</td><td>Number keys, mouse wheel</td></tr><tr><td>Chat</td><td>T</td></tr><tr><td>Start/stop music</td><td>M</td></tr><tr><td>Show player list</td><td>TAB</td></tr><tr><td>Toggle fullscreen</td><td>Alt-enter</td></tr><tr><td>Settings</td><td>O</td></tr><tr><td>Help</td><td>?</td></tr></table><br/>Use Chrome (or go fullscrene in Firefox) to get awesome FPS control goodness!',
o:d.toString()}),c);return b?"":c.toString()};function Am(a,b){el.call(this,"help",a,b,zm,{})}C(Am,el);function Bm(a,b){var c=b||new $;c.append('<div class="',"E",'"><div class="',"F",'"><div class="',"G",'">BLK, by <a href="http://twitter.com/benvanik" target="_blank">@benvanik</a></div><div class="',"H",'">TODO: some awesome logo or something<br/>',"Welcome to my 20% project hacky game tech demo thingie!",'<br/><a href="." target="_blank">',"More Information",'</a><br/><table class="',"I",'"><tr><td class="',"blkMainMenuSinglePlayerButton",'">',"Single-player",'</td><td class="',"blkMainMenuMultiPlayerButton",
'">',"Multi-player",'</td></tr></table></div><table class="',"J",'"><tr><td class="',"blkMainMenuSettingsButton",'">',"Settings",'</td><td class="',"blkMainMenuHelpButton",'">',"Help","</td></tr></table></div></div>");return b?"":c.toString()};function Cm(a,b){Yk.call(this,"",8);this.jb=a;this.fb=a.d;this.Uo=b;this.R=new Ic(this);H(this,this.R);this.Gc=cl(Bm,{},this.fb);this.Yd=this.fb.createElement("A");this.Yd.className="c";var c=this.Yd;if("textContent"in c)c.textContent="View on GitHub";else if(c.firstChild&&3==c.firstChild.nodeType){for(;c.lastChild!=c.firstChild;)c.removeChild(c.lastChild);c.firstChild.data="View on GitHub"}else Jd(c),c.appendChild(Kd(c).createTextNode("View on GitHub"));this.Yd.href="http://github.com/benvanik/blk-game";
this.Yd.target="_blank"}C(Cm,Yk);function Dm(a,b,c){b=Md(a.fb,b,a.Gc);a.R.listen(b,"click",c,m,a)}
Cm.prototype.ra=function(){Cm.a.ra.call(this);this.fb.P.body.appendChild(this.Yd);this.fb.appendChild(this.Uo,this.Gc);Dm(this,"blkMainMenuSinglePlayerButton",function(){this.jb.ea();Em(this.jb,"local://blk-0")});Dm(this,"blkMainMenuMultiPlayerButton",function(){this.jb.ea();Em(this.jb,"ws://localhost:1337")});Dm(this,"blkMainMenuSettingsButton",function(){this.jb.ea();pm(this.jb)});Dm(this,"blkMainMenuHelpButton",function(){this.jb.ea();qm(this.jb)})};
Cm.prototype.Rb=function(){this.fb.removeNode(this.Yd);Lc(this.R);this.fb.removeNode(this.Gc);this.Gc=l;Cm.a.Rb.call(this)};function Fm(a,b){var c=b||new $,d=new $,e=d||new $;ml(fl({wc:i},{id:"save",label:"Save"}),e);nl({wc:m},d);ll(fl(a,{Zd:"Settings",body:'<div class="K"><div class="blkSettingsLabel">Name:</div><div class="L"><input class="N blkSettingsNameValue" type="text"/></div></div><div class="K blkSettingsSensitivitySlider"><div class="blkSettingsLabel">Mouse:</div><div class="L"><div class="R T"><input type="checkbox" class="S"/>Mouse Lock</div><span class="M">Sensitivity: </span><input class="O" type="range" min="1" max="100" /><div class="P"></div> <div class="Q">reset</div></div></div>\x3c!--<div class="K blkSettingsDistanceSlider"><div class="blkSettingsLabel">View Distance:</div><div class="L"><input class="O" type="range" min="1" max="100" /><div class="P"></div> <div class="Q">reset</div></div></div>--\x3e<div class="K blkSettingsAudio"><div class="blkSettingsLabel">Audio:</div><div class="L"><div class="R blkSettingsSoundFx"><input type="checkbox" class="S"/>Sound FX</div><div class="R blkSettingsMusic"><input type="checkbox" class="S"/>Music</div></div></div>',
o:d.toString()}),c);return b?"":c.toString()};function Gm(a,b,c){el.call(this,"settings",a,b,Fm,{});this.Cm=c}C(Gm,el);Gm.prototype.ra=function(){Gm.a.ra.call(this);var a=this.Cm;Md(this.d,"blkSettingsNameValue",this.root).value=a.userName;Hm(this,"blkSettingsSensitivitySlider",100,50,50*a.ha,function(a){return Ea(a/50,2)});Im(this,"T",a.lb);Hm(this,"blkSettingsDistanceSlider",16,8,a.vb,function(a){return Ea(a)});Im(this,"blkSettingsSoundFx",!a.Wa);Im(this,"blkSettingsMusic",!a.Ub)};
function Hm(a,b,c,d,e,f){function h(){k.innerHTML=f(Number(j.value))}if(b=Md(a.d,b)){var j=Md(a.d,"O",b);if(j){j.min="1";j.max=String(c);j.value=String(e);var k=Md(a.d,"P",b);h();a.Q.listen(j,"change",h);c=Md(a.d,"Q",b);a.Q.listen(c,"click",function(){j.value=String(d);h()})}}}function Jm(a,b){var c=Md(a.d,b);if(c)return c=Md(a.d,"O",c),!c?g:Number(c.value)}
function Im(a,b,c){if(b=Md(a.d,b)){var d=Md(a.d,"S",b);d&&(Sk(b),d.checked=c,a.Q.listen(b,"click",function(a){a.target!=d&&(d.checked=!d.checked)}))}}function Km(a,b){var c=Md(a.d,b);if(c)return c=Md(a.d,"S",c),!c?g:c.checked}
Gm.prototype.cl=function(a){if("save"==a){a=this.Cm;var b=Md(this.d,"blkSettingsNameValue",this.root).value,b=Ei(b);a.userName=b;b=Jm(this,"blkSettingsSensitivitySlider");x(b)&&(a.ha=b/50);b=Km(this,"T");x(b)&&(a.lb=b);b=Jm(this,"blkSettingsDistanceSlider");x(b)&&(a.vb=b);b=Km(this,"blkSettingsSoundFx");x(b)&&(a.Wa=!b);b=Km(this,"blkSettingsMusic");x(b)&&(a.Ub=!b);a.save()}};function Lm(a,b){var c=b||new $;c.append('<div class="',"U",'"><div class="',"V",'">Loading...</div></div>');return b?"":c.toString()};function Mm(a,b){el.call(this,"",a,b,Lm,{})}C(Mm,el);function Nm(){this.Hp=this.ki=this.time=this.Sd=0}Nm.prototype.zc=function(a,b,c,d){this.Sd=a;this.time=b;this.ki=c;this.Hp=d};function Om(){this.Ip=ec();this.Je=this.ua=this.ib=0;this.Kl=m}function Pm(a){return(ec()-a.Ip)/1E3}function ti(a){return!a.Kl?0:Pm(a)+a.Je};function Qm(a,b){G.call(this);this.nh=a;this.U=b||new Om;this.Ke=[];this.eq=l}C(Qm,G);Qm.prototype.b=function(){jc(this.Ke);this.Ke.length=0;Qm.a.b.call(this)};Qm.prototype.getTime=function(){return ti(this.U)};function Rm(){this.ki=this.time=this.Sd=0;this.hasFocus=m}Rm.prototype.zc=function(a,b,c,d){this.Sd=a;this.time=b;this.ki=c;this.hasFocus=d};function Sm(a,b,c,d){G.call(this);this.R=new Ic(this);H(this,this.R);this.Vk=a;this.Yi=this.le=this.gj=l;if(!b){if(a=u.requestAnimationFrame||u.webkitRequestAnimationFrame||u.mozRequestAnimationFrame||u.oRequestAnimationFrame||u.msRequestAnimationFrame)this.le=a;if(a=u.cancelAnimationFrame||u.webkitCancelAnimationFrame||u.mozCancelAnimationFrame||u.oCancelAnimationFrame||u.msCancelAnimationFrame)this.Yi=a}this.rd=0;this.Ac=l;this.Qj=0;this.re=i;this.xj=d||0;this.Zh=l;c&&(this.R.listen(u,"blur",function(){this.re=
m}),this.R.listen(u,"focus",function(){this.re||(this.re=i,this.rd&&this.start(i))}))}C(Sm,G);Sm.prototype.b=function(){this.stop(i);this.gj=l;Sm.a.b.call(this)};Sm.prototype.hasFocus=p("re");
Sm.prototype.start=function(a){if(!a&&(this.rd++,1<this.rd))return;if(this.re){var b=this;this.Ac=this.le?this.le.call(u,function(){Tm(b)},this.gj):u.setTimeout(function(){Tm(b)},62.5)}this.Vk(ec());this.xj&&(b=this,this.Zh=u.setInterval(function(){var a=b;if(ec()-a.Qj>=a.xj&&a.rd){var d=ec();a.Qj=d;a.Vk(d)}},this.xj))};
Sm.prototype.stop=function(a){if(a||this.rd)a||this.rd--,this.rd||(a=this.Ac,this.Yi?this.Yi.call(u,a):this.le||u.clearTimeout(a),this.Ac=l,this.Zh!==l&&(u.clearInterval(this.Zh),this.Zh=l))};function Tm(a){if(a.Ac!==l){a.Ac=l;a.re&&(a.Ac=a.le?a.le.call(u,function(){Tm(a)},a.gj):u.setTimeout(function(){Tm(a)},16));var b=ec();a.Qj=b;a.Vk(b)}};function Um(a,b){Qm.call(this,a,b);this.Q=new Ic(this);H(this,this.Q);this.sf=Pm(this.U);this.Bn=i;this.Cn=0.01;this.te=0;this.Mp=new Rm;this.Lp=0;this.hp=new Nm;this.gp=0;var c=this;this.Kf=new Sm(function(){var a=Pm(c.U),b=a-c.sf;c.sf=a;0.25<b&&(b=0.25);c.te+=b;a=1;if(c.Bn){for(a=c.Cn;c.te>=a;){Vm(c,c.U.ib,a);var f=c.U;f.ib+=a;c.te-=a;if(!c.Sf)break}a=c.te/a}else Vm(c,c.U.ib,b),f=c.U,f.ib+=b;if(c.Kf.hasFocus()){var f=ti(c.U),h=c.hp;h.zc(c.gp++,f,b,a);c.B(h)}},g,g,500);H(this,this.Kf);this.Sf=m}
C(Um,Qm);function ym(a){a.Sf||(a.Sf=i,a.Kf.start())}function km(a){a.Sf&&(a.Sf=m,a.Kf.stop())}function Vm(a,b,c){var d=a.Mp;d.zc(a.Lp++,b,c,a.Kf.hasFocus());a.update(d)}Um.prototype.update=z;Um.prototype.B=z;function Wm(a,b){bi.call(this,a);this.d=b||l}C(Wm,bi);Wm.prototype.load=function(a){var b=new rf(function(){a.cancel()},this);a.load(b);return b};function Xm(a){G.call(this);this.context=a;this.Wb=R()}C(Xm,G);Xm.prototype.update=function(a){if(this.context){var b=this.context.listener;if(a){var c=Ym[0],d=Ym[1];S(c,0,0,0);$e(a,c,c);b.setPosition(c[0],c[1],c[2]);Me(this.Wb,c);S(c,0,0,1);af(a,c,c);S(d,0,1,0);af(a,d,d);b.setOrientation(-c[0],-c[1],-c[2],d[0],d[1],d[2])}else b.setPosition(0,0,0),b.setOrientation(0,0,1,0,1,0);b.setVelocity(0,0,0)}};var Ym=[R(),R()];function Zm(a,b){bi.call(this,a);this.d=b;this.context=l;u.webkitAudioContext?this.context=new window.webkitAudioContext:u.AudioContext&&(this.context=new window.AudioContext);this.listener=new Xm(this.context);H(this,this.listener);this.hg=[];this.ni=[]}C(Zm,bi);Zm.prototype.b=function(){Ha(this.hg,K);this.hg.length=0;Ha(this.ni,K);this.ni.length=0;Zm.a.b.call(this)};Zm.prototype.rh=function(a){this.hg.push(a);a.load()};function $m(a,b){G.call(this);this.$a=a;this.oa=b;this.Pj=this.lh=m;this.pb=this.yf=l}C($m,G);$m.prototype.b=function(){this.Xh(l);$m.a.b.call(this)};$m.prototype.Xh=function(a){if(a!=this.pb){if(this.pb){this.stop();var b=this.pb;D(this.oa.ni,b);K(b)}if(this.pb=a)a=this.pb,this.oa.ni.push(a),a.load(),this.lh||an(this,0)}};function an(a,b){var c=10+60*Math.random(),c=b+1E3*c;Oc.clearTimeout(a.yf);a.yf=Pc(a.qm,c,a)}
$m.prototype.qm=function(){if(!this.lh&&this.pb){this.stop();var a=l,b=this.pb,c=[],d;for(d in b.Vf)c.push(b.Vf[d]);c.length&&(a=c[0]);a&&(this.pb.play(a),this.Pj=i,an(this,a.duration))}};$m.prototype.stop=function(){this.pb&&(this.yf!==l&&(Oc.clearTimeout(this.yf),this.yf=l),og(this.pb),this.Pj=m)};var bn="fullscreen_changed_"+Hc++,cn="orientation_changed_"+Hc++;function dn(a){G.call(this);this.Cd=a||window;this.qh=zc(this.Cd,"resize",this.qo,m,this);this.dc=Id(this.Cd||window);if(vb&&pb||tb&&this.Cd.self!=this.Cd.top)this.zi=window.setInterval(B(this.rl,this),en)}C(dn,Nc);var fn={},en=500;t=dn.prototype;t.qh=l;t.Cd=l;t.dc=l;t.zi=l;t.yc=function(){return this.dc?this.dc.q():l};t.b=function(){dn.a.b.call(this);this.qh&&(Dc(this.qh),this.qh=l);this.zi&&(window.clearInterval(this.zi),this.zi=l);this.dc=this.Cd=l};t.qo=function(){this.rl()};
t.rl=function(){var a=Id(this.Cd||window);if(!(a==this.dc||(!a||!this.dc?0:a.width==this.dc.width&&a.height==this.dc.height)))this.dc=a,this.dispatchEvent("resize")};function gn(a,b){G.call(this);this.d=a;var c=a.P,d=c.body;this.parentElement=b||d;this.R=new Ic(this);H(this,this.R);d=a.createElement("DIV");Ok(d,{position:"absolute",left:0,top:0,right:0,bottom:0});a.appendChild(this.parentElement,d);var e=a.createElement("DIV");Ok(e,{position:"absolute",left:0,top:0,right:0,bottom:0});a.appendChild(d,e);this.Ga=d;this.canvas=new hn(a,e);H(this,this.canvas);this.Sl=i;this.kh=this.Td=m;this.orientation=jn;this.wq=u.devicePixelRatio||1;var e=a.P.parentWindow||a.P.defaultView||
window,f=ma(e),e=fn[f]=fn[f]||new dn(e);this.R.listen(e,"resize",function(){this.ee()});this.R.listen(a.P.body,"orientationchange",B(function(){this.orientation=window.orientation;this.ee();this.dispatchEvent(cn)},this));this.ee();if((this.Td=!(!d.requestFullScreen&&!d.mozRequestFullScreen&&!d.webkitRequestFullScreen))&&(c.fullScreenEnabled!==g||c.mozFullScreenEnabled!==g))this.Td=c.fullScreenEnabled||c.mozFullScreenEnabled;this.Td&&this.R.listen(c,["fullscreenchange","mozfullscreenchange","webkitfullscreenchange"],
function(){this.kh=!!c.fullScreenElement||c.mozFullScreen||c.webkitIsFullScreen;this.ee();this.dispatchEvent(bn)})}C(gn,Nc);var jn=0;gn.prototype.yc=function(){return this.canvas.size};gn.prototype.Pf=function(a){a!=this.Sl&&(this.Sl=a,this.canvas.tc.style.display=a?"":"none")};gn.prototype.ee=function(){this.canvas.ee()};
function hn(a,b){G.call(this);this.parentElement=b;this.tc=a.createElement("CANVAS");Sk(this.tc);Ok(this.tc,{position:"absolute",left:0,top:0,right:0,bottom:0,cursor:"crosshair","-webkit-tap-highlight-color":"rgba(0,0,0,0)","-webkit-touch-callout":"none"});a.appendChild(b,this.tc);this.size=new Fd(1,1)}C(hn,G);
hn.prototype.ee=function(){var a;a=this.parentElement;var b;b:{b=Kd(a);if(b.defaultView&&b.defaultView.getComputedStyle&&(b=b.defaultView.getComputedStyle(a,l))){b=b.display||b.getPropertyValue("display")||"";break b}b=""}if("none"!=(b||(a.currentStyle?a.currentStyle.display:l)||a.style&&a.style.display))a=Qk(a);else{b=a.style;var c=b.display,d=b.visibility,e=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";a=Qk(a);b.display=c;b.position=e;b.visibility=d}b=window.devicePixelRatio||
1;this.tc.width=a.width*b;this.tc.height=a.height*b;Ok(this.tc,{width:a.width+"px",height:a.height+"px"});this.size.width=a.width;this.size.height=a.height};var kn="context_lost_"+Hc++,ln="context_restored_"+Hc++;function mn(){this.Ij=m;this.Jg=this.ej=l;this.Bd=[]};function nn(a){mn.call(this);this.$=a;this.Em=this.Fk=m}C(nn,mn);function on(a){var b=a.$.d.createElement("IMG");if(!b)return a.Fk=m,yf();var c=new rf;a=B(function(){this.Fk=2==b.height;b.onload=l;b.onerror=l;c.w(l)},a);b.addEventListener("load",a,m);b.addEventListener("error",a,m);b.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA";return c};function pn(a,b){G.call(this);this.d=a||(b?new Ld(Kd(b)):Cd||(Cd=new Ld));this.canvas=b;this.Gd={};this.Vj=0;this.qk=this.Qc=this.Ep=this.Ig=this.qg=this.Hh=l;this.Ii=0;this.wd=[];this.ip=l;this.zq=[l];this.R=new Ic(this);H(this,this.R);this.xg=m;this.R.listen(b,"webglcontextcreationerror",function(a){M("error creating gl context: ",a.statusMessage||"?")});this.R.listen(b,"webglcontextlost",function(a){a.preventDefault();this.u();this.dispatchEvent(kn)});this.R.listen(b,"webglcontextrestored",function(){this.restore();
this.dispatchEvent(ln)});this.f=l;this.Tg=new Vd;this.vj=new nn(this)}C(pn,Nc);t=pn.prototype;t.b=function(){this.Vj&&Xa(this.Gd,K);this.Gd={};this.u();pn.a.b.call(this)};t.u=function(){this.xg=m;Xa(this.Gd,function(a){a.u()});this.Ep=this.Ig=this.qg=this.Hh=l;this.Qc&&(this.Qc.reset(),this.Qc=l);this.qk=l;for(var a=this.Ii=0;a<this.wd.length;a++)this.wd[a]=l;this.ip=l};
t.restore=function(){this.wd=Array(this.f.getParameter(34930));for(var a=0;a<this.wd.length;a++)this.wd[a]=l;Xa(this.Gd,function(a){a.restore()});this.xg=i};
t.oe=function(a){if(this.f)return yf();var b=new rf;if(u.WebGLRenderingContext){for(var c=l,d=["webgl","experimental-webgl"],e=0;e<d.length;e++){try{c=this.canvas.getContext(d[e],a)}catch(f){continue}if(c)break}a=c}else a=l;a?(this.f=a,this.Tg.oe(a),a=this.vj,c=new rf,a.Ij?a.Jg?c.A(a.Jg):c.w(l):(a.Bd.push(c),a.ej||(d=[],d.push(on(a)),a.Em=a.$.Tg.isSupported(8),d=new Rf(d),a.ej=d,N(a.ej,function(){this.Ij=i;this.Jg=l;for(var a=0;a<this.Bd.length;a++)this.Bd[a].w(l);this.Bd.length=0},function(a){this.Ij=
i;this.Jg=a;for(var b=0;b<this.Bd.length;b++)this.Bd[b].A(a);this.Bd.length=0},a))),N(c,function(){this.restore();b.w(l)},function(a){b.A(a)},this)):(this.xg=m,b.A("Unable to create the WebGL context"));return b};t.flush=function(){this.f.flush()};function hf(a,b){a.qg!=b&&(b&&a.f&&b.jd(a.f,a.qg),a.qg=b)}function kf(a,b){a.Ig!=b&&(b&&a.f&&b.jd(a.f,a.Ig),a.Ig=b)}function nf(a,b){a.Qc!=b&&(b?b.jd(a.Qc):a.Qc&&a.Qc.reset(),a.Qc=b)}
function mf(a,b){var c=b instanceof ze?b.handle:b;a.qk!=c&&(a.f.useProgram(c),a.qk=c)}function se(a,b){var c=a.f;a.wd[0]!=b&&(0!=a.Ii&&(c.activeTexture(33984),a.Ii=0),(a.wd[0]=b)?b.bind():a.f.bindTexture(c.TEXTURE_2D,l))}t.Ri=function(){return!this.xg?m:i};t.end=ca();function qn(a){Ic.call(this);this.Fa=a;this.enabled=i}C(qn,Ic);qn.prototype.Ua=z;qn.prototype.fa=da("enabled");function rn(a){qn.call(this,a)}C(rn,qn);function sn(){this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=m;this.h={};this.F={};this.de={};this.Bc=this.ce=0}sn.prototype.q=function(){var a=new sn;a.ctrlKey=this.ctrlKey;a.altKey=this.altKey;a.shiftKey=this.shiftKey;a.metaKey=this.metaKey;a.h=bb(this.h);a.F=bb(this.F);a.de=bb(this.de);a.ce=this.ce;a.Bc=this.Bc;return a};sn.prototype.reset=function(){this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=m;this.ce&&($a(this.h),this.ce=0);this.Bc&&($a(this.F),$a(this.de),this.Bc=0)};
sn.prototype.Ua=function(){this.Bc&&($a(this.F),$a(this.de),this.Bc=0)};sn.prototype.update=function(a,b){var c=a.uc.keyIdentifier,d=a.keyCode;d?(25==d&&a.shiftKey&&(d=9),ub&&d in tn&&(d=tn[d])):c&&c in un&&(d=un[c]);b?this.h[d]||(this.h[d]=i,this.F[d]=i,this.ce++,this.Bc++):this.h[d]&&(delete this.h[d],this.de[d]=i,this.ce--,this.Bc++);switch(d){case 17:this.ctrlKey=b;break;case 18:this.altKey=b;break;case 16:this.shiftKey=b;break;case 91:case 92:this.metaKey=b}};
var un={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},tn={61:187,59:186,224:91};function vn(a){qn.call(this,a);this.Aj=l;this.c=new sn;this.enabled=m;this.fa(i)}C(vn,qn);function wn(a){if(a.ctrlKey||a.metaKey){switch(a.keyCode){case 82:return i;case 73:return i}if(a.shiftKey)switch(a.keyCode){case 74:return i}}else switch(a.keyCode){case 27:case 116:return i}return m}t=vn.prototype;t.Gj=function(a){wn(a)||(a.preventDefault(),this.c.update(a,i),13 in this.c.F&&(this.c.altKey||this.c.metaKey)&&this.Aj&&this.Aj())};t.io=function(a){wn(a)||(a.preventDefault(),this.c.update(a,m))};
t.ho=function(){this.c.reset()};t.Gb=p("c");t.reset=function(){this.c.reset()};t.Ua=function(){this.c.Ua()};t.fa=function(a){this.enabled!=a&&(vn.a.fa.call(this,a),a?(a=Kd(this.Fa),this.listen(a,"keydown",this.Gj),this.listen(a,"keyup",this.io),this.listen(a?a.parentWindow||a.defaultView:window,["focus","blur"],this.ho)):Lc(this))};function xn(){this.pa=this.Na=this.o=this.sc=this.rc=this.qc=this.clientY=this.clientX=this.screenY=this.screenX=0;this.S=m}xn.prototype.q=function(){var a=new xn;a.screenX=this.screenX;a.screenY=this.screenY;a.qc=this.qc;a.rc=this.rc;a.sc=this.sc;a.o=this.o;a.Na=this.Na;a.pa=this.pa;a.S=this.S;return a};xn.prototype.reset=function(){this.pa=this.Na=this.o=this.sc=this.rc=this.qc=this.screenY=this.screenX=0;this.S=m};xn.prototype.Ua=function(){this.pa=this.Na=this.sc=this.rc=this.qc=0};
xn.prototype.update=function(a,b){var c=a.uc,d=a.screenX,e=a.screenY,f=0,h=0;c.webkitMovementX!==g?(f=c.webkitMovementX,h=c.webkitMovementY):c.mozMovementX!==g?"mousemove"==a.type?(f=c.mozMovementX,h=c.mozMovementY):f=h=0:c.movementX!==g?(f=c.movementX,h=c.movementY):(f=d-this.screenX,h=e-this.screenY);this.screenX=d;this.screenY=e;this.clientX=a.clientX;this.clientY=a.clientY;this.qc+=f*b;this.rc+=h*b};function yn(a){qn.call(this,a);this.c=new xn;this.gi=!(!a.requestPointerLock&&!a.mozRequestPointerLock&&!a.webkitRequestPointerLock);this.Uh=1;this.Ng=this.yi=this.S=this.$l=m;this.listen(a,"mousedown",this.jo);this.listen(a,"mousemove",this.gf);this.listen(a,"mouseover",this.lo);this.listen(a,"mouseout",this.ko);this.listen(a,ub?"DOMMouseScroll":"mousewheel",this.mo);this.listen(a,["selectstart","contextmenu"],function(a){a.preventDefault()});this.gi&&(this.listen(document,["pointerlockchange","mozpointerlockchange",
"webkitpointerlockchange"],function(){this.S=document.pointerLockElement===a||document.mozPointerLockElement===a||document.webkitPointerLockElement===a}),this.listen(document,["pointerlockerror","mozpointerlockerror","webkitpointerlockerror"],function(){this.S=m}))}C(yn,qn);function zn(a){if(!a.gi||a.S||!An(a))return m;(a.Fa.requestPointerLock||a.Fa.mozRequestPointerLock||a.Fa.webkitRequestPointerLock).call(a.Fa);a.c.reset();return i}
function An(a){return!a.enabled?m:a.$l&&a.gi?ub&&!document.vq&&!document.mozFullScreenElement?m:i:m}function Bn(a){a.yi=m;a.S&&((document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock).call(document),a.c.reset())}t=yn.prototype;
t.jo=function(a){if(this.enabled&&(a.preventDefault(),!An(this)||!zn(this))){this.c.update(a,this.Uh);switch(a.button){case 0:this.c.o|=1;this.c.Na|=1;break;case 1:this.c.o|=2;this.c.Na|=2;break;case 2:this.c.o|=4,this.c.Na|=4}!this.S&&(this.c.o&&!this.Ng)&&(this.Ng=i,this.listen(Kd(this.Fa),"mousemove",this.gf),this.listen(Kd(this.Fa),"mouseup",this.Il),Kc(this,this.Fa,"mousemove",this.gf))}};
t.Il=function(a){if(this.enabled&&(!An(this)||this.S)){a.preventDefault();this.c.update(a,this.Uh);switch(a.button){case 0:this.c.o&=-2;this.c.pa|=1;break;case 1:this.c.o&=-3;this.c.pa|=2;break;case 2:this.c.o&=-5,this.c.pa|=4}!this.S&&(!this.c.o&&this.Ng)&&(this.Ng=m,Kc(this,Kd(this.Fa),"mousemove",this.gf),Kc(this,Kd(this.Fa),"mouseup",this.Il),this.listen(this.Fa,"mousemove",this.gf))}};t.gf=function(a){if(this.enabled&&(!An(this)||this.S))a.preventDefault(),this.c.update(a,this.Uh)};
t.lo=function(a){this.enabled&&a.preventDefault()};t.ko=function(a){this.enabled&&a.preventDefault()};t.mo=function(a){if(this.enabled){a.preventDefault();var b=0;a=a.uc;x(a.wheelDelta)?(b=a.wheelDelta/120,tb&&(b=-b)):x(a.detail)&&(b=-a.detail/3);this.c.sc+=b}};t.Gb=function(){this.c.S=this.S;return this.c};t.Ua=function(){this.c.Ua()};t.fa=function(a){a!=this.enabled&&(yn.a.fa.call(this,a),a?this.yi&&(zn(this),this.yi=m):this.S&&(Bn(this),this.yi=i))};function Cn(a){qn.call(this,a)}C(Cn,qn);function Dn(a,b){bi.call(this,a);this.Fa=b;this.Ud=this.ue=this.G=this.T=l;this.T=new vn(b);H(this,this.T);this.G=new yn(b);H(this,this.G);this.ue=new Cn(b);H(this,this.ue);this.Ud=new rn(b);H(this,this.Ud)}C(Dn,bi);Dn.prototype.Ua=function(){this.T&&this.T.Ua();this.G&&this.G.Ua();this.ue&&this.ue.Ua();this.Ud&&this.Ud.Ua()};Dn.prototype.fa=function(a){this.T&&this.T.fa(a);this.G&&this.G.fa(a);this.ue&&this.ue.fa(a);this.Ud&&this.Ud.fa(a)};function En(){G.call(this);this.type="none"}C(En,G);function Fn(){this.jf=Array(256)}Fn.prototype.W=function(a,b,c){b=c?B(b,c):b;this.jf[a]=b};function Gn(a,b){var c=Mh();c.Ri(b.data,0);if(c.offset+1<=c.buffer.length){var d=Jh(c),e=a.jf[d];e&&e(b,d,c)}};function Hn(a,b,c){G.call(this);this.Sa=new Fn;this.U=new Om;this.id=a;this.type=b;this.xq=c;this.info=new Bl;this.cq=new En;this.state=0;this.Ka=[];this.Kb={};this.ui=Array(256);this.Ha=[]}C(Hn,G);Hn.prototype.b=function(){this.Ha.length=0;Hn.a.b.call(this)};Hn.prototype.Ae=function(a){this.Ka.push(a);this.Kb[a.j]=a;this.ui[a.gc]=a;for(var b=0;b<this.Ha.length;b++)this.Ha[b].Lm(a)};Hn.prototype.Kh=function(a){if(ab(this.Kb,a.j)){this.ui[a.gc]=l;D(this.Ka,a);for(var b=0;b<this.Ha.length;b++)this.Ha[b].Mm(a)}};function In(a){this.timestamp=sa();this.Oc=l;this.data=a};function Jn(a){G.call(this);this.Pg=a;this.be=m;this.state=Kn;this.wg=m;this.bc=0;this.Jc=l;this.Jf=[];this.Ci=[]}C(Jn,G);Jn.prototype.b=function(){this.close();Jn.a.b.call(this)};var Kn=0;Jn.prototype.read=function(){if(!this.Jf.length)return l;var a=this.Jf[0];a.timestamp<=sa()?this.Jf.shift():a=l;this.Jf.length||(this.wg=m);return a};
Jn.prototype.write=function(a){a=new In(a);this.bc?(a.timestamp+=this.bc+(Math.random()-0.5)*this.bc/2,this.Jc===l&&(this.Jc=u.setInterval(B(function(){1==this.state&&this.flush()},this),5))):this.Jc!==l&&(u.clearInterval(this.Jc),this.Jc=l);this.Ci.push(a);1==this.state&&this.flush()};function Ln(a,b){a.bc&&(b.timestamp+=a.bc+(Math.random()-0.5)*a.bc/2);a.Jf.push(b);a.wg=i}Jn.prototype.flush=function(a){for(var b=sa();this.Ci.length;){var c=this.Ci[0];if(c.timestamp>b&&!a)break;this.Ci.shift();this.Vm(c.data)}};
Jn.prototype.close=function(){2!=this.state&&(this.Jc!==l&&(u.clearInterval(this.Jc),this.Jc=l),this.state=2)};function Mn(a,b,c,d){Hn.call(this,"none",a.be?0:1,b);this.Sa.W(2,this.oo,this);this.Sa.W(3,this.ro,this);this.Sa.W(6,this.vo,this);this.Sa.W(7,this.wo,this);this.Sa.W(8,this.uo,this);this.Sa.W(4,this.eo,this);this.Sa.W(5,this.fo,this);this.Ia=a;H(this,this.Ia);this.Od=0;this.Ag=new rf;a=new zi;a.Uk=qb()||"";a.type=tb?"opera":F?"ie":ub?"gecko":vb?"webkit":Ai;a.platform=ob?"mac":pb?"windows":zb?"linux":Bi;a.ie=yi;a.Nd=Hf?"chrome":Ef?"iphone":Ff?"ipad":Gf?"android":wb?"mobile":Ci;this.send(Ol(b,new Fi("none",
0,0,d,a)));this.Wj=l}C(Mn,Hn);t=Mn.prototype;t.be=function(){return this.Ia.be};function vi(a){a.Wj||(a.Wj=a.Kb[a.id]||l);return a.Wj}t.Gb=function(a){if(0==this.state)for(;this.Ia.wg;){var b=this.Ia.read();if(!b)return;Gn(this.Sa,b);return}else for(var c=ec();this.Ia.wg;){b=this.Ia.read();if(!b)break;vi(this).t.jn+=b.data.byteLength;Gn(this.Sa,b);if(a&&ec()-c>=a)break}2==this.Ia.state&&Nn(this,1)};
t.oo=function(a,b,c){a:{Jl.Of=c.aa();Jl.Ie=c.aa();a=c.aa();Jl.Xf.length=a;for(b=0;b<a;b++){Jl.Xf[b]=new Cl;var d=c,e=Jl.Xf[b]||Dl;e.gc=Jh(d);e.ua=Kh(d);if(!e){c=l;break a}}c=Jl}if(!c)return m;d=Pm(this.U)-c.Ie/1E3;a=this.U;b=c.Of/1E3;d=Math.abs(d)/2;a.ua=d;b+=d;b<a.ib&&(b=a.ib);a.ib=b;b=Pm(a);b=a.ib-b;d=b-a.Je;a.Je=0.3<Math.abs(d)?b:0<d?a.Je+0.0010:a.Je-0.0010;a.Kl=i;for(a=0;a<c.Xf.length;a++)if(b=c.Xf[a],d=this.ui[b.gc]||l)d.t.bl=b.ua;return i};
t.ro=function(a,b,c){a:{a=Kl.info||new Bl;a.Pg=c.s();a.name=c.s();a.location=c.s();a.Bj=c.s();a.Cj=c.s();a.$j=c.aa();a.Fh={};b=c.aa();for(var d=0;d<b;d++){var e,f;e=c.s();f=c.s();a.Fh[e]=f}if(a){a=c.aa();Kl.Ka.length=a;for(b=0;b<a;b++)if(Kl.Ka[b]=new Fi,!Gl(c,Kl.Ka[b])){c=l;break a}c=Kl}else c=l}if(!c)return m;this.info=c.info.q();for(a=0;a<c.Ka.length;a++)this.Ae(Gi(c.Ka[a]));this.state=1;this.Ag.w(this);c=B(function(){if(2!=this.state){var a=ti(this.U)+this.U.ua,b=Pm(this.U),c=Math.min(65535,1E3*
this.U.ua|0);this.send(Il(1E3*a|0,1E3*b|0,c))}2==this.state&&u.clearInterval(h)},this);var h=u.setInterval(c,500);c();for(c=0;c<this.Ha.length;c++)this.Ha[c].tl();return i};t.vo=function(a,b,c){a=!Gl(c,Tl.Oc)?l:Tl;if(!a)return m;this.Ae(Gi(a.Oc));return i};t.wo=function(a,b,c){Ul.j=c.s();Ul.reason=c.aa();if(!Ul)return m;a=this.Kb[Ul.j]||l;if(!a)return i;a.Od=Ul.reason;this.Kh(a);return i};
t.uo=function(a,b,c){Wl.j=c.s();b=!El(c,Wl.info)?l:Wl;if(!b)return m;a=this.Kb[b.j]||l;if(!a)return i;b=b.info.O;b=Ei(b);a.info.O=b;for(b=0;b<this.Ha.length;b++)this.Ha[b].Nm(a);return i};t.eo=function(a,b,c){Ml.Gk=Kh(c);Ml.Ki=Kh(c);a=!Gl(c,Ml.Oc)?l:Ml;if(!a)return m;this.id=a.Oc.j;return i};t.fo=function(a,b,c){Ql.reason=c.aa();if(!Ql)return m;M("disconnected by server",Ql.reason);Nn(this,Ql.reason);return i};
function Nn(a,b){a.state=2;a.Od=b;K(a.Ia);for(var c=0;c<a.Ha.length;c++)a.Ha[c].yl();a.Ag.Ab||a.Ag.A(a.Od)}t.disconnect=function(){this.send(Sl());this.Ia.flush(i);Nn(this,0)};t.send=function(a){a&&(2==this.Ia.state?Nn(this,1):2!=this.state&&(1==this.state&&(vi(this).t.kn+=a.byteLength),this.Ia.write(a)))};function On(a,b){if(!a)return m;for(var c=a.constructor,d=0;d<b.length;d++){var e=b[d];if(c==e||c.name==e)return i;A(e)&&(e=u[e]);if(e&&(c==e||c.name==e.name))return i}return m}function Pn(a){for(var b=new Uint8Array(2*a.length),c=0,d=0;d<a.length;d++){for(var e=a.charCodeAt(d);255<e;)b[c++]=e,e>>=8;b[c++]=e}return b.subarray(0,c).buffer}function Qn(a){a=new Uint8Array(a);for(var b=Array(a.length),c=0;c<b.length;c++)b[c]=a[c];return String.fromCharCode.apply(l,b)};function Rn(a){Jn.call(this,a);this.C=new WebSocket(a);this.C.binaryType="arraybuffer";this.ml=B(this.no,this);this.kl=B(this.ff,this);this.jl=B(this.co,this);this.ll=B(this.Hj,this);this.C.addEventListener("open",this.ml,m);this.C.addEventListener("error",this.kl,m);this.C.addEventListener("close",this.jl,m);this.C.addEventListener("message",this.ll,m)}C(Rn,Jn);t=Rn.prototype;t.no=function(){this.state=1;this.flush()};t.ff=function(a){M("error",a)};t.co=function(a){M("close",a);this.close()};
t.Hj=function(a){a=a.data;var b=l;a instanceof ArrayBuffer?b=new In(a):A(a)&&(b=new In(Pn(a)));b&&Ln(this,b)};t.Vm=function(a){1!=this.C.readyState?this.close():this.C.send(a)};t.close=function(){this.C.removeEventListener("open",this.ml,m);this.C.removeEventListener("error",this.kl,m);this.C.removeEventListener("close",this.jl,m);this.C.removeEventListener("message",this.ll,m);this.C.close();Rn.a.close.call(this)};function Sn(a,b){Jn.call(this,a);this.be=i;this.state=1;this.C=b;this.Fp=!!b.webkitPostMessage&&!On(b,["MessagePort"]);this.nn=!tb;var c=this;this.C.onmessage=function(a){c.Hj(a)};this.C.onerror=function(a){M("port error",a)};this.nl=B(this.to,this);u.addEventListener("unload",this.nl,m)}C(Sn,Jn);Sn.prototype.Hj=function(a){a=a.data;var b=l;a instanceof ArrayBuffer?b=new In(a):A(a)?b=new In(Pn(a)):a&&a.close&&this.close();b&&Ln(this,b)};Sn.prototype.to=function(){this.close()};
Sn.prototype.Vm=function(a){this.Fp?this.C.webkitPostMessage(a,[a]):this.nn?this.C.postMessage(a):this.C.postMessage(Qn(a))};Sn.prototype.close=function(){this.C.onmessage=l;u.removeEventListener("unload",this.nl,m);try{this.C.postMessage({close:i}),this.C.close&&this.C.close()}catch(a){}Sn.a.close.call(this)};function Tn(a,b){var c=l;if(On(a,["Worker","SharedWorker","MessagePort"]))c=new Sn(a,a);else if(A(a))c=new Rn(a);else return c=new rf,c.A(l),c;var d=new Mn(c,7,0,b),c=d.Ag,e=u.setInterval(function(){0==d.state&&d.Gb();0!=d.state&&u.clearInterval(e)},16);return c};function Un(a){G.call(this);this.d=a;this.ka=[];this.$d=l}C(Un,G);Un.prototype.b=function(){this.$d&&(Bc(this.$d,"navigate",this.Bo,m,this),K(this.$d),this.$d=l);for(;this.ka.length;){var a=this.ka.pop();a.K=l;K(a)}Un.a.b.call(this)};Un.prototype.Bo=function(a){M("navigate: ",a.Fq,a.pq)};function Vn(a){if(a.$d){for(var b=[],c=0;c<a.ka.length;c++)b.push(a.ka[c].zo);b=b.join("/");a.$d.Aq(b)}}function Wn(a,b){Xn(a,i);vl(a,b,i);Vn(a)}function vl(a,b,c){b.K=a;a.ka.push(b);Yn(a);b.ra();c||Vn(a)}
function Zk(a,b){var c=a.ka.pop();c.K=l;K(c);Yn(a);b||Vn(a)}function Xn(a,b){for(;a.ka.length;)Zk(a,i);b||Vn(a)}function Yn(a){for(var b=i,c=i,d=a.ka.length-1;0<=d;d--){var e=a.ka[d];e.setActive(b);e.En=c;e.p&6&&(c=b=m);e.p&8&&(c=m)}}Un.prototype.update=function(a){for(var b=0;b<this.ka.length;b++)this.ka[b].update(a)};Un.prototype.B=function(a){for(var b=0;b<this.ka.length;b++){var c=this.ka[b];c.Ql()&&c.B(a)}};function Zn(a,b,c){Um.call(this,b);this.d=a;this.Va=c;this.$a=new Wm(this,this.d);H(this,this.$a);this.Ke.push(this.$a);this.z=new gn(this.d);H(this,this.z);this.z.Pf(m);this.v=new Dn(this,this.z.Ga);H(this,this.v);this.Ke.push(this.v);a=B(this.Hm,this);this.v.T.Aj=a;this.$=new pn(this.d,this.z.canvas.tc);H(this,this.$);this.J=new Sf(0,this.$a,this.$);H(this,this.J);this.oa=new Zm(this,this.d);H(this,this.oa);this.Ke.push(this.oa);this.uh=new $m(this.$a,this.oa);H(this,this.uh);this.ig=new Td(this.$a,
this.oa.context);this.oa.rh(this.ig);this.K=new Un(this.d);H(this,this.K);this.Db=m}C(Zn,Um);t=Zn.prototype;t.b=function(){Zn.a.b.call(this)};function $n(a){var b=a.v,c=b.G,d=a.Va.ha,d=Math.min(Math.max(d,0.1),10);c.Uh=d;b.G.$l=a.Va.lb;a.Db&&a.Va.lb?zn(b.G):Bn(b.G);b=a.uh;c=a.Va.Ub;b.lh!=c&&(c&&b.stop(),b.lh=c);if(a.Db){var e=l;a=a.K;b=function(a){if(a instanceof xm)return e=a,m};for(c=0;c<a.ka.length&&b.call(u,a.ka[c])!==m;c++);a=e}else a=l;a&&a.uk()}
t.start=function(){$n(this);var a=new Mm(this.d,this.z.Ga);Wn(this.K,a);N(this.$.oe({alpha:m,antialias:m}),function(){N(this.J.oe(),function(){Xn(this.K);ym(this);if(this.nh.host)Em(this,this.nh.host);else{this.Db&&(this.Db=m);var a=new Cm(this,this.z.Ga);Wn(this.K,a)}},function(a){ao(this,"Unable to setup graphics resources",a)},this)},function(a){ao(this,"Unable to create the graphics context",a)},this)};
function ao(a,b,c){Xn(a.K);a=ul(a.K,a.z.Ga,"setup",b,c||l);N(a,function(a){"reload"==a&&window.location.reload()},l,g)}t.update=function(a){this.K.update(a)};t.B=function(a){this.K.B(a)};t.ea=function(){this.Va.Wa||Sd(this.ig,"click",Ad)};function jm(a){a.Va.Wa||Sd(a.ig,"player_leave",Ad)}
t.Hm=function(){this.ea();var a=!this.z.kh,b=this.z;if(b.kh){if(b.Td){var c=b.d.P;(c.cancelFullScreen||c.mozCancelFullScreen||c.webkitCancelFullScreen).call(c);b.kh=m}}else b.Td&&(b=b.Ga,(b.requestFullScreen||b.mozRequestFullScreen||b.webkitRequestFullScreen).call(b,Element.ALLOW_KEYBOARD_INPUT));this.Db&&(a&&this.v.G.gi&&this.Va.lb)&&zn(this.v.G)};function pm(a){a.Db&&a.v.fa(m);var b=new Gm(a.d,a.z.Ga,a.Va);vl(a.K,b);N(b.Qb,function(a){this.ea();"save"==a&&$n(this);this.Db&&this.v.fa(i)},l,a)}
function qm(a){function b(){this.ea();this.Db&&this.v.fa(i)}a.Db&&a.v.fa(m);var c=new Am(a.d,a.z.Ga);vl(a.K,c);N(c.Qb,b,b,a)}
function Em(a,b){var c,d=a.K,e=new tl(d.d,a.z.Ga,ql,{op:b});vl(d,e);c=e.Qb;var f=new rf,h=new Mb(b);""!=h.$b&&""!=h.Yc&&""!=h.Gf||f.A('Invalid address format: "'+b+'"');var j=new Di;j.O=Ei(a.Va.userName);if(!f.Ab)switch(h.$b){case "ws":d=Tn(h.toString(),j);N(d,f.w,f.A,f);break;case "local":var k=function(){if(u.Worker){var a="server-"+h.Yc+"",b;this.nh.Bp&&Hf&&u.SharedWorker?(a=new SharedWorker("worker-server.js",a),b=a.port):b=a=new Worker("worker-server.js");a.onerror=function(a){M("Error in worker: "+
a.message+"("+a.filename+":"+a.rq+")")};N(Tn(b,j),function(a){b.addEventListener("message",function(a){if(a.data instanceof Object&&"gf_log"==a.data.type){var b=a.data.args;b.unshift("{server}");window.console.log.apply(window.console,b);a.stopPropagation()}},i);f.w(a)},function(a){f.A(a)})}else f.A("Workers not supported")};if(Hf){var n=new rf;u.webkitStorageInfo?u.webkitStorageInfo.requestQuota(1,4294967296,function(a){n.w(a)},function(a){n.A(a)}):n.A(l);N(n,function(a){4294967296>a?f.A(l):k.call(this)},
function(){M("unable to get quota - no saving!");k.call(this)},a)}else k.call(a);break;default:f.A('Unsupported scheme "'+h.$b+'"')}N(f,function(a){M("Connection established to "+b);c.cancel();this.Db=i;a=new xm(this,a);Wn(this.K,a)},function(a){M("Error connecting to "+b,a);c.cancel();var d=this.K;a=new tl(d.d,this.z.Ga,rl,{reason:a});vl(d,a);N(a.Qb,function(a){"reload"==a&&window.location.reload()},l,g)},a)};function bo(a){this.P=a}var co=/\s*;\s*/;t=bo.prototype;t.set=function(a,b,c,d,e,f){/[;=\s]/.test(a)&&ba(Error('Invalid cookie name "'+a+'"'));/[;\r\n]/.test(b)&&ba(Error('Invalid cookie value "'+b+'"'));x(c)||(c=-1);e=e?";domain="+e:"";d=d?";path="+d:"";f=f?";secure":"";c=0>c?"":0==c?";expires="+(new Date(1970,1,1)).toUTCString():";expires="+(new Date(sa()+1E3*c)).toUTCString();this.P.cookie=a+"="+b+e+d+c+f};
t.get=function(a,b){for(var c=a+"=",d=(this.P.cookie||"").split(co),e=0,f;f=d[e];e++){if(0==f.lastIndexOf(c,0))return f.substr(c.length);if(f==a)return""}return b};t.remove=function(a,b,c){var d=this.nc(a);this.set(a,"",0,b,c);return d};t.cd=function(){return eo(this).keys};t.Cb=function(){return eo(this).Op};t.kb=function(){return!this.P.cookie?0:(this.P.cookie||"").split(co).length};t.nc=function(a){return x(this.get(a))};t.clear=function(){for(var a=eo(this).keys,b=a.length-1;0<=b;b--)this.remove(a[b])};
function eo(a){a=(a.P.cookie||"").split(co);for(var b=[],c=[],d,e,f=0;e=a[f];f++)d=e.indexOf("="),-1==d?(b.push(""),c.push(e)):(b.push(e.substring(0,d)),c.push(e.substring(d+1)));return{keys:b,Op:c}};function fo(a){this.fb=a;this.userName="User";this.ha=1;this.lb=i;this.vb=8;this.Ub=this.Wa=m}fo.prototype.q=function(){var a=new fo(this.fb);a.userName=this.userName;a.ha=this.ha;a.lb=this.lb;a.vb=this.vb;a.Wa=this.Wa;a.Ub=this.Ub;return a};fo.prototype.reset=function(){this.userName="User";this.ha=1;this.lb=i;this.vb=8;this.Ub=this.Wa=m};
fo.prototype.load=function(){var a=new bo(this.fb.P);this.userName=a.get("s_un",this.userName);this.userName=decodeURIComponent(this.userName.replace(/\+/g," "));1>this.userName.length&&(this.userName="User");this.ha=Number(a.get("s_ms",String(this.ha)));if(0>=this.ha||10<this.ha)this.ha=1;this.lb="true"==a.get("s_ml",String(this.lb));this.vb=Number(a.get("s_vd",String(this.vb)))|0;if(1>=this.vb||16<this.vb)this.vb=8;this.Wa="true"==a.get("s_sm",String(this.Wa));this.Ub="true"==a.get("s_mm",String(this.Ub))};
fo.prototype.save=function(){var a=new bo(this.fb.P);a.set("s_un",encodeURIComponent(String(this.userName)),31104E3,"/");a.set("s_ms",String(this.ha),31104E3,"/");a.set("s_ml",String(this.lb),31104E3,"/");a.set("s_vd",String(this.vb),31104E3,"/");a.set("s_sm",String(this.Wa),31104E3,"/");a.set("s_mm",String(this.Ub),31104E3,"/")};ga("blk.client.start",function(a,b,c,d){a=new Ld(a);c=new dc(c,d);d=new fo(a);d.load();(new Zn(a,c,d)).start()});
