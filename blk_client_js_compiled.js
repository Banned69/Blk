function aa(a){throw a;}var g=void 0,i=!0,l=null,m=!1;function ba(){return function(){}}function ca(a){return function(b){this[a]=b}}function q(a){return function(){return this[a]}}function da(a){return function(){return a}}var s,ea=ea||{},t=this;function fa(a,b){var c=a.split("."),d=t;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&w(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function ga(a){a=a.split(".");for(var b=t,c;c=a.shift();)if(b[c]!=l)b=b[c];else return l;return b}function y(){}function ia(a){return a}
function ja(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function w(a){return a!==g}function ka(a){var b=ja(a);return"array"==b||"object"==b&&"number"==typeof a.length}function A(a){return"string"==typeof a}function la(a){return"function"==ja(a)}function ma(a){var b=typeof a;return"object"==b&&a!=l||"function"==b}function na(a){return a[oa]||(a[oa]=++pa)}var oa="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),pa=0;
function qa(a,b,c){return a.call.apply(a.bind,arguments)}function ra(a,b,c){a||aa(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function B(a,b,c){B=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?qa:ra;return B.apply(l,arguments)}
function sa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var ta=Date.now||function(){return+new Date};function C(a,b){function c(){}c.prototype=b.prototype;a.a=b.prototype;a.prototype=new c;a.prototype.constructor=a};function ua(a){Error.captureStackTrace?Error.captureStackTrace(this,ua):this.stack=Error().stack||"";a&&(this.message=String(a))}C(ua,Error);ua.prototype.name="CustomError";function va(a){return a.replace(/\xa0|\s/g," ")}function wa(a){return a.replace(/\xa0|[ \t]+/g," ")}function xa(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function ya(a){if(!za.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Aa,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Ba,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Ca,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Da,"&quot;"));return a}var Aa=/&/g,Ba=/</g,Ca=/>/g,Da=/\"/g,za=/[&<>\"]/;
function Ea(a,b){var c=w(b)?a.toFixed(b):String(a),d=c.indexOf(".");-1==d&&(d=c.length);d=Math.max(0,1-d);return Array(d+1).join("0")+c};var Fa=Array.prototype,Ha=Fa.indexOf?function(a,b,c){return Fa.indexOf.call(a,b,c)}:function(a,b,c){c=c==l?0:0>c?Math.max(0,a.length+c):c;if(A(a))return!A(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Ia=Fa.forEach?function(a,b,c){Fa.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=A(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Ja=Fa.filter?function(a,b,c){return Fa.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,
h=A(a)?a.split(""):a,j=0;j<d;j++)if(j in h){var k=h[j];b.call(c,k,j,a)&&(e[f++]=k)}return e},Ka=Fa.some?function(a,b,c){return Fa.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=A(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return i;return m};function D(a,b){var c=Ha(a,b),d;(d=0<=c)&&Fa.splice.call(a,c,1);return d}function La(a){return Fa.concat.apply(Fa,arguments)}function Ma(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}
function Na(a,b){Fa.sort.call(a,b||Oa)}function Oa(a,b){return a>b?1:a<b?-1:0};function Pa(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function Qa(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function Ra(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function Sa(a){for(var b in a)delete a[b]}function Ta(a,b){var c;(c=b in a)&&delete a[b];return c}function Ua(a){var b={},c;for(c in a)b[c]=a[c];return b}var Va="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function Wa(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Va.length;f++)c=Va[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function Xa(a){if("function"==typeof a.Jb)return a.Jb();if(A(a))return a.split("");if(ka(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Qa(a)}function Ya(a,b,c){if("function"==typeof a.forEach)a.forEach(b,c);else if(ka(a)||A(a))Ia(a,b,c);else{var d;if("function"==typeof a.hd)d=a.hd();else if("function"!=typeof a.Jb)if(ka(a)||A(a)){d=[];for(var e=a.length,f=0;f<e;f++)d.push(f)}else d=Ra(a);else d=g;for(var e=Xa(a),f=e.length,h=0;h<f;h++)b.call(c,e[h],d&&d[h],a)}};function Za(a,b){this.s={};this.h=[];var c=arguments.length;if(1<c){c%2&&aa(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){a instanceof Za?(c=a.hd(),d=a.Jb()):(c=Ra(a),d=Qa(a));for(var e=0;e<c.length;e++)this.set(c[e],d[e])}}s=Za.prototype;s.i=0;s.Nl=0;s.nb=q("i");s.Jb=function(){$a(this);for(var a=[],b=0;b<this.h.length;b++)a.push(this.s[this.h[b]]);return a};s.hd=function(){$a(this);return this.h.concat()};
s.rc=function(a){return jb(this.s,a)};s.clear=function(){this.s={};this.Nl=this.i=this.h.length=0};s.remove=function(a){return jb(this.s,a)?(delete this.s[a],this.i--,this.Nl++,this.h.length>2*this.i&&$a(this),i):m};function $a(a){if(a.i!=a.h.length){for(var b=0,c=0;b<a.h.length;){var d=a.h[b];jb(a.s,d)&&(a.h[c++]=d);b++}a.h.length=c}if(a.i!=a.h.length){for(var e={},c=b=0;b<a.h.length;)d=a.h[b],jb(e,d)||(a.h[c++]=d,e[d]=1),b++;a.h.length=c}}s.get=function(a,b){return jb(this.s,a)?this.s[a]:b};
s.set=function(a,b){jb(this.s,a)||(this.i++,this.h.push(a),this.Nl++);this.s[a]=b};s.r=function(){return new Za(this)};function jb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};var kb,lb,mb,nb,ob,pb,qb;function rb(){return t.navigator?t.navigator.userAgent:l}ob=nb=mb=lb=kb=m;var sb;if(sb=rb()){var tb=t.navigator;kb=0==sb.indexOf("Opera");lb=!kb&&-1!=sb.indexOf("MSIE");nb=(mb=!kb&&-1!=sb.indexOf("WebKit"))&&-1!=sb.indexOf("Mobile");ob=!kb&&!mb&&"Gecko"==tb.product}var ub=kb,E=lb,vb=ob,wb=mb,xb=nb,yb,zb=t.navigator;yb=zb&&zb.platform||"";pb=-1!=yb.indexOf("Mac");qb=-1!=yb.indexOf("Win");var Ab=-1!=yb.indexOf("Linux");
function Bb(){var a=t.document;return a?a.documentMode:g}var Cb;a:{var Db="",Eb;if(ub&&t.opera)var Fb=t.opera.version,Db="function"==typeof Fb?Fb():Fb;else if(vb?Eb=/rv\:([^\);]+)(\)|;)/:E?Eb=/MSIE\s+([^\);]+)(\)|;)/:wb&&(Eb=/WebKit\/(\S+)/),Eb)var Gb=Eb.exec(rb()),Db=Gb?Gb[1]:"";if(E){var Hb=Bb();if(Hb>parseFloat(Db)){Cb=String(Hb);break a}}Cb=Db}var Ib={};
function Jb(a){var b;if(!(b=Ib[a])){b=0;for(var c=xa(String(Cb)).split("."),d=xa(String(a)).split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var h=c[f]||"",j=d[f]||"",k=RegExp("(\\d*)(\\D*)","g"),n=RegExp("(\\d*)(\\D*)","g");do{var p=k.exec(h)||["","",""],r=n.exec(j)||["","",""];if(0==p[0].length&&0==r[0].length)break;b=((0==p[1].length?0:parseInt(p[1],10))<(0==r[1].length?0:parseInt(r[1],10))?-1:(0==p[1].length?0:parseInt(p[1],10))>(0==r[1].length?0:parseInt(r[1],10))?1:0)||((0==p[2].length)<
(0==r[2].length)?-1:(0==p[2].length)>(0==r[2].length)?1:0)||(p[2]<r[2]?-1:p[2]>r[2]?1:0)}while(0==b)}b=Ib[a]=0<=b}return b}var Kb=t.document,Lb=!Kb||!E?g:Bb()||("CSS1Compat"==Kb.compatMode?parseInt(Cb,10):5);var Mb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function Nb(a,b){var c;if(a instanceof Nb)this.Ta=w(b)?b:a.Ta,Ob(this,a.fc),c=a.Ui,Pb(this),this.Ui=c,c=a.ad,Pb(this),this.ad=c,Qb(this,a.Rf),c=a.Xh,Pb(this),this.Xh=c,Rb(this,a.Hc.r()),c=a.th,Pb(this),this.th=c;else if(a&&(c=String(a).match(Mb))){this.Ta=!!b;Ob(this,c[1]||"",i);var d=c[2]||"";Pb(this);this.Ui=d?decodeURIComponent(d):"";d=c[3]||"";Pb(this);this.ad=d?decodeURIComponent(d):"";Qb(this,c[4]);d=c[5]||"";Pb(this);this.Xh=d?decodeURIComponent(d):"";Rb(this,c[6]||"",i);c=c[7]||"";Pb(this);
this.th=c?decodeURIComponent(c):""}else this.Ta=!!b,this.Hc=new Sb(l,0,this.Ta)}s=Nb.prototype;s.fc="";s.Ui="";s.ad="";s.Rf=l;s.Xh="";s.th="";s.Fq=m;s.Ta=m;
s.toString=function(){var a=[],b=this.fc;b&&a.push(Tb(b,Ub),":");if(b=this.ad){a.push("//");var c=this.Ui;c&&a.push(Tb(c,Ub),"@");a.push(encodeURIComponent(String(b)));b=this.Rf;b!=l&&a.push(":",String(b))}if(b=this.Xh)this.ad&&"/"!=b.charAt(0)&&a.push("/"),a.push(Tb(b,"/"==b.charAt(0)?Vb:Wb));(b=this.Hc.toString())&&a.push("?",b);(b=this.th)&&a.push("#",Tb(b,Xb));return a.join("")};s.r=function(){return new Nb(this)};
function Ob(a,b,c){Pb(a);a.fc=c?b?decodeURIComponent(b):"":b;a.fc&&(a.fc=a.fc.replace(/:$/,""))}function Qb(a,b){Pb(a);b?(b=Number(b),(isNaN(b)||0>b)&&aa(Error("Bad port number "+b)),a.Rf=b):a.Rf=l}function Rb(a,b,c){Pb(a);b instanceof Sb?(a.Hc=b,a.Hc.ml(a.Ta)):(c||(b=Tb(b,Yb)),a.Hc=new Sb(b,0,a.Ta))}function Pb(a){a.Fq&&aa(Error("Tried to modify a read-only Uri"))}s.ml=function(a){this.Ta=a;this.Hc&&this.Hc.ml(a);return this};function Tb(a,b){return A(a)?encodeURI(a).replace(b,Zb):l}
function Zb(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Ub=/[#\/\?@]/g,Wb=/[\#\?:]/g,Vb=/[\#\?]/g,Yb=/[\#\?@]/g,Xb=/#/g;function Sb(a,b,c){this.Ea=a||l;this.Ta=!!c}function $b(a){if(!a.I&&(a.I=new Za,a.i=0,a.Ea))for(var b=a.Ea.split("&"),c=0;c<b.length;c++){var d=b[c].indexOf("="),e=l,f=l;0<=d?(e=b[c].substring(0,d),f=b[c].substring(d+1)):e=b[c];e=decodeURIComponent(e.replace(/\+/g," "));e=ac(a,e);a.add(e,f?decodeURIComponent(f.replace(/\+/g," ")):"")}}s=Sb.prototype;
s.I=l;s.i=l;s.nb=function(){$b(this);return this.i};s.add=function(a,b){$b(this);this.Ea=l;a=ac(this,a);var c=this.I.get(a);c||this.I.set(a,c=[]);c.push(b);this.i++;return this};s.remove=function(a){$b(this);a=ac(this,a);return this.I.rc(a)?(this.Ea=l,this.i-=this.I.get(a).length,this.I.remove(a)):m};s.clear=function(){this.I=this.Ea=l;this.i=0};s.rc=function(a){$b(this);a=ac(this,a);return this.I.rc(a)};
s.hd=function(){$b(this);for(var a=this.I.Jb(),b=this.I.hd(),c=[],d=0;d<b.length;d++)for(var e=a[d],f=0;f<e.length;f++)c.push(b[d]);return c};s.Jb=function(a){$b(this);var b=[];if(a)this.rc(a)&&(b=La(b,this.I.get(ac(this,a))));else{a=this.I.Jb();for(var c=0;c<a.length;c++)b=La(b,a[c])}return b};s.set=function(a,b){$b(this);this.Ea=l;a=ac(this,a);this.rc(a)&&(this.i-=this.I.get(a).length);this.I.set(a,[b]);this.i++;return this};
s.get=function(a,b){var c=a?this.Jb(a):[];return 0<c.length?String(c[0]):b};s.toString=function(){if(this.Ea)return this.Ea;if(!this.I)return"";for(var a=[],b=this.I.hd(),c=0;c<b.length;c++)for(var d=b[c],e=encodeURIComponent(String(d)),d=this.Jb(d),f=0;f<d.length;f++){var h=e;""!==d[f]&&(h+="="+encodeURIComponent(String(d[f])));a.push(h)}return this.Ea=a.join("&")};s.r=function(){var a=new Sb;a.Ea=this.Ea;this.I&&(a.I=this.I.r(),a.i=this.i);return a};
function ac(a,b){var c=String(b);a.Ta&&(c=c.toLowerCase());return c}s.ml=function(a){a&&!this.Ta&&($b(this),this.Ea=l,Ya(this.I,function(a,c){var d=c.toLowerCase();c!=d&&(this.remove(c),this.remove(d),0<a.length&&(this.Ea=l,this.I.set(ac(this,d),Ma(a)),this.i+=a.length))},this));this.Ta=a};s.extend=function(a){for(var b=0;b<arguments.length;b++)Ya(arguments[b],function(a,b){this.add(b,a)},this)};function bc(a,b,c){this.qj=a;Wa(this.qj,{buildServer:{help:"Build server daemon address.",type:String,defaultValue:l}});this.uri=new Nb(b);this.di=new Sb(g,0,i);(a=this.uri.Hc)&&this.di.extend(a);this.di.extend(c);this.gs=cc(this,"buildServer")}function dc(a,b){var c=parseFloat(a.qj[b].defaultValue),d=a.di.get(b,c);return!w(d)?c:Number(d)}function cc(a,b){var c=a.qj[b].defaultValue,d=a.di.get(b,c);return!w(d)||!d||!d.length||/^[\s\xa0]*$/.test(String(d))?c:String(d)};function ec(a,b){bc.call(this,{simulatedLatency:{help:"Extra latency, in ms, to add to send/recv.",type:Number,defaultValue:0},userName:{help:"User name for multiplayer.",type:String,defaultValue:l},host:{help:"Host endpoint for connections.",type:String,defaultValue:l},sharedWorkers:{help:"Whether to enable shared web workers.",type:Number,defaultValue:1}},a,b);this.hc=dc(this,"simulatedLatency");this.host=cc(this,"host");this.Br=dc(this,"sharedWorkers")}C(ec,bc);var fc;var gc=t.performance;fc=gc&&gc.now?function(){return gc.now()}:gc&&gc.webkitNow?function(){return gc.webkitNow()}:g;var hc=fc?fc:Date.now;function ic(a,b,c){this.type=a;this.path=b;this.size=c}function jc(a,b){return a.size-b.size};function F(){0!=kc&&(this.ls=Error().stack,lc[na(this)]=this)}var kc=0,lc={};F.prototype.Sj=m;F.prototype.Rj=function(){if(!this.Sj&&(this.Sj=i,this.b(),0!=kc)){var a=na(this);delete lc[a]}};function G(a,b){a.Yg||(a.Yg=[]);a.Yg.push(b)}F.prototype.b=function(){this.Yg&&mc.apply(l,this.Yg);if(this.Dn)for(;this.Dn.length;)this.Dn.shift()()};function H(a){a&&"function"==typeof a.Rj&&a.Rj()}function mc(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];ka(d)?mc.apply(l,d):H(d)}};function nc(a,b,c){F.call(this);this.name=a;this.Yq=b;this.Vk=this.Pl=0;this.yk=l;this.pb=c;for(a=0;a<this.pb.length;a++)this.Pl+=this.pb[a].Ol;Na(this.pb,oc)}C(nc,F);function pc(a){if(a.pb.length){if(1==a.pb.length)return a.pb[0]}else return l;switch(a.Yq){case 0:return qc(a,i);case 1:return qc(a,m);case 2:var b=a.pb[a.Vk];a.Vk=(a.Vk+1)%a.pb.length;return b;default:return qc(a,i)}}
function qc(a,b){for(var c=0;5>c;c++){for(var d=l,e=Math.random()*a.Pl,f=0;f<a.pb.length;f++){d=a.pb[f];if(e<d.Ol)break;e-=d.Ol}if(b||d!=a.yk)return a.yk=d}return a.yk||a.pb[0]}function I(a,b){this.start=a;this.duration=b;this.Ol=w(g)?g:1;this.Fn=0}function oc(a,b){return a.Fn-b.Fn};var rc=!E||E&&9<=Lb,sc=E&&!Jb("9");!wb||Jb("528");vb&&Jb("1.9b")||E&&Jb("8")||ub&&Jb("9.5")||wb&&Jb("528");vb&&!Jb("8")||E&&Jb("9");function tc(a,b){this.type=a;this.currentTarget=this.target=b}s=tc.prototype;s.b=ba();s.Rj=ba();s.rd=m;s.defaultPrevented=m;s.ji=i;s.stopPropagation=function(){this.rd=i};s.preventDefault=function(){this.defaultPrevented=i;this.ji=m};function uc(a){uc[" "](a);return a}uc[" "]=y;function vc(a,b){a&&this.Cc(a,b)}C(vc,tc);s=vc.prototype;s.target=l;s.relatedTarget=l;s.offsetX=0;s.offsetY=0;s.clientX=0;s.clientY=0;s.screenX=0;s.screenY=0;s.button=0;s.keyCode=0;s.charCode=0;s.ctrlKey=m;s.altKey=m;s.shiftKey=m;s.metaKey=m;s.Wq=m;s.xc=l;
s.Cc=function(a,b){var c=this.type=a.type;tc.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(vb){var e;a:{try{uc(d.nodeName);e=i;break a}catch(f){}e=m}e||(d=l)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=wb||a.offsetX!==g?a.offsetX:a.layerX;this.offsetY=wb||a.offsetY!==g?a.offsetY:a.layerY;this.clientX=a.clientX!==g?a.clientX:a.pageX;this.clientY=a.clientY!==g?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Wq=pb?a.metaKey:a.ctrlKey;this.state=a.state;this.xc=a;a.defaultPrevented&&this.preventDefault();delete this.rd};s.stopPropagation=function(){vc.a.stopPropagation.call(this);this.xc.stopPropagation?this.xc.stopPropagation():this.xc.cancelBubble=i};
s.preventDefault=function(){vc.a.preventDefault.call(this);var a=this.xc;if(a.preventDefault)a.preventDefault();else if(a.returnValue=m,sc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};s.b=ba();function wc(){}var xc=0;s=wc.prototype;s.key=0;s.ud=m;s.Ng=m;s.Cc=function(a,b,c,d,e,f){la(a)?this.mn=i:a&&a.handleEvent&&la(a.handleEvent)?this.mn=m:aa(Error("Invalid listener argument"));this.listener=a;this.Pn=b;this.src=c;this.type=d;this.capture=!!e;this.yh=f;this.Ng=m;this.key=++xc;this.ud=m};s.handleEvent=function(a){return this.mn?this.listener.call(this.yh||this.src,a):this.listener.handleEvent.call(this.listener,a)};var yc={},zc={},Ac={},Bc={};
function Cc(a,b,c,d,e){if("array"==ja(b)){for(var f=0;f<b.length;f++)Cc(a,b[f],c,d,e);return l}a:{b||aa(Error("Invalid event type"));d=!!d;var h=zc;b in h||(h[b]={i:0,Ua:0});h=h[b];d in h||(h[d]={i:0,Ua:0},h.i++);var h=h[d],f=na(a),j;h.Ua++;if(h[f]){j=h[f];for(var k=0;k<j.length;k++)if(h=j[k],h.listener==c&&h.yh==e){if(h.ud)break;j[k].Ng=m;a=j[k].key;break a}}else j=h[f]=[],h.i++;var n=Dc,p=rc?function(a){return n.call(p.src,p.key,a)}:function(a){a=n.call(p.src,p.key,a);if(!a)return a},k=p;k.src=
a;h=new wc;h.Cc(c,k,a,b,d,e);h.Ng=m;c=h.key;k.key=c;j.push(h);yc[c]=h;Ac[f]||(Ac[f]=[]);Ac[f].push(h);a.addEventListener?(a==t||!a.Fm)&&a.addEventListener(b,k,d):a.attachEvent(b in Bc?Bc[b]:Bc[b]="on"+b,k);a=c}return a}function Ec(a,b,c,d,e){if("array"==ja(b))for(var f=0;f<b.length;f++)Ec(a,b[f],c,d,e);else if(d=!!d,a=Fc(a,b,d))for(f=0;f<a.length;f++)if(a[f].listener==c&&a[f].capture==d&&a[f].yh==e){Gc(a[f].key);break}}
function Gc(a){if(!yc[a])return m;var b=yc[a];if(b.ud)return m;var c=b.src,d=b.type,e=b.Pn,f=b.capture;c.removeEventListener?(c==t||!c.Fm)&&c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(d in Bc?Bc[d]:Bc[d]="on"+d,e);c=na(c);Ac[c]&&(e=Ac[c],D(e,b),0==e.length&&delete Ac[c]);b.ud=i;if(b=zc[d][f][c])b.zn=i,Hc(d,f,c,b);delete yc[a];return i}
function Hc(a,b,c,d){if(!d.Qh&&d.zn){for(var e=0,f=0;e<d.length;e++)d[e].ud?d[e].Pn.src=l:(e!=f&&(d[f]=d[e]),f++);d.length=f;d.zn=m;0==f&&(delete zc[a][b][c],zc[a][b].i--,0==zc[a][b].i&&(delete zc[a][b],zc[a].i--),0==zc[a].i&&delete zc[a])}}function Fc(a,b,c){var d=zc;return b in d&&(d=d[b],c in d&&(d=d[c],a=na(a),d[a]))?d[a]:l}
function Ic(a,b,c,d,e){var f=1;b=na(b);if(a[b]){a.Ua--;a=a[b];a.Qh?a.Qh++:a.Qh=1;try{for(var h=a.length,j=0;j<h;j++){var k=a[j];k&&!k.ud&&(f&=Jc(k,e)!==m)}}finally{a.Qh--,Hc(c,d,b,a)}}return Boolean(f)}function Jc(a,b){a.Ng&&Gc(a.key);return a.handleEvent(b)}
function Dc(a,b){if(!yc[a])return i;var c=yc[a],d=c.type,e=zc;if(!(d in e))return i;var e=e[d],f,h;if(!rc){f=b||ga("window.event");var j=i in e,k=m in e;if(j){if(0>f.keyCode||f.returnValue!=g)return i;a:{var n=m;if(0==f.keyCode)try{f.keyCode=-1;break a}catch(p){n=i}if(n||f.returnValue==g)f.returnValue=i}}n=new vc;n.Cc(f,this);f=i;try{if(j){for(var r=[],v=n.currentTarget;v;v=v.parentNode)r.push(v);h=e[i];h.Ua=h.i;for(var u=r.length-1;!n.rd&&0<=u&&h.Ua;u--)n.currentTarget=r[u],f&=Ic(h,r[u],d,i,n);if(k){h=
e[m];h.Ua=h.i;for(u=0;!n.rd&&u<r.length&&h.Ua;u++)n.currentTarget=r[u],f&=Ic(h,r[u],d,m,n)}}else f=Jc(c,n)}finally{r&&(r.length=0)}return f}d=new vc(b,this);return f=Jc(c,d)}var Kc=0;function Lc(a){F.call(this);this.cn=a;this.h=[]}C(Lc,F);var Mc=[];Lc.prototype.listen=function(a,b,c,d,e){"array"!=ja(b)&&(Mc[0]=b,b=Mc);for(var f=0;f<b.length;f++){var h=Cc(a,b[f],c||this,d||m,e||this.cn||this);this.h.push(h)}return this};
function Nc(a,b,c,d,e,f){if("array"==ja(c))for(var h=0;h<c.length;h++)Nc(a,b,c[h],d,e,f);else{a:{d=d||a;f=f||a.cn||a;e=!!e;if(b=Fc(b,c,e))for(c=0;c<b.length;c++)if(!b[c].ud&&b[c].listener==d&&b[c].capture==e&&b[c].yh==f){b=b[c];break a}b=l}b&&(b=b.key,Gc(b),D(a.h,b))}}function Oc(a){Ia(a.h,Gc);a.h.length=0}Lc.prototype.b=function(){Lc.a.b.call(this);Oc(this)};Lc.prototype.handleEvent=function(){aa(Error("EventHandler.handleEvent not implemented"))};function Pc(){F.call(this);this.S=new Lc(this);G(this,this.S)}C(Pc,F);Pc.prototype.load=function(a){a.D(l)};Pc.prototype.cancel=y;function Qc(){F.call(this)}C(Qc,F);s=Qc.prototype;s.Fm=i;s.Tk=l;s.addEventListener=function(a,b,c,d){Cc(this,a,b,c,d)};s.removeEventListener=function(a,b,c,d){Ec(this,a,b,c,d)};
s.dispatchEvent=function(a){var b=a.type||a,c=zc;if(b in c){if(A(a))a=new tc(a,this);else if(a instanceof tc)a.target=a.target||this;else{var d=a;a=new tc(b,this);Wa(a,d)}var d=1,e,c=c[b],b=i in c,f;if(b){e=[];for(f=this;f;f=f.Tk)e.push(f);f=c[i];f.Ua=f.i;for(var h=e.length-1;!a.rd&&0<=h&&f.Ua;h--)a.currentTarget=e[h],d&=Ic(f,e[h],a.type,i,a)&&a.ji!=m}if(m in c)if(f=c[m],f.Ua=f.i,b)for(h=0;!a.rd&&h<e.length&&f.Ua;h++)a.currentTarget=e[h],d&=Ic(f,e[h],a.type,m,a)&&a.ji!=m;else for(e=this;!a.rd&&e&&
f.Ua;e=e.Tk)a.currentTarget=e,d&=Ic(f,e,a.type,m,a)&&a.ji!=m;a=Boolean(d)}else a=i;return a};s.b=function(){Qc.a.b.call(this);var a=0;if(this!=l){var b=na(this);if(Ac[b])for(var b=Ac[b],c=b.length-1;0<=c;c--)Gc(b[c].key),a++}else Pa(yc,function(b,c){Gc(c);a++});this.Tk=l};var Rc=t.window;function Sc(a,b,c){la(a)?c&&(a=B(a,c)):a&&"function"==typeof a.handleEvent?a=B(a.handleEvent,a):aa(Error("Invalid listener argument"));return 2147483647<b?-1:Rc.setTimeout(a,b||0)};function Tc(a){return Uc(a||arguments.callee.caller,[])}
function Uc(a,b){var c=[];if(0<=Ha(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(Vc(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){0<e&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=String(f);break;case "boolean":f=f?"true":"false";break;case "function":f=(f=Vc(f))?f:"[fn]";break;default:f=typeof f}40<f.length&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(Uc(a.caller,b))}catch(h){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function Vc(a){if(Wc[a])return Wc[a];a=String(a);if(!Wc[a]){var b=/function ([^\(]+)/.exec(a);Wc[a]=b?b[1]:"[Anonymous]"}return Wc[a]}var Wc={};function Xc(a,b,c,d,e){this.reset(a,b,c,d,e)}Xc.prototype.nr=0;Xc.prototype.Nm=l;Xc.prototype.Mm=l;var Yc=0;Xc.prototype.reset=function(a,b,c,d,e){this.nr="number"==typeof e?e:Yc++;this.eg=d||ta();this.Ff=a;this.Nq=b;this.ts=c;delete this.Nm;delete this.Mm};Xc.prototype.ao=ca("Ff");function Zc(a){this.Oq=a}Zc.prototype.la=l;Zc.prototype.Ff=l;Zc.prototype.O=l;Zc.prototype.tf=l;function $c(a,b){this.name=a;this.value=b}$c.prototype.toString=q("name");var ad=new $c("SEVERE",1E3),bd=new $c("WARNING",900),cd=new $c("INFO",800),dd=new $c("CONFIG",700),ed=new $c("FINE",500);s=Zc.prototype;s.getParent=q("la");s.Sm=function(){this.O||(this.O={});return this.O};s.ao=ca("Ff");function fd(a){return a.Ff?a.Ff:a.la?fd(a.la):l}
s.log=function(a,b,c){if(a.value>=fd(this).value){a=this.Qp(a,b,c);b="log:"+a.Nq;t.console&&(t.console.timeStamp?t.console.timeStamp(b):t.console.markTimeline&&t.console.markTimeline(b));t.msWriteProfilerMark&&t.msWriteProfilerMark(b);for(b=this;b;){c=b;var d=a;if(c.tf)for(var e=0,f=g;f=c.tf[e];e++)f(d);b=b.getParent()}}};
s.Qp=function(a,b,c){var d=new Xc(a,String(b),this.Oq);if(c){d.Nm=c;var e;var f=arguments.callee.caller;try{var h;var j=ga("window.location.href");if(A(c))h={message:c,name:"Unknown error",lineNumber:"Not available",fileName:j,stack:"Not available"};else{var k,n,p=m;try{k=c.lineNumber||c.rs||"Not available"}catch(r){k="Not available",p=i}try{n=c.fileName||c.filename||c.sourceURL||j}catch(v){n="Not available",p=i}h=p||!c.lineNumber||!c.fileName||!c.stack?{message:c.message,name:c.name,lineNumber:k,
fileName:n,stack:c.stack||"Not available"}:c}e="Message: "+ya(h.message)+'\nUrl: <a href="view-source:'+h.fileName+'" target="_new">'+h.fileName+"</a>\nLine: "+h.lineNumber+"\n\nBrowser stack:\n"+ya(h.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+ya(Tc(f)+"-> ")}catch(u){e="Exception trying to expose exception! You win, we lose. "+u}d.Mm=e}return d};s.info=function(a,b){this.log(cd,a,b)};function gd(a,b){a.log(ed,b,g)}s.nj=function(a,b){this.Sm()[a]=b};var hd={},id=l;
function jd(a){id||(id=new Zc(""),hd[""]=id,id.ao(dd));var b;if(!(b=hd[a])){b=new Zc(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=jd(a.substr(0,c));c.nj(d,b);b.la=c;hd[a]=b}return b};function kd(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}aa(Error("Invalid JSON string: "+a))};function ld(){}ld.prototype.tm=l;function md(a){var b;if(!(b=a.tm))b={},nd(a)&&(b[0]=i,b[1]=i),b=a.tm=b;return b};var od;function pd(){}C(pd,ld);pd.prototype.Ue=function(){var a=nd(this);return a?new ActiveXObject(a):new XMLHttpRequest};
function nd(a){if(!a.en&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.en=d}catch(e){}}aa(Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed"))}return a.en}od=new pd;function qd(a){F.call(this);this.headers=new Za;this.fj=a||l}C(qd,Qc);qd.prototype.ja=jd("goog.net.XhrIo");var rd=/^https?$/i;s=qd.prototype;s.bb=m;s.k=l;s.ej=l;s.Kh="";s.qn="";s.zf=0;s.Af="";s.Xj=m;s.Ch=m;s.nk=m;s.kd=m;s.fg=0;s.Cd=l;s.vd="";s.Ur=m;
s.send=function(a,b,c,d){this.k&&aa(Error("[goog.net.XhrIo] Object is active with another request="+this.Kh+"; newUri="+a));b=b?b.toUpperCase():"GET";this.Kh=a;this.Af="";this.zf=0;this.qn=b;this.Xj=m;this.bb=i;this.k=this.fj?this.fj.Ue():od.Ue();this.ej=this.fj?md(this.fj):md(od);this.k.onreadystatechange=B(this.En,this);try{gd(this.ja,sd(this,"Opening Xhr")),this.nk=i,this.k.open(b,a,i),this.nk=m}catch(e){gd(this.ja,sd(this,"Error opening Xhr: "+e.message));td(this,e);return}a=c||"";var f=this.headers.r();
d&&Ya(d,function(a,b){f.set(b,a)});d=t.FormData&&a instanceof t.FormData;"POST"==b&&(!f.rc("Content-Type")&&!d)&&f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");Ya(f,function(a,b){this.k.setRequestHeader(b,a)},this);this.vd&&(this.k.responseType=this.vd);"withCredentials"in this.k&&(this.k.withCredentials=this.Ur);try{this.Cd&&(Rc.clearTimeout(this.Cd),this.Cd=l),0<this.fg&&(gd(this.ja,sd(this,"Will abort after "+this.fg+"ms if incomplete")),this.Cd=Rc.setTimeout(B(this.Jr,
this),this.fg)),gd(this.ja,sd(this,"Sending request")),this.Ch=i,this.k.send(a),this.Ch=m}catch(h){gd(this.ja,sd(this,"Send error: "+h.message)),td(this,h)}};s.Jr=function(){"undefined"!=typeof ea&&this.k&&(this.Af="Timed out after "+this.fg+"ms, aborting",this.zf=8,gd(this.ja,sd(this,this.Af)),this.dispatchEvent("timeout"),this.abort(8))};function td(a,b){a.bb=m;a.k&&(a.kd=i,a.k.abort(),a.kd=m);a.Af=b;a.zf=5;ud(a);vd(a)}
function ud(a){a.Xj||(a.Xj=i,a.dispatchEvent("complete"),a.dispatchEvent("error"))}s.abort=function(a){this.k&&this.bb&&(gd(this.ja,sd(this,"Aborting")),this.bb=m,this.kd=i,this.k.abort(),this.kd=m,this.zf=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),vd(this))};s.b=function(){this.k&&(this.bb&&(this.bb=m,this.kd=i,this.k.abort(),this.kd=m),vd(this,i));qd.a.b.call(this)};s.En=function(){!this.nk&&!this.Ch&&!this.kd?this.Uq():wd(this)};s.Uq=function(){wd(this)};
function wd(a){if(a.bb&&"undefined"!=typeof ea)if(a.ej[1]&&4==a.of()&&2==xd(a))gd(a.ja,sd(a,"Local request error detected and ignored"));else if(a.Ch&&4==a.of())Rc.setTimeout(B(a.En,a),0);else if(a.dispatchEvent("readystatechange"),4==a.of()){gd(a.ja,sd(a,"Request complete"));a.bb=m;try{var b=xd(a),c,d;a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:d=i;break a;default:d=m}if(!(c=d)){var e;if(e=0===b){var f=String(a.Kh).match(Mb)[1]||l;if(!f&&self.location)var h=self.location.protocol,
f=h.substr(0,h.length-1);e=!rd.test(f?f.toLowerCase():"")}c=e}if(c)a.dispatchEvent("complete"),a.dispatchEvent("success");else{a.zf=6;var j;try{j=2<a.of()?a.k.statusText:""}catch(k){gd(a.ja,"Can not get status: "+k.message),j=""}a.Af=j+" ["+xd(a)+"]";ud(a)}}finally{vd(a)}}}
function vd(a,b){if(a.k){var c=a.k,d=a.ej[0]?y:l;a.k=l;a.ej=l;a.Cd&&(Rc.clearTimeout(a.Cd),a.Cd=l);b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){a.ja.log(ad,"Problem encountered resetting onreadystatechange: "+e.message,g)}}}s.ln=function(){return!!this.k};s.of=function(){return this.k?this.k.readyState:0};function xd(a){try{return 2<a.of()?a.k.status:-1}catch(b){return a.ja.log(bd,"Can not get status: "+b.message,g),-1}}
function yd(a){try{if(!a.k)return l;if("response"in a.k)return a.k.response;switch(a.vd){case "":case "text":return a.k.responseText;case "arraybuffer":if("mozResponseArrayBuffer"in a.k)return a.k.mozResponseArrayBuffer}a.ja.log(ad,"Response type "+a.vd+" is not supported on this browser",g);return l}catch(b){return gd(a.ja,"Can not get response: "+b.message),l}}function sd(a,b){return b+" ["+a.qn+" "+a.Kh+" "+xd(a)+"]"};function zd(a,b,c){Pc.call(this);this.url=a;this.contentType=b;this.timeout=c||0;this.o=this.Ba=l}C(zd,Pc);zd.prototype.load=function(a){this.o=a;this.Ba=new qd;G(this,this.Ba);this.Ba.fg=Math.max(0,this.timeout);switch(this.contentType){default:case 0:case 1:this.Ba.vd="";break;case 2:this.Ba.vd="arraybuffer";break;case 3:this.Ba.vd="blob"}this.S.listen(this.Ba,"success",this.jd);this.S.listen(this.Ba,["abort","error","timeout"],this.qf);this.Ba.send(this.url)};
zd.prototype.cancel=function(){this.Ba&&this.Ba.abort()};zd.prototype.jd=function(){var a;switch(this.contentType){default:case 0:var b=this.Ba;try{a=b.k?b.k.responseText:""}catch(c){gd(b.ja,"Can not get responseText: "+c.message),a=""}break;case 1:a=this.Ba;a=a.k?kd(a.k.responseText):g;break;case 2:case 3:a=yd(this.Ba)}this.o.D(a);this.o=l};zd.prototype.qf=function(){this.o.G(l);this.o=l};var Ad=t.postMessage?[t]:[];function J(a){for(var b=0;b<Ad.length;b++){for(var c=Array(arguments.length),d=0;d<c.length;d++)c[d]=arguments[d];try{Ad[b].postMessage({type:"gf_log",args:c},l)}catch(e){}}}if(t.console)var Bd=t.console,J=B(Bd.log,Bd);function Cd(a,b,c,d){F.call(this);this.context=a;this.cue=c;this.so=d;this.Gc=this.Nc=l;a&&(a=a.createBufferSource(),a.buffer=b,this.Gc=this.Nc=a)}C(Cd,F);Cd.prototype.b=function(){this.Gc&&(this.Gc.disconnect(),this.Nc=this.Gc=l);Cd.a.b.call(this)};Cd.prototype.play=function(a){this.Nc&&this.Nc.noteGrainOn(a||0,this.so.start/1E3,this.so.duration/1E3)};function Dd(a,b,c,d){Cd.call(this,a,b,c,d);this.Nc&&(this.Gc=this.Nc,this.Gc.connect(a.destination))}C(Dd,Cd);
function Ed(a,b,c,d){Cd.call(this,a,b,c,d);this.Of=l;this.Nc&&(b=a.createPanner(),b.panningModel=0,b.distanceModel=2,b.refDistance=5,b.maxDistance=1E3,b.rolloffFactor=1.4,b.setPosition(0,0,0),b.setOrientation(0,0,0,0,0,0),b.setVelocity(0,0,0),this.Of=b,this.Nc.connect(b),this.Gc=b,this.Gc.connect(a.destination))}C(Ed,Cd);Ed.prototype.b=function(){this.Of&&(this.Of.disconnect(),this.Of=l);Ed.a.b.call(this)};Ed.prototype.setPosition=function(a){var b=this.Of;b&&b.setPosition(a[0],a[1],a[2])};var Fd,Gd=!vb&&!E||E&&E&&9<=Lb||vb&&Jb("1.9.1");E&&Jb("9");var Hd=E||ub||wb;function Id(a,b){this.width=a;this.height=b}s=Id.prototype;s.r=function(){return new Id(this.width,this.height)};s.ug=function(){return this.width/this.height};s.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};s.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};s.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function Jd(a,b){var c=b||document;return c.querySelectorAll&&c.querySelector?c.querySelectorAll("."+a):c.getElementsByClassName?c.getElementsByClassName(a):Kd(a,b)}
function Kd(a,b){var c,d,e,f;c=document;c=b||c;if(c.querySelectorAll&&c.querySelector&&a)return c.querySelectorAll(""+(a?"."+a:""));if(a&&c.getElementsByClassName){var h=c.getElementsByClassName(a);return h}h=c.getElementsByTagName("*");if(a){f={};for(d=e=0;c=h[d];d++){var j=c.className;"function"==typeof j.split&&0<=Ha(j.split(/\s+/),a)&&(f[e++]=c)}f.length=e;return f}return h}
function Ld(a){a=a.document;a="CSS1Compat"==a.compatMode?a.documentElement:a.body;return new Id(a.clientWidth,a.clientHeight)}function Md(a){for(var b;b=a.firstChild;)a.removeChild(b)}function Nd(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function Od(a){this.R=a||t.document||document}function Pd(a,b,c){c=(a=c||a.R)||document;var d=l;return(d=c.querySelectorAll&&c.querySelector?c.querySelector("."+b):Jd(b,a)[0])||l}s=Od.prototype;s.createElement=function(a){return this.R.createElement(a)};
s.createTextNode=function(a){return this.R.createTextNode(a)};s.appendChild=function(a,b){a.appendChild(b)};s.append=function(a,b){function c(a){a&&e.appendChild(A(a)?d.createTextNode(a):a)}for(var d=Nd(a),e=a,f=arguments,h=1;h<f.length;h++){var j=f[h];if(ka(j)&&!(ma(j)&&0<j.nodeType)){var k=Ia,n;a:{if((n=j)&&"number"==typeof n.length){if(ma(n)){n="function"==typeof n.item||"string"==typeof n.item;break a}if(la(n)){n="function"==typeof n.item;break a}}n=m}k(n?Ma(j):j,c)}else c(j)}};
s.removeNode=function(a){return a&&a.parentNode?a.parentNode.removeChild(a):l};s.Sm=function(a){return Gd&&a.children!=g?a.children:Ja(a.childNodes,function(a){return 1==a.nodeType})};var Qd=["audio/mpeg","audio/ogg","audio/wav","audio/mp4"],Rd=l;function Sd(a){for(var b=0;b<a.length;b++){var c=a[b],d=c.type;if(!Rd){var e={},f=document.createElement("AUDIO");if(f&&f.canPlayType)for(var h=0;h<Qd.length;h++){var j=Qd[h];e[j]=!!f.canPlayType(j)}Rd=e}if(Rd[d])return c}return l};function Td(a){for(var b=arguments[0],c=1;c<arguments.length;c++){var d=arguments[c];if(0==d.lastIndexOf("/",0))b=d;else{var e;if(!(e=""==b))e=d.length-1,e=0<=e&&d.indexOf("/",e)==e;b=e?b+d:b+("/"+d)}}return b};function Ud(a,b,c,d,e,f){F.call(this);this.Ie=a;this.context=b;this.path=c;this.name=d||"Unknown";this.Qd=e||[];e&&(this.Qd=e,Na(this.Qd,jc));this.Em={};if(f)for(a=0;a<f.length;a++)b=f[a],this.Em[b.name]=b;this.o=this.uj=l}C(Ud,F);s=Ud.prototype;s.b=function(){this.o&&(this.o.cancel(),this.o=l);Ud.a.b.call(this)};s.load=function(){this.xj()};s.xj=function(){if(this.context){var a=Sd(this.Qd);a&&(a=new zd(Td(this.path,a.path),2),this.o=this.Ie.load(a),L(this.o,this.jd,this.handleError,this))}};
s.jd=function(a){this.o=l;var b=this.context;b&&b.decodeAudioData(a,B(ca("uj"),this),B(function(){J("failed to load audio buffer data")},this))};s.handleError=function(){this.o=l};function Vd(a,b,c){if(!a.uj)return l;var d;d=A(b)?a.Em[b]:b;if(!d)return J("WARNING: cue "+b+" not found in bank "+a.name),l;b=pc(d);if(!b)return l;a=new c(a.context,a.uj,d,b);a.play();return a};function Wd(a,b){Ud.call(this,a,b,"../assets/audio/base","BaseSounds",[new ic("audio/wav","base_optimized.wav",137870),new ic("audio/ogg","base_optimized.ogg",16480),new ic("audio/mpeg","base_optimized.mp3",12955)],[new nc("player_leave",0,[new I(820,641)]),new nc("click",0,[new I(0,105)]),new nc("player_join",0,[new I(205,515)])])}C(Wd,Ud);function Xd(a){switch(a){case 1:return"OES_texture_float";case 2:return"OES_texture_half_float";case 3:return"WEBGL_lose_context";case 4:return"OES_standard_derivatives";case 5:return"OES_vertex_array_object";case 6:return"WEBGL_debug_renderer_info";case 7:return"WEBGL_debug_shaders";case 8:return"WEBGL_compressed_texture_s3tc";case 9:return"OES_depth_texture";case 10:return"OES_element_index_uint";case 11:return"EXT_texture_filter_anisotropic";default:return l}}
function Yd(){this.Vm=l;this.cg=Array(11);this.Zj=Array(11)}Yd.prototype.ve=function(a){this.Vm=a;a=a.getSupportedExtensions();for(var b=0;b<this.cg.length;b++){this.cg[b]=m;this.Zj[b]=l;var c=Xd(b);if(c)for(var d=0;d<a.length;d++){var e=a[d],f=e.indexOf(c);if(-1!=f&&c.length==e.length-f){this.cg[b]=i;break}}}};Yd.prototype.isSupported=function(a){return!!this.cg[a]};Yd.prototype.enable=function(a){return!!this.get(a)};
Yd.prototype.get=function(a){var b=this.Zj[a];if(!b&&this.cg[a]){b=Xd(a);if(!b)return l;b=this.Vm.getExtension(b);this.Zj[a]=b}return b};function Zd(a,b,c){this.width=a;this.height=b;this.Yc=15;this.Mh=c}
function $d(a,b){var c=xa(b.type),d,e,f=c.indexOf(";");-1!=f?(d=c.substr(0,f),e=xa(c.substr(f+1))):(d=c,e="");switch(a.Yc){case ae:c="a";break;case be:c="ra";break;case ce:c="rgb";break;case de:c="rgba";break;default:return l}switch(d){case "image/gif":f="gif";break;case "image/jpeg":f="jpeg";break;case "image/png":f="png";break;case "image/webp":f="webp";break;case "application/octet-stream":f=l;break;default:return l}e=e.split(",");for(var h=0;h<e.length;h++){var j=e[h].split("=");if(!(2>j.length)){var k=
xa(j[0]).toLowerCase(),j=xa(j[1]).toLowerCase();"codec"==k?f=j:"format"==k&&(c=j)}}if(!f)return l;e=6408;h=l;switch(f){case "s3tc.dxt1":h=8;switch(c){case "rgb":e=33776;break;case "rgba":e=33777;break;default:return l}break;case "s3tc.dxt3":h=8;e=33778;if("rgba"!=c)return l;break;case "s3tc.dxt5":h=8;e=33779;if("rgba"!=c)return l;break;default:switch(c){case "a":e=6406;break;case "ra":e=6410;break;case "rgb":e=6407;break;case "rgba":e=6408;break;default:return l}}return new ee(d,f,c,e,h)}
var ae=8,be=9,ce=7,de=15;function ee(a,b,c,d,e){this.up=a;this.js=b;this.Hp=c;this.Vc=d;this.Es=e};function fe(a,b){Pc.call(this);this.d=a;this.url=b;this.o=this.ya=this.crossOrigin=l}C(fe,Pc);s=fe.prototype;s.b=function(){Oc(this.S);this.ya&&(this.ya.src="",this.ya=l);fe.a.b.call(this)};s.load=function(a){this.o=a;this.ya=this.d.createElement("IMG");this.crossOrigin&&(this.ya.crossOrigin=this.crossOrigin);this.S.listen(this.ya,"load",this.jd);this.S.listen(this.ya,["abort","error"],this.qf);this.ya.src=this.url};
s.cancel=function(){this.ya&&(Oc(this.S),this.ya.src="",this.ya=l,this.o.G(l),this.o=l)};s.jd=function(){var a=this.ya;this.ya=l;this.o.D(a);this.o=l};s.qf=function(){this.ya=l;this.o.G(l);this.o=l};function ge(a){F.call(this);this.g=a;this.Xn=String(he++);a=this.g;a.Kd[this.Xn]=this;a.Ck++}C(ge,F);ge.prototype.b=function(){var a=this.g;Ta(a.Kd,this.Xn);a.Ck--;this.w();ge.a.b.call(this)};var he=0;ge.prototype.w=y;ge.prototype.restore=y;function ie(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}ie.prototype.BYTES_PER_ELEMENT=4;ie.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};ie.prototype.toString=Array.prototype.join;"undefined"==typeof Float32Array&&(ie.BYTES_PER_ELEMENT=4,ie.prototype.BYTES_PER_ELEMENT=ie.prototype.BYTES_PER_ELEMENT,ie.prototype.set=ie.prototype.set,ie.prototype.toString=ie.prototype.toString,fa("Float32Array",ie));function je(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}je.prototype.BYTES_PER_ELEMENT=8;je.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};je.prototype.toString=Array.prototype.join;if("undefined"==typeof Float64Array){try{je.BYTES_PER_ELEMENT=8}catch(ke){}je.prototype.BYTES_PER_ELEMENT=je.prototype.BYTES_PER_ELEMENT;je.prototype.set=je.prototype.set;je.prototype.toString=je.prototype.toString;fa("Float64Array",je)};function N(){return new Float32Array(4)}function le(a,b,c,d){var e=N();me(e,a,b,c,d);return e}function me(a,b,c,d,e){a[0]=b;a[1]=c;a[2]=d;a[3]=e}function ne(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3]}function oe(a,b){var c=1/256;b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c;b[3]=a[3]*c}function pe(a,b){return a.length==b.length&&a[0]==b[0]&&a[1]==b[1]&&a[2]==b[2]&&a[3]==b[3]};function qe(a,b,c,d){ge.call(this,a);this.width=b;this.height=c;this.Hp=d;this.$c=0;this.Ik=9986;this.Ek=9729;this.Xr=this.Wr=10497;this.Hq=1;this.handle=this.yi=l}C(qe,ge);qe.prototype.w=function(){this.g.f.deleteTexture(this.handle);this.handle=l;qe.a.w.call(this)};qe.prototype.restore=function(){var a=this.g.f;qe.a.restore.call(this);this.handle&&a.deleteTexture(this.handle);this.handle=a.createTexture();this.$c=4294967295};
qe.prototype.bind=function(){var a=this.g.f;a.bindTexture(3553,this.handle);var b=this.$c;this.$c=0;b&1&&a.texParameteri(3553,10241,this.Ik);b&2&&a.texParameteri(3553,10240,this.Ek);b&4&&a.texParameteri(3553,10242,this.Wr);b&8&&a.texParameteri(3553,10243,this.Xr);b&16&&this.g.ph.isSupported(11)&&a.texParameteri(3553,34046,this.Hq)};function re(a){9728!=a.Ik&&(a.$c|=1,a.Ik=9728);9728!=a.Ek&&(a.$c|=2,a.Ek=9728)}
function se(a,b,c){a.yi=[];b=a.width/b;c=a.height/c;for(var d=0,e=0;d<c;d++)for(var f=d/c,h=0;h<b;h++,e++){var j=h/b;a.yi[e]=le(j,f,j+1/b,f+1/c)}}function te(a,b,c){a.yi&&(a=a.yi[b])&&ne(c,a);return c};function ue(a,b,c,d,e){qe.call(this,b,e?e.width:1,e?e.height:1,6408);this.Ie=a;this.path=c;this.name=d;this.fn=this.vf=l;this.Eq=m;this.o=l;if(e){this.vf=e;this.width=e.width;this.height=e.height;for(a=0;a<this.vf.Mh.length;a++)Na(this.vf.Mh[a],jc)}}C(ue,qe);s=ue.prototype;s.b=function(){this.o&&(this.o.cancel(),this.o=l);ue.a.b.call(this)};s.restore=function(){ue.a.restore.call(this);this.o||this.load()};s.load=function(){this.xj()};
s.xj=function(){var a=this.Ie.d,b;a:{var c=this.vf;b=this.g;var d;d=Math.min(Math.max(0,0),c.Mh.length-1);d=c.Mh[d];for(var e=0;e<d.length;e++){var f=d[e],h=$d(c,f);if(h&&("image/webp"!=h.up||b.ak.sl)){switch(h.Vc){case 33776:case 33777:case 33778:case 33779:if(!b.ak.io)continue}b=f;break a}}b=l}if(b&&(c=$d(this.vf,b))){this.fn=c;b=Td(this.path,b.path);d=l;a:switch(c.Vc){case 33776:case 33777:case 33778:case 33779:c=i;break a;default:c=m}d=c?new zd(b,2):new fe(a,b);this.o=this.Ie.load(d);L(this.o,
this.jd,this.handleError,this)}};s.jd=function(a){this.o=l;ve(this,a)};s.handleError=function(){this.o=l;var a=this.g.d.createElement("CANVAS");a.width=16;a.height=16;var b=a.getContext("2d");b.fillStyle="rgb(255,0,0)";b.fillRect(0,0,a.width,a.height);ve(this,a)};
function ve(a,b){var c=a.g.f;we(a.g,a);a.handle.Q=a.name;var d=a.width,e=a.height,f=a.fn;if(b instanceof HTMLCanvasElement||b instanceof HTMLImageElement)c.texImage2D(3553,0,f.Vc,f.Vc,5121,b);else if(b instanceof ArrayBuffer)switch(f.Vc){default:c.texImage2D(3553,0,f.Vc,d,e,0,f.Vc,5121,b);break;case 33776:case 33777:case 33778:case 33779:c.compressedTexImage2D(3553,0,f.Vc,d,e,0,b)}a.Eq=i};function xe(a,b){ue.call(this,a,b,"../assets/blocksets","simple",new Zd(256,256,[[new ic("image/png","simple.png",23183)]]));se(this,16,16)}C(xe,ue);function ye(a,b,c,d){ge.call(this,a);this.sj=b;this.lineHeight=c;this.tn=2;this.qp=0;this.Wm=[];for(a=0;a<d.length;a+=4){c=d[a];var e=0;c.length?e=c.charCodeAt(0):(e=c,c=String.fromCharCode(e));var f=d[a+1],h=d[a+2],j=d[a+3],k=te(b,a/4,N());this.Wm[e]=new ze(c,f,h,j,k)}}C(ye,ge);
function Ae(a,b,c,d,e){b.ea(c.length);for(var f=1/a.sj.width,h=1/a.sj.height,j=0,k=0,n=0,p=0,r=i,v=0,u=0;u<c.length;u++){var z=c[u];if("\r"!=z)if("\n"==z)k=Math.max(j+v,k),v=j=0,n+=a.lineHeight+a.tn,p+=a.tn,r=i;else if(z=a.Wm[z.charCodeAt(0)])r?p=Math.max(p,a.lineHeight):j+=a.qp+v,v=z.np,j+=z.Xo,b.add(z.jo[0],z.jo[1],z.vj*f,a.lineHeight*h,d,0+j,e+n,z.vj,a.lineHeight),j+=z.vj,r=m}k=Math.max(j+v,k);return[k,p]}function ze(a,b,c,d,e){this.is=a;this.Xo=b;this.vj=c;this.np=d;this.jo=e};function Be(a,b,c){a=new ue(b,c,"../assets/fonts","monospace",new Zd(128,128,[[new ic("image/png","monospace.png",1256)]]));se(a,8,8);re(a);ye.call(this,c,a,8,Ce);G(this,a)}C(Be,ye);
var Ce=[0,0,8,0,1,0,8,0,2,0,8,0,3,0,8,0,4,0,8,0,5,0,8,0,6,0,8,0,7,0,8,0,8,0,8,0,9,0,8,0,10,0,8,0,11,0,8,0,12,0,8,0,13,0,8,0,14,0,8,0,15,0,8,0,16,0,8,0,17,0,8,0,18,0,8,0,19,0,8,0,20,0,8,0,21,0,8,0,22,0,8,0,23,0,8,0,24,0,8,0,25,0,8,0,26,0,8,0,27,0,8,0,28,0,8,0,29,0,8,0,30,0,8,0,31,0,8,0," ",0,8,0,"!",0,8,0,'"',0,8,0,"#",0,8,0,"$",0,8,0,"%",0,8,0,"&",0,8,0,"'",0,8,0,"(",0,8,0,")",0,8,0,"*",0,8,0,"+",0,8,0,",",0,8,0,"-",0,8,0,".",0,8,0,"/",0,8,0,"0",0,8,0,"1",0,8,0,"2",0,8,0,"3",0,8,0,"4",0,8,0,"5",0,
8,0,"6",0,8,0,"7",0,8,0,"8",0,8,0,"9",0,8,0,":",0,8,0,";",0,8,0,"<",0,8,0,"=",0,8,0,">",0,8,0,"?",0,8,0,"@",0,8,0,"A",0,8,0,"B",0,8,0,"C",0,8,0,"D",0,8,0,"E",0,8,0,"F",0,8,0,"G",0,8,0,"H",0,8,0,"I",0,8,0,"J",0,8,0,"K",0,8,0,"L",0,8,0,"M",0,8,0,"N",0,8,0,"O",0,8,0,"P",0,8,0,"Q",0,8,0,"R",0,8,0,"S",0,8,0,"T",0,8,0,"U",0,8,0,"V",0,8,0,"W",0,8,0,"X",0,8,0,"Y",0,8,0,"Z",0,8,0,"[",0,8,0,"\\",0,8,0,"]",0,8,0,"^",0,8,0,"_",0,8,0,"`",0,8,0,"a",0,8,0,"b",0,8,0,"c",0,8,0,"d",0,8,0,"e",0,8,0,"f",0,8,0,"g",0,
8,0,"h",0,8,0,"i",0,8,0,"j",0,8,0,"k",0,8,0,"l",0,8,0,"m",0,8,0,"n",0,8,0,"o",0,8,0,"p",0,8,0,"q",0,8,0,"r",0,8,0,"s",0,8,0,"t",0,8,0,"u",0,8,0,"v",0,8,0,"w",0,8,0,"x",0,8,0,"y",0,8,0,"z",0,8,0,"{",0,8,0,"|",0,8,0,"}",0,8,0,"~",0,8,0,"\u2302",0,8,0,"\u00c7",0,8,0,"\u00fc",0,8,0,"\u00e9",0,8,0,"\u00e2",0,8,0,"\u00e4",0,8,0,"\u00e0",0,8,0,"\u00e5",0,8,0,"\u00e7",0,8,0,"\u00ea",0,8,0,"\u00eb",0,8,0,"\u00e8",0,8,0,"\u00ef",0,8,0,"\u00ee",0,8,0,"\u00ec",0,8,0,"\u00c4",0,8,0,"\u00c5",0,8,0,"\u00c9",0,8,
0,"\u00e6",0,8,0,"\u00c6",0,8,0,"\u00f4",0,8,0,"\u00f6",0,8,0,"\u00f2",0,8,0,"\u00fb",0,8,0,"\u00f9",0,8,0,"\u00ff",0,8,0,"\u00d6",0,8,0,"\u00dc",0,8,0,"\u00f8",0,8,0,"\u00a3",0,8,0,"\u00d8",0,8,0,"\u00d7",0,8,0,"\u0192",0,8,0,"\u00e1",0,8,0,"\u00ed",0,8,0,"\u00f3",0,8,0,"\u00fa",0,8,0,"\u00f1",0,8,0,"\u00d1",0,8,0,"\u00aa",0,8,0,"\u00ba",0,8,0,"\u00bf",0,8,0,"\u00ae",0,8,0,"\u00ac",0,8,0,"\u00bd",0,8,0,"\u00bc",0,8,0,"\u00a1",0,8,0,"\u00ab",0,8,0,"\u00bb",0,5,0];function De(a,b,c,d){ge.call(this,a);this.name=b;this.to=c||l;this.Rm=d||l;this.md=this.handle=this.gd=this.Ed=l}C(De,ge);s=De.prototype;s.load=function(){this.restore()};s.w=function(){var a=this.g.f;this.Ed&&(a.deleteShader(this.Ed),this.Ed=l);this.gd&&(a.deleteShader(this.gd),this.gd=l);this.handle&&(a.deleteProgram(this.handle),this.handle=l);De.a.w.call(this)};s.restore=function(){Ee(this);this.Fb()};
function Ee(a){a.to&&a.Rm&&(a.md=l,a.Ed=a.createShader(35633,a.to),a.gd=a.createShader(35632,a.Rm),a.Ed&&a.gd&&(a.handle=a.createProgram(a.Ed,a.gd)))}s.Fb=function(){var a;if(!(a=!Fe(this,35633,this.Ed)))if(!(a=!Fe(this,35632,this.gd))){a=this.handle;var b=this.g.f,c=xa(b.getProgramInfoLog(a));if(c&&c.length){this.md=this.md||[];for(var d=c.split("\n"),e=0;e<d.length;e++){var f=d[e];f.length&&this.md.push(f)}J("program "+this.name+":"+c)}a=!b.getProgramParameter(a,35714)}return a?(this.w(),m):i};
s.createShader=function(a,b){var c=this.g.f,d=c.createShader(a);if(!d)return l;c.shaderSource(d,b);c.compileShader(d);return d};function Fe(a,b,c){var d=a.g.f,e=xa(d.getShaderInfoLog(c));if(e&&e.length){a.md=a.md||[];for(var f=e.split("\n"),h=0;h<f.length;h++){var j=f[h];j.length&&a.md.push(j)}J("shader "+a.name+"/"+b+":"+e)}return!!d.getShaderParameter(c,35713)}
s.createProgram=function(a,b){var c=this.g.f,d=c.createProgram();if(!d)return l;c.attachShader(d,a);c.attachShader(d,b);this.ep(d);c.linkProgram(d);return d};s.ep=y;function Ge(a,b,c){De.call(this,a,"FaceProgram",b,c);this.lj=this.pa=this.Hd=-1;this.Qi=this.Qc=this.yl=this.zl=this.xl=this.oo=this.ub=this.vb=this.oa=l}C(Ge,De);Ge.prototype.w=function(){this.lj=this.pa=this.Hd=-1;this.Qi=this.Qc=this.yl=this.zl=this.xl=this.oo=this.ub=this.vb=this.oa=l;Ge.a.w.call(this)};
function He(a){Ge.call(this,a,"precision highp float;uniform mat4 a,d;uniform vec2 b;uniform vec3 c,e,f,g;attribute vec3 j,k;varying vec3 h;void n(){float m=max(dot(j,f),0.);h=e+g*m;}varying vec4 i;attribute vec4 l;void main(){gl_Position=a*vec4(k,1);i=l;n();}","precision mediump float;uniform mat4 a,d;uniform vec2 b,k;uniform vec3 c,e,f,g;vec4 o(vec4 l){float m,n;m=gl_FragCoord.z/gl_FragCoord.w;n=1.-smoothstep(b.x,b.y,m);return vec4(mix(c.rgb,l.rgb,n).rgb,l.a);}varying vec3 h;vec4 p(vec4 l){return vec4(l.rgb*h,l.a);}varying vec4 i;uniform sampler2D j;void main(){vec2 l=(i.xy+1.)/k;vec4 m,n;m=texture2D(j,l);if(m.a==0.)discard;n=m+i.z;gl_FragColor=o(p(n));}")}
C(He,Ge);
He.prototype.Fb=function(){var a=this.g.f;if(!He.a.Fb.call(this)||!this.handle)return m;this.Hd=a.getAttribLocation(this.handle,"j");this.pa=a.getAttribLocation(this.handle,"k");this.lj=a.getAttribLocation(this.handle,"l");this.oa=a.getUniformLocation(this.handle,"a");this.vb=a.getUniformLocation(this.handle,"b");this.ub=a.getUniformLocation(this.handle,"c");this.oo=a.getUniformLocation(this.handle,"d");this.xl=a.getUniformLocation(this.handle,"e");this.zl=a.getUniformLocation(this.handle,"f");this.yl=
a.getUniformLocation(this.handle,"g");this.Qc=a.getUniformLocation(this.handle,"j");this.Qi=a.getUniformLocation(this.handle,"k");return i};function Ie(a,b,c){De.call(this,a,"LineProgram",b,c);this.Wc=this.pa=-1;this.ub=this.vb=this.oa=l}C(Ie,De);Ie.prototype.w=function(){this.Wc=this.pa=-1;this.ub=this.vb=this.oa=l;Ie.a.w.call(this)};
function Je(a){Ie.call(this,a,"precision highp float;uniform mat4 a;uniform vec2 b;uniform vec3 c;varying vec4 d;attribute vec3 e;attribute vec4 f;void main(){gl_Position=a*vec4(e,1);d=f;}","precision mediump float;uniform mat4 a;uniform vec2 b;uniform vec3 c;vec4 h(vec4 e){float f,g;f=gl_FragCoord.z/gl_FragCoord.w;g=1.-smoothstep(b.x,b.y,f);return vec4(mix(c.rgb,e.rgb,g).rgb,e.a);}varying vec4 d;void main(){gl_FragColor=h(d);}")}C(Je,Ie);
Je.prototype.Fb=function(){var a=this.g.f;if(!Je.a.Fb.call(this)||!this.handle)return m;this.pa=a.getAttribLocation(this.handle,"e");this.Wc=a.getAttribLocation(this.handle,"f");this.oa=a.getUniformLocation(this.handle,"a");this.vb=a.getUniformLocation(this.handle,"b");this.ub=a.getUniformLocation(this.handle,"c");return i};function Ke(a,b,c){De.call(this,a,"ModelProgram",b,c);this.Xl=this.Hd=this.pa=-1;this.Qc=this.no=this.Bl=this.Al=this.ub=this.vb=this.oa=l}C(Ke,De);Ke.prototype.w=function(){this.Xl=this.Hd=this.pa=-1;this.Qc=this.no=this.Bl=this.Al=this.ub=this.vb=this.oa=l;Ke.a.w.call(this)};
function Le(a){Ke.call(this,a,"precision highp float;uniform mat4 a,d,e,f[20];uniform vec2 b;uniform vec3 c;vec4 l(vec3 k){return d*e*vec4(k,1);}varying vec2 g;attribute vec3 h,i;attribute vec2 j;void main(){gl_Position=l(h);g=j;}","precision mediump float;uniform mat4 a,d,e,f[20];uniform vec2 b;uniform vec3 c;vec4 l(vec4 i){float j,k;j=gl_FragCoord.z/gl_FragCoord.w;k=1.-smoothstep(b.x,b.y,j);return vec4(mix(c.rgb,i.rgb,k).rgb,i.a);}varying vec2 g;uniform sampler2D h;void main(){vec4 i=texture2D(h,g);if(i.a==0.)discard;gl_FragColor=l(i);}")}
C(Le,Ke);
Le.prototype.Fb=function(){var a=this.g.f;if(!Le.a.Fb.call(this)||!this.handle)return m;this.pa=a.getAttribLocation(this.handle,"h");this.Hd=a.getAttribLocation(this.handle,"i");this.Xl=a.getAttribLocation(this.handle,"j");this.oa=a.getUniformLocation(this.handle,"a");this.vb=a.getUniformLocation(this.handle,"b");this.ub=a.getUniformLocation(this.handle,"c");this.Al=a.getUniformLocation(this.handle,"d");this.Bl=a.getUniformLocation(this.handle,"e");this.no=a.getUniformLocation(this.handle,"f");this.Qc=
a.getUniformLocation(this.handle,"h");return i};function Me(a,b,c){De.call(this,a,"SpriteProgram",b,c);this.Wc=this.kj=this.pa=-1;this.Pi=this.Qc=this.oa=l}C(Me,De);Me.prototype.w=function(){this.Wc=this.kj=this.pa=-1;this.Pi=this.Qc=this.oa=l;Me.a.w.call(this)};
function Ne(a){Me.call(this,a,"precision highp float;uniform mat4 a;varying vec2 b;varying vec4 c;attribute vec3 d;attribute vec2 e;attribute vec4 f;void main(){gl_Position=a*vec4(d,1);b=e;c=f;}","precision mediump float;uniform mat4 a;varying vec2 b;varying vec4 c;uniform sampler2D d;uniform vec4 e;void main(){vec4 f,g;f=texture2D(d,b);g=f*c*e;if(g.a==0.)discard;gl_FragColor=g;}")}C(Ne,Me);
Ne.prototype.Fb=function(){var a=this.g.f;if(!Ne.a.Fb.call(this)||!this.handle)return m;this.pa=a.getAttribLocation(this.handle,"d");this.kj=a.getAttribLocation(this.handle,"e");this.Wc=a.getAttribLocation(this.handle,"f");this.oa=a.getUniformLocation(this.handle,"a");this.Qc=a.getUniformLocation(this.handle,"d");this.Pi=a.getUniformLocation(this.handle,"e");return i};function Oe(a,b){ue.call(this,a,b,"../assets/textures","ui",new Zd(256,256,[[new ic("image/png","ui.png",949)]]));se(this,16,16)}C(Oe,ue);function O(){return new Float32Array(3)}function Pe(a,b,c){var d=O();Q(d,a,b,c);return d}function Q(a,b,c,d){a[0]=b;a[1]=c;a[2]=d}function Qe(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2]}function Re(a,b,c){c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2]}function Se(a,b,c){c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b}function Te(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)}function Ue(a,b){var c=a[0]-b[0],d=a[1]-b[1],e=a[2]-b[2];return c*c+d*d+e*e}
function Ve(a,b,c){var d=b[0]-a[0],e=b[1]-a[1];a=b[2]-a[2];(b=Math.sqrt(d*d+e*e+a*a))?(b=1/b,c[0]=d*b,c[1]=e*b,c[2]=a*b):c[0]=c[1]=c[2]=0}function We(a,b){return a.length==b.length&&a[0]==b[0]&&a[1]==b[1]&&a[2]==b[2]};function Xe(){return new Float32Array(16)}function Ye(){var a=Xe();a[0]=a[5]=a[10]=a[15]=1;return a}function Ze(a,b,c,d,e,f,h,j,k){a[0]=b;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=d;a[11]=e;a[12]=f;a[13]=h;a[14]=j;a[15]=k}
function $e(a,b,c){var d=a[0],e=a[1],f=a[2],h=a[3],j=a[4],k=a[5],n=a[6],p=a[7],r=a[8],v=a[9],u=a[10],z=a[11],x=a[12],M=a[13],K=a[14];a=a[15];var U=b[0],ha=b[1],Ga=b[2],ab=b[3],bb=b[4],cb=b[5],db=b[6],eb=b[7],fb=b[8],gb=b[9],hb=b[10],ib=b[11],P=b[12],jf=b[13],kf=b[14];b=b[15];c[0]=d*U+j*ha+r*Ga+x*ab;c[1]=e*U+k*ha+v*Ga+M*ab;c[2]=f*U+n*ha+u*Ga+K*ab;c[3]=h*U+p*ha+z*Ga+a*ab;c[4]=d*bb+j*cb+r*db+x*eb;c[5]=e*bb+k*cb+v*db+M*eb;c[6]=f*bb+n*cb+u*db+K*eb;c[7]=h*bb+p*cb+z*db+a*eb;c[8]=d*fb+j*gb+r*hb+x*ib;c[9]=
e*fb+k*gb+v*hb+M*ib;c[10]=f*fb+n*gb+u*hb+K*ib;c[11]=h*fb+p*gb+z*hb+a*ib;c[12]=d*P+j*jf+r*kf+x*b;c[13]=e*P+k*jf+v*kf+M*b;c[14]=f*P+n*jf+u*kf+K*b;c[15]=h*P+p*jf+z*kf+a*b}
function af(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],h=a[4],j=a[5],k=a[6],n=a[7],p=a[8],r=a[9],v=a[10],u=a[11],z=a[12],x=a[13],M=a[14],K=a[15],U=c*j-d*h,ha=c*k-e*h,Ga=c*n-f*h,ab=d*k-e*j,bb=d*n-f*j,cb=e*n-f*k,db=p*x-r*z,eb=p*M-v*z,fb=p*K-u*z,gb=r*M-v*x,hb=r*K-u*x,ib=v*K-u*M,P=U*ib-ha*hb+Ga*gb+ab*fb-bb*eb+cb*db;0!=P&&(P=1/P,b[0]=(j*ib-k*hb+n*gb)*P,b[1]=(-d*ib+e*hb-f*gb)*P,b[2]=(x*cb-M*bb+K*ab)*P,b[3]=(-r*cb+v*bb-u*ab)*P,b[4]=(-h*ib+k*fb-n*eb)*P,b[5]=(c*ib-e*fb+f*eb)*P,b[6]=(-z*cb+M*Ga-K*ha)*P,b[7]=(p*cb-
v*Ga+u*ha)*P,b[8]=(h*hb-j*fb+n*db)*P,b[9]=(-c*hb+d*fb-f*db)*P,b[10]=(z*bb-x*Ga+K*U)*P,b[11]=(-p*bb+r*Ga-u*U)*P,b[12]=(-h*gb+j*eb-k*db)*P,b[13]=(c*gb-d*eb+e*db)*P,b[14]=(-z*ab+x*ha-M*U)*P,b[15]=(p*ab-r*ha+v*U)*P)}function bf(a,b,c){var d=b[0],e=b[1];b=b[2];c[0]=d*a[0]+e*a[4]+b*a[8]+a[12];c[1]=d*a[1]+e*a[5]+b*a[9]+a[13];c[2]=d*a[2]+e*a[6]+b*a[10]+a[14]}function cf(a,b,c){var d=b[0],e=b[1];b=b[2];c[0]=d*a[0]+e*a[4]+b*a[8];c[1]=d*a[1]+e*a[5]+b*a[9];c[2]=d*a[2]+e*a[6]+b*a[10]}
function df(a,b,c){var d=b[0],e=b[1];b=b[2];var f=1/(d*a[3]+e*a[7]+b*a[11]+a[15]);c[0]=(d*a[0]+e*a[4]+b*a[8]+a[12])*f;c[1]=(d*a[1]+e*a[5]+b*a[9]+a[13])*f;c[2]=(d*a[2]+e*a[6]+b*a[10]+a[14])*f}new Float64Array(3);new Float64Array(3);new Float64Array(4);new Float64Array(4);new Float64Array(4);new Float64Array(16);var ef=!!t.wtf&&2==t.wtf.trace.API_VERSION,ff=ef?t.wtf.trace.events.createScope:function(){return y},gf=ef?t.wtf.trace.leaveScope:function(a,b){return b},hf=ef?t.wtf.trace.appendScopeData:y,lf=ef?t.wtf.trace.instrument:ia,mf=ef?t.wtf.trace.instrumentType:ia;function R(a){F.call(this);this.dc=a;this.g=a.g;this.Vd=24576;this.c=new ArrayBuffer(this.Vd*R.mg);this.kn=new Int8Array(this.c);this.Dl=new Uint8Array(this.c);this.gf=0}C(R,F);R.Co=2;R.og=6;R.ng=10;R.jj=4;R.mg=R.jj*R.ng;R.To=0;R.So=3;R.Wo=6;
R.Bp=new Int8Array([0,0,1,0,0,1,1,1,0,0,1,0,1,0,0,1,0,1,0,0,1,1,1,0,0,1,0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,-1,0,1,0,0,0,1,0,0,0,-1,0,0,0,0,1,1,0,0,0,-1,1,0,0,0,1,0,0,0,0,-1,1,1,0,0,0,1,0,0,1,0,1,0,0,0,0,1,1,0,1,0,1,1,0,0,1,1,1,0,1,0,0,1,0,0,1,1,0,0,1,0,0,0,0,0,0,0,0,0,-1,0,0,0,0,0,1,0,0,0,-1,0,1,0,0,0,1,0,1,0,-1,0,1,1,0,0,0,0,1,0,-1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,1,0,1,0,0,0,0,0,0,1,1,1,1,0,0,1,0,0,0,1,0,1,1,0,0,1,1,0,0,0,0,0,-1,0,0,1,1,0,0,0,0,1,-1,0,0,0,1,0,0,0,1,1,-1,0,0,0,0,0,0,0,1,0,-1,0,
0,1,0,0,0]);R.Dm=function(a){for(var b=a.createBuffer(),c=Math.floor(65535/R.og),d=c*R.og,e=new Uint16Array([0,1,2,0,2,3]),d=new Uint16Array(d),f=0,h=0,j=0;f<c;f++){for(var k=0;k<e.length;k++)d[h+k]=e[k]+j;h+=e.length;j+=R.jj}a.bindBuffer(34963,b);a.bufferData(34963,d,35044);a.bindBuffer(34963,l);return b};R.prototype.ea=function(a){a=Math.max(this.Vd,this.gf+a);return a>this.Vd?this.Ud(a):i};
R.prototype.Ud=function(a){a=Math.ceil(a||this.Vd*R.Co);if(a>=65535/R.og)return m;var b=new ArrayBuffer(a*R.mg);(new Uint8Array(b)).set(new Uint8Array(this.c));this.Vd=a;this.c=b;this.kn=new Int8Array(this.c);this.Dl=new Uint8Array(this.c);return i};
function nf(a,b,c,d,e,f){for(var h=a.gf++;h>=a.Vd;)if(!a.Ud())return;var j=R.Bp;b*=40;var k=a.kn;a=a.Dl;for(var h=h*R.mg,n=0,p=0;n<R.jj;n++,p+=10)k[h+p+0]=j[b+p+0]+c,k[h+p+1]=j[b+p+1]+d,k[h+p+2]=j[b+p+2]+e,k[h+p+3]=j[b+p+3],k[h+p+4]=j[b+p+4],k[h+p+5]=j[b+p+5],a[h+p+6]=j[b+p+6]?255*f[2]:255*f[0],a[h+p+7]=j[b+p+7]?255*f[3]:255*f[1],a[h+p+8]=j[b+p+8],a[h+p+9]=j[b+p+9]}
R.prototype.finish=function(a){var b=this.g.f,c=this.gf*R.mg,d=this.gf*R.og;if(!c)return a&&b.deleteBuffer(a),{buffer:l,af:0,rm:0};a=a||b.createBuffer();b.bindBuffer(34962,a);b.bufferData(34962,this.Dl.subarray(0,c),35048);b={buffer:a,af:d,rm:c};this.gf=0;return b};
R.prototype.sc=function(a,b,c,d){var e=this.g.f,f=this.dc.yc;if(d){var h=R.Li;$e(a.Uc,b,h);e.uniformMatrix4fv(f.oa,m,h);e.bindBuffer(34962,c);e.vertexAttribPointer(f.pa,3,5120,m,R.ng,R.To);e.vertexAttribPointer(f.Hd,3,5120,m,R.ng,R.So);e.vertexAttribPointer(f.lj,4,5121,m,R.ng,R.Wo);e.drawElements(4,d,5123,0)}};R.Li=Xe();R=mf(R,"blk.graphics.BlockBuilder",{Dm:"createIndexBuffer",Ud:"expand_",finish:"finish"});function of(a){F.call(this);this.M=a;this.ga=[]}C(of,F);of.prototype.flush=function(a){this.M.em(m);var b=this.M.g.f;b.uniformMatrix4fv(this.M.Hf.Al,m,a.Uc);a=this.M.Hf.Bl;for(var c=0;c<this.ga.length;c++){var d=this.ga[c],e=d.Aq,d=d.transform;b.uniformMatrix4fv(a,m,d);e.A(d)}this.ga.length=0;pf(this.M.g,l)};of=mf(of,"blk.graphics.RenderList",{flush:"flush"});function qf(){this.Cg=m;this.Dg=this.Eg=32774;this.Ig=1;this.Gg=0;this.Hg=1;this.Fg=0;this.blendColor=N();this.colorMask=rf}var rf=15;qf.prototype.nd=function(a,b){this!=b&&(b?this.od(a,b):this.Fc(a))};
qf.prototype.Fc=function(a){this.Cg?a.enable(3042):a.disable(3042);a.blendEquationSeparate(this.Eg,this.Dg);a.blendFuncSeparate(this.Ig,this.Gg,this.Hg,this.Fg);a.blendColor(this.blendColor[0],this.blendColor[1],this.blendColor[2],this.blendColor[3]);a.colorMask(!!(this.colorMask&1),!!(this.colorMask&2),!!(this.colorMask&4),!!(this.colorMask&8))};
qf.prototype.od=function(a,b){this.Cg!=b.Cg&&(this.Cg?a.enable(3042):a.disable(3042));(this.Eg!=b.Eg||this.Dg!=b.Dg)&&a.blendEquationSeparate(this.Eg,this.Dg);(this.Ig!=b.Ig||this.Gg!=b.Gg||this.Hg!=b.Hg||this.Fg!=b.Fg)&&a.blendFuncSeparate(this.Ig,this.Gg,this.Hg,this.Fg);pe(this.blendColor,b.blendColor)||a.blendColor(this.blendColor[0],this.blendColor[1],this.blendColor[2],this.blendColor[3]);this.colorMask!=b.colorMask&&a.colorMask(!!(this.colorMask&1),!!(this.colorMask&2),!!(this.colorMask&4),
!!(this.colorMask&8))};new qf;new qf;function sf(){this.Xb=m;this.depthFunc=513;this.$g=0;this.Zg=1;this.depthMask=i;this.$h=m;this.bi=this.ai=0}sf.prototype.nd=function(a,b){this!=b&&(b?this.od(a,b):this.Fc(a))};sf.prototype.Fc=function(a){this.Xb?a.enable(2929):a.disable(2929);a.depthFunc(this.depthFunc);a.depthRange(this.$g,this.Zg);a.depthMask(this.depthMask);this.$h?a.enable(32823):a.disable(32823);a.polygonOffset(this.ai,this.bi)};
sf.prototype.od=function(a,b){this.Xb!=b.Xb&&(this.Xb?a.enable(2929):a.disable(2929));this.depthFunc!=b.depthFunc&&a.depthFunc(this.depthFunc);(this.$g!=b.$g||this.Zg!=b.Zg)&&a.depthRange(this.$g,this.Zg);this.depthMask!=b.depthMask&&a.depthMask(this.depthMask);this.$h!=b.$h&&(this.$h?a.enable(32823):a.disable(32823));(this.ai!=b.ai||this.bi!=b.bi)&&a.polygonOffset(this.ai,this.bi)};/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
function tf(a,b){this.ti=[];this.Cn=a;this.Gm=b||l}s=tf.prototype;s.Gb=m;s.pf=m;s.zj=m;s.gp=m;s.pl=m;s.Aj=0;s.cancel=function(a){if(this.Gb)this.Wf instanceof tf&&this.Wf.cancel();else{if(this.la){var b=this.la;delete this.la;a?b.cancel(a):(b.Aj--,0>=b.Aj&&b.cancel())}this.Cn?this.Cn.call(this.Gm,this):this.pl=i;this.Gb||this.G(new uf(this))}};s.Cm=function(a,b){this.zj=m;vf(this,a,b)};function vf(a,b,c){a.Gb=i;a.Wf=c;a.pf=!b;wf(a)}function xf(a){a.Gb&&(a.pl||aa(new yf(a)),a.pl=m)}
s.D=function(a){xf(this);vf(this,i,a)};s.G=function(a){xf(this);vf(this,m,a)};function L(a,b,c,d){a.ti.push([b,c,d]);a.Gb&&wf(a)}function zf(a){return Ka(a.ti,function(a){return la(a[1])})}
function wf(a){a.Fl&&(a.Gb&&zf(a))&&(t.clearTimeout(a.Fl),delete a.Fl);a.la&&(a.la.Aj--,delete a.la);for(var b=a.Wf,c=m,d=m;a.ti.length&&!a.zj;){var e=a.ti.shift(),f=e[0],h=e[1],e=e[2];if(f=a.pf?h:f)try{var j=f.call(e||a.Gm,b);w(j)&&(a.pf=a.pf&&(j==b||j instanceof Error),a.Wf=b=j);b instanceof tf&&(d=i,a.zj=i)}catch(k){b=k,a.pf=i,zf(a)||(c=i)}}a.Wf=b;d&&(L(b,B(a.Cm,a,i),B(a.Cm,a,m)),b.gp=i);c&&(a.Fl=t.setTimeout(function(){aa(b)},0))}function Af(){var a=new tf;a.D(l);return a}
function yf(a){ua.call(this);this.Wb=a}C(yf,ua);yf.prototype.message="Deferred has already fired";yf.prototype.name="AlreadyCalledError";function uf(a){ua.call(this);this.Wb=a}C(uf,ua);uf.prototype.message="Deferred was cancelled";uf.prototype.name="CancelledError";var Bf,Cf,Df,Ef;Ef=Df=Cf=Bf=m;var Ff=rb();Ff&&(-1!=Ff.indexOf("Firefox")||-1!=Ff.indexOf("Camino")||(-1!=Ff.indexOf("iPhone")||-1!=Ff.indexOf("iPod")?Bf=i:-1!=Ff.indexOf("iPad")?Cf=i:-1!=Ff.indexOf("Android")?Df=i:-1!=Ff.indexOf("Chrome")&&(Ef=i)));var Gf=Bf,Hf=Cf,If=Df,Jf=Ef;function Kf(a){F.call(this);this.g=a;this.qd=[]}C(Kf,F);Kf.prototype.b=function(){Ia(this.qd,H);this.qd.length=0;Kf.a.b.call(this)};Kf.prototype.X=function(a){this.qd.push(a)};Kf.prototype.ve=function(a){for(var b=new tf,c=0;c<this.qd.length;c++)Ee(this.qd[c]);Jf&&!a?Sc(function(){Lf(this,b)},5,this):Lf(this,b);return b};function Lf(a,b){for(var c=0;c<a.qd.length;c++){var d=a.qd[c];try{if(!d.Fb()){b.G(m);break}}catch(e){b.G(e);break}}b.Gb||b.D(l)};function Mf(){this.eh=i;this.Ve=m;this.cullFace=1029;this.uh=2305;this.li=m;this.ni=1;this.ki=this.mi=m}Mf.prototype.nd=function(a,b){this!=b&&(b?this.od(a,b):this.Fc(a))};Mf.prototype.Fc=function(a){this.eh?a.enable(3024):a.disable(3024);this.Ve?a.enable(2884):a.disable(2884);a.cullFace(this.cullFace);a.frontFace(this.uh);this.li?a.enable(32928):a.disable(32928);a.sampleCoverage(this.ni,this.mi);this.ki?a.enable(32926):a.disable(32926)};
Mf.prototype.od=function(a,b){this.eh!=b.eh&&(this.eh?a.enable(3024):a.disable(3024));this.Ve!=b.Ve&&(this.Ve?a.enable(2884):a.disable(2884));this.cullFace!=b.cullFace&&a.cullFace(this.cullFace);this.uh!=b.uh&&a.frontFace(this.uh);this.li!=b.li&&(this.li?a.enable(32928):a.disable(32928));(this.ni!=b.ni||this.mi!=b.mi)&&a.sampleCoverage(this.ni,this.mi);this.ki!=b.ki&&(this.ki?a.enable(32926):a.disable(32926))};function Nf(a,b,c,d){ge.call(this,a);this.xe=b;this.we=w(c)?c:16;this.aq=w(d)?d:32;this.sb=new ArrayBuffer(this.we*this.xe);this.Oa=l;this.kc=0;this.Ri=[];this.bc=m;this.xb=Number.MAX_VALUE;this.wb=Number.MIN_VALUE}C(Nf,ge);s=Nf.prototype;s.w=function(){this.g.f.deleteBuffer(this.Oa);this.Oa=l;this.bc=i;this.xb=Number.MIN_VALUE;this.wb=Number.MAX_VALUE;Nf.a.w.call(this)};
s.restore=function(){var a=this.g.f;Nf.a.restore.call(this);this.Oa=a.createBuffer();this.bc=i;this.xb=Number.MIN_VALUE;this.wb=Number.MAX_VALUE;Of(this)};s.ea=function(a){a=Math.max(this.we,this.kc+a);return a>this.we?this.Ud(a):i};s.Ud=function(a){a=a||this.we+this.aq;if(65535<=a)return m;var b=new ArrayBuffer(a*this.xe);(new Uint8Array(b)).set(new Uint8Array(this.sb));this.we=a;this.sb=b;this.bc=i;this.xb=Number.MIN_VALUE;this.wb=Number.MAX_VALUE;this.Kj();return i};
function Pf(a){for(var b=0,b=a.Ri.length?a.Ri.pop():a.kc++;b>=a.we;)if(!a.Ud())return 65535;a.bc=i;a.xb=Math.min(a.xb,b);a.wb=Math.max(a.wb,b);return b}s.clear=function(){this.kc=0;this.Ri.length=0;this.bc=m;this.xb=Number.MAX_VALUE;this.wb=Number.MIN_VALUE};function Of(a){var b=a.g.f;b.bindBuffer(34962,a.Oa);a.bc&&(b.bufferData(34962,a.sb,35048),a.bc=m,a.xb=Number.MAX_VALUE,a.wb=Number.MIN_VALUE)}s.Kj=y;function Qf(a,b){Nf.call(this,a,96);this.Cr=b;this.fd=new Float32Array(this.sb);this.Be=new Uint32Array(this.sb)}C(Qf,Nf);Qf.prototype.Kj=function(){this.fd=new Float32Array(this.sb);this.Be=new Uint32Array(this.sb)};var Rf=new Float32Array([0,0,0,0,0,0,0,1,0,0,1,0,1,0,0,1,0,0,1,1,0,1,1,0]);
Qf.prototype.add=function(a,b,c,d,e,f,h,j,k,n){var p=Pf(this);if(65535==p)return p;n=n||0;for(var r=this.fd,v=this.Be,u=p*this.xe/4,z=0,x=0;4>z;z++,x+=6)r[u+x+0]=Rf[x+0]*j+f,r[u+x+1]=Rf[x+1]*k+h,r[u+x+2]=Rf[x+2]+n,r[u+x+3]=Rf[x+3]?a+c:a,r[u+x+4]=Rf[x+4]?b+d:b,v[u+x+5]=e;return p};
Qf.prototype.update=function(a,b,c,d,e,f,h,j,k,n,p){p=p||0;for(var r=this.fd,v=this.Be,u=a*this.xe/4,z=0,x=0;4>z;z++,x+=6)r[u+x+0]=Rf[x+0]*k+h,r[u+x+1]=Rf[x+1]*n+j,r[u+x+2]=Rf[x+2]+p,r[u+x+3]=Rf[x+3]?b+d:b,r[u+x+4]=Rf[x+4]?c+e:c,v[u+x+5]=f;this.bc=i;this.xb=Math.min(this.xb,a);this.wb=Math.max(this.wb,a)};
Qf.prototype.remove=function(a){for(var b=this.fd,c=a*this.xe,d=0;4>d;d++)b[c+0]=0,b[c+1]=0,b[c+2]=0,c+=96;a==this.kc?this.kc--:(this.Ri.push(a),this.bc=i,this.xb=Math.min(this.xb,a),this.wb=Math.max(this.wb,a))};
Qf.prototype.sc=function(a,b,c){var d=this.g.f,e=this.Cr;if(this.kc){if(b){var f=Sf;$e(a,b,f);d.uniformMatrix4fv(e.oa,m,f)}else d.uniformMatrix4fv(e.oa,m,a);w(c)?d.uniform4fv(e.Pi,c):d.uniform4f(e.Pi,1,1,1,1);Of(this);d.vertexAttribPointer(e.pa,3,5126,m,24,0);d.vertexAttribPointer(e.kj,2,5126,m,24,12);d.vertexAttribPointer(e.Wc,4,5121,i,24,20);d.drawElements(4,6*this.kc,5123,0)}};var Sf=Xe();function Tf(a,b,c,d,e,f){tf.call(this,e,f);this.ga=a;this.Mj=[];this.Om=!!b;this.Cp=!!c;this.tp=!!d;for(b=0;b<a.length;b++)L(a[b],B(this.Xm,this,b,i),B(this.Xm,this,b,m));0==a.length&&!this.Om&&this.D(this.Mj)}C(Tf,tf);Tf.prototype.Bn=0;Tf.prototype.Xm=function(a,b,c){this.Bn++;this.Mj[a]=[b,c];this.Gb||(this.Om&&b?this.D([a,c]):this.Cp&&!b?this.G(c):this.Bn==this.ga.length&&this.D(this.Mj));this.tp&&!b&&(c=l);return c};Tf.prototype.G=function(a){Tf.a.G.call(this,a);Ia(this.ga,function(a){a.cancel()})};function S(a,b,c){ge.call(this,c);this.mode=Uf;this.Gf=new Vf;this.Sf=new Kf(c);G(this,this.Sf);this.Nh=new Je(c);this.Sf.X(this.Nh);this.Ei=new Ne(c);this.Sf.X(this.Ei);this.yc=new He(c);this.Sf.X(this.yc);this.Hf=new Le(c);this.Sf.X(this.Hf);this.font=new Be(0,b,c);G(this,this.font);this.Na=new xe(b,c);G(this,this.Na);re(this.Na);this.Cl=new Oe(b,c);re(this.Cl);G(this,this.Cl);this.Ke=this.Di=l;this.fm=new R(this);G(this,this.fm);this.Tn=new of(this);G(this,this.Tn)}C(S,ge);S.prototype.ve=function(){return new Tf([])};
var Wf=S,Xf=new Mf;Xf.Ve=i;Wf.Uo=Xf;var Uf=0;S.Ql=new qf;var Yf=S,Zf=new sf;Zf.Xb=i;Zf.depthFunc=515;Yf.Rl=Zf;S.zo=new qf;var $f=S,ag=new sf;ag.Xb=i;ag.depthFunc=515;$f.Ho=ag;S.Ao=new qf;var bg=S,cg=new sf;cg.Xb=i;cg.depthFunc=515;bg.Ko=cg;S.Bo=new qf;var dg=S,eg=new sf;eg.Xb=i;eg.depthFunc=515;dg.Jo=eg;var fg=S,gg=new sf;gg.Xb=m;gg.depthFunc=515;fg.Io=gg;s=S.prototype;s.w=function(){var a=this.g.f;a.deleteBuffer(this.Di);this.Di=l;a.deleteBuffer(this.Ke);this.Ke=l};
s.restore=function(){for(var a=this.g.f,b=a.createBuffer(),c=Math.floor(10922.5),d=6*c,e=new Uint16Array([0,1,2,2,1,3]),d=new Uint16Array(d),f=0,h=0,j=0;f<c;f++){for(var k=0;k<e.length;k++)d[h+k]=e[k]+j;h+=e.length;j+=4}a.bindBuffer(34963,b);a.bufferData(34963,d,35044);a.bindBuffer(34963,l);this.Di=b;this.Ke=R.Dm(a)};
s.reset=function(a,b){var c=this.g,d=c.f,e=S.Uo;c.ei!=e&&(e&&c.f&&e.nd(c.f,c.ei),c.ei=e);d.viewport(0,0,d.canvas.width,d.canvas.height);d.clearColor(a[0],a[1],a[2],a[3]);d.clearDepth(1);d.clear((b?16384:0)|256);this.mode=Uf};s.bm=function(){if(2!=this.mode){this.mode=2;var a=this.g,b=a.f;hg(a,S.Ql);ig(a,S.Rl);jg(a,this.yc);kg(this.Gf,b,this.yc);we(a,this.Na);b.uniform2f(this.yc.Qi,this.Na.width,this.Na.height);b.bindBuffer(34963,this.Ke);b.enableVertexAttribArray(0);b.enableVertexAttribArray(1);b.enableVertexAttribArray(2)}};
s.cm=function(){if(3!=this.mode){this.mode=3;var a=this.g,b=a.f;hg(a,S.zo);ig(a,S.Ho);jg(a,this.yc);kg(this.Gf,b,this.yc);we(a,this.Na);b.uniform2f(this.yc.Qi,this.Na.width,this.Na.height);b.bindBuffer(34963,this.Ke);b.enableVertexAttribArray(0);b.enableVertexAttribArray(1);b.enableVertexAttribArray(2)}};
s.em=function(){if(6!=this.mode){this.mode=6;var a=this.g,b=a.f;hg(a,S.Ql);ig(a,S.Rl);jg(a,this.Hf);var c=this.Gf,d=this.Hf;c.Mk&&(c.Mk=m,b.uniform2f(d.vb,c.kf,c.jf),b.uniform3f(d.ub,c.wa[0],c.wa[1],c.wa[2]));we(a,this.Na)}};s.dm=function(){if(4!=this.mode){this.mode=4;var a=this.g,b=a.f;hg(a,S.Ao);ig(a,S.Ko);jg(a,this.Nh);var a=this.Gf,c=this.Nh;a.Bk&&(a.Bk=m,b.uniform2f(c.vb,a.kf,a.jf),b.uniform3f(c.ub,a.wa[0],a.wa[1],a.wa[2]));b.enableVertexAttribArray(0);b.enableVertexAttribArray(1);b.disableVertexAttribArray(2)}};
s.Bg=function(a,b){this.mode=5;var c=this.g,d=c.f;hg(c,S.Bo);ig(c,b?S.Jo:S.Io);jg(c,this.Ei);we(c,a);d.bindBuffer(34963,this.Di);d.enableVertexAttribArray(0);d.enableVertexAttribArray(1);d.enableVertexAttribArray(2)};function Vf(){this.Xc=O();this.Ad=O();this.zd=O();this.jf=this.kf=0;this.wa=O();this.Mk=this.$j=this.Bk=i}
Vf.prototype.update=function(a,b,c,d,e,f){var h=m;We(this.Xc,a)||(Qe(this.Xc,a),h=i);if(!We(this.Ad,b)||!We(this.zd,c))Qe(this.Ad,b),Qe(this.zd,c),h=i;if(this.kf!=d||this.jf!=e||!We(this.wa,f))this.kf=d,this.jf=e,Qe(this.wa,f),h=i;h&&(this.Mk=this.$j=this.Bk=i)};function kg(a,b,c){a.$j&&(a.$j=m,b.uniform3f(c.xl,a.Xc[0],a.Xc[1],a.Xc[2]),b.uniform3f(c.zl,a.Ad[0],a.Ad[1],a.Ad[2]),b.uniform3f(c.yl,a.zd[0],a.zd[1],a.zd[2]),b.uniform2f(c.vb,a.kf,a.jf),b.uniform3f(c.ub,a.wa[0],a.wa[1],a.wa[2]))}
S=mf(S,"blk.graphics.RenderState",{reset:"reset",bm:"beginChunkPass1",cm:"beginChunkPass2",em:"beginModels",dm:"beginLines",Bg:"beginSprites"});function lg(){this.buffer=new Uint8Array(512);this.offset=0;this.va=new Float32Array(16);this.Fa=new Uint8Array(this.va.buffer);this.Ep=(this.hf=t.Float64Array?new Float64Array(1):l)?new Uint8Array(this.hf.buffer):l}s=lg.prototype;s.finish=function(){for(var a=new Uint8Array(this.offset),b=0;b<this.offset;b++)a[b]=this.buffer[b];this.offset=0;return a.buffer};
s.ea=function(a){if(this.offset+a>this.buffer.length){a=this.offset+a;var b=this.buffer.length;do b+=1024;while(b<a);a=new Uint8Array(b);for(b=0;b<this.offset;b++)a[b]=this.buffer[b];this.buffer=a}};function mg(a,b){a.ea(2);a.buffer[a.offset++]=b>>8;a.buffer[a.offset++]=b}function ng(a,b){a.ea(4);a.buffer[a.offset++]=b>>24;a.buffer[a.offset++]=b>>16;a.buffer[a.offset++]=b>>8;a.buffer[a.offset++]=b}function og(a,b){a.ea(1);a.buffer[a.offset++]=b}
function pg(a,b){a.ea(2);a.buffer[a.offset++]=b>>8;a.buffer[a.offset++]=b}s.$a=function(a){this.ea(4);this.buffer[this.offset++]=a>>24;this.buffer[this.offset++]=a>>16;this.buffer[this.offset++]=a>>8;this.buffer[this.offset++]=a};s.nc=function(a){this.ea(5);for(a&=4294967295;a&4294967168;)this.buffer[this.offset++]=a&127|128,a>>>=7;this.buffer[this.offset++]=a&127};s.dj=function(a){this.nc(a<<1^a>>31)};
s.xo=function(a){this.ea(4);this.va[0]=a;this.buffer[this.offset++]=this.Fa[0];this.buffer[this.offset++]=this.Fa[1];this.buffer[this.offset++]=this.Fa[2];this.buffer[this.offset++]=this.Fa[3]};s.$r=function(a){this.ea(12);this.va[0]=a[0];this.va[1]=a[1];this.va[2]=a[2];for(a=0;12>a;a++)this.buffer[this.offset++]=this.Fa[a]};s.as=function(a){this.ea(16);this.va[0]=a[0];this.va[1]=a[1];this.va[2]=a[2];this.va[3]=a[3];for(a=0;16>a;a++)this.buffer[this.offset++]=this.Fa[a]};
s.da=function(a){65535<=a.length&&(a=a.substr(0,65535));this.ea(4+3*a.length);pg(this,a.length);var b=this.offset;this.offset+=2;for(var c=0,d=0;d<a.length;d++){var e=a.charCodeAt(d);128>e?(this.buffer[this.offset++]=e,c++):2048>e?(this.buffer[this.offset++]=e>>6|192,this.buffer[this.offset++]=e&63|128,c+=2):(this.buffer[this.offset++]=e>>12|224,this.buffer[this.offset++]=e>>6&63|128,this.buffer[this.offset++]=e&63|128,c+=3)}a=this.offset;this.offset=b;pg(this,c);this.offset=a};var qg=l;
function rg(){qg||(qg=new lg);return qg};function sg(){this.u=this.y=this.x=0}var tg=new sg,ug=new sg,vg=new (ba());function wg(a,b,c,d,e){F.call(this);this.context=a;this.path=b;this.name=c;this.duration=d;this.Qd=e;Na(this.Qd,jc);this.qa=this.Vh=this.Bi=l}C(wg,F);wg.prototype.b=function(){this.Vh&&(this.Vh.disconnect(),this.Vh=l);this.Bi&&(this.Bi.disconnect(),this.Bi=l);this.qa&&(this.qa.pause(),this.qa=l);wg.a.b.call(this)};
wg.prototype.play=function(a){if(this.context&&!this.qa){var b=Sd(this.Qd);b&&(b=Td(this.path,b.path),this.qa=document.createElement("AUDIO"),this.qa.autoplay=m,this.qa.src=b,b=this.context.createMediaElementSource(this.qa),b.connect(this.context.destination),this.Vh=this.Bi=b)}this.qa&&(this.qa.loop=a||m,this.qa.play())};wg.prototype.stop=function(){this.qa&&(this.qa.currentTime=0,this.qa.pause())};function xg(a,b,c,d,e){F.call(this);this.Ie=a;this.context=b;this.path=c;this.name=d||"Unknown";this.hg={};e&&this.vi(e)}C(xg,F);xg.prototype.b=function(){xg.a.b.call(this)};xg.prototype.vi=function(a){for(var b=0;b<a.length;b++){var c=a[b];this.hg[c.name]=c}};xg.prototype.load=function(){yg(this)};xg.prototype.play=function(a,b,c){var d;d=A(a)?this.hg[a]:a;if(!d)return J("WARNING: track "+a+" not found in list"),l;yg(this,c);d.play(b);return d};
function yg(a,b){Pa(a.hg,function(a){a.stop(b)},a)};function zg(a,b){xg.call(this,a,b,"../assets/audio/music","Music",[new wg(b,"../assets/audio/music","track1",383380,[new ic("audio/ogg","track1.ogg",4861360)])])}C(zg,xg);function Ag(a,b,c,d,e,f,h){this.P=a;this.hm=b;this.im=c;this.jm=d;this.Eb=e;this.Tj=f;this.Mn=h};function Bg(){var a=O(),b=O();this.min=a;this.max=b}function Cg(a,b,c,d,e,f){var h=new Bg;h.min[0]=a<d?a:d;h.min[1]=b<e?b:e;h.min[2]=c<f?c:f;h.max[0]=a<d?d:a;h.max[1]=b<e?e:b;h.max[2]=c<f?f:c;return h}
function Dg(a,b,c){var d=a.min;a=a.max;var e=Eg[0];e[0]=Math.abs(b[3]);e[1]=Math.abs(b[4]);e[2]=Math.abs(b[5]);var f=0,h=1,j=2;e[0]<e[2]&&(f=2,j=0);e[1]<e[j]?(h=j,j=1):e[1]>e[f]&&(h=f,f=1);var k=0,n=Number.MAX_VALUE,p=b[3+f],r=(d[f]-b[f])/p,f=(a[f]-b[f])/p;r>f&&(p=r,r=f,f=p);if(!(r>n||f<k)){r>k&&(k=r);f<n&&(n=f);if(1E-6>e[h]){if(b[h]<d[h]||b[h]>a[h]||b[j]<d[j]||b[j]>a[j])return}else{p=b[3+h];r=(d[h]-b[h])/p;f=(a[h]-b[h])/p;r>f&&(p=r,r=f,f=p);if(r>n||f<k)return;r>k&&(k=r);f<n&&(n=f);if(1E-6>e[j]){if(b[j]<
d[j]||b[j]>a[j])return}else{p=b[3+j];r=(d[j]-b[j])/p;f=(a[j]-b[j])/p;r>f&&(p=r,r=f,f=p);if(r>n||f<k)return;r>k&&(k=r)}}c&&(c[0]=b[0]+b[3]*k,c[1]=b[1]+b[4]*k,c[2]=b[2]+b[5]*k)}}var Eg=[O(),O(),O()];function Fg(a,b,c,d){this.map=a;this.x=b;this.y=c;this.u=d;this.Sb=Cg(b,c,d,b+16,c+128,d+16);this.state=Gg;this.dh=i;this.version=this.qe=0;this.Eb=new Uint16Array(32768);this.gl=this.ui=l}var Gg=0;Fg.prototype.Ac=function(a,b,c){return 2==this.state?this.Eb[(a&15)+16*(c&15)+256*(b&127)]:0};Fg.prototype.gc=function(a,b,c,d){b=(a&15)+16*(c&15)+256*(b&127);a=this.Eb[b];this.Eb[b]=d;a!=d&&!this.dh&&(d=this.dh,this.dh=i,this.ui=l,d||this.map.ap(this));return a};
Fg.prototype.qk=function(a){var b=Hg[0];Dg(this.Sb,a,b);var c=Math.floor(b[0]),d=Math.floor(b[1]),e=Math.floor(b[2]),f=0==a[3]?0:0>a[3]?-1:1,h=0==a[4]?0:0>a[4]?-1:1,j=0==a[5]?0:0>a[5]?-1:1,k=(c+(0<f?1:0)-b[0])/a[3],n=(d+(0<h?1:0)-b[1])/a[4],p=(e+(0<j?1:0)-b[2])/a[5];isNaN(k)&&(k=Number.POSITIVE_INFINITY);isNaN(n)&&(n=Number.POSITIVE_INFINITY);isNaN(p)&&(p=Number.POSITIVE_INFINITY);var r=f/a[3],v=h/a[4],u=j/a[5];isNaN(r)&&(r=Number.POSITIVE_INFINITY);isNaN(v)&&(v=Number.POSITIVE_INFINITY);isNaN(u)&&
(u=Number.POSITIVE_INFINITY);for(var z=this.Eb,x=b=0;256>x;x++){var M=c-this.x,K=d-this.y,U=e-this.u;if(0<=M&&(16>M&&0<=K&&128>K&&0<=U&&16>U)&&(b=z[M+16*U+256*K],b>>8))break;k<n&&k<p?(k+=r,c+=f):n<p?(n+=v,d+=h):(p+=u,e+=j)}return b?(f=Ig,h=c+1,j=d+1,k=e+1,Q(f.min,c,d,e),Q(f.max,h,j,k),f=O(),Dg(Ig,a,f),new Ag(this,c,d,e,b,Math.sqrt(Ue(a,f)),f)):l};var Hg=[O(),O()],Ig=new Bg;function Jg(){F.call(this);this.Kn=m;this.zi=i;this.qg=[];this.Fe=[];this.Si=[];this.je=[];this.un=[this.Fe,this.Si,this.je];this.Ya=0}C(Jg,F);Jg.Oo=20;Jg.Po=6;Jg.No=32;Jg.prototype.pause=function(){this.Kn=i};Jg.prototype.nb=q("Ya");
Jg.prototype.bd=function(a,b){if(a.Ic)switch(a.Tf){case 0:D(this.qg,a);break;case 1:D(this.Fe,a);break;case 2:D(this.Si,a);break;default:D(this.je,a)}else a.Ic=i,this.Ya++;a.Tf=b;switch(b){case 0:this.qg.push(a);break;case 1:this.Fe.push(a);this.zi=i;break;case 2:this.Si.push(a);break;default:this.je.push(a),this.zi=i}};Jg.prototype.cancel=function(a){if(a.Ic){switch(a.Tf){case 0:D(this.qg,a);break;case 1:D(this.Fe,a);break;case 2:D(this.Si,a);break;default:D(this.je,a)}this.Ya--}};
Jg.Tr=function(a,b){return a.ho-b.ho};Jg.prototype.update=function(a,b){if(this.Kn||!this.Ya)return 0;var c=Jg.Oo,d=hc(),e=a.lf,f=0,h=this.qg;if(h.length){for(var j=0;j<h.length;j++)f+=h[j].Bj(),h[j].Ic=m;this.Ya-=h.length;c-=h.length;h.length=0}if(0>=c)return f;if(this.zi||!(e%Jg.No))this.Fe.length&&this.ql(a,b,this.Fe),this.je.length&&this.ql(a,b,this.je),this.zi=m;for(j=0;j<this.un.length;j++)for(e=this.un[j];c&&e.length;){if(hc()-d>Jg.Po)return f;h=e.shift();f+=h.Bj();h.Ic=m;this.Ya--;c--}return f};
Jg.prototype.ql=function(a,b,c){hf("length",c.length);for(a=0;a<c.length;a++);Na(c,Jg.Tr)};Jg=mf(Jg,"blk.env.client.BuildQueue",{update:"update",ql:"sortListByDistance_"});function Kg(){F.call(this);this.Ra={};this.La=this.i=0}C(Kg,F);s=Kg.prototype;s.nb=q("i");s.Bc=q("La");s.add=function(a){this.i++;this.Ra[a.id]=a;this.La+=a.ed};s.remove=function(a){this.i--;delete this.Ra[a.id];this.La-=a.ed};s.forEach=function(a,b){for(var c in this.Ra)a.call(b||t,this.Ra[c])};function Lg(a,b){var c=le(0,0,0,0);this.q=a;this.Yo=b||l;this.Gs=l;this.color=c||N()};function Mg(a){Nf.call(this,a,32);this.fd=new Float32Array(this.sb);this.Be=new Uint32Array(this.sb);this.restore()}C(Mg,Nf);Mg.prototype.Kj=function(){this.fd=new Float32Array(this.sb);this.Be=new Uint32Array(this.sb)};function Ng(a,b,c,d,e,f,h){var j=Pf(a);if(65535!=j){var k=a.fd,n=a.Be;a=j*a.xe/4;k[a+0]=b;k[a+1]=c;k[a+2]=d;n[a+3]=4294967295;k[a+4]=e;k[a+5]=f;k[a+6]=h;n[a+7]=4294967295}}
Mg.prototype.sc=function(a,b,c){var d=this.g.f;a=a.Nh;if(this.kc){var e=Og;$e(b.Uc,c,e);d.uniformMatrix4fv(a.oa,m,e);Of(this);d.vertexAttribPointer(a.pa,3,5126,m,16,0);d.vertexAttribPointer(a.Wc,4,5121,i,16,12);d.drawArrays(1,0,2*this.kc)}};var Og=Xe();function T(a,b,c,d){ge.call(this,b.g);this.id=T.Qq++;this.jg=a;this.dc=b;this.P=c;this.Le=d;a=c.x;var e=c.y+d,f=c.u,h=Xe();Ze(h,1,1,1,0,a,e,f,1);this.wo=h;this.Ej=Pe(c.x+T.L/2,c.y+d+T.L/2,c.u+T.L/2);this.Sb=new Bg;this.Nd=le(this.Ej[0],this.Ej[1],this.Ej[2],T.L);this.Kg=b.fm;this.gm=c.map.Ca;this.Oj=i;this.ff=l;this.Gq=this.ho=this.ed=this.qh=0;this.Ic=m;this.Tf=3;this.Lj=m;this.Vb=l}C(T,ge);T.prototype.b=function(){this.xd(m);T.a.b.call(this)};T.Qq=0;T.L=16;T.pg=4;T.Vl=128/T.L;
T.prototype.w=function(){this.g.f.deleteBuffer(this.ff);this.ff=l;this.ed=this.qh=0;this.Vb&&(H(this.Vb),this.Vb=l);T.a.w.call(this)};T.prototype.restore=function(){T.a.restore.call(this);this.Lj&&(this.xd(m),this.xd(i));this.jg.sk(this.P.x,this.P.y+this.Le,this.P.u,3)};T.prototype.rk=function(){this.Oj=i};T.jp=ff("blk.env.client.SegmentRenderer#build:fast");T.kp=ff("blk.env.client.SegmentRenderer#build:slow");
T.prototype.Bj=function(){this.Oj=m;for(var a=this.gm,b=this.dc.Na,c=this.P.Eb,d=T.gg,e=T.ko,f=T.jp(),h=this.Le,j=this.Le+T.L-1,k=h;k<=j;k++)for(var n=1;n<T.L-1;n++)for(var p=1;p<T.L-1;p++){var r=p+16*n+256*k,v=c[r];if(v>>8){e[0]=c[r+16]>>8;e[1]=c[r-16]>>8;e[2]=127<=k?0:c[r+256]>>8;e[3]=(0>=k?v:c[r-256])>>8;e[4]=c[r+1]>>8;e[5]=c[r-1]>>8;for(var r=a.ga[v>>8],u=0;6>u;u++)if(!e[u]||e[u]!=v>>8&&a.ga[e[u]].Rh.q&64)te(b,r.hk(p,k,n,u,v>>16&255,v&65535),d),nf(this.Kg,u,p,k-this.Le,n,d)}}gf(f);f=T.kp();a=
Array(4);a[0]=this.jg.view.Ga(this.P.x-16,this.P.y,this.P.u);a[1]=this.jg.view.Ga(this.P.x+16,this.P.y,this.P.u);a[2]=this.jg.view.Ga(this.P.x,this.P.y,this.P.u-16);a[3]=this.jg.view.Ga(this.P.x,this.P.y,this.P.u+16);for(n=p=0;n<T.L-1;n++)Pg(this,p,h,j,n,a);n=T.L-1;for(p=0;p<T.L-1;p++)Pg(this,p,h,j,n,a);p=T.L-1;for(n=1;n<T.L;n++)Pg(this,p,h,j,n,a);n=0;for(p=1;p<T.L;p++)Pg(this,p,h,j,n,a);gf(f);f=this.Kg.finish(this.ff);this.ff=f.buffer;this.qh=f.af;h=this.ed;this.ed=f.rm;return this.ed-h};
function Pg(a,b,c,d,e,f){for(var h=a.gm,j=a.dc.Na,k=a.P.Eb,n=T.gg,p=T.ko,r=a.P.x,v=a.P.u;c<=d;c++){var u=b+16*e+256*c,z=k[u];if(z>>8){p[0]=e==T.L-1?f[3]?f[3].Ac(r+b,c,v+e+1)>>8:0:k[u+16]>>8;p[1]=e?k[u-16]>>8:f[2]?f[2].Ac(r+b,c,v+e-1)>>8:0;p[2]=127<=c?0:k[u+256]>>8;p[3]=(0>=c?z:k[u-256])>>8;p[4]=b==T.L-1?f[1]?f[1].Ac(r+b+1,c,v+e)>>8:0:k[u+1]>>8;p[5]=b?k[u-1]>>8:f[0]?f[0].Ac(r+b-1,c,v+e)>>8:0;for(var u=h.ga[z>>8],x=0;6>x;x++)if(!p[x]||p[x]!=z>>8&&h.ga[p[x]].Rh.q&64)te(j,u.hk(b,c,e,x,z>>16&255,z&65535),
n),nf(a.Kg,x,b,c-a.Le,e,n)}}}
T.prototype.xd=function(a){if(this.Lj!=a)if(this.Lj=a){a=this.Vb=new Mg(this.g);var b=Pe(0,0,0),c=Pe(T.L,T.L,T.L);Ng(a,b[0],b[1],b[2],c[0],b[1],b[2]);Ng(a,b[0],b[1],b[2],b[0],c[1],b[2]);Ng(a,b[0],b[1],b[2],b[0],b[1],c[2]);Ng(a,c[0],b[1],c[2],b[0],b[1],c[2]);Ng(a,c[0],b[1],c[2],c[0],b[1],b[2]);Ng(a,c[0],b[1],c[2],c[0],c[1],c[2]);Ng(a,c[0],b[1],b[2],c[0],c[1],b[2]);Ng(a,b[0],b[1],c[2],b[0],c[1],c[2]);Ng(a,b[0],c[1],b[2],c[0],c[1],b[2]);Ng(a,b[0],c[1],b[2],b[0],c[1],c[2]);Ng(a,c[0],c[1],c[2],c[0],c[1],
b[2]);Ng(a,c[0],c[1],c[2],b[0],c[1],c[2])}else H(this.Vb),this.Vb=l};T.prototype.A=function(a,b){this.qh&&this.Kg.sc(b,this.wo,this.ff,this.qh)};T.gg=N();T.ko=new Uint16Array(6);T=mf(T,"blk.env.client.SegmentRenderer",{Bj:"build"});function Qg(a,b,c){F.call(this);this.g=a.g;this.dc=a;this.map=b;this.view=c;this.We=m;this.Kc=new Kg;G(this,this.Kc);this.Tb=new Jg;G(this,this.Tb);this.Bh=[];this.zk=this.sn=0;this.rn=l;this.Sr=Array(512);this.Yi=Array(1024);this.Df=0;this.uo=Array(1024);this.pn=this.Ak=0;this.view.oj(this)}C(Qg,F);s=Qg.prototype;s.b=function(){this.view.fl(this);Qg.a.b.call(this)};s.xd=function(a){this.We!=a&&(this.We=a,this.Kc.forEach(function(b){b.xd(a)}))};
s.jk=function(){var a;a="Render: "+(this.Kc.nb()+" cached (");a+=Math.floor(this.Kc.Bc()/1E3)+"K), ";a+=this.zk+" visible, ";return a+=this.Tb.nb()+" req"};s.xm=function(a){this.Vj(a,3)};s.vm=function(a){this.Vj(a,3)};s.wm=function(a){var b=Rg(a,m);if(b){for(var c=0;c<b.Lc.length;c++){var d=b.Lc[c];d&&(d.Ic&&this.Tb.cancel(d),this.Kc.remove(d),H(d))}a.gl=l}};function Rg(a,b){var c=a.gl;!c&&!b&&(c={Lc:Array(T.Vl)},a.gl=c);return c}
s.Vj=function(a,b){if(2==a.state)for(var c=Rg(a),d=0;d<c.Lc.length;d++){var e=c.Lc[d];e||(e=new T(this,this.dc,a,d*T.L),e.xd(this.We),c.Lc[d]=e,this.Kc.add(e),this.Tb.bd(e,b))}};s.Fh=function(a,b,c,d){this.Gh(a,b,c,a,b,c,d)};s.Gh=function(a,b,c,d,e,f,h){a--;b--;c--;d++;e++;f++;c>>=4;d>>=4;f>>=4;b>>=T.pg;e>>=T.pg;for(a>>=4;a<=d;a++)for(var j=c;j<=f;j++)for(var k=b;k<=e;k++)this.sk(a<<4,k<<T.pg,j<<4,h)};
s.sk=function(a,b,c,d){if(a=this.view.Ga(a,b,c)){c=Rg(a);b>>=T.pg;var e=c.Lc[b];e||(e=new T(this,this.dc,a,b*T.L),e.xd(this.We),c.Lc[b]=e,this.Kc.add(e),this.Tb.bd(e,d));if(!e.Oj||e.Tf!=d)e.rk(),this.Tb.bd(e,d)}};s.qm=function(a,b){var c=this.Tb.update(a,b),d=this.Kc;d.La+=c};
s.A=function(a,b){var c=this.dc,d=this.map;this.rn=b;this.Ak=this.Df=this.zk=this.sn=0;this.pn=a.lf;this.view.sh(b,this.vq,this);this.qm(a,b);if(!this.Tb.nb()&&this.Bh.length){for(var e=0;e<this.Bh.length;e++)this.Bh[e].D(l);this.Bh.length=0}e=b.rh-16;c.Gf.update(d.dd.Xc,d.dd.Ad,d.dd.zd,0.5*e,0.85*e,d.dd.wa);if(this.We){c.dm();for(e=0;e<this.Df;e++)d=this.Yi[e],d.Vb&&d.Vb.sc(d.dc,b,d.wo)}this.Df&&this.Jm(a,b,c);this.Ak&&this.Km(a,b,c)};
s.Jm=function(a,b,c){c.bm();for(c=0;c<this.Df;c++)this.Yi[c].A(a,b),this.Yi[c]=l};s.Km=function(a,b,c){c.cm();for(c=0;c<this.Ak;c++)this.uo[c].A(a,b),this.uo[c]=l};
s.vq=function(a){this.Sr[this.sn++]=a;a=Rg(a);for(var b=0;b<T.Vl;b++){var c=a.Lc[b],d;if(d=c){a:{d=c.Nd;for(var e=this.rn.dk,f=0;f<e.length;f++){var h=e[f],h=h[0]*d[0]+h[1]*d[1]+h[2]*d[2]+h[3];if(h<-d[3]){d=-1;break a}if(Math.abs(h)<d[3]){d=0;break a}}d=1}d=-1!=d}if(d&&(c.Ic||0<c.ed))c.Ic&&1<c.Tf&&this.Tb.bd(c,1),c.Gq=this.pn,this.zk++,this.Yi[this.Df++]=c}};
Qg=mf(Qg,"blk.env.client.ViewRenderer",{Vj:"ensureChunkRenderData_",Fh:"invalidateBlock",Gh:"invalidateBlockRegion",sk:"invalidateSegment",qm:"buildChunks_",A:"render",Jm:"drawChunkPass1_",Km:"drawChunkPass2_"});function Sg(a,b){Ud.call(this,a,b,"../assets/audio/blocks","BlockSounds",[new ic("audio/wav","blocks_optimized.wav",776760),new ic("audio/ogg","blocks_optimized.ogg",69007),new ic("audio/mpeg","blocks_optimized.mp3",71052)],[new nc("block_grass",0,[new I(2081,328),new I(2509,368),new I(2977,318),new I(3395,373)]),new nc("block_gravel",0,[new I(3868,389),new I(4357,338),new I(4795,313),new I(5208,363)]),new nc("block_cloth",0,[new I(0,404),new I(504,409),new I(1013,378),new I(1491,490)]),new nc("block_stone",
0,[new I(5671,338),new I(6109,338),new I(6547,293),new I(6940,303)]),new nc("block_wood",0,[new I(7343,272),new I(7715,282),new I(8097,262),new I(8459,237)])])}C(Sg,Ud);function Tg(a,b){this.attributes=[new Ug(3,0),new Ug(2,24)];this.dp=a;this.yp=b}function Ug(a,b){this.size=a;this.type=5126;this.Kf=m;this.bg=32;this.offset=b};function Vg(){};function Wg(){this.name=l;this.index=0;this.parent=l;this.children=[];this.transform=Ye();this.Sb=new Bg;this.Nd=N()};function Xg(a){this.Jk=a;a=a.Lg;this.hp=new Float32Array(16*a.length);this.cs=new Float32Array(16*a.length);this.Lr=i;this.reset()}Xg.prototype.reset=function(){this.Lr=i;for(var a=this.Jk.Lg,b=0,c=0;b<a.length;b++,c+=16)for(var d=a[b],e=0;16>e;e++)this.hp[c+e]=d.transform[e]};function Yg(a){F.call(this);this.id=a;this.Sb=new Bg;this.Nd=N();this.Ip=l;this.Jn=[];this.Lg=[];this.es={}}C(Yg,F);Yg.prototype.ll=ca("Ip");Yg.prototype.Ue=function(){return new Xg(this)};function Zg(){this.Rh=new Vg;this.primitiveType=4;this.zp=this.af=0};function $g(a,b,c){F.call(this);this.f=a.f;this.vg=b;this.Zl=Array(32);for(var d=this.Uj=0;d<b.length;d++){var e=b[d];this.Zl[e.index]=e;this.Uj|=1<<e.index}this.ih=c;this.kb=a.ph.get(5);this.Ab=l;this.kb&&(this.Ab=this.kb.createVertexArrayOES(),this.kb.bindVertexArrayOES(this.Ab),this.Fc(),this.kb.bindVertexArrayOES(l))}C($g,F);s=$g.prototype;s.b=function(){this.kb&&(this.kb.deleteVertexArrayOES(this.Ab),this.Ab=l);this.kb=l;$g.a.b.call(this)};
s.nd=function(a){this!=a&&(this.kb?this.kb.bindVertexArrayOES(this.Ab):a?this.od(a):this.Fc())};s.reset=function(){this.kb&&this.kb.bindVertexArrayOES(l)};s.Fc=function(){var a=this.f;a.bindBuffer(34963,this.ih);for(var b=l,c=0;c<this.vg.length;c++){var d=this.vg[c];a.enableVertexAttribArray(d.index);b!=d.buffer&&(b=d.buffer,a.bindBuffer(34962,d.buffer));a.vertexAttribPointer(d.index,d.size,d.type,d.Kf,d.bg,d.offset)}};
s.od=function(a){var b=this.f;this.ih!=a.ih&&b.bindBuffer(34963,this.ih);for(var c=l,d=0;d<this.vg.length;d++){var e=this.vg[d];a.Uj&1<<e.index||b.enableVertexAttribArray(e.index);var f=a.Zl[e.index];f&&f.sm==e.sm||(c!=e.buffer&&(c=e.buffer,b.bindBuffer(34962,e.buffer)),b.vertexAttribPointer(e.index,e.size,e.type,e.Kf,e.bg,e.offset))}};
function ah(a,b,c,d,e,f,h){this.index=a;this.buffer=b;this.size=c;this.type=d;this.Kf=e;this.bg=f;this.offset=h;this.sm=[this.index,na(this.buffer),this.size,this.type,this.Kf,this.bg,this.offset].join(":")};function bh(a,b,c){ge.call(this,a);this.wh=b;this.Ab=this.$e=this.Je=l;this.ms=c||l}C(bh,ge);bh.prototype.w=function(){var a=this.g.f;H(this.Ab);this.Ab=l;a.deleteBuffer(this.Je);this.Je=l;a.deleteBuffer(this.$e);this.$e=l;bh.a.w.call(this)};
bh.prototype.restore=function(){bh.a.restore.call(this);var a=this.g.f;this.Je=a.createBuffer();this.$e=a.createBuffer();a.bindBuffer(34962,this.Je);a.bufferData(34962,this.wh.dp,35044);a.bindBuffer(34963,this.$e);a.bufferData(34963,this.wh.yp,35044);for(var a=[],b=0;b<this.wh.attributes.length;b++){var c=this.wh.attributes[b];a.push(new ah(b,this.Je,c.size,c.type,c.Kf,c.bg,c.offset))}this.Ab=new $g(this.g,a,this.$e)};bh.prototype.bind=function(){this.Ab&&pf(this.g,this.Ab)};function ch(a){Xg.call(this,a);this.ba=a.ba;this.Yd=a.Yd}C(ch,Xg);ch.prototype.A=function(){var a=this.ba.f;this.Yd.bind();for(var b=this.Jk.Jn,c=0;c<b.length;c++){var d=b[c];a.drawElements(d.primitiveType,d.af,5123,d.zp)}};function dh(a,b){Yg.call(this,a);this.ba=b;this.Yd=l}C(dh,Yg);dh.prototype.ll=function(a){dh.a.ll.call(this,a);this.Yd=new bh(this.ba,a,this.id);G(this,this.Yd);this.Yd.restore()};dh.prototype.Ue=function(){return new ch(this)};function eh(a,b){var c=new dh("pumpkin",b),d=c.Sb,e=[-0.5,-1,0,0.5,1,0.5],f=d.min,d=d.max;if(e.length){var h=0;Q(f,e[h],e[h+1],e[h+2]);Q(d,e[h],e[h+1],e[h+2]);h++;for(var j=1;j<e.length/3;j++,h++)e[h]<f[0]?f[0]=e[h]:e[h]>d[0]&&(d[0]=e[h]),e[h+1]<f[1]?f[1]=e[h+1]:e[h+1]>d[1]&&(d[1]=e[h+1]),e[h+2]<f[2]?f[2]=e[h+2]:e[h+2]>d[2]&&(d[2]=e[h+2])}else Q(f,0,0,0),Q(d,0,0,0);me(c.Nd,0,0,0,1);e=le(96,112,112,128);f=le(112,112,128,128);d=le(96,96,112,112);oe(e,e);oe(f,f);oe(d,d);e=new Float32Array([-0.5,-1,0.5,
0,0,1,e[2],e[3],0.5,-1,0.5,0,0,1,e[0],e[3],0.5,1,0.5,0,0,1,e[0],e[1],-0.5,1,0.5,0,0,1,e[2],e[1],-0.5,-1,-0.5,0,0,-1,f[0],f[3],-0.5,1,-0.5,0,0,-1,f[0],f[1],0.5,1,-0.5,0,0,-1,f[2],f[1],0.5,-1,-0.5,0,0,-1,f[2],f[3],-0.5,1,-0.5,0,1,0,d[2],d[1],-0.5,1,0.5,0,1,0,d[2],d[3],0.5,1,0.5,0,1,0,d[0],d[3],0.5,1,-0.5,0,1,0,d[0],d[1],-0.5,-1,-0.5,0,-1,0,e[0],e[1],0.5,-1,-0.5,0,-1,0,e[2],e[1],0.5,-1,0.5,0,-1,0,e[2],e[3],-0.5,-1,0.5,0,-1,0,e[0],e[3],0.5,-1,-0.5,1,0,0,e[0],e[3],0.5,1,-0.5,1,0,0,e[0],e[1],0.5,1,0.5,
1,0,0,e[2],e[1],0.5,-1,0.5,1,0,0,e[2],e[3],-0.5,-1,-0.5,-1,0,0,e[2],e[3],-0.5,-1,0.5,-1,0,0,e[0],e[3],-0.5,1,0.5,-1,0,0,e[0],e[1],-0.5,1,-0.5,-1,0,0,e[2],e[1]]);f=new Uint16Array(36);for(j=h=d=0;6>d;d++,h+=6,j+=4)f[h+0]=0+j,f[h+1]=1+j,f[h+2]=2+j,f[h+3]=0+j,f[h+4]=2+j,f[h+5]=3+j;c.ll(new Tg(e.buffer,f));e=new Zg;c.Jn.push(e);e.primitiveType=4;e.af=36;e=new Wg;e.index=c.Lg.length;e.name=l;e.parent=l;c.Lg.push(e);f=e.Sb;d=c.Sb;Qe(f.min,d.min);Qe(f.max,d.max);ne(e.Nd,c.Nd);return c};function fh(){F.call(this);this.If={}}C(fh,F);fh.prototype.b=function(){for(var a in this.If)H(this.If[a]);this.If={};fh.a.b.call(this)};fh.prototype.update=ba();function gh(a,b){fh.call(this);this.cb=a;this.ba=b;this.xn={}}C(gh,fh);function hh(a,b){gh.call(this,a,b);this.xn.pumpkin={id:"pumpkin",xp:eh}}C(hh,gh);function ih(){this.ga=Array(256)}function jh(a,b){a.ga[b.id]=b};function kh(){F.call(this);this.eb={};this.Rc=[];this.La=this.Ya=0}C(kh,F);s=kh.prototype;s.b=function(){this.Rc.length=0;kh.a.b.call(this)};s.update=function(){for(;this.Rc.length;){var a=this.Rc.shift();lh(this,a)}};s.Bc=q("La");s.get=function(a,b,c){return 0!=b>>7?l:this.eb[(a>>4&65535)<<16|c>>4&65535]||l};s.add=function(a){this.eb[(a.x>>4&65535)<<16|a.u>>4&65535]=a;0<a.qe||this.Rc.push(a);this.Ya++;this.La+=65792};s.remove=function(a){lh(this,a);0<a.qe||D(this.Rc,a)};
function lh(a,b){delete a.eb[(b.x>>4&65535)<<16|b.u>>4&65535];a.La-=65792;a.Ya--}s.Fk=function(a){this.Rc.push(a)};s.Gk=function(a){D(this.Rc,a)};function mh(){F.call(this);this.fo=Pe(0,191/255,1);this.Xc=Pe(110/255,110/255,110/255);this.Ad=Pe(1,1,-0.5);this.zd=Pe(130/255,130/255,130/255);this.wa=Pe(1,1,1);Qe(this.wa,this.fo)}C(mh,F);mh.prototype.update=ba();function nh(a,b,c,d,e){this.id=a;this.name=b;this.Rh=c;this.q=d;this.Hs=0;this.ps=1;this.Is=0;this.Yl=e}nh.prototype.hk=q("Yl");function oh(a,b,c,d,e){nh.call(this,a,b,c,d,e)}C(oh,nh);var ph=new Lg(17,"block_gravel"),qh=new Lg(17,"block_stone"),rh=new Lg(17,"block_wood"),sh=new Lg(97,"block_stone"),th=new Lg(17,"block_cloth");function uh(){nh.call(this,6,"Red Cloth",th,17,129)}C(uh,oh);function vh(){nh.call(this,7,"Green Cloth",th,17,145)}C(vh,oh);function wh(){nh.call(this,8,"Yellow Cloth",th,17,162)}C(wh,oh);function xh(){nh.call(this,9,"Blue Cloth",th,17,177)}C(xh,oh);function yh(){nh.call(this,3,"Brick",qh,17,7)}C(yh,oh);function zh(){nh.call(this,1,"Dirt",ph,17,2)}C(zh,oh);zh.prototype.hk=function(a,b,c,d,e,f){if(f&1)switch(d){case 0:case 1:case 4:case 5:return 3;case 2:return 0;default:case 3:return 2}else return 2};function Ah(){nh.call(this,5,"Glass",sh,17,49)}C(Ah,oh);function Bh(){nh.call(this,2,"Stone",qh,17,1)}C(Bh,oh);function Ch(){nh.call(this,4,"Wood",rh,17,4)}C(Ch,oh);function Dh(){F.call(this);this.Ca=new ih;jh(this.Ca,new zh);jh(this.Ca,new Bh);jh(this.Ca,new yh);jh(this.Ca,new Ch);jh(this.Ca,new Ah);jh(this.Ca,new uh);jh(this.Ca,new vh);jh(this.Ca,new wh);jh(this.Ca,new xh);this.dd=new mh;G(this,this.dd);this.Id=[];this.Qa=new kh;G(this,this.Qa)}C(Dh,F);s=Dh.prototype;s.b=function(){Dh.a.b.call(this)};s.jk=function(){var a;a="Chunks: "+(this.Qa.Ya+" cached (");a+=Math.floor(this.Qa.Bc()/1E3)+"K), ";return a+=this.Qa.Ya-this.Qa.Rc.length+" used"};
s.update=function(a){this.dd.update(a);this.Qa.update(a)};s.Ga=function(a,b,c){var d=this.Qa.get(a,b,c);if(d)return d;d=new Fg(this,a&-16,b&-128,c&-16);this.Qa.add(d);this.Wn(d);return d};s.Ok=function(a){for(var b=0;b<this.Id.length;b++){var c=this.Id[b],d=c.oc,e=a.Sb,f=d.min,d=d.max,h=e.min,e=e.max;-1!=(d[0]<h[0]||f[0]>e[0]||d[1]<h[1]||f[1]>e[1]||d[2]<h[2]||f[2]>e[2]?-1:f[0]>h[0]||e[0]>d[0]||f[1]>h[1]||e[1]>d[1]||f[2]>h[2]||e[2]>d[2]?0:1)&&c.Ok(a)}};s.ap=y;s.Fk=function(a){this.Qa.Fk(a)};s.Gk=function(a){this.Qa.Gk(a)};
s.Wn=y;s.Ac=function(a,b,c){var d=this.Qa.get(a,b,c);return d?d.Ac(a,b,c):0};s.gc=function(a,b,c,d){var e=this.Qa.get(a,b,c);if(e){if(2!=e.state)return J("setBlock before chunk fully loaded - inconsistent state!"),0}else return 0;e=e.gc(a,b,c,d);if(e!=d)for(d=0;d<this.Id.length;d++)for(var f=this.Id[d],h=a,j=b,k=c,n=0;n<f.v.length;n++)f.v[n].Fh(h,j,k,0);return e};function Eh(){Dh.call(this)}C(Eh,Dh);Eh.prototype.Wn=ba();function Fh(){this.buffer=new Uint8Array(0);this.offset=0;this.va=new Float32Array(16);this.Fa=new Uint8Array(this.va.buffer);this.Ep=(this.hf=t.Float64Array?new Float64Array(1):l)?new Uint8Array(this.hf.buffer):l}s=Fh.prototype;s.wj=function(a,b){this.buffer=a instanceof Uint8Array?a:new Uint8Array(a);this.offset=b};function Gh(a){var b=a.buffer[a.offset++];a=a.buffer[a.offset++];b=b<<8|a;return 32767<b?b-65536:b}
function Hh(a){var b=a.buffer[a.offset++],c=a.buffer[a.offset++],d=a.buffer[a.offset++];a=a.buffer[a.offset++];b=b<<24|c<<16|d<<8|a;return 2147483647<b?b-4294967296:b}function Ih(a){return a.buffer[a.offset++]}function Jh(a){var b=a.buffer[a.offset++];a=a.buffer[a.offset++];return b<<8|a}s.ca=function(){var a=this.buffer[this.offset++],b=this.buffer[this.offset++],c=this.buffer[this.offset++],d=this.buffer[this.offset++];return a<<24|b<<16|c<<8|d};
s.z=function(){for(var a=0,b=0,c;(c=this.buffer[this.offset++]&255)&128;)a|=(c&127)<<b,b+=7;return a|c<<b};s.fi=function(){var a=this.z();return(a<<31>>31^a)>>1^a&-2147483648};s.Rn=function(){this.Fa[0]=this.buffer[this.offset++];this.Fa[1]=this.buffer[this.offset++];this.Fa[2]=this.buffer[this.offset++];this.Fa[3]=this.buffer[this.offset++];return this.va[0]};s.er=function(){for(var a=0;12>a;a++)this.Fa[a]=this.buffer[this.offset++];return this.va};
s.fr=function(){for(var a=0;16>a;a++)this.Fa[a]=this.buffer[this.offset++];return this.va};s.t=function(){var a=Jh(this);Jh(this);for(var b=Array(a),c=0;c<a;){var d=this.buffer[this.offset++];if(128>d)b[c++]=String.fromCharCode(d);else if(191<d&&224>d){var e=this.buffer[this.offset++];b[c++]=String.fromCharCode((d&31)<<6|e&63)}else{var e=this.buffer[this.offset++],f=this.buffer[this.offset++];b[c++]=String.fromCharCode((d&15)<<12|(e&63)<<6|f&63)}}return b.join("")};var Kh=l;
function Lh(){Kh||(Kh=new Fh);return Kh};function Mh(a){this.zm=w(a)?a:1}Mh.Fo=1;
Mh.prototype.Zn=function(a,b){switch(Mh.Fo){case 1:og(b,1);var c;a:{ng(b,a.x);ng(b,a.y);ng(b,a.u);og(b,this.zm);switch(this.zm){default:case 0:c=new Uint8Array(a.Eb.buffer);b.ea(4+c.length);b.$a(c.length);for(var d=0;d<c.length;d++)b.buffer[b.offset++]=c[d];break;case 1:b.ea(65668);d=b.offset+4;c=a.Eb;for(var d=b.buffer.subarray(d,d+65664),e=0,f=0,h=0,j=0;j<c.length;j++){var k=c[j];j&&k==f?h++:(f=k,h=1);if(j>=c.length-2||c[j+1]!=f)1<h||255==f>>8?(d[e++]=255,d[e++]=h>>8,d[e++]=h&255,d[e++]=f>>8,d[e++]=
f&255):(d[e++]=k>>8,d[e++]=k&255)}c=e;if(0>c){c=m;break a}b.$a(c);b.offset+=c;break;case 2:c=m;break a}c=i}return c;default:return m}};
Mh.prototype.Hm=function(a,b){switch(Ih(b)){case 1:var c;a:{c=Hh(b);var d=Hh(b),e=Hh(b);a.x=c;a.y=d;a.u=e;var f=a.Sb,h=c+16,j=d+128,k=e+16;Q(f.min,c,d,e);Q(f.max,h,j,k);d=Ih(b);c=a.Eb;switch(d){default:case 0:b.ca();d=0;for(e=b.offset;32768>d;d++,e+=2)c[d]=b.buffer[e+1]<<8|b.buffer[e];break;case 1:h=b.ca();d=b.buffer;f=b.offset;e=0;f=f?f:0;h=h?h:d.length;for(j=f;j<f+h;)if(k=d[j++],255==k)for(var k=d[j++]<<8|d[j++],n=d[j++]<<8|d[j++],p=0;p<k;p++)c[e++]=n;else c[e++]=k<<8|d[j++];break;case 2:c=m;break a}a.dh=
m;a.state=2;a.map.Ok(a);c=i}return c;default:return m}};Mh.ol=l;Mh.Um=function(){Mh.ol||(Mh.ol=new Mh(1));return Mh.ol};Mh=mf(Mh,"blk.io.ChunkSerializer",{Zn:"serializeToWriter",Hm:"deserializeFromReader"});function Nh(a){this.factory=a;this.Oc=this.eg=0}s=Nh.prototype;s.getTime=q("eg");s.setTime=function(a){this.eg=(1E3*a|0)/1E3};s.read=function(a){var b=this.factory.q;b&2&&(this.eg=a.z()/1E3);b&4||(this.Oc=a.z())};s.write=function(a){var b=this.factory.q;b&2&&a.nc(1E3*this.eg|0);b&4||a.nc(this.Oc)};s.sd=function(){this.factory.sd(this)};function Oh(a){Nh.call(this,a);this.jl=this.Ki=0;this.zh=m}C(Oh,Nh);Oh.prototype.read=function(a){Oh.a.read.call(this,a);this.Ki=a.z()/1E3;this.zh=m};
Oh.prototype.write=function(a){Oh.a.write.call(this,a);a.nc(1E3*this.Ki|0)};function Ph(a){Nh.call(this,a);this.Wh=0}C(Ph,Nh);Ph.prototype.read=function(a){Ph.a.read.call(this,a);this.Wh=a.z()};Ph.prototype.write=function(a){Ph.a.write.call(this,a);a.nc(this.Wh)};function Qh(a,b,c,d){F.call(this);this.ma=a;this.factory=b;this.Rk=l;this.Td=c;this.cd=d;this.la=l;this.O=[];this.ta=0;this.Pb=Rh(b,this);this.fb=d&(Sh|Th)?Rh(b,this):l;this.Y=[]}C(Qh,F);s=Qh.prototype;s.b=function(){var a=this.getParent();a&&(D(a.O,this),a.Pd(this));this.factory.yd.push(this.Pb);this.fb&&this.factory.yd.push(this.fb);for(a=0;a<this.Y.length;a++)this.factory.yd.push(this.Y[a]);Qh.a.b.call(this)};s.Hb=q("ma");s.getParent=q("la");
function Uh(a,b){if(a.la!=b){var c=a.la;a.la=b;a.Sk(c,b);c&&(D(c.O,a),c.Pd(a));b&&b.nj(a)}}s.nj=function(a){this.O.push(a);this.Rg(a)};s.Sk=y;s.Rg=y;s.Pd=y;s.ik=da(l);function V(a){return a.fb||a.Pb}s.read=function(a){this.Pb.read(a)};s.cl=function(a){this.Pb.cl(a)};s.write=function(a){this.Pb.write(a)};function Vh(a,b){if(a.cd&Sh){1==a.Y.length&&(a.Y[0].time=b);var c=Rh(a.factory,a);c.time=b;a.Pb.Hj(c);a.Y.push(c)}}
s.Dh=function(a){var b=this.cd;if(this.fb){this.Pb.Wg(this.fb);if(b&Sh){var c=this.fb;if(this.Y.length&&!(this.Y[0].time>a)){for(var d=l,e=1;e<this.Y.length&&!(d=this.Y[e],d.time>=a);e++);if(e>=this.Y.length){d=this.Y[this.Y.length-1];c.Dh(d,d,0);for(c=0;c<this.Y.length-1;c++)this.factory.yd.push(this.Y[c]);this.Y.splice(0,this.Y.length-1)}else{var f=this.Y[e-1];a=(a-f.time)/(d.time-f.time);a=Math.min(Math.max(a,0),1);c.Dh(f,d,a);d=1<=a?e:e-1;if(0<d){for(c=0;c<d;c++)this.factory.yd.push(this.Y[c]);
this.Y.splice(0,d)}}}}b&Th&&this.Pb.Ij(this.fb)}};s.Xg=function(a){a=Wh(this.ma.Ub[a]||l);a.Oc=this.Td;return a};s.Sa=function(a){a instanceof Ph&&(0==a.Wh?Uh(this,l):Uh(this,this.ma.B[a.Wh]||l))};function Xh(a,b,c){a.Sj||Yh(a.ma.Yf,b,c===g?0:c,a.update,a)}s.pd=function(){this.fb&&this.Pb.Wg(this.fb)};s.$q=y;s.rk=function(){var a=!!this.ta;this.ta|=Zh;a||(a=this.ma,a.ib[a.hb++]=this)};s.se=function(){this.ta=0;this.Pb.se();this.fb&&this.fb.se()};var Th=4,Sh=8,Zh=2;function $h(a){F.call(this);this.kr=a}C($h,F);function ai(a){F.call(this);this.lr=a;this.il=[[],[],[],[],[]];this.po=[]}C(ai,F);function Yh(a,b,c,d,e){var f=a.po.pop()||new bi;f.ar=b;f.hl=a.lr.W.lb;f.Gi=-1==c?0:0==c?f.hl+0.0010:c;f.D=d;f.Cj=e||t;a=a.il[b];b=0;for(c=a.length;b<c;)d=b+c>>1,0<f.Gi-a[d].Gi?b=d+1:c=d;a.splice(b,0,f)}var ci=Number.MAX_VALUE;
ai.prototype.update=function(a){a=a.time;for(var b=hc(),c=this.il.length-1;0<=c;c--){for(var d=this.il[c];d.length;){var e=d[0];if(e.Gi>a)break;d.shift();var f=a-e.hl,h=e.D,j=e.Cj;e.D=e.Cj=l;this.po.push(e);h.call(j,a,f)}if(hc()-b>=ci)break}};function bi(){this.ar=di;this.Gi=this.hl=0;this.Cj=this.D=l}var di=0;function ei(){this.Cf=this.Th=this.Lb=this.Hn=this.gn=this.Nf=this.Uh=this.ld=this.de=this.df=this.lh=this.ef=this.nh=this.cf=this.kh=0}ei.prototype.update=function(a){this.Lb+=this.cf;this.Lb+=this.ef;this.Lb+=this.df;this.Lb+=this.ld;this.Th+=this.Nf;1<=a-this.Cf&&(this.Cf=a,this.gn=this.Lb,this.Hn=this.Th,this.Th=this.Lb=0);this.Uh=this.Nf=this.de=this.ld=this.lh=this.df=this.nh=this.ef=this.kh=this.cf=0};function fi(a,b){for(var c=String(a);c.length<b;)c=" "+c;return c}
ei.prototype.xh=function(){return["i/s:",fi(Math.round(this.gn),4)," o/s:",fi(Math.round(this.Hn),4)," ec:",fi(this.kh,2),"/",fi(this.cf,4)," eu:",fi(this.nh,2),"/",fi(this.ef,4)," ed:",fi(this.lh,2),"/",fi(this.df,4)," ic:",fi(this.de,2),"/",fi(this.ld,4)," oc:",fi(this.Uh,2),"/",fi(this.Nf,4)].join("")};function gi(a,b,c){this.Pc=a;this.sp=b;this.q=c;this.Gl=[]}function Wh(a){return a.Gl.length?(a=a.Gl.pop(),a.Oc=0,a):new a.sp(a)}gi.prototype.sd=function(a){this.Gl.push(a)};function hi(a,b){$h.call(this,a);this.n=new ei;this.Yf=new ai(a);G(this,this.Yf);this.kg=[];this.Ub={};this.Wj={};this.Nk=b;this.B={};this.Xf=l;this.ib=Array(256);this.hb=0;var c=new gi(0,Ph,0);this.Ub[c.Pc]=c}C(hi,$h);function ii(a,b){a.Wj[b.Pc]=b}function ji(a){var b=a.Nk;a.Nk+=2;return b}s=hi.prototype;s.Jj=function(a,b){var c=this.Wj[a].Jj(this,ji(this),b);this.Jd(c);return c};s.Jd=function(a){this.B[a.Td]=a;var b=!!a.ta;a.ta|=1;b||(this.ib[this.hb++]=a);a.cd&128&&(this.Xf=a)};
s.Qm=function(a,b){for(var c in this.B)a.call(b||t,this.B[Number(c)])};s.td=function(a,b){if(!(a.ta&4)){switch(b||ki){default:case ki:for(var c=a.O.length-1;0<=c;c--){var d=a.O[c];a.Pd(d);a.ma.td(d)}if(d=a.ik())for(c=0;c<d.length;c++)a.ma.td(d[c]);break;case li:for(c=0;c<a.O.length;c++)Uh(a.O[c],l);if(d=a.ik())for(c=0;c<d.length;c++)Uh(d[c],l);case mi:}delete this.B[a.Td];c=!!a.ta;a.ta|=4;c||(this.ib[this.hb++]=a);H(a)}};s.Xg=function(a){a=Wh(this.Ub[a]||l);a.Oc=0;return a};
s.oh=function(a,b){for(var c=0;c<b;c++){var d=a[c],e=d.Oc;0==e?this.Sa(d):(e=this.B[e]||l)&&e.Sa(d);d instanceof Oh&&(d.zh=i)}};s.Sa=y;s.Nn=function(){for(var a=0;a<this.hb;a++){var b=this.ib[a];b.pd()}for(a=0;a<this.hb;a++){b=this.ib[a];this.ib[a]=l;if(b.ta&1)for(var c=0;c<this.kg.length;c++)this.kg[c].bf(b);if(b.ta&4)for(c=0;c<this.kg.length;c++)this.kg[c].mh(b);b.se()}this.hb=0};s.Zk=function(a){for(var b=0;b<this.hb;b++){var c=this.ib[b];c.$q(a);this.On(a,c)}};s.On=y;
s.pe=function(){for(var a=0;a<this.hb;a++){var b=this.ib[a];this.ib[a]=l;b.se()}this.hb=0};var ki=0,li=1,mi=2,hi=mf(hi,"gf.sim.Simulator",{Qm:"forEachEntity",oh:"executeCommands",Nn:"postNetworkUpdateEntities",Zk:"postTickUpdateEntities",pe:"postUpdate"});function ni(){this.rj=[];this.i=0}ni.prototype.compact=ba();ni.prototype.nb=q("i");ni.prototype.sg=function(a){this.rj[this.i++]=a};function oi(a){for(var b=0;b<a.i;b++){var c=a.rj[b];c.factory.sd(c)}a.i=0};function pi(){this.An=1;this.El=[];this.Dd=0;this.Pk=[];this.ne=0;this.In=[];this.Qk=0}pi.prototype.compact=ba();pi.prototype.sg=function(a){this.Pk[this.ne++]=a;a instanceof Oh&&(a.jl=this.An++,a.zh=m,this.In[this.Qk++]=a)};
pi.prototype.write=function(a){a.nc(this.An-1);var b=this.ne;a.nc(this.ne);for(var c=0;c<this.ne;c++){var d=this.Pk[c];this.Pk[c]=l;a.nc(d.factory.Pc);d.write(a);d instanceof Oh?this.El[this.Dd++]=d:d.factory.sd(d)}this.Qk=this.ne=0;1500<this.Dd&&J("massive backup of commands, dying");return b};function W(a,b){hi.call(this,a,1);this.qb=b;b.Ja.X(30,this.bn,this);this.Eh=[];this.wf=new ni;this.me=new pi;this.Bf=0}C(W,hi);W.prototype.b=function(){W.a.b.call(this)};W.prototype.Ib=function(a){return this.qb.zb[a]||l};W.prototype.Jd=function(a){W.a.Jd.call(this,a);a.cd&(Th|Sh)&&this.Eh.push(a)};W.prototype.td=function(a,b){W.a.td.call(this,a,b);a.cd&(Th|Sh)&&D(this.Eh,a)};W.Eo=20;
W.prototype.update=function(a){var b=qi(this.kr.W);this.pk(b-0.5);this.oh(this.wf.rj,this.wf.nb());oi(this.wf);this.Yf.update(a);this.Zk(a);this.Yn(a);this.pe(a);this.Re(a)};W.prototype.pk=function(a){for(var b=0;b<this.Eh.length;b++)this.Eh[b].Dh(a);a=this.me;this.oh(a.El,a.Dd);this.oh(a.In,a.Qk)};W.prototype.ri=function(a){this.me.sg(a)};W.prototype.Yn=function(a){if(this.me.ne&&a.time-this.Bf>=1/W.Eo){this.Bf=a.time;a=rg();og(a,31);var b=this.me.write(a);this.n.Uh+=b;this.n.Nf+=a.offset;this.qb.send(a.finish())}};
W.gj=15;W.prototype.Re=function(a){a.time-this.vk<W.gj||(this.vk=a.time,this.wf.compact(),this.me.compact())};
W.prototype.bn=function(a,b,c){b=c.z()/1E3;var d=c.z(),e=c.z(),f=c.z(),h=c.z();a=c.z();this.n.kh+=e;this.n.nh+=f;this.n.lh+=h;this.n.de+=a;var j=this.me,k=j.El,n=j.Dd;if(n)if(k[n-1].jl<=d){for(var p=0;p<n;p++){var r=k[p];r.factory.sd(r)}j.Dd=0}else{for(var v=n,p=0;p<n;p++){r=k[p];if(r.jl>d){v=p;break}r.factory.sd(r)}k.splice(0,v);j.Dd-=v}for(d=0;d<this.hb;d++)j=this.ib[d],this.ib[d]=l,j.se();this.hb=0;k=l;for(d=j=0;d<e;d++){var j=c.offset,p=c.z()<<1,u=c.z(),r=c.z(),v=c.z(),n=c.z(),u=this.Wj[u]||l;
if(!u)return m;(v=v?this.qb.Vi[v]||l:l)&&(v!=ri(this.qb)&&r&Th)&&(r&=~Th);p=u.Jj(this,p,r);p.Rk=v;p.read(c);this.n.cf+=c.offset-j;Vh(p,b);this.Jd(p);n&&(k||(k=[]),k.push([p,n]))}for(d=0;d<f;d++){j=c.offset;p=c.z()<<1;p=this.B[p]||l;if(!p)return m;p.cl(c);this.n.ef+=c.offset-j;Vh(p,b)}for(d=0;d<h;d++){j=c.offset;p=c.z()<<1;this.n.df+=c.offset-j;p=this.B[p]||l;if(!p)return m;this.td(p,mi)}if(k)for(d=0;d<k.length;d++){p=k[d][0];b=this.B[k[d][1]]||l;if(!b)return m;Uh(p,b)}this.Nn();for(d=0;d<a;d++){j=
c.offset;b=c.z();b=this.Ub[b]||l;if(!b)return m;b=Wh(b);b.read(c);this.n.ld+=c.offset-j;this.wf.sg(b)}return i};W=mf(W,"gf.sim.ClientSimulator",{update:"update",pk:"interpolateEntities",Yn:"sendPendingCommands_",Re:"compact_",bn:"handleSyncSimulation_"});function si(a){switch(a){case 0:return"user closed the connection";case 1:return"socket killed or timed out";case 2:return"network protocol mismatch";case 3:return"unexpected data sent/received";case 4:return"access denied";case 5:return"kicked by console";case 6:return"banned";case 7:return"server full";default:return"unknown"}};function ti(){this.mp=this.lp=this.Os=this.ns=this.us=this.vs=this.$l=0}ti.prototype.r=function(){return new ti};ti.prototype.toString=da("[stats]");var ui=function(){var a;return qb?(a=/Windows NT ([0-9.]+)/,(a=a.exec(rb()))?a[1]:"0"):pb?(a=/10[_.][0-9_.]+/,(a=a.exec(rb()))?a[0].replace(/_/g,"."):"10"):""}();function vi(){this.Il="";this.type=wi;this.platform=xi;this.oe="";this.Rd=yi}vi.prototype.r=function(){var a=new vi;a.Il=this.Il;a.type=this.type;a.platform=this.platform;a.oe=this.oe;a.Rd=this.Rd;return a};vi.prototype.toString=function(){return[this.type,this.platform+this.oe,this.Rd].join("/")};var wi="unknown",xi="other",yi="desktop";function zi(){this.xg="none";this.wg="0";this.Q="User"}zi.prototype.r=function(){var a=new zi;a.xg=this.xg;a.wg=this.wg;a.Q=this.Q;return a};zi.prototype.toString=da("[user]");function Ai(a){a=wa(va(xa(a)));return!a.length?"User":a};function Bi(a,b,c,d,e){this.j=a||"";this.mc=b||0;this.q=c||0;this.info=d||new zi;this.tg=e||new vi;this.Sd=0;this.n=new ti;this.data=this.Ka=l}Bi.prototype.toString=function(){return this.info.Q+" ("+this.j+"/"+this.mc+")"};function Ci(a){return new Bi(a.j,a.mc,a.q,a.info.r(),a.tg.r())};function Di(a,b,c){hi.call(this,a,2);this.qb=b;this.qb.Aa.push(this);this.qb.Ja.X(31,this.Zm,this);this.Tq=c;this.v=[];this.De={};this.Fj=new ni}C(Di,hi);s=Di.prototype;s.b=function(){mc(this.v);Di.a.b.call(this)};s.Ib=function(a){return this.qb.zb[a]||l};s.oj=function(a){this.v.push(a);var b=a.Ib();b&&(this.De[b.j]=a);this.Qm(function(b){a.Sq(b)},this)};s.fl=function(a){var b=a.Ib();b&&delete this.De[b.j];D(this.v,a);H(a)};
s.update=function(a){for(var b=0;b<this.v.length;b++)this.v[b].os();this.Yf.update(a);this.Zk(a);this.pe(a);this.Re(a)};s.Sa=ba();s.ri=function(a,b){var c=this.De[b.j];c&&c.As(a);this.Fj.sg(a)};s.On=function(a,b){if(!(b.cd&1))for(var c=0;c<this.v.length;c++)this.v[c].Sq(b)};s.pe=function(a){for(var b=0;b<this.v.length;b++)this.v[b].flush(a.time);oi(this.Fj);Di.a.pe.call(this,a)};Di.gj=15;s=Di.prototype;s.Re=function(a){if(!(a.time-this.vk<Di.gj)){this.vk=a.time;this.Fj.compact();for(a=0;a<this.v.length;a++)this.v[a].compact()}};
s.Gj=y;s.Pj=y;s.Kl=function(a){var b=this.De[a.j]||l;b||(b=new this.Tq(this,this.qb,a),this.oj(b))};s.Ll=function(a){(a=this.De[a.j]||l)&&this.fl(a)};s.Ml=y;s.Zm=function(a,b,c){if(!a.yb)return m;b=this.De[a.yb.j]||l;if(!b)return m;var d=c.z(),e=c.z();this.n.de+=e;this.n.ld+=a.data.length;for(var f=0;f<e;f++){var h=c.z(),h=this.Ub[h]||l;if(!h)return m;h=Wh(h);h.read(c);var j=0==h.Oc;j||(j=this.B[h.Oc]||l,j=!j||j.Rk!=a.yb);if(j)return h.sd(),m;b.zs(h)}b.Fs(d);return i};
Di=mf(Di,"gf.sim.ServerSimulator",{update:"update",pe:"postUpdate",Re:"compact_",Zm:"handleExecCommands_"});function Ei(a){a=V(a.ma.Xf);a.aj===g&&(a.aj=a.lg?a.fa.Hb().B[a.lg]||l:l);return a.aj};function Fi(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],h=2*c,j=2*d,k=2*e,n=h*f,p=j*f,f=k*f,h=h*c,r=j*c,c=k*c,j=j*d,d=k*d,e=k*e;b[0]=1-(j+e);b[1]=r+f;b[2]=c-p;b[3]=0;b[4]=r-f;b[5]=1-(h+e);b[6]=d+n;b[7]=0;b[8]=c+p;b[9]=d-n;b[10]=1-(h+j);b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1}
function Gi(a,b,c,d){var e=a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3];if(1<e||-1>e)return ne(d,b),d;var f=1;0>e&&(f=-1,e=-e);var h=Math.acos(e);if(1E-6>=h)return ne(d,b),d;var j=1/Math.sin(h),e=Math.sin((1-c)*h)*j;c=f*Math.sin(c*h)*j;d[0]=a[0]*e+b[0]*c;d[1]=a[1]*e+b[1]*c;d[2]=a[2]*e+b[2]*c;d[3]=a[3]*e+b[3]*c;return d};function Hi(a,b,c,d){Qh.call(this,a,b,c,d);this.Qb=i;this.Od=N();this.wl=Xe();V(this).co(Pe(1,1,1))}C(Hi,Qh);Hi.prototype.pd=function(){Hi.a.pd.call(this);this.Qb=i};
function Ii(a){if(a.Qb){a.Qb=m;var b=V(a),c=b.cc,d=b.te,e=b.oi;a.Od[0]=c[0];a.Od[1]=c[1];a.Od[2]=c[2];a.Od[3]=b.Mg*Math.max(e[0],Math.max(e[1],e[2]));b=a.wl;Fi(d,b);var d=e[0],f=e[1],e=e[2],h=b[1],j=b[2],k=b[3],n=b[4],p=b[5],r=b[6],v=b[7],u=b[8],z=b[9],x=b[10],M=b[11],K=b[12],U=b[13],ha=b[14],Ga=b[15];b[0]*=d;b[1]=h*d;b[2]=j*d;b[3]=k*d;b[4]=n*f;b[5]=p*f;b[6]=r*f;b[7]=v*f;b[8]=u*e;b[9]=z*e;b[10]=x*e;b[11]=M*e;b[12]=K;b[13]=U;b[14]=ha;b[15]=Ga;d=c[0];f=c[1];c=c[2];e=b[1];h=b[2];j=b[3];k=b[4];n=b[5];
p=b[6];r=b[7];v=b[8];u=b[9];z=b[10];x=b[11];M=b[12];K=b[13];U=b[14];ha=b[15];b[0]+=d*j;b[1]=e+f*j;b[2]=h+c*j;b[3]=j;b[4]=k+d*r;b[5]=n+f*r;b[6]=p+c*r;b[7]=r;b[8]=v+d*x;b[9]=u+f*x;b[10]=z+c*x;b[11]=x;b[12]=M+d*ha;b[13]=K+f*ha;b[14]=U+c*ha;b[15]=ha;a.getParent()}}
Hi.prototype.Me=function(a){var b=V(this),c=a.Xi,d=b.cc;Fi(b.te,c);if(c==c){var b=c[1],e=c[2],f=c[3],h=c[6],j=c[7],k=c[11];c[1]=c[4];c[2]=c[8];c[3]=c[12];c[4]=b;c[6]=c[9];c[7]=c[13];c[8]=e;c[9]=h;c[11]=c[14];c[12]=f;c[13]=j;c[14]=k}else c[0]=c[0],c[1]=c[4],c[2]=c[8],c[3]=c[12],c[4]=c[1],c[5]=c[5],c[6]=c[9],c[7]=c[13],c[8]=c[2],c[9]=c[6],c[10]=c[10],c[11]=c[14],c[12]=c[3],c[13]=c[7],c[14]=c[11],c[15]=c[15];b=-d[0];e=-d[1];d=-d[2];f=c[1]*b+c[5]*e+c[9]*d+c[13];h=c[2]*b+c[6]*e+c[10]*d+c[14];j=c[3]*b+
c[7]*e+c[11]*d+c[15];c[12]=c[0]*b+c[4]*e+c[8]*d+c[12];c[13]=f;c[14]=h;c[15]=j;Ji(a)};function Ki(a,b,c,d){Hi.call(this,a,b,c,d);this.Mb=l;this.gi=m}C(Ki,Hi);s=Ki.prototype;s.b=function(){H(this.Mb);this.Mb=l;Ki.a.b.call(this)};s.gr=function(){var a=V(this).nf();if(this.gi){this.Mb&&(H(this.Mb),this.Mb=l);if(a){a:{var b=this.ma.Xf.vh.wn,c=b.If[a];if(!c){c=b.xn[a];c=!c?l:c.xp(b.cb,b.ba);if(!c){a=l;break a}b.If[a]=c}a=c.Ue()}this.Mb=a}this.gi=m}};s.nf=function(){return V(this).nf()};
s.pd=function(){Ki.a.pd.call(this);var a=V(this).nf(),a=a.length?a:l;if(a!=(this.Mb?this.Mb.Jk.id:l)&&!this.gi)this.gi=i,Yh(this.ma.Yf,di,0,this.gr,this)};s.A=function(a,b,c,d){if(this.Mb){b=this.Mb;a=Ye();d.ga.push({Aq:b,transform:a});this.Qb&&Ii(this);d=this.wl;a[0]=d[0];a[1]=d[1];a[2]=d[2];a[3]=d[3];a[4]=d[4];a[5]=d[5];a[6]=d[6];a[7]=d[7];a[8]=d[8];a[9]=d[9];a[10]=d[10];a[11]=d[11];a[12]=d[12];a[13]=d[13];a[14]=d[14];a[15]=d[15];for(d=this.getParent();d!=l;)d instanceof Hi&&$e(d.wl,a,a),d=d.getParent()}};function Li(a,b,c,d){Ki.call(this,a,b,c,d)}C(Li,Ki);function Mi(a){a=V(a);a.Ah===g&&(a.Ah=a.uf?a.fa.Hb().B[a.uf]||l:l);return a.Ah};O();O();function Ni(){this.height=this.width=1;this.Rb=g;this.Pq=0.1;this.rh=100;this.Pf=i;this.Mf=Ye();this.al=Ye();this.Xi=Ye();this.tk=Ye();this.Uc=Ye();this.ee=Ye();this.position=O();this.direction=O();this.dk=[N(),N(),N(),N(),N(),N()]}function Oi(a,b){var c,d;b instanceof Id?(c=b.width,d=b.height):(c=b,d=g);if(a.width!=c||a.height!=d)a.width=c,a.height=d,a.Pf=i}function Pi(a,b){a.rh!=b&&(a.rh=b,a.Pf=i)}
function Ji(a){if(a.Pf){a.Pf=m;var b=2/a.width,c=2/-a.height;Ze(a.Mf,b,c,1,0,-1,1,0,1);var b=a.Rb===g?a.width/a.height:a.Rb,c=a.Pq,d=a.rh,e=Math.PI/4/2,f=d-c,h=Math.sin(e);0==f||(0==h||0==b)||(e=Math.cos(e)/h,Ze(a.al,e/b,e,-(d+c)/f,-1,0,0,-(2*c*d)/f,0));$e(a.al,a.Xi,a.Uc);af(a.Uc,a.ee)}$e(a.al,a.Xi,a.Uc);af(a.Xi,a.tk);af(a.Uc,a.ee);c=a.Uc;b=a.dk;me(b[0],c[3]+c[0],c[7]+c[4],c[11]+c[8],c[15]+c[12]);me(b[1],c[3]-c[0],c[7]-c[4],c[11]-c[8],c[15]-c[12]);me(b[2],c[3]-c[1],c[7]-c[5],c[11]-c[9],c[15]-c[13]);
me(b[3],c[3]+c[1],c[7]+c[5],c[11]+c[9],c[15]+c[13]);me(b[4],c[3]+c[2],c[7]+c[6],c[11]+c[10],c[15]+c[14]);me(b[5],c[3]-c[2],c[7]-c[6],c[11]-c[10],c[15]-c[14]);for(c=0;c<b.length;c++)d=b[c],f=1/Math.sqrt(d[0]*d[0]+d[1]*d[1]+d[2]*d[2]),d[0]*=f,d[1]*=f,d[2]*=f,d[3]*=f;Q(a.position,0,0,0);bf(a.tk,a.position,a.position);b=2*(0.5/a.width)-1;c=1-2*(0.5/a.height);d=Qi[0];f=Qi[1];Q(d,b,c,-1);Q(f,b,c,1);df(a.ee,d,d);df(a.ee,f,f);Ve(d,f,a.direction);a=b=a.direction;a[0]=-b[0];a[1]=-b[1];a[2]=-b[2]}
var Qi=[O(),O(),O(),O(),O(),O(),O(),O()];function X(a,b){F.call(this);this.map=a;this.aa=Math.min(Math.max(Math.floor(b),X.ij),X.hj);this.rb=2*this.aa+1;this.eb=Array(this.rb*X.Wl*this.rb);this.pc=O();this.$=new Int32Array(3);this.oc=Cg(this.pc[0]-16*this.aa,0,this.pc[2]-16*this.aa,this.pc[0]+16*this.aa,128,this.pc[2]+16*this.aa);this.v=[];this.wq=m}C(X,F);X.Sl=8;X.Mo=16;X.ij=1;X.hj=16;X.Wl=1;s=X.prototype;s.b=function(){mc(this.v);X.a.b.call(this)};s.oj=function(a){this.v.push(a)};s.fl=function(a){D(this.v,a)};
s.hn=function(a){Qe(this.pc,a);this.dl();this.wq=i};s.update=function(a){Qe(this.pc,a);var b=a[0]>>4,c=a[2]>>4;a=b-this.$[0];var d=c-this.$[2];if(a||d){var b=b<<4,c=c<<4,e=this.oc,f=b+16*this.aa,h=c+16*this.aa;Q(e.min,b-16*this.aa,0,c-16*this.aa);Q(e.max,f,0,h);this.oc.max[0]+=16;this.oc.max[1]+=128;this.oc.max[2]+=16;this.$[0]+=a;this.$[1]+=0;this.$[2]+=d;this.dl()}};
s.dl=function(){this.$[0]=this.pc[0]>>4;this.$[1]=0;this.$[2]=this.pc[2]>>4;this.Qn(this.$[0]-this.aa,0,this.$[2]-this.aa,this.rb,X.Wl,this.rb)};function Ri(a,b,c){b%=a.rb;c%=a.rb;0>b&&(b=a.rb+b);0>c&&(c=a.rb+c);return b+c*a.rb}
s.Qn=function(a,b,c,d,e,f){for(b=a;b<a+d;b++)for(e=c;e<c+f;e++){var h=b,j=e,k=Ri(this,h,j);if(!(0>k||k>this.eb.length))if(h=this.map.Ga(h<<4,0,j<<4),h!=this.eb[k]){if(j=this.eb[k]){for(var n=0;n<this.v.length;n++)this.v[n].wm(j);j.qe--;j.qe||j.map.Fk(j)}j=h;j.qe||j.map.Gk(j);j.qe++;this.eb[k]=h;for(n=0;n<this.v.length;n++)this.v[n].vm(h)}}};s.Ok=function(a){for(var b=0;b<this.v.length;b++)this.v[b].xm(a),this.v[b].Gh(a.x,a.y,a.u,a.x+16-1,a.y+128-1,a.u+16-1,3)};
s.Ga=function(a,b,c){if(0>b||128<=b)return l;a>>=4;c>>=4;var d=Math.abs(c-this.$[2]);if(Math.abs(a-this.$[0])>this.aa||0!=b>>7||d>this.aa)return l;b=Ri(this,a,c);return 0>b||b>this.eb.length?l:this.eb[b]};s.Gp=function(a,b){Ia(this.eb,a,b)};s.sh=function(a,b,c){Si(this,a,this.$[0]-this.aa,this.$[2]-this.aa,this.rb,b,c)};
function Si(a,b,c,d,e,f,h){var j=X.Kr,k=16*(c+e),n=16*(d+e);Q(j.min,16*c,0,16*d);Q(j.max,k,128,n);a:{k=j.min;n=j.max;Qe(Qi[0],k);Q(Qi[1],k[0],k[1],n[2]);Q(Qi[2],k[0],n[1],k[2]);Q(Qi[3],k[0],n[1],n[2]);Q(Qi[4],n[0],k[1],k[2]);Q(Qi[5],n[0],k[1],n[2]);Q(Qi[6],n[0],n[1],k[2]);Qe(Qi[7],n);for(var k=0,n=b.dk,p=0;p<n.length;p++){for(var r=n[p],v=8,u=1,z=0;8>z;z++){var x=Qi[z];0>r[0]*x[0]+r[1]*x[1]+r[2]*x[2]+r[3]&&(u=0,v--)}if(!v){k=-1;break a}k+=u}k=6==k?1:0}if(1==k){b=j.min[0]>>4;c=j.max[0]>>4;d=j.max[2]>>
4;for(j=j.min[2]>>4;j<d;j++)for(e=b;e<c;e++)(k=a.Ga(e<<4,0,j<<4))&&f.call(h,k)}else if(0==k)if(1>=e)(a=a.Ga(c<<4,0,d<<4))&&f.call(h,a);else{j=e/2|0;for(e=0;1>=e;e++)for(k=0;1>=k;k++)Si(a,b,c+k*j,d+e*j,j,f,h)}}
s.qk=function(a,b){var c=l,d=Math.floor(a[0]),e=Math.floor(a[1]),f=Math.floor(a[2]),h=0==a[3]?0:0>a[3]?-1:1,j=0==a[4]?0:0>a[4]?-1:1,k=0==a[5]?0:0>a[5]?-1:1,n=(d+(0<h?1:0)-a[0])/a[3],p=(e+(0<j?1:0)-a[1])/a[4],r=(f+(0<k?1:0)-a[2])/a[5];isNaN(n)&&(n=Number.POSITIVE_INFINITY);isNaN(p)&&(p=Number.POSITIVE_INFINITY);isNaN(r)&&(r=Number.POSITIVE_INFINITY);var v=h/a[3],u=j/a[4],z=k/a[5];isNaN(v)&&(v=Number.POSITIVE_INFINITY);isNaN(u)&&(u=Number.POSITIVE_INFINITY);isNaN(z)&&(z=Number.POSITIVE_INFINITY);for(var x=
Math.min(b,16*this.rb),M=0;M<x;M++){var K=this.Ga(d,e,f);if(K&&(c=K.qk(a)))break;n<p&&n<r?(n+=v,d+=h):p<r?(p+=u,e+=j):(r+=z,f+=k)}return c&&c.Tj>b?l:c};s.Ac=function(a,b,c){var d=this.Ga(a,b,c);return d?d.Ac(a,b,c):0};s.gc=function(a,b,c,d){var e=this.Ga(a,b,c);if(!e||!e.gc(a,b,c,d))return m;for(d=0;d<this.v.length;d++)this.v[d].Fh(a,b,c,0);return i};X.Js=[O(),O()];X.Kr=new Bg;X=mf(X,"blk.env.ChunkView",{hn:"initialize",update:"update",dl:"rebuildCube_",Qn:"pullChunks_",Gp:"forEachChunk",sh:"forEachInViewport"});function Ti(a,b){F.call(this);this.qb=a;this.qo=b;this.ue=[];this.wk=-Ti.Ul;this.Bf=0}C(Ti,F);Ti.Ul=3;Ti.Qo=20;Ti.Do=100;s=Ti.prototype;s.bd=function(a){0<=Ha(this.ue,a)||(this.ue.push(a),this.wk=0)};
s.br=function(a,b){var c=Math.min(Ti.Qo,this.ue.length);hf("count",this.ue.length);if(a-this.wk>Ti.Ul){this.wk=a;var d=Hg[0];Na(this.ue,function(a,c){Q(d,a.x+8,b[1],a.u+8);var e=Ue(b,d);Q(d,c.x+8,b[1],c.u+8);return e-Ue(b,d)})}a-this.Bf>1/Ti.Do?this.Bf=a:c=0;if(c)for(var e=rg(),f=Mh.Um(),h=0;h<c;h++){var j=this.ue.shift();ug.x=j.x;ug.y=j.y;ug.u=j.u;var k=e,n=ug;og(k,73);ng(k,n.x);ng(k,n.y);ng(k,n.u);if(!j.ui){k=j;var n=f,p=j,r=rg();n.Zn(p,r)?n=r.finish():(r.offset=0,n=l);k.ui=n}k=e;j=j.ui;j instanceof
Uint8Array||(j=new Uint8Array(j));k.ea(j.length);for(n=0;n<j.length;n++)k.buffer[k.offset++]=j[n];this.qb.send(e.finish(),this.qo);e.offset=0}};s.xm=function(a){this.bd(a)};s.vm=function(a){2==a.state&&this.bd(a)};s.wm=y;s.Fh=y;s.Gh=y;Ti=mf(Ti,"blk.env.server.ChunkSendQueue",{br:"process"});function Ui(a){Nh.call(this,a);this.ug=0}C(Ui,Nh);Ui.prototype.read=function(a){Ui.a.read.call(this,a);this.ug=a.Rn()};Ui.prototype.write=function(a){Ui.a.write.call(this,a);a.xo(this.ug)};function Vi(a,b,c,d){Hi.call(this,a,b,c,d);this.Rb=g;this.Cb=this.s=l}C(Vi,Hi);Vi.prototype.b=function(){this.s&&this.Cb&&(D(this.s.Id,this.Cb),H(this.Cb));Vi.a.b.call(this)};Vi.prototype.nl=function(a){this.s=a;this.Cb=new X(a,X.Mo);a.Id.push(this.Cb);this.Cb.hn(O());Xh(this,1,0)};Vi.prototype.update=function(){var a=Wi,b=this.getParent();b instanceof Hi?(b.Qb&&Ii(b),ne(a,b.Od)):(this.Qb&&Ii(this),ne(a,this.Od));this.Cb.update(a);Xh(this,1,0)};
Vi.prototype.Me=function(a){if(this.Rb){var b=this.Rb;a.Rb!==b&&(a.Rb=b,a.Pf=i)}b=this.getParent();b instanceof Hi?b.Me(a):Vi.a.Me.call(this,a)};var Wi=N();function Xi(a){Oh.call(this,a);this.Mi=0}C(Xi,Oh);Xi.prototype.read=function(a){Xi.a.read.call(this,a);this.Mi=a.ca()};Xi.prototype.write=function(a){Xi.a.write.call(this,a);a.$a(this.Mi)};var Yi=Oh.bs;function Zi(a,b,c,d){Qh.call(this,a,b,c,d)}C(Zi,Qh);s=Zi.prototype;s.$d=function(){return this.getParent()};s.Rg=function(a){Zi.a.Rg.call(this,a)};s.Pd=function(a){Zi.a.Pd.call(this,a)};s.Sa=function(a){Zi.a.Sa.call(this,a);if(a instanceof Xi){var b=this.$d();a:{for(var c=0;c<this.O.length;c++)if(this.O[c].Td==a.Mi){a=this.O[c];break a}a=l}a&&V(b).$n(a?a.Td:0)}};
s.Ob=function(a,b){var c=b.V,d=b.K,e=Mi(this.$d()),f=this.O.length,h=e?Ha(this.O,e):0,e=h;d.vc&&(e=(h+(0<d.vc?1:-1))%f,0>e&&(e=f-1));49 in c.J?e=0:50 in c.J?e=1:51 in c.J?e=2:52 in c.J?e=3:53 in c.J?e=4:54 in c.J?e=5:55 in c.J?e=6:56 in c.J?e=7:57 in c.J?e=8:48 in c.J&&(e=9);e=Math.min(Math.max(e,0),f-1);e!=h&&(c=this.Xg(67),c.Mi=(this.O[e]||l).Td,this.ma.ri(c),this.ma.Xf.vh.ha());return i};function $i(a){Oh.call(this,a);this.ec=this.za=this.ab=this.qi=this.pi=this.Db=this.Oi=0}C($i,Oh);var aj=360*(1/32767)*Math.PI/180;$i.prototype.read=function(a){$i.a.read.call(this,a);this.Oi=Ih(a);this.Db=Ih(a);this.Db&1&&(this.pi=Jh(a),this.qi=Jh(a));this.ab=Gh(a);this.za=Gh(a)};$i.prototype.write=function(a){$i.a.write.call(this,a);og(a,this.Oi);og(a,this.Db);this.Db&1&&(pg(a,this.pi),pg(a,this.qi));mg(a,this.ab);mg(a,this.za)};function bj(){this.ck=i}
bj.prototype.Sa=function(a,b){var c=a.Ki,d=a.ab*aj,e=a.za*aj,f=a.ec*aj,h=cj,j=Math.sin(d/2),d=Math.cos(d/2),k=Math.sin(e/2),e=Math.cos(e/2),n=Math.sin(f/2),f=Math.cos(f/2);h[0]=d*k*f+j*e*n;h[1]=j*e*f-d*k*n;h[2]=d*e*n-j*k*f;h[3]=d*e*f+j*k*n;b.bo(cj);if(this.ck){h=b.cc;j=dj[4];k=b.te;d=b.Wi;f=dj[5];e=Te(d);1E-4<e?(n=Math.max(0,e-40*c),Se(d,n/e,f)):Q(f,0,0,0);d=a.Oi;e=dj[0];e[0]=0;e[0]+=18*!!(d&1);e[0]-=18*!!(d&2);e[1]=0;e[1]+=18*!!(d&4);e[1]-=18*!!(d&8);e[2]=0;e[2]+=18*!!(d&16);e[2]-=18*!!(d&32);var d=
dj[1],n=k[0]*(k[0]+k[0]),p=k[3]*(k[0]+k[0]),r=k[0]*(k[1]+k[1]),v=k[1]*(k[1]+k[1]),u=k[3]*(k[1]+k[1]),z=k[0]*(k[2]+k[2]),x=k[1]*(k[2]+k[2]),M=k[2]*(k[2]+k[2]),k=k[3]*(k[2]+k[2]),K=e[0],U=e[1],e=e[2];d[0]=K*(1-v-M)+U*(r-k)+e*(z+u);d[1]=K*(r+k)+U*(1-n-M)+e*(x-p);d[2]=K*(z-u)+U*(x+p)+e*(1-n-v);k=dj[2];(e=Te(d))?Se(d,1/e,k):Q(k,0,0,0);e=Te(d);18<e&&(Se(d,18/e,d),e=18);d=e-(f[0]*k[0]+f[1]*k[1]+f[2]*k[2]);0<d&&(e=20*e*c,e>d&&(e=d),Se(k,e,k),Re(k,f,f));d=dj[3];Se(f,c,d);Re(h,d,j);b.setPosition(j);b.setVelocity(f)}};
var dj=[O(),O(),O(),O(),O(),O()];N();N();N();Xe();new Float32Array(6);var cj=N();function ej(a,b,c,d){Qh.call(this,a,b,c,d)}C(ej,Qh);ej.prototype.$d=function(){return this.getParent()};function fj(a,b,c,d){Ki.call(this,a,b,c,d)}C(fj,Ki);fj.prototype.Sk=function(a,b){fj.a.Sk.call(this,a,b)};fj.prototype.Uk=y;function gj(a,b,c,d){Qh.call(this,a,b,c,d);this.Rr=new Ni;this.Mq=new bj}C(gj,ej);
gj.prototype.Sa=function(a){gj.a.Sa.call(this,a);var b=this.$d();if(b&&a instanceof $i){this.Mq.Sa(a,V(b));var c,d=V(this);d.Yh===g&&(d.Yh=d.Qf?d.fa.Hb().B[d.Qf]||l:l);c=d.Yh;var d=hj(V(c)),e=d.Cb,f=this.Rr;Pi(f,16*d.Cb.aa+16);d.Me(f);if(a.Db&&(d=Mi(b))){var h=ij;h.time=a.getTime();h.viewport=f;h.ym=e;h.Wk=c;h.Zo=b;h.screenX=0.5;h.screenY=0.5;a.Db&1&&(h.screenX=a.pi/65535,h.screenY=a.qi/65535);var b=h.bl,j=2*(h.screenX/f.width)-1,k=1-2*(h.screenY/f.height);c=Qi[0];e=Qi[1];Q(c,j,k,-1);Q(e,j,k,1);df(f.ee,
c,c);df(f.ee,e,e);Ve(c,e,e);var f=c[1],j=c[2],k=e[0],n=e[1],e=e[2];b[0]=c[0];b[1]=f;b[2]=j;b[3]=k;b[4]=n;b[5]=e;a.zh||(a=a.Db,a&4&&d.Uk(h,0),a&32&&d.Uk(h,1))}}};var ij=new function(){this.time=0;this.Zo=this.Wk=this.ym=this.viewport=l;this.screenY=this.screenX=0;this.bl=new Float32Array(6)};function jj(a,b,c,d){Ki.call(this,a,b,c,d)}C(jj,fj);jj.prototype.mf=function(){var a=V(this).mf();return Ei(this).s.Ca.ga[a]};jj.prototype.kl=function(a){V(this).kl(a.id)};
jj.prototype.Uk=function(a,b){var c=a.ym.qk(a.bl,100);if(c&&100>=c.Tj)if(0==b){var d=c.hm,e=c.im,f=c.jm,h=0,j=0,k=0,c=c.Mn;c[0]==d?h--:c[0]==d+1&&h++;c[1]==e?j--:c[1]==e+1&&j++;c[2]==f?k--:c[2]==f+1&&k++;c=d+h;e+=j;f+=k;j=this.mf();k=a.Wk;j=j?j.id<<8:0;Ei(this).gc(c,e,f,j,k)}else 1==b&&(f=c.hm,k=c.im,c=c.jm,e=a.Wk,Ei(this).gc(f,k,c,0,e))};function kj(a,b,c,d){Qh.call(this,a,b,c,d)}C(kj,Qh);kj.prototype.Ib=function(){var a=V(this);a.Ti===g&&(a.Ti=a.Ce?a.fa.Hb().Ib(a.Ce):l);return a.Ti};kj.prototype.ik=function(){var a=V(this);a.rg===g&&(a.rg=a.Ge?a.fa.Hb().B[a.Ge]||l:l);return[a.rg,lj(V(this)),hj(V(this)),mj(V(this))]};kj.prototype.pd=function(){kj.a.pd.call(this);this.ta&1&&(this.qo=this.Hb().Ib(V(this).Ce))};function nj(a,b,c,d){Qh.call(this,a,b,c,d);this.ke=this.vh=l}C(nj,Qh);function oj(a){Nh.call(this,a);this.data=this.u=this.y=this.x=0}C(oj,Nh);oj.prototype.read=function(a){oj.a.read.call(this,a);this.x=a.fi();this.y=a.fi();this.u=a.fi();this.data=Jh(a)};oj.prototype.write=function(a){oj.a.write.call(this,a);a.dj(this.x);a.dj(this.y);a.dj(this.u);pg(a,this.data)};function pj(a,b,c){var d=a>>24&255,e=a>>16&255,f=a>>8&255;a&=255;return(d+c*((b>>24&255)-d)&255)<<24|(e+c*((b>>16&255)-e)&255)<<16|(f+c*((b>>8&255)-f)&255)<<8|a+c*((b&255)-a)&255};function qj(a,b){this.lc=a;this.Lf=0;this.q=b}qj.prototype.Tm=function(a){var b=Y(a,this.l);return"target."+Y(a,this.m)+"(source."+b+"());"};qj.prototype.Zd=function(a){var b=Y(a,this.l);return"result."+Y(a,this.m)+"(target."+b+"());"};var rj=0;function sj(a,b){return(b.q&tj)-(a.q&tj)||a.Lf-b.Lf}function Y(a,b){for(var c in a)if(a[c]===b)return c;return l}var tj=1;function uj(a,b,c,d){qj.call(this,a,b);this.l=c;this.m=d}C(uj,qj);s=uj.prototype;s.r=function(){return new uj(this.lc,this.q,this.l,this.m)};
s.Zb=function(a){a=Y(a,this.m);var b=Lh(),b=Y(b,b.fi);return"target."+a+"(reader."+b+"());"};s.$b=function(a){a=Y(a,this.l);var b=rg();return"writer."+Y(b,b.dj)+"(target."+a+"() | 0);"};s.Tm=function(a){var b=Y(a,this.l);return"target."+Y(a,this.m)+"(source."+b+"() | 0);"};s.Zd=function(a){var b=Y(a,this.l);a=Y(a,this.m);return"var _s = source."+b+"();var _t = target."+b+"();target."+a+"((_s + t * (_t - _s)) | 0);"};function vj(a,b,c,d){qj.call(this,a,b);this.l=c;this.m=d}C(vj,qj);
vj.prototype.r=function(){return new vj(this.lc,this.q,this.l,this.m)};vj.prototype.Zb=function(a){a=Y(a,this.m);var b=Lh(),b=Y(b,b.Rn);return"target."+a+"(reader."+b+"());"};vj.prototype.$b=function(a){a=Y(a,this.l);var b=rg();return"writer."+Y(b,b.xo)+"(target."+a+"());"};vj.prototype.Zd=function(a){var b=Y(a,this.l);a=Y(a,this.m);return"var _s = source."+b+"();var _t = target."+b+"();result."+a+"((_s + t * (_t - _s)));"};function wj(a,b,c,d){qj.call(this,a,b);this.l=c;this.m=d}C(wj,qj);
wj.prototype.r=function(){return new wj(this.lc,this.q,this.l,this.m)};wj.prototype.Zb=function(a){a=Y(a,this.m);var b=Lh(),b=Y(b,b.er);return"target."+a+"(reader."+b+"());"};wj.prototype.$b=function(a){a=Y(a,this.l);var b=rg();return"writer."+Y(b,b.$r)+"(target."+a+"());"};
wj.prototype.Zd=function(a){var b=Y(a,this.l),c=Y(a,this.m);a=Y(a,xj);return"var _sv3 = source."+b+"();var _tv3 = target."+b+"();var _rv3 = source."+a+";_rv3[0] = (_tv3[0] - _sv3[0]) * t + _sv3[0];_rv3[1] = (_tv3[1] - _sv3[1]) * t + _sv3[1];_rv3[2] = (_tv3[2] - _sv3[2]) * t + _sv3[2];result."+c+"(_rv3);"};function yj(a,b,c,d,e){qj.call(this,a,b);this.l=c;this.m=d;this.Rq=e}C(yj,qj);yj.prototype.r=function(){return new yj(this.lc,this.q,this.l,this.m,this.Rq)};
yj.prototype.Zb=function(a){a=Y(a,this.m);var b=Lh(),b=Y(b,b.fr);return"target."+a+"(reader."+b+"());"};yj.prototype.$b=function(a){a=Y(a,this.l);var b=rg();return"writer."+Y(b,b.as)+"(target."+a+"());"};yj.prototype.Zd=function(a){var b=Y(a,this.l),c=Y(a,this.m),d=Y(a,zj);a=Y(a,Gi);return"var _rq = source."+d+";source."+a+"(source."+b+"(), target."+b+"(), t, _rq);result."+c+"(_rq);"};function Aj(a,b,c,d){qj.call(this,a,b);this.l=c;this.m=d}C(Aj,qj);
Aj.prototype.r=function(){return new Aj(this.lc,this.q,this.l,this.m)};Aj.prototype.Zb=function(a){a=Y(a,this.m);var b=Lh(),b=Y(b,b.ca);return"target."+a+"(reader."+b+"());"};Aj.prototype.$b=function(a){a=Y(a,this.l);var b=rg();return"writer."+Y(b,b.$a)+"(target."+a+"());"};Aj.prototype.Zd=function(a){var b=Y(a,this.l),c=Y(a,this.m);a=Y(a,pj);return"result."+c+"(source."+a+"(source."+b+"(), target."+b+"(), t));"};function Bj(a,b,c,d){qj.call(this,a,b);this.l=c;this.m=d}C(Bj,qj);
Bj.prototype.r=function(){return new Bj(this.lc,this.q,this.l,this.m)};Bj.prototype.Zb=function(a){a=Y(a,this.m);var b=Lh(),b=Y(b,b.t);return"target."+a+"(reader."+b+"());"};Bj.prototype.$b=function(a){a=Y(a,this.l);var b=rg();return"writer."+Y(b,b.da)+"(target."+a+"());"};function Cj(a,b,c,d){qj.call(this,a,b);this.l=c;this.m=d}C(Cj,qj);Cj.prototype.r=function(){return new Cj(this.lc,this.q,this.l,this.m)};
Cj.prototype.Zb=function(a){a=Y(a,this.m);var b=Lh(),b=Y(b,b.t);return"target."+a+"(reader."+b+"());"};Cj.prototype.$b=function(a){a=Y(a,this.l);var b=rg();return"writer."+Y(b,b.da)+"(target."+a+"());"};function Dj(a,b,c,d){qj.call(this,a,b);this.l=c;this.m=d}C(Dj,qj);Dj.prototype.r=function(){return new Dj(this.lc,this.q,this.l,this.m)};Dj.prototype.Zb=function(a){a=Y(a,this.m);var b=Lh(),b=Y(b,b.z);return"target."+a+"(reader."+b+"());"};
Dj.prototype.$b=function(a){a=Y(a,this.l);var b=rg();return"writer."+Y(b,b.nc)+"(target."+a+"());"};var xj=O(),zj=N();function Ej(a,b){for(var c=0;c<a.length;c++)a[c].Lf=c;a.sort(sj);this.Gn={};this.Sn=Array(a.length);this.Zr=Array(a.length);var d="",e="",f="",h="",j="",k="",n="",p="";this.ro=Array(a.length);for(c=0;c<a.length;c++){var r=a[c].r();this.ro[c]=r;this.Gn[r.lc]=r;r.Lf=c;this.Sn[c]=new Function("target","reader",r.Zb(b));this.Zr[c]=new Function("target","writer",r.$b(b));var d=d+r.Zb(b),e=e+r.$b(b),v=r.Tm(b),f=f+v;r.q&6||(h+=v);r.q&2&&(k+=v);if(r.q&4){var u=r.Zd(b),n=n+u,j=j+v;r.q&2||(p+=u)}}this.dr=new Function("target",
"reader",d);this.Yr=new Function("target","writer",e);this.ks=new Function("source","target",f);this.Wg=new Function("source","target",h);this.Hj=new Function("source","target",j);this.Ij=new Function("source","target",k);this.Cq=new Function("source","target","t","result",n);this.Bq=new Function("source","target","t","result",p)}Ej.prototype.nb=function(){return this.ro.length};function Fj(a,b){return a.Gn[b].Lf}function Gj(a,b,c,d,e){for(a=a.Sn;c;){if(c&1&&a[b])a[b](d,e);c>>=1;b++}};function Z(a,b){this.fa=a;this.time=0;this.Za=b;this.Ye=this.Xe=0}s=Z.prototype;s.reset=function(a){this.fa=a;this.Ye=this.Xe=this.time=0};function Hj(a,b){if(!a.Za){var c=[];a(c);a.Za=new Ej(c,b)}return a.Za}function Ij(a,b){var c=a.Xe||a.Ye;31>=b?a.Xe|=1<<b:a.Ye|=1<<b-32;c||a.fa.rk()}s.se=function(){this.Xe=this.Ye=0};s.read=function(a){this.Za.dr(this,a)};s.cl=function(a){var b=a.z();Gj(this.Za,0,b,this,a);31<this.Za.nb()&&(b=a.z(),Gj(this.Za,32,b,this,a))};
s.write=function(a){this.Za.Yr(this,a)};s.Wg=function(a){this.Za.Wg(this,a)};s.Ij=function(a){this.Za.Ij(this,a)};s.Hj=function(a){this.Za.Hj(this,a)};s.Dh=function(a,b,c){var d=this.Za;this.fa.cd&Th?d.Bq(a,b,c,this):d.Cq(a,b,c,this)};s.lo=xj;s.vl=zj;s.cr=Gi;s.rp=pj;Z.prototype.lo[0]=Z.prototype.lo[1];Z.prototype.cr(Z.prototype.vl,Z.prototype.vl,0,Z.prototype.vl);Z.prototype.rp(0,0,0);function Jj(a,b){var c=b||Hj(Kj,this);Z.call(this,a,c);this.cc=O();this.Zq=Fj(c,Lj);this.te=N();this.jr=Fj(c,Mj);this.oi=O();this.mr=Fj(c,Nj);this.Mg=0;this.ip=Fj(c,Oj);this.Wi=O();this.Qr=Fj(c,Pj)}C(Jj,Z);var Lj=rj++,Mj=rj++,Nj=rj++,Oj=rj++,Pj=rj++;s=Jj.prototype;s.Tp=q("cc");s.setPosition=function(a){We(this.cc,a)||(Qe(this.cc,a),Ij(this,this.Zq),this.fa.Qb=i)};s.Vp=q("te");s.bo=function(a){pe(this.te,a)||(ne(this.te,a),Ij(this,this.jr),this.fa.Qb=i)};s.Wp=q("oi");
s.co=function(a){We(this.oi,a)||(Qe(this.oi,a),Ij(this,this.mr),this.fa.Qb=i)};s.Lp=q("Mg");s.rr=function(a){this.Mg!=a&&(this.Mg=a,Ij(this,this.ip),this.fa.Qb=i)};s.Zp=q("Wi");s.setVelocity=function(a){We(this.Wi,a)||(Qe(this.Wi,a),Ij(this,this.Qr))};
function Kj(a){a.push(new wj(Lj,tj|6,Jj.prototype.Tp,Jj.prototype.setPosition));a.push(new yj(Mj,tj|6,Jj.prototype.Vp,Jj.prototype.bo,i));a.push(new wj(Nj,tj|6,Jj.prototype.Wp,Jj.prototype.co));a.push(new vj(Oj,tj|4,Jj.prototype.Lp,Jj.prototype.rr));a.push(new wj(Pj,tj|2,Jj.prototype.Zp,Jj.prototype.setVelocity))};function Qj(a,b){var c=b||Hj(Rj,this);Jj.call(this,a,c);this.Lk="";this.Kq=Fj(c,Sj);this.Kk=0;this.Jq=Fj(c,Tj);this.tj=0;this.cp=Fj(c,Uj)}C(Qj,Jj);var Sj=rj++,Tj=rj++,Uj=rj++;s=Qj.prototype;s.nf=q("Lk");s.wr=function(a){this.Lk!=a&&(this.Lk=a,Ij(this,this.Kq))};s.Rp=q("Kk");s.vr=function(a){this.Kk!=a&&(this.Kk=a,Ij(this,this.Jq))};s.Kp=q("tj");s.qr=function(a){this.tj!=a&&(this.tj=a,Ij(this,this.cp))};
function Rj(a){Kj(a);a.push(new Bj(Sj,0,Qj.prototype.nf,Qj.prototype.wr));a.push(new Aj(Tj,tj|4,Qj.prototype.Rp,Qj.prototype.vr));a.push(new uj(Uj,0,Qj.prototype.Kp,Qj.prototype.qr))};function Vj(a,b){var c=b||Hj(Wj,this);Qj.call(this,a,c);this.uf=0;this.Ah=g;this.yq=Fj(c,Xj)}C(Vj,Qj);var Xj=rj++;Vj.prototype.Op=q("uf");Vj.prototype.$n=function(a){this.uf!=a&&(this.uf=a,Ij(this,this.yq),this.Ah=g)};function Wj(a){Rj(a);a.push(new Dj(Xj,0,Vj.prototype.Op,Vj.prototype.$n))};function Yj(a,b){var c=b||Hj(Zj,this);Jj.call(this,a,c)}C(Yj,Jj);function Zj(a){Kj(a)};function $j(a,b){var c=b||Hj(ak,this);Z.call(this,a,c)}C($j,Z);function ak(){};function bk(a,b){var c=b||Hj(ck,this);Z.call(this,a,c);this.Ce="";this.Ti=g;this.Or=Fj(c,dk);this.Ge=0;this.rg=g;this.$o=Fj(c,ek);this.Te=0;this.Vg=g;this.wp=Fj(c,fk);this.Ne=0;this.Og=g;this.op=Fj(c,gk);this.yf=0;this.Hh=g;this.Dq=Fj(c,hk)}C(bk,Z);var dk=rj++,ek=rj++,fk=rj++,gk=rj++,hk=rj++;s=bk.prototype;s.Yp=q("Ce");s.zr=function(a){this.Ce!=a&&(this.Ce=a,Ij(this,this.Or),this.Ti=g)};s.Jp=q("Ge");s.pr=function(a){this.Ge!=a&&(this.Ge=a,Ij(this,this.$o),this.rg=g)};s.Np=q("Te");
function lj(a){a.Vg===g&&(a.Vg=a.Te?a.fa.Hb().B[a.Te]||l:l);return a.Vg}s.tr=function(a){this.Te!=a&&(this.Te=a,Ij(this,this.wp),this.Vg=g)};s.Mp=q("Ne");function hj(a){a.Og===g&&(a.Og=a.Ne?a.fa.Hb().B[a.Ne]||l:l);return a.Og}s.sr=function(a){this.Ne!=a&&(this.Ne=a,Ij(this,this.op),this.Og=g)};s.Pp=q("yf");function mj(a){a.Hh===g&&(a.Hh=a.yf?a.fa.Hb().B[a.yf]||l:l);return a.Hh}s.ur=function(a){this.yf!=a&&(this.yf=a,Ij(this,this.Dq),this.Hh=g)};
function ck(a){a.push(new Cj(dk,0,bk.prototype.Yp,bk.prototype.zr));a.push(new Dj(ek,0,bk.prototype.Jp,bk.prototype.pr));a.push(new Dj(fk,0,bk.prototype.Np,bk.prototype.tr));a.push(new Dj(gk,0,bk.prototype.Mp,bk.prototype.sr));a.push(new Dj(hk,0,bk.prototype.Pp,bk.prototype.ur))};function ik(a,b){var c=b||Hj(jk,this);Z.call(this,a,c);this.lg=0;this.aj=g;this.Vr=Fj(c,kk)}C(ik,Z);var kk=rj++;ik.prototype.$p=q("lg");ik.prototype.Ar=function(a){this.lg!=a&&(this.lg=a,Ij(this,this.Vr),this.aj=g)};function jk(a){a.push(new Dj(kk,0,ik.prototype.$p,ik.prototype.Ar))};function lk(a,b,c,d,e){Qh.call(this,a,b,c,d);this.rl=e}C(lk,Qh);lk.prototype.Rg=function(a){a instanceof Hi&&this.rl.Jd(a)};lk.prototype.Pd=function(a){a instanceof Hi&&this.rl.td(a)};function mk(a){this.Ls=a||nk;this.Ns=[]}function nk(){this.bl=new Float32Array(6);this.end=this.start=this.Bs=0;this.fa=this.Ms=l;this.Mn=O();this.Tj=0};function ok(){mk.call(this);this.B=[]}C(ok,mk);ok.prototype.Jd=function(a){this.B.push(a)};ok.prototype.td=function(a){D(this.B,a)};ok.prototype.forEach=function(a,b){for(var c=0;c<this.B.length&&a.call(b||t,this.B[c])!==m;c++);};ok.prototype.sh=function(a,b,c){for(a=0;a<this.B.length&&b.call(c||t,this.B[a],0)!==m;a++);};N();function pk(a,b,c,d){lk.call(this,a,b,c,d,new ok);this.s=l}C(pk,lk);s=pk.prototype;s.nl=ca("s");s.Sa=function(a){pk.a.Sa.call(this,a);a instanceof oj&&this.gc(a.x,a.y,a.u,a.data)};s.update=function(a){J("client var = "+V(this).Hi);Xh(this,2,a+1)};s.A=function(a,b,c){this.rl.sh(b,function(d,e){d.A(a,b,e,c)})};
s.gc=function(a,b,c,d){var e=this.s;if(d&&!e.Ca.ga[d>>8])J("unknown block type",d);else{var f=e.gc(a,b,c,d);if(f!=d&&(d=(d?d:f)>>8))if(d=(e=e.Ca.ga[d])?e.Rh.Yo:l)if(e=qk,e[0]=a,e[1]=b,e[2]=c,a=this.ma.Xf.vh,!a.e.Wa.Xa&&(b=a.Ai.blocks)&&100>Math.sqrt(Ue(a.e.ra.listener.cc,e)))(a=Vd(b,d,Ed))&&a.setPosition(e)}};var qk=O();function rk(a,b){var c=b||Hj(sk,this);Z.call(this,a,c)}C(rk,Z);function sk(){};function tk(a,b){var c=b||Hj(uk,this);rk.call(this,a,c);this.Hi=0;this.Gr=Fj(c,vk)}C(tk,rk);var vk=rj++;tk.prototype.Xp=q("Hi");tk.prototype.yr=function(a){this.Hi!=a&&(this.Hi=a,Ij(this,this.Gr))};function uk(a){a.push(new vj(vk,0,tk.prototype.Xp,tk.prototype.yr))};function wk(a,b,c,d){gj.call(this,a,b,c,d);this.ka=1;this.Lq=i;this.Md=this.Ld=0;this.ab=1E-4;this.fh=this.ec=this.za=0;this.ck=i}C(wk,gj);var xk=1/140*Math.PI,yk=85*Math.PI/180;
wk.prototype.Ob=function(a,b,c){if(!this.$d())return i;var d=b.K;if(!(0>=a.time)){var e;e=b.V;var f=0;87 in e.h&&(f|=32);83 in e.h&&(f|=16);65 in e.h&&(f|=2);68 in e.h&&(f|=1);81 in e.h&&(f|=4);90 in e.h&&(f|=8);32 in e.h&&(f|=128);e=f;var h=b.V,f=b.K;37 in h.h&&(this.ab+=xk);39 in h.h&&(this.ab-=xk);38 in h.h&&(this.za+=xk);40 in h.h&&(this.za-=xk);219 in h.h&&(this.ec+=xk);221 in h.h&&(this.ec-=xk);if(f.U||f.p&1){var j=f.U?0.2:0.25,h=f.tc*j,f=f.uc*j;this.Lq?(this.Ld=(this.Ld+h)/2,this.Md=(this.Md+
f)/2,0.01>Math.abs(this.Ld)&&(this.Ld=0),0.01>Math.abs(this.Md)&&(this.Md=0)):(this.Ld=h,this.Md=f);f=this.Md*this.ka;this.ab-=this.Ld*this.ka*xk;this.za-=f*xk}f=b.V;b=b.K;h=0;69 in f.J?h|=6:69 in f.h?h|=2:69 in f.he&&(h|=8);var j=2,k=4,n=8;f.ctrlKey&&(j=16,k=32,n=64);b.U?(b.Pa&1?(h|=k,h|=j):b.p&1?h|=j:b.sa&1&&(h|=n),b.Pa&4?(h|=32,h|=16):b.p&4?h|=16:b.sa&4&&(h|=64)):(b.sa&1&&(f.ctrlKey?(this.fh=Number.MAX_VALUE,h|=k,h|=j,h|=n):4>this.fh&&(h|=k,h|=j,h|=n)),b.sa&4&&(h|=32,h|=16,h|=64),this.fh=b.p?this.fh+
(Math.abs(b.tc)+Math.abs(b.uc)):0);f=h;this.ck||(this.za=Math.max(-yk,Math.min(yk,this.za)),this.ec=0);b=this.Xg(65);b.setTime(a.time);b.Ki=(1E3*a.Ji|0)/1E3;b.Oi=e;b.Db=f;a=this.za;e=this.ec;b.ab=32767*(180*this.ab/Math.PI%360/360)|0;b.za=32767*(180*a/Math.PI%360/360)|0;b.ec=32767*(180*e/Math.PI%360/360)|0;f&&!d.U&&(a=d.clientX/c.width,c=d.clientY/c.height,b.Db|=1,b.pi=65535*a|0,b.qi=65535*c|0);this.ma.ri(b)}return i};function zk(a,b){var c=b||Hj(Ak,this);Z.call(this,a,c)}C(zk,Z);function Ak(){};function Bk(a,b){var c=b||Hj(Ck,this);zk.call(this,a,c);this.Qf=0;this.Yh=g;this.Xq=Fj(c,Dk)}C(Bk,zk);var Dk=rj++;Bk.prototype.Sp=q("Qf");Bk.prototype.xr=function(a){this.Qf!=a&&(this.Qf=a,Ij(this,this.Xq),this.Yh=g)};function Ck(a){a.push(new Dj(Dk,0,Bk.prototype.Sp,Bk.prototype.xr))};function Ek(a,b){var c=b||Hj(Fk,this);Qj.call(this,a,c)}C(Ek,Qj);function Fk(a){Rj(a)};function Gk(a,b){var c=b||Hj(Hk,this);Ek.call(this,a,c);this.yj=0;this.fp=Fj(c,Ik)}C(Gk,Ek);var Ik=rj++;Gk.prototype.mf=q("yj");Gk.prototype.kl=function(a){this.yj!=a&&(this.yj=a,Ij(this,this.fp))};function Hk(a){Rj(a);a.push(new uj(Ik,0,Gk.prototype.mf,Gk.prototype.kl))};function Jk(a,b,c,d){Ki.call(this,a,b,c,d)}C(Jk,fj);function Kk(a,b){var c=b||Hj(Lk,this);Ek.call(this,a,c)}C(Kk,Ek);function Lk(a){Rj(a)};function Mk(a,b,c){this.Pc=a;this.Ap=b;this.Dr=c;this.yd=[]}Mk.prototype.Jj=function(a,b,c){return new this.Ap(a,this,b,c)};function Rh(a,b){if(a.yd.length){var c=a.yd.pop();c.reset(b);return c}return new a.Dr(b)};function Nk(a,b){A(b)?Ok(a,g,b):Pa(b,sa(Ok,a))}function Ok(a,b,c){var d;a:if(d=String(c).replace(/\-([a-z])/g,function(a,b){return b.toUpperCase()}),a.style[d]===g){var e=wb?"Webkit":vb?"Moz":E?"ms":ub?"O":l,f=A(g)?"undefined".replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"):"\\s";c=c.replace(RegExp("(^"+(f?"|["+f+"]+":"")+")([a-z])","g"),function(a,b,c){return b+c.toUpperCase()});e+=c;if(a.style[e]!==g){d=e;break a}}d&&(a.style[d]=b)}
function Pk(a){var b=a.offsetWidth,c=a.offsetHeight,d=wb&&!b&&!c;return(!w(b)||d)&&a.getBoundingClientRect?(b=a.getBoundingClientRect(),E&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop),new Id(b.right-b.left,b.bottom-b.top)):new Id(b,c)}var Qk=vb?"MozUserSelect":wb?"WebkitUserSelect":l;
function Rk(a){var b=a.getElementsByTagName("*");if(Qk){var c="none";a.style[Qk]=c;if(b){a=0;for(var d;d=b[a];a++)d.style[Qk]=c}}else if(E||ub)if(c="on",a.setAttribute("unselectable",c),b)for(a=0;d=b[a];a++)d.setAttribute("unselectable",c)};function Sk(a,b){F.call(this);this.Oe=b;this.C=a.C;this.ba=a.ba;this.M=a.M;this.ul=new Qf(this.M.g,this.M.Ei);G(this,this.ul);this.ul.restore();this.hasFocus=m;this.Ra=[];var c=a.d,d=c.createElement("DIV");Nk(d,{position:"absolute",left:"10px",bottom:"10px",width:"50%",display:"none"});c=c.createElement("INPUT");c.type="text";Nk(c,{"font-family":"monospace-8bit","font-size":"1em",border:"1px solid black","background-color":"#EEE",color:"#000",width:"100%",padding:"3px"});d.appendChild(c);a.F.Ia.parentNode.appendChild(d);
this.jn=d;this.Ii=c;this.T=new Lc(this);G(this,this.T);this.T.listen(c,"keydown",this.kk)}C(Sk,F);s=Sk.prototype;s.kk=function(a){switch(a.keyCode){case 27:Tk(this);a.preventDefault();a.stopPropagation();break;case 13:var b=wa(va(xa(this.Ii.value)));b.length&&this.Oe.postMessage("main",b);Tk(this);a.preventDefault();a.stopPropagation()}};function Tk(a){a.Ii.value="";a.Ii.blur();Nk(a.jn,{display:"none"});a.C.ia(i);a.C.Ha.focus()}
s.Ob=function(a,b){return 84 in b.V.J?(Nk(this.jn,{display:""}),this.C.ia(m),t.setTimeout(B(function(){this.Ii.focus()},this),10),this.C.V&&this.C.V.reset(),i):m};s.update=function(){var a=this.Oe.Nb();if(a)for(var b=0;b<a.length;b++){var c=a[b];switch(c.type){case 2:this.log(c.userName+": "+c.value)}}};
s.A=function(a,b,c){var d=this.M.font;if(!(2>=arguments.length)||this.Ra.length){var e=this.ul;e.clear();for(var f=hc(),h=0;h<this.Ra.length;h++){var j=this.Ra[h];0==j.timestamp?j.timestamp=f:15E3<f-j.timestamp&&(this.Ra.splice(h,1),h--)}f=0;for(h=2;h<arguments.length;h++)arguments[h]&&(j=Ae(d,e,arguments[h],4294967295,f),f+=j[1]+2);for(var k=this.Ra.length,h=0;h<k;h++)j=this.Ra[h],j=Ae(d,e,j.value,j.color,f),f+=j[1]+2;h=Uk;Ze(h,2,2,1,0,10,40,0,1);this.M.Bg(d.sj,m);h[12]+=2;h[13]+=2;e.sc(b.Mf,h,Vk);
h[12]-=2;h[13]-=2;e.sc(b.Mf,h)}};s.log=function(a){var b=new Date,c=String(b.getHours());2>c.length&&(c="0"+c);var d=String(b.getMinutes());2>d.length&&(d="0"+d);b=String(b.getSeconds());2>b.length&&(b="0"+b);c="["+[c,d,b].join(":")+"] ";for(d=0;d<arguments.length;d++)c+=arguments[d],d<arguments.length-1&&(c+=" ");this.add(c);J(c)};s.add=function(a,b){this.Ra.push(new Wk(a,b||4294967295))};var Uk=Xe(),Vk=le(0.5,0.5,0.5,1);function Wk(a,b){this.timestamp=0;this.value=a;this.color=b};function Xk(a,b){F.call(this);this.N=l;this.xq=a;this.q=b;this.Fp=this.bb=i}C(Xk,F);s=Xk.prototype;s.b=function(){this.Yb();Xk.a.b.call(this)};s.ln=q("bb");s.setActive=ca("bb");s.close=function(){Yk(this.N)};s.ua=y;s.Yb=y;s.update=y;s.A=y;var Zk={},$k={},al={};function bl(a,b,c){c=c||Fd||(Fd=new Od);a=a(b||cl,g,g);a=ma(a)?m&&(a.Ug===Zk||a.Ug===$k)?a.content:"zSoyz":String(a);b=c.R;c=b.createElement("div");E?(c.innerHTML="<br>"+a,c.removeChild(c.firstChild)):c.innerHTML=a;if(1==c.childNodes.length)c=c.removeChild(c.firstChild);else{for(a=b.createDocumentFragment();c.firstChild;)a.appendChild(c.firstChild);c=a}return c}var cl={};function dl(a,b,c,d,e){Xk.call(this,a,8);this.d=b;this.parentElement=c;this.S=new Lc(this);G(this,this.S);this.ok=this.d.createElement("DIV");this.ok.className="a";this.root=bl(d,e,this.d);this.Wb=new tf(this.close,this)}C(dl,Xk);
dl.prototype.ua=function(){dl.a.ua.call(this);this.d.appendChild(this.parentElement,this.ok);this.d.appendChild(this.parentElement,this.root);var a=Jd("v",this.root||this.d.R);Ia(a,function(a){var c=a.getAttribute("data-id"),d;d=a.className;d=A(d)&&d.match(/\S+/g)||[];0<=Ha(d,"x")&&a.focus();this.S.listen(a,"click",function(){this.am(c);this.close();this.Wb.D(c)})},this)};dl.prototype.Yb=function(){Oc(this.S);this.d.removeNode(this.root);this.d.removeNode(this.ok);this.root=l;dl.a.Yb.call(this)};
dl.prototype.am=y;E&&Jb(8);function $(a,b){a!=l&&this.append.apply(this,arguments)}s=$.prototype;s.Oa="";s.set=function(a){this.Oa=""+a};s.append=function(a,b,c){this.Oa+=a;if(b!=l)for(var d=1;d<arguments.length;d++)this.Oa+=arguments[d];return this};s.clear=function(){this.Oa=""};s.toString=q("Oa");function el(a,b){function c(){}c.prototype=a;var d=new c,e;for(e in b)d[e]=b[e];return d}function fl(a){return a&&a.Ug&&a.Ug===Zk?a.content:String(a).replace(gl,hl)}function il(a){return a&&a.Ug===al?"zSoyz":String(a)}var jl={"\x00":"&#0;",'"':"&quot;","&":"&amp;","'":"&#39;","<":"&lt;",">":"&gt;","\t":"&#9;","\n":"&#10;","\x0B":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;","-":"&#45;","/":"&#47;","=":"&#61;","`":"&#96;","\u0085":"&#133;","\u00a0":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};
function hl(a){return jl[a]}var gl=/[\x00\x22\x26\x27\x3c\x3e]/g;function kl(a,b){var c=b||new $,d=new $;(d||new $).append('<div class="',"r",'">',fl(a.be),"</div>");(d||new $).append('<div class="',"t",'">',il(a.body),"</div>");(d||new $).append('<div class="',"u",'">',a.p?il(a.p):"","</div>");d=el(a,{vp:d.toString()});(c||new $).append('<div class="',"p",'"><div class="',"q",'">',il(d.vp),"</div></div>")}function ll(a,b){(b||new $).append('<div class="',"v",a.zc?" x":"",'" data-id="',fl(a.id),'"><a class="',"w",'">',fl(a.label),"</a></div>")}
function ml(a,b){var c=b||new $;ll(el(a,{id:"close",label:"Close"}),c)}function nl(a){a=a||new $;ll(el({zc:i},{id:"reload",label:"Reload"}),a)};function ol(a,b){var c=b||new $,d="Error in "+fl(a.location),e=new $;nl(e);ml({zc:m},e);kl(el(a,{be:d,body:fl(a.message)+"<br/>"+fl(a.bp),p:e.toString()}),c);return b?"":c.toString()}function pl(a,b){var c=b||new $,d="Trying to connect to "+fl(a.or);kl(el(a,{be:"Connecting...",body:d}),c);return b?"":c.toString()}
function ql(a,b){var c=b||new $,d=new $;switch(a.reason){case 2:d.append("Version mismatch - reload and try again.");break;case 3:d.append("Invalid/broken packet.");break;case 4:d.append("Access denied.");break;case 6:d.append("Banned by an administrator! Go away!");break;case 7:d.append("Server is full. Try again later.");break;default:d.append("Unable to contact the server or a timeout occurred while connecting. Check your network settings and try again, or contact the server admin.")}var e=new $;
nl(e);ml({zc:m},e);kl(el(a,{be:"Connection Failed",body:d.toString(),p:e.toString()}),c);return b?"":c.toString()}
function rl(a,b){var c=b||new $,d=new $;switch(a.reason){case 1:d.append("Timeout while communicating with the server. Check your connection and try again.");break;case 2:d.append("Version mismatch - reload and try again.");break;case 3:d.append("Invalid/broken packet.");break;case 4:d.append("Access denied.");break;case 5:d.append("Kicked by an administrator!");break;case 6:d.append("Banned by an administrator!");break;case 7:d.append("Server is full. Try again later.");break;default:d.append("Whoops.")}var e=
new $;switch(a.reason){case 4:case 5:case 6:ml({zc:i},e);break;default:nl(e),ml({zc:m},e)}kl(el(a,{be:"Connection Lost",body:d.toString(),p:e.toString()}),c);return b?"":c.toString()};function sl(a,b,c,d){dl.call(this,"",a,b,c,d)}C(sl,dl);function tl(a,b,c,d,e){b=new sl(a.d,b,ol,{location:c,message:d,bp:e});ul(a,b);return b.Wb};function vl(a){this.C=a;this.K=this.V=l}vl.prototype.Nb=function(){this.V=this.C.V?this.C.V.Nb():l;this.K=this.C.K?this.C.K.Nb():l};vl.prototype.reset=function(){this.C.Va();this.K=this.V=l};function wl(a,b,c,d,e,f){this.hs=a;this.type=b;this.Ps=c;this.userName=d;this.timestamp=e;this.value=f||l};function xl(a){F.call(this);this.Da=a;this.Ma=[];this.Yj=[]}C(xl,F);xl.prototype.He=function(a){if(0<=Ha(this.Ma,a))return l;this.Ma.push(a);a=new wl(this,0,a.j,a.info.Q,ta());this.Yj.push(a);return a};xl.prototype.hi=function(a){return D(this.Ma,a)?(a=new wl(this,1,a.j,a.info.Q,ta()),this.Yj.push(a),a):l};xl.prototype.postMessage=function(a,b){if(!(0<=Ha(this.Ma,a)))return l;var c=new wl(this,2,a.j,a.info.Q,ta(),b);this.Yj.push(c);return c};function yl(a){F.call(this);this.Z=a;this.Yc={};this.le=[];this.wi(a.Ja)}C(yl,F);s=yl.prototype;s.b=function(){Pa(this.Yc,H);this.Yc={};yl.a.b.call(this)};s.wi=y;function zl(a,b,c){var d=a.Yc[b];!d&&c&&(d=new xl(b),a.Yc[b]=d);return d}s.Nb=function(){if(this.le.length){var a=this.le;this.le=[];return a}return l};s.Gj=y;s.Pj=y;s.Kl=y;s.Ll=function(a){Pa(this.Yc,function(b){b.hi(a)})};s.Ml=y;function Al(){this.jh="";this.name="Server";this.location="us";this.fk="unknown";this.gk="0";this.Hk=32;this.ci={}}Al.prototype.r=function(){var a=new Al;a.jh=this.jh;a.name=this.name;a.location=this.location;a.fk=this.fk;a.gk=this.gk;a.Hk=this.Hk;a.ci=Ua(this.ci);return a};Al.prototype.toString=da("[server]");function Bl(){this.xa=this.mc=0}var Cl=new Bl;function Dl(a,b){var c=b||new zi;c.xg=a.t();c.wg=a.t();c.Q=a.t();return c}function El(a,b){a.da(b.xg);a.da(b.wg);a.da(b.Q);return i}function Fl(a,b){var c=b||new Bi;c.j=a.t();c.mc=Ih(a);c.q=a.ca();var d;if(!(d=!Dl(a,c.info)))d=c.tg||new vi,d.type=a.t(),d.platform=a.t(),d.oe=a.t(),d.Rd=a.t(),d=!d;return d?l:c}var Gl=new function(){this.xa=this.Pe=this.$f=0};
function Hl(a,b,c){var d=rg();Gl.$f=a;Gl.Pe=b;Gl.xa=c;og(d,1);d.$a(Gl.$f);d.$a(Gl.Pe);d.$a(Gl.xa);return d.finish()}var Il=new function(){this.Pe=this.$f=0;this.ig=[]},Jl=new function(){this.info=new Al;this.Ma=[]};function Kl(){this.pj=this.tl=0;this.yb=new Bi}var Ll=new Kl,Ml=new Kl;
function Nl(a,b){var c=rg();Ml.tl=3;Ml.pj=a;Ml.yb=b;og(c,4);pg(c,Ml.tl);pg(c,Ml.pj);var d=Ml.yb;c.da(d.j);og(c,d.mc);c.$a(d.q);var e;if(!(e=!El(c,d.info)))d=d.tg,c.da(d.type),c.da(d.platform),c.da(d.oe),c.da(d.Rd),e=m;return e?(c.offset=0,l):c.finish()}function Ol(){this.reason=0}var Pl=new Ol,Ql=new Ol;function Rl(){var a=rg();Ql.reason=0;og(a,5);a.$a(Ql.reason);return a.finish()}var Sl=new function(){this.yb=new Bi},Tl=new function(){this.j="";this.reason=0};
function Ul(){this.j="";this.info=new zi}var Vl=new Ul,Wl=new Ul;function Xl(a,b){var c=rg();Wl.j=a;Wl.info=b;og(c,8);c.da(Wl.j);return!El(c,Wl.info)?(c.offset=0,l):c.finish()}function Yl(){this.Da=this.j="";this.timestamp=0;this.Sc=[]}var Zl=new Yl,$l=new Yl;function am(a,b){var c=ta(),d=rg();$l.j=a;$l.Da=b;$l.timestamp=c;$l.Sc=[];og(d,20);d.da($l.j);d.da($l.Da);d.$a($l.timestamp);d.$a($l.Sc.length);for(c=0;c<$l.Sc.length;c++)d.da($l.Sc[c]);return d.finish()}
var bm=new function(){this.Da=this.j="";this.timestamp=0};function cm(){this.Da=this.j="";this.timestamp=0;this.message=""}var dm=new cm,em=new cm;function fm(a,b,c,d){var e=rg();em.j=a;em.Da=b;em.timestamp=c;em.message=d;og(e,22);e.da(em.j);e.da(em.Da);e.$a(em.timestamp);e.da(em.message);return e.finish()};function gm(a){yl.call(this,a);this.qc=a}C(gm,yl);s=gm.prototype;s.join=function(a){this.qc.send(am(this.qc.id,a))};s.postMessage=function(a,b){this.qc.send(fm(this.qc.id,a,ta(),b))};s.wi=function(a){a.X(20,this.bq,this);a.X(21,this.cq,this);a.X(22,this.dq,this)};
s.bq=function(a,b,c){Zl.j=c.t();Zl.Da=c.t();Zl.timestamp=c.ca();a=c.ca();Zl.Sc.length=a;for(b=0;b<a;b++)Zl.Sc[b]=c.t();if(!Zl)return m;c=this.qc.zb[Zl.j]||l;if(!c)return i;a=zl(this,Zl.Da,i);if(!a)return i;for(b=0;b<Zl.Sc.length;b++){var d=this.qc.zb[Zl.Sc[b]]||l;d&&a.He(d)}(c=a.He(c))&&this.le.push(c);return i};s.cq=function(a,b,c){bm.j=c.t();bm.Da=c.t();bm.timestamp=c.ca();if(!bm)return m;a=this.qc.zb[bm.j]||l;if(!a)return i;b=zl(this,bm.Da,m);if(!b)return i;(a=b.hi(a))&&this.le.push(a);return i};
s.dq=function(a,b,c){dm.j=c.t();dm.Da=c.t();dm.timestamp=c.ca();dm.message=c.t();if(!dm)return m;a=this.qc.zb[dm.j]||l;if(!a)return i;b=zl(this,dm.Da,m);if(!b)return i;(a=b.postMessage(a,dm.message))&&this.le.push(a);return i};function hm(a,b){F.call(this);a.W=b.W;this.e=a;this.Z=b;this.Z.Aa.push(this);this.wi(b.Ja);this.Oe=new gm(this.Z);this.Z.Aa.push(this.Oe);this.s=new Eh;G(this,this.s);this.ic=new W(a,this.Z);G(this,this.ic);var c=this.ic,d=new gi(64,Ui,0);c.Ub[d.Pc]=d;d=new gi(65,$i,2);c.Ub[d.Pc]=d;d=new gi(66,oj,0);c.Ub[d.Pc]=d;d=new gi(67,Xi,Yi);c.Ub[d.Pc]=d;c=this.ic;ii(c,new Mk(64,nj,ik));ii(c,new Mk(65,pk,tk));ii(c,new Mk(66,Vi,Yj));ii(c,new Mk(67,kj,bk));ii(c,new Mk(68,wk,Bk));ii(c,new Mk(69,Li,Vj));ii(c,new Mk(70,
Zi,$j));ii(c,new Mk(71,Jk,Kk));ii(c,new Mk(72,jj,Gk));this.ic.kg.push(this);this.xf=new vl(this.e.C);this.Zf=new Ni;this.vo=[];this.gb=new Sk(this.e,this.Oe);G(this,this.gb);this.Ai={};this.Jc=l;this.Yk=[];this.ke=l;this.wn=new hh(this.e.cb,this.e.ba);G(this,this.wn);this.Z.Ka.hc=this.e.Ef.hc;this.gb.log("wsad to move");this.gb.log("left click to place blocks, right click to remove");this.Z.fe()||this.gb.log("t to chat")}C(hm,F);s=hm.prototype;
s.b=function(){var a=this.e.ra,b;for(b in this.Ai){var c=this.Ai[b];D(a.yg,c);H(c)}hm.a.b.call(this)};s.Hb=q("ic");s.sf=y;s.load=function(){var a=new tf;this.Ph("blocks",new Sg(this.e.cb,this.e.ra.context));a.D(l);return a};s.handleError=function(a,b){J("Error: "+a,b);this.gb.log("Error: "+a,b);this.Z.disconnect();im(this.e);jm(this.e);var c=tl(this.e.N,this.e.F.Ia,"game",a,b);L(c,function(a){"reload"==a?window.location.reload(m):window.location.href="http://google.com"},l,g)};
s.el=function(){var a=this.e.Wa,b=ri(this.Z).info.r();b.Q=a.userName;a=this.Z;a.send(Xl(a.id,b))};hm.Ro=2;s=hm.prototype;s.update=function(a){if(2!=this.Z.state)if(this.Z.Nb(hm.Ro),2==this.Z.state){var b=this.Z.Sd;this.gb.log("Disconnected: "+si(b));im(this.e);jm(this.e);a=this.e.N;b=new sl(a.d,this.e.F.Ia,rl,{reason:b});ul(a,b);L(b.Wb,function(a){"reload"==a?window.location.reload(m):window.location.href="http://google.com"},l,g)}else this.s.update(a),this.ic.update(a),this.gb.update(a)};
s.A=function(a){if(2!=this.Z.state){Oi(this.Zf,this.e.F.Bc());Ji(this.Zf);this.xf.Nb();this.gb.Ob(a,this.xf)||this.Ob(a,this.xf);var b=a.time;a.time-=0.5;this.ic.pk(a.time);this.ii(a);a.time=b;this.xf.reset()}};s.ii=function(a){var b=this.e.ba;b.wj()&&(this.Ag(a),this.hh(a),this.Ze(a,this.xf),b.end())};s.Ob=da(m);s.Ag=ba();s.hh=ba();s.Ze=function(a){var b="Sim: "+this.ic.n.xh();this.ic.n.update(a.time);var c=this.s.jk(),d=this.xh();this.gb.A(a,this.Zf,b,c,d)};s.xh=da(l);
s.Ph=function(a,b){this.Ai[a]=b;this.e.ra.Ph(b)};s.ha=function(){this.e.ha()};s.bf=function(a){if(a instanceof nj)this.Jc=a,this.Jc.vh=this;else if(a instanceof kj){var b=a.Ib();b.data=a;this.Yk.push(a);b==ri(this.Z)&&(this.ke=a,this.Jc.ke=a);this.sf()}};s.mh=function(a){a instanceof kj&&(D(this.Yk,a),this.sf())};s.wi=function(a){a.X(73,this.Ym,this);a.X(74,this.an,this)};s.Kl=function(a){var b=this.e;b.Wa.Xa||Vd(b.zg,"player_join",Dd);this.gb.log(a.info.Q+" ("+a.j+") connected on "+a.tg.toString())};
s.Ll=function(a){im(this.e);this.gb.log(a.info.Q+" ("+a.j+") disconnected:",si(a.Sd))};s.Ml=function(){this.sf()};s.Ym=function(a,b,c){tg.x=Hh(c);tg.y=Hh(c);tg.u=Hh(c);if(!tg)return m;b=this.s;a=Mh.Um();b=b.Ga(tg.x,tg.y,tg.u);return!a.Hm(b,c)?m:i};s.an=function(){return!vg?m:i};s.Gj=y;s.Pj=y;hm=mf(hm,"blk.game.client.ClientController",{update:"update",A:"render",ii:"renderFrame_",Ze:"drawOverlays",bf:"entityAdded",mh:"entityRemoved",Ym:"handleChunkData_",an:"handleReadyPlayer_"});function km(a,b,c){F.call(this);this.e=a;this.d=a.d;a=a.F.Ia;Hd?a=a.parentElement:(a=a.parentNode,a=ma(a)&&1==a.nodeType?a:l);this.parentElement=a;this.S=new Lc(this);G(this,this.S);this.root=bl(b,c,this.d)}C(km,F);km.prototype.b=function(){this.Yb();km.a.b.call(this)};km.prototype.ua=function(){this.d.appendChild(this.parentElement,this.root)};km.prototype.Yb=function(){Oc(this.S);this.d.removeNode(this.root)};km.prototype.ag=function(a){this.root.style.display=a?"":"none"};function lm(a,b){var c=b||new $;c.append('<div class="',"i",'">');mm({id:"fullscreen",label:"Fullscreen"},c);mm({id:"settings",label:"Settings"},c);mm({id:"help",label:"Help"},c);c.append("</div>");return b?"":c.toString()}function mm(a,b){(b||new $).append('<div class="',"j",'" data-id="',fl(a.id),'"><a class="',"blkMenubarButtonLabel",'">',fl(a.label),"</a></div>")};function nm(a){km.call(this,a,lm,{});Rk(this.root)}C(nm,km);nm.prototype.ua=function(){nm.a.ua.call(this);var a=Jd("j",this.root||this.d.R);Ia(a,function(a){var c=a.getAttribute("data-id");this.S.listen(a,"click",function(){switch(c){case "fullscreen":this.e.mo();break;case "settings":this.e.ha();om(this.e);break;case "help":this.e.ha(),pm(this.e)}})},this)};function qm(a,b){var c=b||new $;c.append('<div class="',"k",'"><div class="',"blkPlayerListingHeader",'"></div><div class="',"blkPlayerListingBody",'"></div><div class="',"blkPlayerListingFooter",'"></div></div>');return b?"":c.toString()}
function rm(a,b){var c=b||new $;c.append('<div class="',"l",'"><div class="',"m"," ",30>a.xa?"h":60>a.xa?"g":100>a.xa?"f":150>a.xa?"e":"d",'"></div><div class="',"n",'">',fl(a.Q),' <span class="',"o",'"> (',fl(a.j),")</span></div></div>");return b?"":c.toString()};function sm(a){km.call(this,a.e,qm,{});Rk(this.root);this.Zc=a;this.km=Pd(this.d,"blkPlayerListingBody",this.root);this.Dc=t.setInterval(B(function(){this.refresh()},this),sm.Vo);this.refresh()}C(sm,km);sm.Vo=3E3;sm.prototype.b=function(){t.clearInterval(this.Dc);sm.a.b.call(this)};
sm.prototype.refresh=function(){Md(this.km);for(var a=this.Zc.Yk,b=0;b<a.length;b++)a[b]={index:b,value:a[b]};var c=function(a,b){var c=a.Ib().info.Q,d=b.Ib().info.Q,c=String(c).toLowerCase(),d=String(d).toLowerCase();return c<d?-1:c==d?0:1}||Oa;Na(a,function(a,b){return c(a.value,b.value)||a.index-b.index});for(b=0;b<a.length;b++)a[b]=a[b].value;for(b=0;b<a.length;b++){var d=a[b].Ib(),d=bl(rm,{j:d.j,Q:d.info.Q,xa:d.n.$l},this.d);this.km.appendChild(d)}};sm=mf(sm,"blk.ui.PlayerListing",{refresh:"refresh"});function tm(a,b){hm.call(this,a,b);this.Ci=new Qf(this.e.M.g,this.e.M.Ei);G(this,this.Ci);this.Ci.restore();var c=this.Zh=new sm(this);this.vo.push(c);G(this,c);c.ua();this.Z.fe()&&this.Zh.ag(m);c=this.Iq=new nm(this.e);this.vo.push(c);G(this,c);c.ua();this.yn=new zg(this.e.cb,this.e.ra.context);G(this,this.yn);this.e.Sh.vi(this.yn);this.bj=l;this.Xk=new Ni;this.Ee=l}C(tm,hm);s=tm.prototype;
s.bf=function(a){tm.a.bf.call(this,a);a instanceof pk?(this.bj=a,this.bj.nl(this.s)):a instanceof Vi&&a.Rk==ri(this.Z)&&(a.nl(this.s),this.Ee=new Qg(this.e.M,this.s,a.Cb),G(this,this.Ee))};s.mh=function(a){tm.a.mh.call(this,a)};s.sf=function(){tm.a.sf.call(this);this.Zh.refresh()};s.update=function(a){tm.a.update.call(this,a);this.e.ra.listener.update(this.Xk.tk)};
s.Ob=function(a,b){if(tm.a.Ob.call(this,a,b))return i;var c=b.V;if(79 in c.J)return this.e.ha(),om(this.e),i;if(191 in c.J)return this.e.ha(),pm(this.e),i;if(9 in c.J)return this.e.ha(),c=this.Zh,c.root.style.display="none"==c.root.style.display?"":"none",i;77 in c.J&&(this.e.ha(),c=this.e.Sh,c.uk?c.stop():c.Ln());var c=this.Xk,d=this.ke;if(d){var e=hj(V(d)),f=c.width/c.height;if(f!=e.Rb){e.Rb=f;var h=e.Xg(64);h.ug=f;e.ma.ri(h)}mj(V(d)).Ob(a,b);if(!lj(V(d)).Ob(a,b,c))return this.handleError("Input backup"),
i}return m};s.Ag=function(a){tm.a.Ag.call(this,a);this.e.M.reset(this.s.dd.fo,i)};s.hh=function(a){tm.a.hh.call(this,a);var b=this.e.M.Tn,c=this.Xk,d=this.e.F,e=this.ke;e?(e=hj(V(e)),Pi(c,16*e.Cb.aa+16),Oi(c,d.Bc()),e.Me(c)):(Pi(c,100),Oi(c,d.Bc()));this.Ee&&this.Ee.A(a,c);this.bj&&this.bj.A(a,c,b);b.flush(c)};s.Ze=function(a,b){tm.a.Ze.call(this,a,b);this.Lm(a,b);this.Im(a)};s.xh=function(){return this.Ee?this.Ee.jk():l};
s.Lm=function(a,b){var c=this.e.M,d=this.Zf,e=c.Cl,f=this.Ci;f.clear();var h=tm.gg;if(b.K.U){var j=d.width/2/2-8,k=d.height/2/2-8;te(e,11,h);f.add(h[0],h[1],h[2]-h[0],h[3]-h[1],4294967295,j,k,16,16)}h=tm.Li;Ze(h,2,2,1,0,0,0,0,1);c.Bg(e,m);f.sc(d.Mf,h)};
s.Im=function(){var a=this.ke;if(a){var b=mj(V(a)),c=Mi(b.$d()),a=this.e.M,d=this.Zf,e=a.Na,f=this.Ci;f.clear();for(var h=0,j=17*b.O.length,k=tm.gg,n=function(a){var b=a.mf();te(e,b.Yl,k);f.add(k[0],k[1],k[2]-k[0],k[3]-k[1],a==c?4294967295:4286019447,h,0,16,16);h+=17},p=0;p<b.O.length;p++)n.call(t,b.O[p]);b=tm.Li;Ze(b,2,2,1,0,d.width/2-j,d.height-32-2,0,1);a.Bg(e,m);f.sc(d.Mf,b)}};tm.Li=Xe();tm.gg=N();
tm=mf(tm,"blk.game.fps.FpsClientController",{bf:"entityAdded",update:"update",Ob:"processInput",Ag:"beginDrawing",hh:"drawWorld",Ze:"drawOverlays",Lm:"drawInputUI_",Im:"drawBlockTypes_"});function um(a,b){Xk.call(this,"game-url",14);var c=tm;this.mb=a;this.F=a.F;this.Zc=new c(a,b);G(this,this.Zc)}C(um,Xk);s=um.prototype;s.ua=function(){um.a.ua.call(this);L(this.Zc.load(),function(){this.F.ag(i);vm(this.mb)},ba(),this)};s.Yb=function(){this.F.ag(m);jm(this.mb);um.a.Yb.call(this)};s.el=function(){this.Zc.el()};s.update=function(a){um.a.update.call(this,a);this.Zc.update(a)};s.A=function(a){um.a.A.call(this,a);this.Zc.A(a)};function wm(a,b){var c=b||new $,d=new $;ml({zc:i},d);kl(el(a,{be:"Help",body:'Conceptualized and coded by <a href="http://twitter.com/benvanik" target="_blank">@benvanik</a> as a 20% project at Google.<br/>Copyright Google, Inc 2012.<br/><br/><a href="index.html" target="_blank">More information</a>, <a href="https://www.github.com/benvanik/blk-game" target="_blank">source code</a>.<br/><br/><span class="C">Controls:</span><table class="D"><tr><td>Movement</td><td>WSAD</td></tr><tr><td>Place block</td><td>Left click</td></tr><tr><td>Remove block</td><td>Right-click, ctrl-click</td></tr><tr><td>Change block type</td><td>Number keys, mouse wheel</td></tr><tr><td>Chat</td><td>T</td></tr><tr><td>Start/stop music</td><td>M</td></tr><tr><td>Show player list</td><td>TAB</td></tr><tr><td>Toggle fullscreen</td><td>Alt-enter</td></tr><tr><td>Settings</td><td>O</td></tr><tr><td>Help</td><td>?</td></tr></table><br/>Use Chrome (or go fullscrene in Firefox) to get awesome FPS control goodness!',
p:d.toString()}),c);return b?"":c.toString()};function xm(a,b){dl.call(this,"help",a,b,wm,{})}C(xm,dl);function ym(a,b){var c=b||new $;c.append('<div class="',"E",'"><div class="',"F",'"><div class="',"G",'">BLK, by <a href="http://twitter.com/benvanik" target="_blank">@benvanik</a></div><div class="',"H",'">TODO: some awesome logo or something<br/>',"Welcome to my 20% project hacky game tech demo thingie!",'<br/><a href="." target="_blank">',"More Information",'</a><br/><table class="',"I",'"><tr><td class="',"blkMainMenuSinglePlayerButton",'">',"Single-player",'</td><td class="',"blkMainMenuMultiPlayerButton",
'">',"Multi-player",'</td></tr></table></div><table class="',"J",'"><tr><td class="',"blkMainMenuSettingsButton",'">',"Settings",'</td><td class="',"blkMainMenuHelpButton",'">',"Help","</td></tr></table></div></div>");return b?"":c.toString()};function zm(a,b){Xk.call(this,"",8);this.mb=a;this.jb=a.d;this.Vq=b;this.T=new Lc(this);G(this,this.T);this.Jc=bl(ym,{},this.jb);this.ae=this.jb.createElement("A");this.ae.className="c";var c=this.ae;if("textContent"in c)c.textContent="View on GitHub";else if(c.firstChild&&3==c.firstChild.nodeType){for(;c.lastChild!=c.firstChild;)c.removeChild(c.lastChild);c.firstChild.data="View on GitHub"}else Md(c),c.appendChild(Nd(c).createTextNode("View on GitHub"));this.ae.href="http://github.com/benvanik/blk-game";
this.ae.target="_blank"}C(zm,Xk);function Am(a,b,c){b=Pd(a.jb,b,a.Jc);a.T.listen(b,"click",c,m,a)}
zm.prototype.ua=function(){zm.a.ua.call(this);this.jb.R.body.appendChild(this.ae);this.jb.appendChild(this.Vq,this.Jc);Am(this,"blkMainMenuSinglePlayerButton",function(){this.mb.ha();this.mb.Tg("local://blk-0")});Am(this,"blkMainMenuMultiPlayerButton",function(){this.mb.ha();this.mb.Tg("ws://localhost:1337")});Am(this,"blkMainMenuSettingsButton",function(){this.mb.ha();om(this.mb)});Am(this,"blkMainMenuHelpButton",function(){this.mb.ha();pm(this.mb)})};
zm.prototype.Yb=function(){this.jb.removeNode(this.ae);Oc(this.T);this.jb.removeNode(this.Jc);this.Jc=l;zm.a.Yb.call(this)};function Bm(a,b){var c=b||new $,d=new $,e=d||new $;ll(el({zc:i},{id:"save",label:"Save"}),e);ml({zc:m},d);kl(el(a,{be:"Settings",body:'<div class="K"><div class="blkSettingsLabel">Name:</div><div class="L"><input class="N blkSettingsNameValue" type="text"/></div></div><div class="K blkSettingsSensitivitySlider"><div class="blkSettingsLabel">Mouse:</div><div class="L"><div class="R T"><input type="checkbox" class="S"/>Mouse Lock</div><span class="M">Sensitivity: </span><input class="O" type="range" min="1" max="100" /><div class="P"></div> <div class="Q">reset</div></div></div>\x3c!--<div class="K blkSettingsDistanceSlider"><div class="blkSettingsLabel">View Distance:</div><div class="L"><input class="O" type="range" min="1" max="100" /><div class="P"></div> <div class="Q">reset</div></div></div>--\x3e<div class="K blkSettingsAudio"><div class="blkSettingsLabel">Audio:</div><div class="L"><div class="R blkSettingsSoundFx"><input type="checkbox" class="S"/>Sound FX</div><div class="R blkSettingsMusic"><input type="checkbox" class="S"/>Music</div></div></div>',
p:d.toString()}),c);return b?"":c.toString()};function Cm(a,b,c){dl.call(this,"settings",a,b,Bm,{});this.eo=c}C(Cm,dl);Cm.prototype.ua=function(){Cm.a.ua.call(this);var a=this.eo;Pd(this.d,"blkSettingsNameValue",this.root).value=a.userName;Dm(this,"blkSettingsSensitivitySlider",1,100,50,50*a.ka,function(a){return Ea(a/50,2)});Em(this,"T",a.ob);Dm(this,"blkSettingsDistanceSlider",X.ij,X.hj,X.Sl,a.Bb,function(a){return Ea(a)});Em(this,"blkSettingsSoundFx",!a.Xa);Em(this,"blkSettingsMusic",!a.ac)};
function Dm(a,b,c,d,e,f,h){function j(){n.innerHTML=h(Number(k.value))}if(b=Pd(a.d,b)){var k=Pd(a.d,"O",b);if(k){k.min=String(c);k.max=String(d);k.value=String(f);var n=Pd(a.d,"P",b);j();a.S.listen(k,"change",j);c=Pd(a.d,"Q",b);a.S.listen(c,"click",function(){k.value=String(e);j()})}}}function Fm(a,b){var c=Pd(a.d,b);if(c)return c=Pd(a.d,"O",c),!c?g:Number(c.value)}
function Em(a,b,c){if(b=Pd(a.d,b)){var d=Pd(a.d,"S",b);d&&(Rk(b),d.checked=c,a.S.listen(b,"click",function(a){a.target!=d&&(d.checked=!d.checked)}))}}function Gm(a,b){var c=Pd(a.d,b);if(c)return c=Pd(a.d,"S",c),!c?g:c.checked}
Cm.prototype.am=function(a){if("save"==a){a=this.eo;var b=Pd(this.d,"blkSettingsNameValue",this.root).value,b=Ai(b);a.userName=b;b=Fm(this,"blkSettingsSensitivitySlider");w(b)&&(a.ka=b/50);b=Gm(this,"T");w(b)&&(a.ob=b);b=Fm(this,"blkSettingsDistanceSlider");w(b)&&(a.Bb=b);b=Gm(this,"blkSettingsSoundFx");w(b)&&(a.Xa=!b);b=Gm(this,"blkSettingsMusic");w(b)&&(a.ac=!b);a.save()}};function Hm(a,b){var c=b||new $;c.append('<div class="',"U",'"><div class="',"V",'">Loading...</div></div>');return b?"":c.toString()};function Im(a,b){dl.call(this,"",a,b,Hm,{})}C(Im,dl);function Jm(){this.Hr=this.Ji=this.time=this.lf=0}Jm.prototype.Cc=function(a,b,c,d){this.lf=a;this.time=b;this.Ji=c;this.Hr=d};function Km(){this.Ir=hc();this.Qe=this.xa=this.lb=0;this.dn=m}function Lm(a){return(hc()-a.Ir)/1E3}function qi(a){return!a.dn?0:Lm(a)+a.Qe};function Mm(a,b){F.call(this);this.Ef=a;this.W=b||new Km;this.Se=[];this.fs=l}C(Mm,F);Mm.prototype.b=function(){mc(this.Se);this.Se.length=0;Mm.a.b.call(this)};Mm.prototype.getTime=function(){return qi(this.W)};function Nm(){this.Ji=this.time=this.lf=0;this.hasFocus=m}Nm.prototype.Cc=function(a,b,c,d){this.lf=a;this.time=b;this.Ji=c;this.hasFocus=d};function Om(a,b,c,d){F.call(this);this.T=new Lc(this);G(this,this.T);this.Jl=a;this.Dj=this.re=this.Qj=l;if(!b){if(a=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame)this.re=a;if(a=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.mozCancelAnimationFrame||t.oCancelAnimationFrame||t.msCancelAnimationFrame)this.Dj=a}this.wd=0;this.Dc=l;this.xk=0;this.ye=i;this.bk=d||0;this.xi=l;c&&(this.T.listen(t,"blur",function(){this.ye=
m}),this.T.listen(t,"focus",function(){this.ye||(this.ye=i,this.wd&&this.start(i))}))}C(Om,F);Om.prototype.b=function(){this.stop(i);this.Qj=l;Om.a.b.call(this)};Om.prototype.hasFocus=q("ye");
Om.prototype.start=function(a){if(!a&&(this.wd++,1<this.wd))return;if(this.ye){var b=this;this.Dc=this.re?this.re.call(t,function(){Pm(b)},this.Qj):t.setTimeout(function(){Pm(b)},62.5)}this.Jl(hc());this.bk&&(b=this,this.xi=t.setInterval(lf(function(){var a=b;if(hc()-a.xk>=a.bk&&a.wd){var d=hc();a.xk=d;a.Jl(d)}},"gf.timing.RenderTimer#simulateTick"),this.bk))};
Om.prototype.stop=function(a){if(a||this.wd)a||this.wd--,this.wd||(a=this.Dc,this.Dj?this.Dj.call(t,a):this.re||t.clearTimeout(a),this.Dc=l,this.xi!==l&&(t.clearInterval(this.xi),this.xi=l))};function Pm(a){if(a.Dc!==l){a.Dc=l;a.ye&&(a.Dc=a.re?a.re.call(t,function(){Pm(a)},a.Qj):t.setTimeout(function(){Pm(a)},16));var b=hc();a.xk=b;a.Jl(b)}};function Qm(a,b){Mm.call(this,a,b);this.S=new Lc(this);G(this,this.S);this.Cf=Lm(this.W);this.Pm=i;this.Dp=Qm.Go;this.ze=0;this.Nr=new Nm;this.Mr=0;this.ii=new Jm;this.hr=0;var c=this;this.Vf=new Om(function(a){c.Un(a)},g,g,500);G(this,this.Vf);this.dg=m}C(Qm,Mm);Qm.Go=0.016777;Qm.Tl=0.25;function vm(a){a.dg||(a.dg=i,a.Vf.start())}function jm(a){a.dg&&(a.dg=m,a.Vf.stop())}s=Qm.prototype;
s.Un=function(){var a=Lm(this.W),b=a-this.Cf;this.Cf=a;b>Qm.Tl&&(b=Qm.Tl);this.ze+=b;a=1;if(this.Pm){for(a=this.Dp;this.ze>=a;){this.Hl(this.W.lb,a);var c=this.W;c.lb+=a;this.ze-=a;if(!this.dg)break}a=this.ze/a}else this.Hl(this.W.lb,b),c=this.W,c.lb+=b;this.Vf.hasFocus()&&this.Vn(qi(this.W),b,a)};s.Hl=function(a,b){if(!(0>=b)){var c=this.Nr;c.Cc(this.Mr++,a,b,this.Vf.hasFocus());this.update(c)}};s.Vn=function(a,b,c){var d=this.ii;d.Cc(this.hr++,a,b,c);this.A(d)};s.update=y;s.A=y;
Qm=mf(Qm,"gf.Game",{Un:"renderTick_",Hl:"update_",Vn:"render_"});function Rm(a,b){$h.call(this,a);this.d=b||l}C(Rm,$h);Rm.prototype.load=function(a){var b=new tf(function(){a.cancel()},this);a.load(b);return b};function Sm(a){F.call(this);this.context=a;this.cc=O()}C(Sm,F);Sm.prototype.update=function(a){if(this.context){var b=this.context.listener;if(a){var c=Tm[0],d=Tm[1];Q(c,0,0,0);bf(a,c,c);b.setPosition(c[0],c[1],c[2]);Qe(this.cc,c);Q(c,0,0,1);cf(a,c,c);Q(d,0,1,0);cf(a,d,d);b.setOrientation(-c[0],-c[1],-c[2],d[0],d[1],d[2])}else b.setPosition(0,0,0),b.setOrientation(0,0,1,0,1,0);b.setVelocity(0,0,0)}};var Tm=[O(),O()];function Um(a,b){$h.call(this,a);this.d=b;this.context=l;t.webkitAudioContext?this.context=new window.webkitAudioContext:t.AudioContext&&(this.context=new window.AudioContext);this.listener=new Sm(this.context);G(this,this.listener);this.yg=[];this.Ni=[]}C(Um,$h);Um.prototype.b=function(){Ia(this.yg,H);this.yg.length=0;Ia(this.Ni,H);this.Ni.length=0;Um.a.b.call(this)};Um.prototype.Ph=function(a){this.yg.push(a);a.load()};function Vm(a,b){F.call(this);this.cb=a;this.ra=b;this.uk=this.Jh=m;this.tb=this.Jf=l}C(Vm,F);Vm.prototype.b=function(){this.vi(l);Vm.a.b.call(this)};Vm.prototype.vi=function(a){if(a!=this.tb){if(this.tb){this.stop();var b=this.tb;D(this.ra.Ni,b);H(b)}if(this.tb=a)a=this.tb,this.ra.Ni.push(a),a.load(),this.Jh||Wm(this,0)}};function Wm(a,b){var c=10+60*Math.random(),c=b+1E3*c;Rc.clearTimeout(a.Jf);a.Jf=Sc(a.Ln,c,a)}
Vm.prototype.Ln=function(){if(!this.Jh&&this.tb){this.stop();var a=l,b=this.tb,c=[],d;for(d in b.hg)c.push(b.hg[d]);c.length&&(a=c[0]);a&&(this.tb.play(a),this.uk=i,Wm(this,a.duration))}};Vm.prototype.stop=function(){this.tb&&(this.Jf!==l&&(Rc.clearTimeout(this.Jf),this.Jf=l),yg(this.tb),this.uk=m)};var Xm="fullscreen_changed_"+Kc++,Ym="orientation_changed_"+Kc++;function Zm(a){F.call(this);this.Gd=a||window;this.Oh=Cc(this.Gd,"resize",this.pq,m,this);this.jc=Ld(this.Gd||window);if(wb&&qb||ub&&this.Gd.self!=this.Gd.top)this.$i=window.setInterval(B(this.um,this),$m)}C(Zm,Qc);var an={},$m=500;s=Zm.prototype;s.Oh=l;s.Gd=l;s.jc=l;s.$i=l;s.Bc=function(){return this.jc?this.jc.r():l};s.b=function(){Zm.a.b.call(this);this.Oh&&(Gc(this.Oh),this.Oh=l);this.$i&&(window.clearInterval(this.$i),this.$i=l);this.jc=this.Gd=l};s.pq=function(){this.um()};
s.um=function(){var a=Ld(this.Gd||window);if(!(a==this.jc||(!a||!this.jc?0:a.width==this.jc.width&&a.height==this.jc.height)))this.jc=a,this.dispatchEvent("resize")};function bn(a,b){F.call(this);this.d=a;var c=a.R,d=c.body;this.parentElement=b||d;this.T=new Lc(this);G(this,this.T);d=a.createElement("DIV");Nk(d,{position:"absolute",left:0,top:0,right:0,bottom:0});a.appendChild(this.parentElement,d);var e=a.createElement("DIV");Nk(e,{position:"absolute",left:0,top:0,right:0,bottom:0});a.appendChild(d,e);this.Ia=d;this.canvas=new cn(a,e);G(this,this.canvas);this.nn=i;this.Ih=this.Wd=m;this.orientation=dn;this.xs=t.devicePixelRatio||1;var e=a.R.parentWindow||a.R.defaultView||
window,f=na(e),e=an[f]=an[f]||new Zm(e);this.T.listen(e,"resize",function(){this.ie()});this.T.listen(a.R.body,"orientationchange",B(function(){this.orientation=window.orientation;this.ie();this.dispatchEvent(Ym)},this));this.ie();if((this.Wd=!(!d.requestFullScreen&&!d.mozRequestFullScreen&&!d.webkitRequestFullScreen))&&(c.fullScreenEnabled!==g||c.mozFullScreenEnabled!==g))this.Wd=c.fullScreenEnabled||c.mozFullScreenEnabled;this.Wd&&this.T.listen(c,["fullscreenchange","mozfullscreenchange","webkitfullscreenchange"],
function(){this.Ih=!!c.fullScreenElement||c.mozFullScreen||c.webkitIsFullScreen;this.ie();this.dispatchEvent(Xm)})}C(bn,Qc);var dn=0;bn.prototype.Bc=function(){return this.canvas.size};bn.prototype.ag=function(a){a!=this.nn&&(this.nn=a,this.canvas.wc.style.display=a?"":"none")};bn.prototype.ie=function(){this.canvas.ie()};
function cn(a,b){F.call(this);this.parentElement=b;this.wc=a.createElement("CANVAS");Rk(this.wc);Nk(this.wc,{position:"absolute",left:0,top:0,right:0,bottom:0,cursor:"crosshair","-webkit-tap-highlight-color":"rgba(0,0,0,0)","-webkit-touch-callout":"none"});a.appendChild(b,this.wc);this.size=new Id(1,1)}C(cn,F);
cn.prototype.ie=function(){var a;a=this.parentElement;var b;b:{b=Nd(a);if(b.defaultView&&b.defaultView.getComputedStyle&&(b=b.defaultView.getComputedStyle(a,l))){b=b.display||b.getPropertyValue("display")||"";break b}b=""}if("none"!=(b||(a.currentStyle?a.currentStyle.display:l)||a.style&&a.style.display))a=Pk(a);else{b=a.style;var c=b.display,d=b.visibility,e=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";a=Pk(a);b.display=c;b.position=e;b.visibility=d}b=window.devicePixelRatio||
1;this.wc.width=a.width*b;this.wc.height=a.height*b;Nk(this.wc,{width:a.width+"px",height:a.height+"px"});this.size.width=a.width;this.size.height=a.height};var en="context_lost_"+Kc++,fn="context_restored_"+Kc++;function gn(){this.mk=m;this.bh=this.Nj=l;this.Fd=[]};function hn(a){gn.call(this);this.ba=a;this.io=this.sl=m}C(hn,gn);function jn(a){var b=a.ba.d.createElement("IMG");if(!b)return a.sl=m,Af();var c=new tf;a=B(function(){this.sl=2==b.height;b.onload=l;b.onerror=l;c.D(l)},a);b.addEventListener("load",a,m);b.addEventListener("error",a,m);b.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA";return c};function kn(a,b){F.call(this);this.d=a||(b?new Od(Nd(b)):Fd||(Fd=new Od));this.canvas=b;this.Kd={};this.Ck=0;this.$k=this.Tc=this.Er=this.ah=this.Jg=this.ei=l;this.mj=0;this.Bd=[];this.ir=l;this.Cs=[l];this.T=new Lc(this);G(this,this.T);this.Qg=m;this.T.listen(b,"webglcontextcreationerror",function(a){J("error creating gl context: ",a.statusMessage||"?")});this.T.listen(b,"webglcontextlost",function(a){a.preventDefault();this.w();this.dispatchEvent(en)});this.T.listen(b,"webglcontextrestored",function(){this.restore();
this.dispatchEvent(fn)});this.f=l;this.ph=new Yd;this.ak=new hn(this)}C(kn,Qc);s=kn.prototype;s.b=function(){this.Ck&&Pa(this.Kd,H);this.Kd={};this.w();kn.a.b.call(this)};s.w=function(){this.Qg=m;Pa(this.Kd,function(a){a.w()});this.Er=this.ah=this.Jg=this.ei=l;this.Tc&&(this.Tc.reset(),this.Tc=l);this.$k=l;for(var a=this.mj=0;a<this.Bd.length;a++)this.Bd[a]=l;this.ir=l};
s.restore=function(){this.Bd=Array(this.f.getParameter(34930));for(var a=0;a<this.Bd.length;a++)this.Bd[a]=l;Pa(this.Kd,function(a){a.restore()});this.Qg=i};
s.ve=function(a){if(this.f)return Af();var b=new tf;if(t.WebGLRenderingContext){for(var c=l,d=["webgl","experimental-webgl"],e=0;e<d.length;e++){try{c=this.canvas.getContext(d[e],a)}catch(f){continue}if(c)break}a=c}else a=l;a?(this.f=a,this.ph.ve(a),a=this.ak,c=new tf,a.mk?a.bh?c.G(a.bh):c.D(l):(a.Fd.push(c),a.Nj||(d=[],d.push(jn(a)),a.io=a.ba.ph.isSupported(8),d=new Tf(d),a.Nj=d,L(a.Nj,function(){this.mk=i;this.bh=l;for(var a=0;a<this.Fd.length;a++)this.Fd[a].D(l);this.Fd.length=0},function(a){this.mk=
i;this.bh=a;for(var b=0;b<this.Fd.length;b++)this.Fd[b].G(a);this.Fd.length=0},a))),L(c,function(){this.restore();b.D(l)},function(a){b.G(a)},this)):(this.Qg=m,b.G("Unable to create the WebGL context"));return b};s.flush=function(){this.f.flush()};function hg(a,b){a.Jg!=b&&(b&&a.f&&b.nd(a.f,a.Jg),a.Jg=b)}function ig(a,b){a.ah!=b&&(b&&a.f&&b.nd(a.f,a.ah),a.ah=b)}function pf(a,b){a.Tc!=b&&(b?b.nd(a.Tc):a.Tc&&a.Tc.reset(),a.Tc=b)}
function jg(a,b){var c=b instanceof De?b.handle:b;a.$k!=c&&(a.f.useProgram(c),a.$k=c)}function we(a,b){var c=a.f;a.Bd[0]!=b&&(0!=a.mj&&(c.activeTexture(33984),a.mj=0),(a.Bd[0]=b)?b.bind():a.f.bindTexture(c.TEXTURE_2D,l))}s.wj=function(){return!this.Qg?m:i};s.end=ba();function ln(a){Lc.call(this);this.Ha=a;this.enabled=i}C(ln,Lc);ln.prototype.Va=y;ln.prototype.ia=ca("enabled");function mn(a){ln.call(this,a)}C(mn,ln);function nn(){this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=m;this.h={};this.J={};this.he={};this.Ec=this.ge=0}nn.prototype.r=function(){var a=new nn;a.ctrlKey=this.ctrlKey;a.altKey=this.altKey;a.shiftKey=this.shiftKey;a.metaKey=this.metaKey;a.h=Ua(this.h);a.J=Ua(this.J);a.he=Ua(this.he);a.ge=this.ge;a.Ec=this.Ec;return a};nn.prototype.reset=function(){this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=m;this.ge&&(Sa(this.h),this.ge=0);this.Ec&&(Sa(this.J),Sa(this.he),this.Ec=0)};
nn.prototype.Va=function(){this.Ec&&(Sa(this.J),Sa(this.he),this.Ec=0)};nn.prototype.update=function(a,b){var c=a.xc.keyIdentifier,d=a.keyCode;d?(25==d&&a.shiftKey&&(d=9),vb&&d in on&&(d=on[d])):c&&c in pn&&(d=pn[c]);b?this.h[d]||(this.h[d]=i,this.J[d]=i,this.ge++,this.Ec++):this.h[d]&&(delete this.h[d],this.he[d]=i,this.ge--,this.Ec++);switch(d){case 17:this.ctrlKey=b;break;case 18:this.altKey=b;break;case 16:this.shiftKey=b;break;case 91:case 92:this.metaKey=b}};
var pn={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},on={61:187,59:186,224:91};function qn(a){ln.call(this,a);this.ek=l;this.c=new nn;this.enabled=m;this.ia(i)}C(qn,ln);function rn(a){if(a.ctrlKey||a.metaKey){switch(a.keyCode){case 82:return i;case 73:return i}if(a.shiftKey)switch(a.keyCode){case 74:return i}}else switch(a.keyCode){case 27:case 116:return i}return m}s=qn.prototype;s.kk=function(a){rn(a)||(a.preventDefault(),this.c.update(a,i),13 in this.c.J&&(this.c.altKey||this.c.metaKey)&&this.ek&&this.ek())};s.iq=function(a){rn(a)||(a.preventDefault(),this.c.update(a,m))};
s.hq=function(){this.c.reset()};s.Nb=q("c");s.reset=function(){this.c.reset()};s.Va=function(){this.c.Va()};s.ia=function(a){this.enabled!=a&&(qn.a.ia.call(this,a),a?(a=Nd(this.Ha),this.listen(a,"keydown",this.kk),this.listen(a,"keyup",this.iq),this.listen(a?a.parentWindow||a.defaultView:window,["focus","blur"],this.hq)):Oc(this))};function sn(){this.sa=this.Pa=this.p=this.vc=this.uc=this.tc=this.clientY=this.clientX=this.screenY=this.screenX=0;this.U=m}sn.prototype.r=function(){var a=new sn;a.screenX=this.screenX;a.screenY=this.screenY;a.tc=this.tc;a.uc=this.uc;a.vc=this.vc;a.p=this.p;a.Pa=this.Pa;a.sa=this.sa;a.U=this.U;return a};sn.prototype.reset=function(){this.sa=this.Pa=this.p=this.vc=this.uc=this.tc=this.screenY=this.screenX=0;this.U=m};sn.prototype.Va=function(){this.sa=this.Pa=this.vc=this.uc=this.tc=0};
sn.prototype.update=function(a,b){var c=a.xc,d=a.screenX,e=a.screenY,f=0,h=0;c.webkitMovementX!==g?(f=c.webkitMovementX,h=c.webkitMovementY):c.mozMovementX!==g?"mousemove"==a.type?(f=c.mozMovementX,h=c.mozMovementY):f=h=0:c.movementX!==g?(f=c.movementX,h=c.movementY):(f=d-this.screenX,h=e-this.screenY);this.screenX=d;this.screenY=e;this.clientX=a.clientX;this.clientY=a.clientY;this.tc+=f*b;this.uc+=h*b};function tn(a){ln.call(this,a);this.c=new sn;this.Fi=!(!a.requestPointerLock&&!a.mozRequestPointerLock&&!a.webkitRequestPointerLock);this.si=1;this.gh=this.Zi=this.U=this.vn=m;this.listen(a,"mousedown",this.jq);this.listen(a,"mousemove",this.rf);this.listen(a,"mouseover",this.lq);this.listen(a,"mouseout",this.kq);this.listen(a,vb?"DOMMouseScroll":"mousewheel",this.mq);this.listen(a,["selectstart","contextmenu"],function(a){a.preventDefault()});this.Fi&&(this.listen(document,["pointerlockchange","mozpointerlockchange",
"webkitpointerlockchange"],function(){this.U=document.pointerLockElement===a||document.mozPointerLockElement===a||document.webkitPointerLockElement===a}),this.listen(document,["pointerlockerror","mozpointerlockerror","webkitpointerlockerror"],function(){this.U=m}))}C(tn,ln);function un(a){if(!a.Fi||a.U||!vn(a))return m;(a.Ha.requestPointerLock||a.Ha.mozRequestPointerLock||a.Ha.webkitRequestPointerLock).call(a.Ha);a.c.reset();return i}
function vn(a){return!a.enabled?m:a.vn&&a.Fi?vb&&!document.ws&&!document.mozFullScreenElement?m:i:m}function wn(a){a.Zi=m;a.U&&((document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock).call(document),a.c.reset())}s=tn.prototype;
s.jq=function(a){if(this.enabled&&(a.preventDefault(),!vn(this)||!un(this))){this.c.update(a,this.si);switch(a.button){case 0:this.c.p|=1;this.c.Pa|=1;break;case 1:this.c.p|=2;this.c.Pa|=2;break;case 2:this.c.p|=4,this.c.Pa|=4}!this.U&&(this.c.p&&!this.gh)&&(this.gh=i,this.listen(Nd(this.Ha),"mousemove",this.rf),this.listen(Nd(this.Ha),"mouseup",this.$m),Nc(this,this.Ha,"mousemove",this.rf))}};
s.$m=function(a){if(this.enabled&&(!vn(this)||this.U)){a.preventDefault();this.c.update(a,this.si);switch(a.button){case 0:this.c.p&=-2;this.c.sa|=1;break;case 1:this.c.p&=-3;this.c.sa|=2;break;case 2:this.c.p&=-5,this.c.sa|=4}!this.U&&(!this.c.p&&this.gh)&&(this.gh=m,Nc(this,Nd(this.Ha),"mousemove",this.rf),Nc(this,Nd(this.Ha),"mouseup",this.$m),this.listen(this.Ha,"mousemove",this.rf))}};s.rf=function(a){if(this.enabled&&(!vn(this)||this.U))a.preventDefault(),this.c.update(a,this.si)};
s.lq=function(a){this.enabled&&a.preventDefault()};s.kq=function(a){this.enabled&&a.preventDefault()};s.mq=function(a){if(this.enabled){a.preventDefault();var b=0;a=a.xc;w(a.wheelDelta)?(b=a.wheelDelta/120,ub&&(b=-b)):w(a.detail)&&(b=-a.detail/3);this.c.vc+=b}};s.Nb=function(){this.c.U=this.U;return this.c};s.Va=function(){this.c.Va()};s.ia=function(a){a!=this.enabled&&(tn.a.ia.call(this,a),a?this.Zi&&(un(this),this.Zi=m):this.U&&(wn(this),this.Zi=i))};function xn(a){ln.call(this,a)}C(xn,ln);function yn(a,b){$h.call(this,a);this.Ha=b;this.Xd=this.Ae=this.K=this.V=l;this.V=new qn(b);G(this,this.V);this.K=new tn(b);G(this,this.K);this.Ae=new xn(b);G(this,this.Ae);this.Xd=new mn(b);G(this,this.Xd)}C(yn,$h);yn.prototype.Va=function(){this.V&&this.V.Va();this.K&&this.K.Va();this.Ae&&this.Ae.Va();this.Xd&&this.Xd.Va()};yn.prototype.ia=function(a){this.V&&this.V.ia(a);this.K&&this.K.ia(a);this.Ae&&this.Ae.ia(a);this.Xd&&this.Xd.ia(a)};function zn(){F.call(this);this.type="none"}C(zn,F);function An(){this.tf=Array(256)}An.prototype.X=function(a,b,c){b=c?B(b,c):b;this.tf[a]=b};function Bn(a,b){var c=Lh();c.wj(b.data,0);if(c.offset+1<=c.buffer.length){var d=Ih(c),e=a.tf[d];e&&e(b,d,c)}};function Cn(a,b,c){F.call(this);this.Ja=new An;this.W=new Km;this.id=a;this.type=b;this.ys=c;this.info=new Al;this.ds=new zn;this.state=0;this.Ma=[];this.zb={};this.Vi=Array(256);this.Aa=[]}C(Cn,F);Cn.prototype.b=function(){this.Aa.length=0;Cn.a.b.call(this)};Cn.prototype.He=function(a){this.Ma.push(a);this.zb[a.j]=a;this.Vi[a.mc]=a;for(var b=0;b<this.Aa.length;b++)this.Aa[b].Kl(a)};Cn.prototype.hi=function(a){if(Ta(this.zb,a.j)){this.Vi[a.mc]=l;D(this.Ma,a);for(var b=0;b<this.Aa.length;b++)this.Aa[b].Ll(a)}};function Dn(a){this.timestamp=ta();this.yb=l;this.data=a};function En(a){F.call(this);this.jh=a;this.fe=m;this.state=Fn;this.Pg=m;this.hc=0;this.Mc=l;this.Uf=[];this.cj=[]}C(En,F);En.prototype.b=function(){this.close();En.a.b.call(this)};var Fn=0;En.prototype.read=function(){if(!this.Uf.length)return l;var a=this.Uf[0];a.timestamp<=ta()?this.Uf.shift():a=l;this.Uf.length||(this.Pg=m);return a};
En.prototype.write=function(a){a=new Dn(a);this.hc?(a.timestamp+=this.hc+(Math.random()-0.5)*this.hc/2,this.Mc===l&&(this.Mc=t.setInterval(B(function(){1==this.state&&this.flush()},this),5))):this.Mc!==l&&(t.clearInterval(this.Mc),this.Mc=l);this.cj.push(a);1==this.state&&this.flush()};function Gn(a,b){a.hc&&(b.timestamp+=a.hc+(Math.random()-0.5)*a.hc/2);a.Uf.push(b);a.Pg=i}En.prototype.flush=function(a){for(var b=ta();this.cj.length;){var c=this.cj[0];if(c.timestamp>b&&!a)break;this.cj.shift();this.yo(c.data)}};
En.prototype.close=function(){2!=this.state&&(this.Mc!==l&&(t.clearInterval(this.Mc),this.Mc=l),this.state=2)};function Hn(a,b,c,d){Cn.call(this,"none",a.fe?0:1,b);this.Ja.X(2,this.oq,this);this.Ja.X(3,this.qq,this);this.Ja.X(6,this.tq,this);this.Ja.X(7,this.uq,this);this.Ja.X(8,this.sq,this);this.Ja.X(4,this.fq,this);this.Ja.X(5,this.gq,this);this.Ka=a;G(this,this.Ka);this.Sd=0;this.Sg=new tf;a=new vi;a.Il=rb()||"";a.type=ub?"opera":E?"ie":vb?"gecko":wb?"webkit":wi;a.platform=pb?"mac":qb?"windows":Ab?"linux":xi;a.oe=ui;a.Rd=Jf?"chrome":Gf?"iphone":Hf?"ipad":If?"android":xb?"mobile":yi;this.send(Nl(b,new Bi("none",
0,0,d,a)));this.Dk=l}C(Hn,Cn);s=Hn.prototype;s.fe=function(){return this.Ka.fe};function ri(a){a.Dk||(a.Dk=a.zb[a.id]||l);return a.Dk}s.Nb=function(a){if(0==this.state)for(;this.Ka.Pg;){var b=this.Ka.read();if(!b)return;Bn(this.Ja,b);return}else for(var c=hc();this.Ka.Pg;){b=this.Ka.read();if(!b)break;ri(this).n.lp+=b.data.byteLength;Bn(this.Ja,b);if(a&&hc()-c>=a)break}2==this.Ka.state&&In(this,1)};
s.oq=function(a,b,c){a:{Il.$f=c.ca();Il.Pe=c.ca();a=c.ca();Il.ig.length=a;for(b=0;b<a;b++){Il.ig[b]=new Bl;var d=c,e=Il.ig[b]||Cl;e.mc=Ih(d);e.xa=Jh(d);if(!e){c=l;break a}}c=Il}if(!c)return m;d=Lm(this.W)-c.Pe/1E3;a=this.W;b=c.$f/1E3;d=Math.abs(d)/2;a.xa=d;b+=d;b<a.lb&&(b=a.lb);a.lb=b;b=Lm(a);b=a.lb-b;d=b-a.Qe;a.Qe=0.3<Math.abs(d)?b:0<d?a.Qe+0.0010:a.Qe-0.0010;a.dn=i;for(a=0;a<c.ig.length;a++)if(b=c.ig[a],d=this.Vi[b.mc]||l)d.n.$l=b.xa;return i};
s.qq=function(a,b,c){a:{a=Jl.info||new Al;a.jh=c.t();a.name=c.t();a.location=c.t();a.fk=c.t();a.gk=c.t();a.Hk=c.ca();a.ci={};b=c.ca();for(var d=0;d<b;d++){var e,f;e=c.t();f=c.t();a.ci[e]=f}if(a){a=c.ca();Jl.Ma.length=a;for(b=0;b<a;b++)if(Jl.Ma[b]=new Bi,!Fl(c,Jl.Ma[b])){c=l;break a}c=Jl}else c=l}if(!c)return m;this.info=c.info.r();for(a=0;a<c.Ma.length;a++)this.He(Ci(c.Ma[a]));this.state=1;this.Sg.D(this);c=lf(B(function(){if(2!=this.state){var a=qi(this.W)+this.W.xa,b=Lm(this.W),c=Math.min(65535,
1E3*this.W.xa|0);this.send(Hl(1E3*a|0,1E3*b|0,c))}2==this.state&&t.clearInterval(h)},this),"gf.net.ClientSession#sendPing");var h=t.setInterval(c,500);c();for(c=0;c<this.Aa.length;c++)this.Aa[c].Gj();return i};s.tq=function(a,b,c){a=!Fl(c,Sl.yb)?l:Sl;if(!a)return m;this.He(Ci(a.yb));return i};s.uq=function(a,b,c){Tl.j=c.t();Tl.reason=c.ca();if(!Tl)return m;a=this.zb[Tl.j]||l;if(!a)return i;a.Sd=Tl.reason;this.hi(a);return i};
s.sq=function(a,b,c){Vl.j=c.t();b=!Dl(c,Vl.info)?l:Vl;if(!b)return m;a=this.zb[b.j]||l;if(!a)return i;b=b.info.Q;b=Ai(b);a.info.Q=b;for(b=0;b<this.Aa.length;b++)this.Aa[b].Ml(a);return i};s.fq=function(a,b,c){Ll.tl=Jh(c);Ll.pj=Jh(c);a=!Fl(c,Ll.yb)?l:Ll;if(!a)return m;this.id=a.yb.j;return i};s.gq=function(a,b,c){Pl.reason=c.ca();if(!Pl)return m;J("disconnected by server",Pl.reason);In(this,Pl.reason);return i};
function In(a,b){a.state=2;a.Sd=b;H(a.Ka);for(var c=0;c<a.Aa.length;c++)a.Aa[c].Pj();a.Sg.Gb||a.Sg.G(a.Sd)}s.disconnect=function(){this.send(Rl());this.Ka.flush(i);In(this,0)};s.send=function(a){a&&(2==this.Ka.state?In(this,1):2!=this.state&&(1==this.state&&(ri(this).n.mp+=a.byteLength),this.Ka.write(a)))};function Jn(a,b){if(!a)return m;for(var c=a.constructor,d=0;d<b.length;d++){var e=b[d];if(c==e||c.name==e)return i;A(e)&&(e=t[e]);if(e&&(c==e||c.name==e.name))return i}return m}function Kn(a){for(var b=new Uint8Array(2*a.length),c=0,d=0;d<a.length;d++){for(var e=a.charCodeAt(d);255<e;)b[c++]=e,e>>=8;b[c++]=e}return b.subarray(0,c).buffer}function Ln(a){a=new Uint8Array(a);for(var b=Array(a.length),c=0;c<b.length;c++)b[c]=a[c];return String.fromCharCode.apply(l,b)};function Mn(a){En.call(this,a);this.H=new WebSocket(a);this.H.binaryType="arraybuffer";this.om=B(this.nq,this);this.mm=B(this.qf,this);this.lm=B(this.eq,this);this.nm=B(this.lk,this);this.H.addEventListener("open",this.om,m);this.H.addEventListener("error",this.mm,m);this.H.addEventListener("close",this.lm,m);this.H.addEventListener("message",this.nm,m)}C(Mn,En);s=Mn.prototype;s.nq=function(){this.state=1;this.flush()};s.qf=function(a){J("error",a)};s.eq=function(a){J("close",a);this.close()};
s.lk=function(a){a=a.data;var b=l;a instanceof ArrayBuffer?b=new Dn(a):A(a)&&(b=new Dn(Kn(a)));b&&Gn(this,b)};s.yo=function(a){1!=this.H.readyState?this.close():this.H.send(a)};s.close=function(){this.H.removeEventListener("open",this.om,m);this.H.removeEventListener("error",this.mm,m);this.H.removeEventListener("close",this.lm,m);this.H.removeEventListener("message",this.nm,m);this.H.close();Mn.a.close.call(this)};function Nn(a,b){En.call(this,a);this.fe=i;this.state=1;this.H=b;this.Fr=!!b.webkitPostMessage&&!Jn(b,["MessagePort"]);this.pp=!ub;var c=this;this.H.onmessage=function(a){c.lk(a)};this.H.onerror=function(a){J("port error",a)};this.pm=B(this.rq,this);t.addEventListener("unload",this.pm,m)}C(Nn,En);Nn.prototype.lk=function(a){a=a.data;var b=l;a instanceof ArrayBuffer?b=new Dn(a):A(a)?b=new Dn(Kn(a)):a&&a.close&&this.close();b&&Gn(this,b)};Nn.prototype.rq=function(){this.close()};
Nn.prototype.yo=function(a){this.Fr?this.H.webkitPostMessage(a,[a]):this.pp?this.H.postMessage(a):this.H.postMessage(Ln(a))};Nn.prototype.close=function(){this.H.onmessage=l;t.removeEventListener("unload",this.pm,m);try{this.H.postMessage({close:i}),this.H.close&&this.H.close()}catch(a){}Nn.a.close.call(this)};function On(a,b){var c=l;if(Jn(a,["Worker","SharedWorker","MessagePort"]))c=new Nn(a,a);else if(A(a))c=new Mn(a);else return c=new tf,c.G(l),c;var d=new Hn(c,7,0,b),c=d.Sg,e=t.setInterval(function(){0==d.state&&d.Nb();0!=d.state&&t.clearInterval(e)},16);return c};function Pn(){};function Qn(a){F.call(this);this.d=a;this.na=[];this.ce=l}C(Qn,F);Qn.prototype.b=function(){this.ce&&(Ec(this.ce,"navigate",this.zq,m,this),H(this.ce),this.ce=l);for(;this.na.length;){var a=this.na.pop();a.N=l;H(a)}Qn.a.b.call(this)};Qn.prototype.zq=function(a){J("navigate: ",a.Ks,a.qs)};function Rn(a){if(a.ce){for(var b=[],c=0;c<a.na.length;c++)b.push(a.na[c].xq);b=b.join("/");a.ce.Ds(b)}}function Sn(a,b){Tn(a,i);ul(a,b,i);Rn(a)}function ul(a,b,c){b.N=a;a.na.push(b);Un(a);b.ua();c||Rn(a)}
function Yk(a,b){var c=a.na.pop();c.N=l;H(c);Un(a);b||Rn(a)}function Tn(a,b){for(;a.na.length;)Yk(a,i);b||Rn(a)}function Un(a){for(var b=i,c=i,d=a.na.length-1;0<=d;d--){var e=a.na[d];e.setActive(b);e.Fp=c;e.q&6&&(c=b=m);e.q&8&&(c=m)}}Qn.prototype.update=function(a){for(var b=0;b<this.na.length;b++)this.na[b].update(a)};Qn.prototype.A=function(a){for(var b=0;b<this.na.length;b++){var c=this.na[b];c.ln()&&c.A(a)}};function Vn(a,b,c){Qm.call(this,b);this.Pm=m;this.d=a;this.Wa=c;this.cb=new Rm(this,this.d);G(this,this.cb);this.Se.push(this.cb);this.F=new bn(this.d);G(this,this.F);this.F.ag(m);this.C=new yn(this,this.F.Ia);G(this,this.C);this.Se.push(this.C);a=B(this.mo,this);this.C.V.ek=a;this.ba=new kn(this.d,this.F.canvas.wc);G(this,this.ba);this.M=new S(this,this.cb,this.ba);G(this,this.M);this.ra=new Um(this,this.d);G(this,this.ra);this.Se.push(this.ra);this.Sh=new Vm(this.cb,this.ra);G(this,this.Sh);this.zg=
new Wd(this.cb,this.ra.context);this.ra.Ph(this.zg);this.N=new Qn(this.d);G(this,this.N);this.Kb=m}C(Vn,Qm);s=Vn.prototype;s.b=function(){Vn.a.b.call(this)};function Wn(a){var b=a.C,c=b.K,d=a.Wa.ka,d=Math.min(Math.max(d,0.1),10);c.si=d;b.K.vn=a.Wa.ob;a.Kb&&a.Wa.ob?un(b.K):wn(b.K);b=a.Sh;c=a.Wa.ac;b.Jh!=c&&(c&&b.stop(),b.Jh=c);if(a.Kb){var e=l;a=a.N;b=function(a){if(a instanceof um)return e=a,m};for(c=0;c<a.na.length&&b.call(t,a.na[c])!==m;c++);a=e}else a=l;a&&a.el()}
s.start=function(){Wn(this);var a=new Im(this.d,this.F.Ia);Sn(this.N,a);L(this.ba.ve({alpha:m,antialias:m}),function(){L(this.M.ve(),function(){Tn(this.N);vm(this);_gaq.push(["_trackEvent","game","setup_succeeded"]);if(this.Ef.host)_gaq.push(["_trackEvent","game","connect_to_host",this.Ef.host]),this.Tg(this.Ef.host);else{this.Kb&&(this.Kb=m);var a=new zm(this,this.F.Ia);Sn(this.N,a)}},function(a){Xn(this,"Unable to setup graphics resources",a)},this)},function(a){Xn(this,"Unable to create the graphics context",
a)},this)};function Xn(a,b,c){_gaq.push(["_trackEvent","game","setup_fail",b]);Tn(a.N);a=tl(a.N,a.F.Ia,"setup",b,c||l);L(a,function(a){"reload"==a&&window.location.reload()},l,g)}s.update=function(a){this.N.update(a)};s.A=function(a){this.N.A(a)};s.ha=function(){this.Wa.Xa||Vd(this.zg,"click",Dd)};function im(a){a.Wa.Xa||Vd(a.zg,"player_leave",Dd)}
s.mo=function(){this.ha();var a=!this.F.Ih,b=this.F;if(b.Ih){if(b.Wd){var c=b.d.R;(c.cancelFullScreen||c.mozCancelFullScreen||c.webkitCancelFullScreen).call(c);b.Ih=m}}else b.Wd&&(b=b.Ia,(b.requestFullScreen||b.mozRequestFullScreen||b.webkitRequestFullScreen).call(b,Element.ALLOW_KEYBOARD_INPUT));this.Kb&&(a&&this.C.K.Fi&&this.Wa.ob)&&un(this.C.K)};function om(a){a.Kb&&a.C.ia(m);var b=new Cm(a.d,a.F.Ia,a.Wa);ul(a.N,b);L(b.Wb,function(a){this.ha();"save"==a&&Wn(this);this.Kb&&this.C.ia(i)},l,a)}
function pm(a){function b(){this.ha();this.Kb&&this.C.ia(i)}a.Kb&&a.C.ia(m);var c=new xm(a.d,a.F.Ia);ul(a.N,c);L(c.Wb,b,b,a)}
s.Tg=function(a){var b,c=this.N,d=new sl(c.d,this.F.Ia,pl,{or:a});ul(c,d);b=d.Wb;c=new tf;d=new Nb(a);""!=d.fc&&""!=d.ad&&""!=d.Rf||c.G('Invalid address format: "'+a+'"');var e=new Pn,f=new zi;f.Q=Ai(this.Wa.userName);if(!c.Gb)switch(d.fc){case "ws":this.Bm(d,e,f,c);break;case "local":this.Am(d,e,f,c);break;default:c.G('Unsupported scheme "'+d.fc+'"')}L(c,function(c){J("Connection established to "+a);b.cancel();this.Kb=i;c=new um(this,c);Sn(this.N,c)},function(c){J("Error connecting to "+a,c);b.cancel();
var d=this.N;c=new sl(d.d,this.F.Ia,ql,{reason:c});ul(d,c);L(c.Wb,function(a){"reload"==a&&window.location.reload()},l,g)},this)};Vn.Lo=m;Vn.prototype.Am=function(a,b,c,d){if(Jf){var e=new tf;t.webkitStorageInfo?t.webkitStorageInfo.requestQuota(1,4294967296,function(a){e.D(a)},function(a){e.G(a)}):e.G(l);L(e,function(e){4294967296>e?d.G(l):this.Lh(a,b,c,d)},function(){J("unable to get quota - no saving!");this.Lh(a,b,c,d)},this)}else this.Lh(a,b,c,d)};
Vn.prototype.Lh=function(a,b,c,d){if(t.Worker){a="server-"+a.ad+"";var e;Vn.Lo&&this.Ef.Br&&Jf&&t.SharedWorker?(a=new SharedWorker("worker-server.js",a),e=a.port):e=a=new Worker("worker-server.js");a.onerror=function(a){J("Error in worker: "+a.message+"("+a.filename+":"+a.ss+")")};L(On(e,c),function(a){e.addEventListener("message",function(a){if(a.data instanceof Object&&"gf_log"==a.data.type){var b=a.data.args;b.unshift("{server}");window.console.log.apply(window.console,b);a.stopPropagation()}},
i);d.D(a)},function(a){d.G(a)})}else d.G("Workers not supported")};Vn.prototype.Bm=function(a,b,c,d){a=On(a.toString(),c);L(a,d.D,d.G,d)};Vn=mf(Vn,"blk.game.client.ClientGame",{Tg:"connectToHost",Am:"connectToLocalHost_",Lh:"launchLocalServer_",Bm:"connectToRemoteHost_"});function Yn(a){this.R=a}var Zn=/\s*;\s*/;s=Yn.prototype;s.set=function(a,b,c,d,e,f){/[;=\s]/.test(a)&&aa(Error('Invalid cookie name "'+a+'"'));/[;\r\n]/.test(b)&&aa(Error('Invalid cookie value "'+b+'"'));w(c)||(c=-1);e=e?";domain="+e:"";d=d?";path="+d:"";f=f?";secure":"";c=0>c?"":0==c?";expires="+(new Date(1970,1,1)).toUTCString():";expires="+(new Date(ta()+1E3*c)).toUTCString();this.R.cookie=a+"="+b+e+d+c+f};
s.get=function(a,b){for(var c=a+"=",d=(this.R.cookie||"").split(Zn),e=0,f;f=d[e];e++){if(0==f.lastIndexOf(c,0))return f.substr(c.length);if(f==a)return""}return b};s.remove=function(a,b,c){var d=this.rc(a);this.set(a,"",0,b,c);return d};s.hd=function(){return $n(this).keys};s.Jb=function(){return $n(this).Pr};s.nb=function(){return!this.R.cookie?0:(this.R.cookie||"").split(Zn).length};s.rc=function(a){return w(this.get(a))};s.clear=function(){for(var a=$n(this).keys,b=a.length-1;0<=b;b--)this.remove(a[b])};
function $n(a){a=(a.R.cookie||"").split(Zn);for(var b=[],c=[],d,e,f=0;e=a[f];f++)d=e.indexOf("="),-1==d?(b.push(""),c.push(e)):(b.push(e.substring(0,d)),c.push(e.substring(d+1)));return{keys:b,Pr:c}};function ao(a){this.jb=a;this.userName="User";this.ka=1;this.ob=i;this.Bb=bo;this.ac=this.Xa=m}var bo=X.Sl;ao.prototype.r=function(){var a=new ao(this.jb);a.userName=this.userName;a.ka=this.ka;a.ob=this.ob;a.Bb=this.Bb;a.Xa=this.Xa;a.ac=this.ac;return a};ao.prototype.reset=function(){this.userName="User";this.ka=1;this.ob=i;this.Bb=bo;this.ac=this.Xa=m};
ao.prototype.load=function(){var a=new Yn(this.jb.R);this.userName=a.get("s_un",this.userName);this.userName=decodeURIComponent(this.userName.replace(/\+/g," "));1>this.userName.length&&(this.userName="User");this.ka=Number(a.get("s_ms",String(this.ka)));if(0>=this.ka||10<this.ka)this.ka=1;this.ob="true"==a.get("s_ml",String(this.ob));this.Bb=Number(a.get("s_vd",String(this.Bb)))|0;if(this.Bb<=X.ij||this.Bb>X.hj)this.Bb=bo;this.Xa="true"==a.get("s_sm",String(this.Xa));this.ac="true"==a.get("s_mm",
String(this.ac))};ao.prototype.save=function(){var a=new Yn(this.jb.R);a.set("s_un",encodeURIComponent(String(this.userName)),31104E3,"/");a.set("s_ms",String(this.ka),31104E3,"/");a.set("s_ml",String(this.ob),31104E3,"/");a.set("s_vd",String(this.Bb),31104E3,"/");a.set("s_sm",String(this.Xa),31104E3,"/");a.set("s_mm",String(this.ac),31104E3,"/")};fa("blk.client.start",function(a,b,c,d){a=new Od(a);c=new ec(c,d);d=new ao(a);d.load();(new Vn(a,c,d)).start()});
