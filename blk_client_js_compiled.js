function g(a){throw a;}var i=void 0,l=!0,m=null,q=!1;function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function s(a){return function(){return this[a]}}function ca(a){return function(){return a}}var t,da=da||{},v=this;function ea(a,b){var c=a.split("."),d=v;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&y(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function fa(a){a=a.split(".");for(var b=v,c;c=a.shift();)if(b[c]!=m)b=b[c];else return m;return b}function A(){}function ga(a){return a}
function ha(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function y(a){return a!==i}function ia(a){return"array"==ha(a)}function ka(a){var b=ha(a);return"array"==b||"object"==b&&"number"==typeof a.length}function B(a){return"string"==typeof a}function la(a){return"function"==ha(a)}function ma(a){var b=typeof a;return"object"==b&&a!=m||"function"==b}function na(a){return a[oa]||(a[oa]=++pa)}var oa="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),pa=0;
function qa(a,b,c){return a.call.apply(a.bind,arguments)}function ra(a,b,c){a||g(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function C(a,b,c){C=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?qa:ra;return C.apply(m,arguments)}
function sa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var ta=Date.now||function(){return+new Date};function D(a,b){function c(){}c.prototype=b.prototype;a.a=b.prototype;a.prototype=new c};var ua=!!v.wtf&&2==v.wtf.trace.API_VERSION,va=ua?v.wtf.trace.leaveScope:function(a,b){return b},wa=ua?v.wtf.trace.appendScopeData:A,xa=ua?v.wtf.trace.beginTimeRange:A,ya=ua?v.wtf.trace.endTimeRange:A,za=ua?v.wtf.trace.events.createScope:function(){return A},Aa=ua?v.wtf.trace.instrument:ga,Ba=ua?v.wtf.trace.instrumentType:ga;function Ca(a){Error.captureStackTrace?Error.captureStackTrace(this,Ca):this.stack=Error().stack||"";a&&(this.message=String(a))}D(Ca,Error);Ca.prototype.name="CustomError";function Da(a){return a.replace(/\xa0|\s/g," ")}function Ea(a){return a.replace(/\xa0|[ \t]+/g," ")}function Fa(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function Ha(a){if(!Ia.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Ja,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Ka,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(La,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ma,"&quot;"));return a}var Ja=/&/g,Ka=/</g,La=/>/g,Ma=/\"/g,Ia=/[&<>\"]/;
function Na(a,b){var c=y(b)?a.toFixed(b):String(a),d=c.indexOf(".");-1==d&&(d=c.length);d=Math.max(0,1-d);return Array(d+1).join("0")+c};var Oa=Array.prototype,Pa=Oa.indexOf?function(a,b,c){return Oa.indexOf.call(a,b,c)}:function(a,b,c){c=c==m?0:0>c?Math.max(0,a.length+c):c;if(B(a))return!B(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Qa=Oa.forEach?function(a,b,c){Oa.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=B(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Ra=Oa.filter?function(a,b,c){return Oa.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,
h=B(a)?a.split(""):a,j=0;j<d;j++)if(j in h){var k=h[j];b.call(c,k,j,a)&&(e[f++]=k)}return e},Sa=Oa.some?function(a,b,c){return Oa.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=B(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return l;return q};function E(a,b){var c=Pa(a,b),d;(d=0<=c)&&Oa.splice.call(a,c,1);return d}function Ta(a){return Oa.concat.apply(Oa,arguments)}function Ua(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}
function Va(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c],e;if(ia(d)||(e=ka(d))&&Object.prototype.hasOwnProperty.call(d,"callee"))a.push.apply(a,d);else if(e)for(var f=a.length,h=d.length,j=0;j<h;j++)a[f+j]=d[j];else a.push(d)}}function Wa(a,b){Oa.sort.call(a,b||Xa)}function Xa(a,b){return a>b?1:a<b?-1:0};function Ya(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function Za(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function $a(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function jb(a){for(var b in a)delete a[b]}function kb(a,b){var c;(c=b in a)&&delete a[b];return c}function lb(a){var b={},c;for(c in a)b[c]=a[c];return b}var mb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function nb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<mb.length;f++)c=mb[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function ob(a){if("function"==typeof a.Jb)return a.Jb();if(B(a))return a.split("");if(ka(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Za(a)}function pb(a,b,c){if("function"==typeof a.forEach)a.forEach(b,c);else if(ka(a)||B(a))Qa(a,b,c);else{var d;if("function"==typeof a.Zb)d=a.Zb();else if("function"!=typeof a.Jb)if(ka(a)||B(a)){d=[];for(var e=a.length,f=0;f<e;f++)d.push(f)}else d=$a(a);else d=i;for(var e=ob(a),f=e.length,h=0;h<f;h++)b.call(c,e[h],d&&d[h],a)}};var qb="StopIteration"in v?v.StopIteration:Error("StopIteration");function rb(){}rb.prototype.next=function(){g(qb)};rb.prototype.sj=function(){return this};function sb(a){if(a instanceof rb)return a;if("function"==typeof a.sj)return a.sj(q);if(ka(a)){var b=0,c=new rb;c.next=function(){for(;;){b>=a.length&&g(qb);if(b in a)return a[b++];b++}};return c}g(Error("Not implemented"))};function tb(a,b){this.r={};this.h=[];var c=arguments.length;if(1<c){c%2&&g(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){a instanceof tb?(c=a.Zb(),d=a.Jb()):(c=$a(a),d=Za(a));for(var e=0;e<c.length;e++)this.set(c[e],d[e])}}t=tb.prototype;t.i=0;t.pg=0;t.Ua=s("i");t.Jb=function(){ub(this);for(var a=[],b=0;b<this.h.length;b++)a.push(this.r[this.h[b]]);return a};t.Zb=function(){ub(this);return this.h.concat()};
t.tc=function(a){return vb(this.r,a)};t.clear=function(){this.r={};this.pg=this.i=this.h.length=0};t.remove=function(a){return vb(this.r,a)?(delete this.r[a],this.i--,this.pg++,this.h.length>2*this.i&&ub(this),l):q};function ub(a){if(a.i!=a.h.length){for(var b=0,c=0;b<a.h.length;){var d=a.h[b];vb(a.r,d)&&(a.h[c++]=d);b++}a.h.length=c}if(a.i!=a.h.length){for(var e={},c=b=0;b<a.h.length;)d=a.h[b],vb(e,d)||(a.h[c++]=d,e[d]=1),b++;a.h.length=c}}t.get=function(a,b){return vb(this.r,a)?this.r[a]:b};
t.set=function(a,b){vb(this.r,a)||(this.i++,this.h.push(a),this.pg++);this.r[a]=b};t.s=function(){return new tb(this)};t.sj=function(a){ub(this);var b=0,c=this.h,d=this.r,e=this.pg,f=this,h=new rb;h.next=function(){for(;;){e!=f.pg&&g(Error("The map has changed since the iterator was created"));b>=c.length&&g(qb);var h=c[b++];return a?h:d[h]}};return h};function vb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};var wb,xb,yb,zb,Ab,Bb,Cb;function Db(){return v.navigator?v.navigator.userAgent:m}Ab=zb=yb=xb=wb=q;var Eb;if(Eb=Db()){var Fb=v.navigator;wb=0==Eb.indexOf("Opera");xb=!wb&&-1!=Eb.indexOf("MSIE");zb=(yb=!wb&&-1!=Eb.indexOf("WebKit"))&&-1!=Eb.indexOf("Mobile");Ab=!wb&&!yb&&"Gecko"==Fb.product}var Gb=wb,F=xb,Hb=Ab,Ib=yb,Jb=zb,Kb,Lb=v.navigator;Kb=Lb&&Lb.platform||"";Bb=-1!=Kb.indexOf("Mac");Cb=-1!=Kb.indexOf("Win");var Mb=-1!=Kb.indexOf("Linux");
function Nb(){var a=v.document;return a?a.documentMode:i}var Ob;a:{var Pb="",Qb;if(Gb&&v.opera)var Rb=v.opera.version,Pb="function"==typeof Rb?Rb():Rb;else if(Hb?Qb=/rv\:([^\);]+)(\)|;)/:F?Qb=/MSIE\s+([^\);]+)(\)|;)/:Ib&&(Qb=/WebKit\/(\S+)/),Qb)var Sb=Qb.exec(Db()),Pb=Sb?Sb[1]:"";if(F){var Tb=Nb();if(Tb>parseFloat(Pb)){Ob=String(Tb);break a}}Ob=Pb}var Ub={};
function Vb(a){var b;if(!(b=Ub[a])){b=0;for(var c=Fa(String(Ob)).split("."),d=Fa(String(a)).split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var h=c[f]||"",j=d[f]||"",k=RegExp("(\\d*)(\\D*)","g"),n=RegExp("(\\d*)(\\D*)","g");do{var p=k.exec(h)||["","",""],r=n.exec(j)||["","",""];if(0==p[0].length&&0==r[0].length)break;b=((0==p[1].length?0:parseInt(p[1],10))<(0==r[1].length?0:parseInt(r[1],10))?-1:(0==p[1].length?0:parseInt(p[1],10))>(0==r[1].length?0:parseInt(r[1],10))?1:0)||((0==p[2].length)<
(0==r[2].length)?-1:(0==p[2].length)>(0==r[2].length)?1:0)||(p[2]<r[2]?-1:p[2]>r[2]?1:0)}while(0==b)}b=Ub[a]=0<=b}return b}var Wb=v.document,Xb=!Wb||!F?i:Nb()||("CSS1Compat"==Wb.compatMode?parseInt(Ob,10):5);var Yb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function Zb(a,b){var c;if(a instanceof Zb)this.Va=y(b)?b:a.Va,$b(this,a.gc),c=a.bj,ac(this),this.bj=c,c=a.cd,ac(this),this.cd=c,bc(this,a.Vf),c=a.fi,ac(this),this.fi=c,cc(this,a.Jc.s()),c=a.Ch,ac(this),this.Ch=c;else if(a&&(c=String(a).match(Yb))){this.Va=!!b;$b(this,c[1]||"",l);var d=c[2]||"";ac(this);this.bj=d?decodeURIComponent(d):"";d=c[3]||"";ac(this);this.cd=d?decodeURIComponent(d):"";bc(this,c[4]);d=c[5]||"";ac(this);this.fi=d?decodeURIComponent(d):"";cc(this,c[6]||"",l);c=c[7]||"";ac(this);
this.Ch=c?decodeURIComponent(c):""}else this.Va=!!b,this.Jc=new dc(m,0,this.Va)}t=Zb.prototype;t.gc="";t.bj="";t.cd="";t.Vf=m;t.fi="";t.Ch="";t.fr=q;t.Va=q;
t.toString=function(){var a=[],b=this.gc;b&&a.push(ec(b,fc),":");if(b=this.cd){a.push("//");var c=this.bj;c&&a.push(ec(c,fc),"@");a.push(encodeURIComponent(String(b)));b=this.Vf;b!=m&&a.push(":",String(b))}if(b=this.fi)this.cd&&"/"!=b.charAt(0)&&a.push("/"),a.push(ec(b,"/"==b.charAt(0)?gc:hc));(b=this.Jc.toString())&&a.push("?",b);(b=this.Ch)&&a.push("#",ec(b,ic));return a.join("")};t.s=function(){return new Zb(this)};
function $b(a,b,c){ac(a);a.gc=c?b?decodeURIComponent(b):"":b;a.gc&&(a.gc=a.gc.replace(/:$/,""))}function bc(a,b){ac(a);b?(b=Number(b),(isNaN(b)||0>b)&&g(Error("Bad port number "+b)),a.Vf=b):a.Vf=m}function cc(a,b,c){ac(a);b instanceof dc?(a.Jc=b,a.Jc.zl(a.Va)):(c||(b=ec(b,jc)),a.Jc=new dc(b,0,a.Va))}function ac(a){a.fr&&g(Error("Tried to modify a read-only Uri"))}t.zl=function(a){this.Va=a;this.Jc&&this.Jc.zl(a);return this};function ec(a,b){return B(a)?encodeURI(a).replace(b,kc):m}
function kc(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var fc=/[#\/\?@]/g,hc=/[\#\?:]/g,gc=/[\#\?]/g,jc=/[\#\?@]/g,ic=/#/g;function dc(a,b,c){this.Ea=a||m;this.Va=!!c}function lc(a){if(!a.J&&(a.J=new tb,a.i=0,a.Ea))for(var b=a.Ea.split("&"),c=0;c<b.length;c++){var d=b[c].indexOf("="),e=m,f=m;0<=d?(e=b[c].substring(0,d),f=b[c].substring(d+1)):e=b[c];e=decodeURIComponent(e.replace(/\+/g," "));e=mc(a,e);a.add(e,f?decodeURIComponent(f.replace(/\+/g," ")):"")}}t=dc.prototype;
t.J=m;t.i=m;t.Ua=function(){lc(this);return this.i};t.add=function(a,b){lc(this);this.Ea=m;a=mc(this,a);var c=this.J.get(a);c||this.J.set(a,c=[]);c.push(b);this.i++;return this};t.remove=function(a){lc(this);a=mc(this,a);return this.J.tc(a)?(this.Ea=m,this.i-=this.J.get(a).length,this.J.remove(a)):q};t.clear=function(){this.J=this.Ea=m;this.i=0};t.tc=function(a){lc(this);a=mc(this,a);return this.J.tc(a)};
t.Zb=function(){lc(this);for(var a=this.J.Jb(),b=this.J.Zb(),c=[],d=0;d<b.length;d++)for(var e=a[d],f=0;f<e.length;f++)c.push(b[d]);return c};t.Jb=function(a){lc(this);var b=[];if(a)this.tc(a)&&(b=Ta(b,this.J.get(mc(this,a))));else{a=this.J.Jb();for(var c=0;c<a.length;c++)b=Ta(b,a[c])}return b};t.set=function(a,b){lc(this);this.Ea=m;a=mc(this,a);this.tc(a)&&(this.i-=this.J.get(a).length);this.J.set(a,[b]);this.i++;return this};
t.get=function(a,b){var c=a?this.Jb(a):[];return 0<c.length?String(c[0]):b};t.toString=function(){if(this.Ea)return this.Ea;if(!this.J)return"";for(var a=[],b=this.J.Zb(),c=0;c<b.length;c++)for(var d=b[c],e=encodeURIComponent(String(d)),d=this.Jb(d),f=0;f<d.length;f++){var h=e;""!==d[f]&&(h+="="+encodeURIComponent(String(d[f])));a.push(h)}return this.Ea=a.join("&")};t.s=function(){var a=new dc;a.Ea=this.Ea;this.J&&(a.J=this.J.s(),a.i=this.i);return a};
function mc(a,b){var c=String(b);a.Va&&(c=c.toLowerCase());return c}t.zl=function(a){a&&!this.Va&&(lc(this),this.Ea=m,pb(this.J,function(a,c){var d=c.toLowerCase();c!=d&&(this.remove(c),this.remove(d),0<a.length&&(this.Ea=m,this.J.set(mc(this,d),Ua(a)),this.i+=a.length))},this));this.Va=a};t.extend=function(a){for(var b=0;b<arguments.length;b++)pb(arguments[b],function(a,b){this.add(b,a)},this)};function nc(a,b,c){this.Bg=a;nb(this.Bg,{buildServer:{help:"Build server daemon address.",type:String,defaultValue:m}});this.uri=new Zb(b);this.Xf=new dc(i,0,l);(a=this.uri.Jc)&&this.Xf.extend(a);this.Xf.extend(c);this.Hs=oc(this,"buildServer")}function pc(a,b){var c=parseFloat(a.Bg[b].defaultValue),d=a.Xf.get(b,c);return!y(d)?c:Number(d)}function oc(a,b){var c=a.Bg[b].defaultValue,d=a.Xf.get(b,c);return!y(d)||!d||!d.length||/^[\s\xa0]*$/.test(String(d))?c:String(d)};function qc(a,b){nc.call(this,{simulatedLatency:{help:"Extra latency, in ms, to add to send/recv.",type:Number,defaultValue:0},userName:{help:"User name for multiplayer.",type:String,defaultValue:m},host:{help:"Host endpoint for connections.",type:String,defaultValue:m},sharedWorkers:{help:"Whether to enable shared web workers.",type:Number,defaultValue:1},demo:{help:"Run in demo mode.",type:Boolean,defaultValue:q}},a,b);this.jc=pc(this,"simulatedLatency");this.host=oc(this,"host");this.as=pc(this,
"sharedWorkers");var c;a:switch(c=this.Bg.demo.defaultValue,this.Xf.get("demo",c)){case i:case "":break a;case 0:case "0":case q:case "false":c=q;break a;default:c=l}this.Zp=c||q}D(qc,nc);var rc;var sc=v.performance;rc=sc&&sc.now?function(){return sc.now()}:sc&&sc.webkitNow?function(){return sc.webkitNow()}:i;var tc=rc?rc:Date.now;function uc(a,b,c){this.type=a;this.path=b;this.size=c}function vc(a,b){return a.size-b.size};function G(){0!=wc&&(this.Ms=Error().stack,xc[na(this)]=this)}var wc=0,xc={};G.prototype.$j=q;G.prototype.$e=function(){if(!this.$j&&(this.$j=l,this.b(),0!=wc)){var a=na(this);delete xc[a]}};function H(a,b){a.hh||(a.hh=[]);a.hh.push(b)}G.prototype.b=function(){this.hh&&yc.apply(m,this.hh);if(this.Vn)for(;this.Vn.length;)this.Vn.shift()()};function I(a){a&&"function"==typeof a.$e&&a.$e()}function yc(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];ka(d)?yc.apply(m,d):I(d)}};function zc(a,b,c){G.call(this);this.name=a;this.xr=b;this.hl=this.bm=0;this.Jk=m;this.qb=c;for(a=0;a<this.qb.length;a++)this.bm+=this.qb[a].am;Wa(this.qb,Ac)}D(zc,G);function Bc(a){if(a.qb.length){if(1==a.qb.length)return a.qb[0]}else return m;switch(a.xr){case 0:return Cc(a,l);case 1:return Cc(a,q);case 2:var b=a.qb[a.hl];a.hl=(a.hl+1)%a.qb.length;return b;default:return Cc(a,l)}}
function Cc(a,b){for(var c=0;5>c;c++){for(var d=m,e=Math.random()*a.bm,f=0;f<a.qb.length;f++){d=a.qb[f];if(e<d.am)break;e-=d.am}if(b||d!=a.Jk)return a.Jk=d}return a.Jk||a.qb[0]}function J(a,b){this.start=a;this.duration=b;this.am=y(i)?i:1;this.Xn=0}function Ac(a,b){return a.Xn-b.Xn};var Dc=!F||F&&9<=Xb,Ec=F&&!Vb("9");!Ib||Vb("528");Hb&&Vb("1.9b")||F&&Vb("8")||Gb&&Vb("9.5")||Ib&&Vb("528");Hb&&!Vb("8")||F&&Vb("9");function Fc(a,b){this.type=a;this.currentTarget=this.target=b}t=Fc.prototype;t.b=aa();t.$e=aa();t.sd=q;t.defaultPrevented=q;t.ri=l;t.stopPropagation=function(){this.sd=l};t.preventDefault=function(){this.defaultPrevented=l;this.ri=q};function Gc(a){Gc[" "](a);return a}Gc[" "]=A;function Hc(a,b){a&&this.Ec(a,b)}D(Hc,Fc);t=Hc.prototype;t.target=m;t.relatedTarget=m;t.offsetX=0;t.offsetY=0;t.clientX=0;t.clientY=0;t.screenX=0;t.screenY=0;t.button=0;t.keyCode=0;t.charCode=0;t.ctrlKey=q;t.altKey=q;t.shiftKey=q;t.metaKey=q;t.vr=q;t.zc=m;
t.Ec=function(a,b){var c=this.type=a.type;Fc.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(Hb){var e;a:{try{Gc(d.nodeName);e=l;break a}catch(f){}e=q}e||(d=m)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=Ib||a.offsetX!==i?a.offsetX:a.layerX;this.offsetY=Ib||a.offsetY!==i?a.offsetY:a.layerY;this.clientX=a.clientX!==i?a.clientX:a.pageX;this.clientY=a.clientY!==i?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.vr=Bb?a.metaKey:a.ctrlKey;this.state=a.state;this.zc=a;a.defaultPrevented&&this.preventDefault();delete this.sd};t.stopPropagation=function(){Hc.a.stopPropagation.call(this);this.zc.stopPropagation?this.zc.stopPropagation():this.zc.cancelBubble=l};
t.preventDefault=function(){Hc.a.preventDefault.call(this);var a=this.zc;if(a.preventDefault)a.preventDefault();else if(a.returnValue=q,Ec)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};t.b=aa();function Ic(){}var Jc=0;t=Ic.prototype;t.key=0;t.vd=q;t.Vg=q;t.Ec=function(a,b,c,d,e,f){la(a)?this.En=l:a&&a.handleEvent&&la(a.handleEvent)?this.En=q:g(Error("Invalid listener argument"));this.listener=a;this.io=b;this.src=c;this.type=d;this.capture=!!e;this.Hh=f;this.Vg=q;this.key=++Jc;this.vd=q};t.handleEvent=function(a){return this.En?this.listener.call(this.Hh||this.src,a):this.listener.handleEvent.call(this.listener,a)};var Kc={},Lc={},Mc={},Nc={};
function Oc(a,b,c,d,e){if(ia(b)){for(var f=0;f<b.length;f++)Oc(a,b[f],c,d,e);return m}a:{b||g(Error("Invalid event type"));d=!!d;var h=Lc;b in h||(h[b]={i:0,Wa:0});h=h[b];d in h||(h[d]={i:0,Wa:0},h.i++);var h=h[d],f=na(a),j;h.Wa++;if(h[f]){j=h[f];for(var k=0;k<j.length;k++)if(h=j[k],h.listener==c&&h.Hh==e){if(h.vd)break;j[k].Vg=q;a=j[k].key;break a}}else j=h[f]=[],h.i++;var n=Pc,p=Dc?function(a){return n.call(p.src,p.key,a)}:function(a){a=n.call(p.src,p.key,a);if(!a)return a},k=p;k.src=a;h=new Ic;
h.Ec(c,k,a,b,d,e);h.Vg=q;c=h.key;k.key=c;j.push(h);Kc[c]=h;Mc[f]||(Mc[f]=[]);Mc[f].push(h);a.addEventListener?(a==v||!a.Um)&&a.addEventListener(b,k,d):a.attachEvent(b in Nc?Nc[b]:Nc[b]="on"+b,k);a=c}return a}function Qc(a,b,c,d,e){if(ia(b))for(var f=0;f<b.length;f++)Qc(a,b[f],c,d,e);else if(d=!!d,a=Rc(a,b,d))for(f=0;f<a.length;f++)if(a[f].listener==c&&a[f].capture==d&&a[f].Hh==e){Sc(a[f].key);break}}
function Sc(a){if(!Kc[a])return q;var b=Kc[a];if(b.vd)return q;var c=b.src,d=b.type,e=b.io,f=b.capture;c.removeEventListener?(c==v||!c.Um)&&c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(d in Nc?Nc[d]:Nc[d]="on"+d,e);c=na(c);Mc[c]&&(e=Mc[c],E(e,b),0==e.length&&delete Mc[c]);b.vd=l;if(b=Lc[d][f][c])b.Rn=l,Tc(d,f,c,b);delete Kc[a];return l}
function Tc(a,b,c,d){if(!d.Zh&&d.Rn){for(var e=0,f=0;e<d.length;e++)d[e].vd?d[e].io.src=m:(e!=f&&(d[f]=d[e]),f++);d.length=f;d.Rn=q;0==f&&(delete Lc[a][b][c],Lc[a][b].i--,0==Lc[a][b].i&&(delete Lc[a][b],Lc[a].i--),0==Lc[a].i&&delete Lc[a])}}function Rc(a,b,c){var d=Lc;return b in d&&(d=d[b],c in d&&(d=d[c],a=na(a),d[a]))?d[a]:m}
function Uc(a,b,c,d,e){var f=1;b=na(b);if(a[b]){a.Wa--;a=a[b];a.Zh?a.Zh++:a.Zh=1;try{for(var h=a.length,j=0;j<h;j++){var k=a[j];k&&!k.vd&&(f&=Vc(k,e)!==q)}}finally{a.Zh--,Tc(c,d,b,a)}}return Boolean(f)}function Vc(a,b){a.Vg&&Sc(a.key);return a.handleEvent(b)}
function Pc(a,b){if(!Kc[a])return l;var c=Kc[a],d=c.type,e=Lc;if(!(d in e))return l;var e=e[d],f,h;if(!Dc){f=b||fa("window.event");var j=l in e,k=q in e;if(j){if(0>f.keyCode||f.returnValue!=i)return l;a:{var n=q;if(0==f.keyCode)try{f.keyCode=-1;break a}catch(p){n=l}if(n||f.returnValue==i)f.returnValue=l}}n=new Hc;n.Ec(f,this);f=l;try{if(j){for(var r=[],w=n.currentTarget;w;w=w.parentNode)r.push(w);h=e[l];h.Wa=h.i;for(var u=r.length-1;!n.sd&&0<=u&&h.Wa;u--)n.currentTarget=r[u],f&=Uc(h,r[u],d,l,n);if(k){h=
e[q];h.Wa=h.i;for(u=0;!n.sd&&u<r.length&&h.Wa;u++)n.currentTarget=r[u],f&=Uc(h,r[u],d,q,n)}}else f=Vc(c,n)}finally{r&&(r.length=0)}return f}d=new Hc(b,this);return f=Vc(c,d)}var Wc=0;function Xc(a){G.call(this);this.vn=a;this.h=[]}D(Xc,G);var Yc=[];Xc.prototype.listen=function(a,b,c,d,e){ia(b)||(Yc[0]=b,b=Yc);for(var f=0;f<b.length;f++){var h=Oc(a,b[f],c||this,d||q,e||this.vn||this);this.h.push(h)}return this};function Zc(a,b,c,d,e,f){if(ia(c))for(var h=0;h<c.length;h++)Zc(a,b,c[h],d,e,f);else{a:{d=d||a;f=f||a.vn||a;e=!!e;if(b=Rc(b,c,e))for(c=0;c<b.length;c++)if(!b[c].vd&&b[c].listener==d&&b[c].capture==e&&b[c].Hh==f){b=b[c];break a}b=m}b&&(b=b.key,Sc(b),E(a.h,b))}}
function $c(a){Qa(a.h,Sc);a.h.length=0}Xc.prototype.b=function(){Xc.a.b.call(this);$c(this)};Xc.prototype.handleEvent=function(){g(Error("EventHandler.handleEvent not implemented"))};function ad(){G.call(this);this.S=new Xc(this);H(this,this.S)}D(ad,G);ad.prototype.load=function(a){a.D(m)};ad.prototype.cancel=A;function bd(){G.call(this)}D(bd,G);t=bd.prototype;t.Um=l;t.fl=m;t.addEventListener=function(a,b,c,d){Oc(this,a,b,c,d)};t.removeEventListener=function(a,b,c,d){Qc(this,a,b,c,d)};
t.dispatchEvent=function(a){var b=a.type||a,c=Lc;if(b in c){if(B(a))a=new Fc(a,this);else if(a instanceof Fc)a.target=a.target||this;else{var d=a;a=new Fc(b,this);nb(a,d)}var d=1,e,c=c[b],b=l in c,f;if(b){e=[];for(f=this;f;f=f.fl)e.push(f);f=c[l];f.Wa=f.i;for(var h=e.length-1;!a.sd&&0<=h&&f.Wa;h--)a.currentTarget=e[h],d&=Uc(f,e[h],a.type,l,a)&&a.ri!=q}if(q in c)if(f=c[q],f.Wa=f.i,b)for(h=0;!a.sd&&h<e.length&&f.Wa;h++)a.currentTarget=e[h],d&=Uc(f,e[h],a.type,q,a)&&a.ri!=q;else for(e=this;!a.sd&&e&&
f.Wa;e=e.fl)a.currentTarget=e,d&=Uc(f,e,a.type,q,a)&&a.ri!=q;a=Boolean(d)}else a=l;return a};t.b=function(){bd.a.b.call(this);var a=0;if(this!=m){var b=na(this);if(Mc[b])for(var b=Mc[b],c=b.length-1;0<=c;c--)Sc(b[c].key),a++}else Ya(Kc,function(b,c){Sc(c);a++});this.fl=m};var cd=v.window;function dd(a,b,c){la(a)?c&&(a=C(a,c)):a&&"function"==typeof a.handleEvent?a=C(a.handleEvent,a):g(Error("Invalid listener argument"));return 2147483647<b?-1:cd.setTimeout(a,b||0)};function ed(a){return fd(a||arguments.callee.caller,[])}
function fd(a,b){var c=[];if(0<=Pa(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(gd(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){0<e&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=String(f);break;case "boolean":f=f?"true":"false";break;case "function":f=(f=gd(f))?f:"[fn]";break;default:f=typeof f}40<f.length&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(fd(a.caller,b))}catch(h){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function gd(a){if(hd[a])return hd[a];a=String(a);if(!hd[a]){var b=/function ([^\(]+)/.exec(a);hd[a]=b?b[1]:"[Anonymous]"}return hd[a]}var hd={};function id(a,b,c,d,e){this.reset(a,b,c,d,e)}id.prototype.Nr=0;id.prototype.dn=m;id.prototype.cn=m;var jd=0;id.prototype.reset=function(a,b,c,d,e){this.Nr="number"==typeof e?e:jd++;this.kg=d||ta();this.Jf=a;this.nr=b;this.Us=c;delete this.dn;delete this.cn};id.prototype.uo=ba("Jf");function kd(a){this.or=a}kd.prototype.la=m;kd.prototype.Jf=m;kd.prototype.O=m;kd.prototype.xf=m;function ld(a,b){this.name=a;this.value=b}ld.prototype.toString=s("name");var md=new ld("SEVERE",1E3),nd=new ld("WARNING",900),od=new ld("INFO",800),pd=new ld("CONFIG",700),qd=new ld("FINE",500);t=kd.prototype;t.getParent=s("la");t.jn=function(){this.O||(this.O={});return this.O};t.uo=ba("Jf");function rd(a){return a.Jf?a.Jf:a.la?rd(a.la):m}
t.log=function(a,b,c){if(a.value>=rd(this).value){a=this.rq(a,b,c);b="log:"+a.nr;v.console&&(v.console.timeStamp?v.console.timeStamp(b):v.console.markTimeline&&v.console.markTimeline(b));v.msWriteProfilerMark&&v.msWriteProfilerMark(b);for(b=this;b;){c=b;var d=a;if(c.xf)for(var e=0,f=i;f=c.xf[e];e++)f(d);b=b.getParent()}}};
t.rq=function(a,b,c){var d=new id(a,String(b),this.or);if(c){d.dn=c;var e;var f=arguments.callee.caller;try{var h;var j=fa("window.location.href");if(B(c))h={message:c,name:"Unknown error",lineNumber:"Not available",fileName:j,stack:"Not available"};else{var k,n,p=q;try{k=c.lineNumber||c.Ss||"Not available"}catch(r){k="Not available",p=l}try{n=c.fileName||c.filename||c.sourceURL||j}catch(w){n="Not available",p=l}h=p||!c.lineNumber||!c.fileName||!c.stack?{message:c.message,name:c.name,lineNumber:k,
fileName:n,stack:c.stack||"Not available"}:c}e="Message: "+Ha(h.message)+'\nUrl: <a href="view-source:'+h.fileName+'" target="_new">'+h.fileName+"</a>\nLine: "+h.lineNumber+"\n\nBrowser stack:\n"+Ha(h.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+Ha(ed(f)+"-> ")}catch(u){e="Exception trying to expose exception! You win, we lose. "+u}d.cn=e}return d};t.info=function(a,b){this.log(od,a,b)};function sd(a,b){a.log(qd,b,i)}t.wj=function(a,b){this.jn()[a]=b};var td={},ud=m;
function vd(a){ud||(ud=new kd(""),td[""]=ud,ud.uo(pd));var b;if(!(b=td[a])){b=new kd(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=vd(a.substr(0,c));c.wj(d,b);b.la=c;td[a]=b}return b};function wd(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}g(Error("Invalid JSON string: "+a))};function xd(){}xd.prototype.Gm=m;function yd(a){var b;if(!(b=a.Gm))b={},zd(a)&&(b[0]=l,b[1]=l),b=a.Gm=b;return b};var Ad;function Bd(){}D(Bd,xd);Bd.prototype.Ve=function(){var a=zd(this);return a?new ActiveXObject(a):new XMLHttpRequest};
function zd(a){if(!a.xn&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.xn=d}catch(e){}}g(Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed"))}return a.xn}Ad=new Bd;function Cd(a){G.call(this);this.headers=new tb;this.nj=a||m}D(Cd,bd);Cd.prototype.ha=vd("goog.net.XhrIo");var Dd=/^https?$/i;t=Cd.prototype;t.eb=q;t.k=m;t.mj=m;t.Th="";t.Hn="";t.Df=0;t.Ef="";t.ek=q;t.Lh=q;t.yk=q;t.ld=q;t.lg=0;t.Dd=m;t.wd="";t.us=q;
t.send=function(a,b,c,d){this.k&&g(Error("[goog.net.XhrIo] Object is active with another request="+this.Th+"; newUri="+a));b=b?b.toUpperCase():"GET";this.Th=a;this.Ef="";this.Df=0;this.Hn=b;this.ek=q;this.eb=l;this.k=this.nj?this.nj.Ve():Ad.Ve();this.mj=this.nj?yd(this.nj):yd(Ad);this.k.onreadystatechange=C(this.Wn,this);try{sd(this.ha,Ed(this,"Opening Xhr")),this.yk=l,this.k.open(b,a,l),this.yk=q}catch(e){sd(this.ha,Ed(this,"Error opening Xhr: "+e.message));Fd(this,e);return}a=c||"";var f=this.headers.s();
d&&pb(d,function(a,b){f.set(b,a)});d=v.FormData&&a instanceof v.FormData;"POST"==b&&(!f.tc("Content-Type")&&!d)&&f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");pb(f,function(a,b){this.k.setRequestHeader(b,a)},this);this.wd&&(this.k.responseType=this.wd);"withCredentials"in this.k&&(this.k.withCredentials=this.us);try{this.Dd&&(cd.clearTimeout(this.Dd),this.Dd=m),0<this.lg&&(sd(this.ha,Ed(this,"Will abort after "+this.lg+"ms if incomplete")),this.Dd=cd.setTimeout(C(this.is,
this),this.lg)),sd(this.ha,Ed(this,"Sending request")),this.Lh=l,this.k.send(a),this.Lh=q}catch(h){sd(this.ha,Ed(this,"Send error: "+h.message)),Fd(this,h)}};t.is=function(){"undefined"!=typeof da&&this.k&&(this.Ef="Timed out after "+this.lg+"ms, aborting",this.Df=8,sd(this.ha,Ed(this,this.Ef)),this.dispatchEvent("timeout"),this.abort(8))};function Fd(a,b){a.eb=q;a.k&&(a.ld=l,a.k.abort(),a.ld=q);a.Ef=b;a.Df=5;Gd(a);Hd(a)}
function Gd(a){a.ek||(a.ek=l,a.dispatchEvent("complete"),a.dispatchEvent("error"))}t.abort=function(a){this.k&&this.eb&&(sd(this.ha,Ed(this,"Aborting")),this.eb=q,this.ld=l,this.k.abort(),this.ld=q,this.Df=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Hd(this))};t.b=function(){this.k&&(this.eb&&(this.eb=q,this.ld=l,this.k.abort(),this.ld=q),Hd(this,l));Cd.a.b.call(this)};t.Wn=function(){!this.yk&&!this.Lh&&!this.ld?this.tr():Id(this)};t.tr=function(){Id(this)};
function Id(a){if(a.eb&&"undefined"!=typeof da)if(a.mj[1]&&4==a.sf()&&2==Jd(a))sd(a.ha,Ed(a,"Local request error detected and ignored"));else if(a.Lh&&4==a.sf())cd.setTimeout(C(a.Wn,a),0);else if(a.dispatchEvent("readystatechange"),4==a.sf()){sd(a.ha,Ed(a,"Request complete"));a.eb=q;try{var b=Jd(a),c,d;a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:d=l;break a;default:d=q}if(!(c=d)){var e;if(e=0===b){var f=String(a.Th).match(Yb)[1]||m;if(!f&&self.location)var h=self.location.protocol,
f=h.substr(0,h.length-1);e=!Dd.test(f?f.toLowerCase():"")}c=e}if(c)a.dispatchEvent("complete"),a.dispatchEvent("success");else{a.Df=6;var j;try{j=2<a.sf()?a.k.statusText:""}catch(k){sd(a.ha,"Can not get status: "+k.message),j=""}a.Ef=j+" ["+Jd(a)+"]";Gd(a)}}finally{Hd(a)}}}
function Hd(a,b){if(a.k){var c=a.k,d=a.mj[0]?A:m;a.k=m;a.mj=m;a.Dd&&(cd.clearTimeout(a.Dd),a.Dd=m);b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){a.ha.log(md,"Problem encountered resetting onreadystatechange: "+e.message,i)}}}t.Dn=function(){return!!this.k};t.sf=function(){return this.k?this.k.readyState:0};function Jd(a){try{return 2<a.sf()?a.k.status:-1}catch(b){return a.ha.log(nd,"Can not get status: "+b.message,i),-1}}
function Kd(a){try{if(!a.k)return m;if("response"in a.k)return a.k.response;switch(a.wd){case "":case "text":return a.k.responseText;case "arraybuffer":if("mozResponseArrayBuffer"in a.k)return a.k.mozResponseArrayBuffer}a.ha.log(md,"Response type "+a.wd+" is not supported on this browser",i);return m}catch(b){return sd(a.ha,"Can not get response: "+b.message),m}}function Ed(a,b){return b+" ["+a.Hn+" "+a.Th+" "+Jd(a)+"]"};function Ld(a,b,c){ad.call(this);this.url=a;this.contentType=b;this.timeout=c||0;this.o=this.Ba=m}D(Ld,ad);Ld.prototype.load=function(a){this.o=a;this.Ba=new Cd;H(this,this.Ba);this.Ba.lg=Math.max(0,this.timeout);switch(this.contentType){default:case 0:case 1:this.Ba.wd="";break;case 2:this.Ba.wd="arraybuffer";break;case 3:this.Ba.wd="blob"}this.S.listen(this.Ba,"success",this.kd);this.S.listen(this.Ba,["abort","error","timeout"],this.uf);this.Ba.send(this.url)};
Ld.prototype.cancel=function(){this.Ba&&this.Ba.abort()};Ld.prototype.kd=function(){var a;switch(this.contentType){default:case 0:var b=this.Ba;try{a=b.k?b.k.responseText:""}catch(c){sd(b.ha,"Can not get responseText: "+c.message),a=""}break;case 1:a=this.Ba;a=a.k?wd(a.k.responseText):i;break;case 2:case 3:a=Kd(this.Ba)}this.o.D(a);this.o=m};Ld.prototype.uf=function(){this.o.G(m);this.o=m};var Md=v.postMessage?[v]:[];function L(a){for(var b=0;b<Md.length;b++){for(var c=Array(arguments.length),d=0;d<c.length;d++)c[d]=arguments[d];try{Md[b].postMessage({type:"gf_log",args:c},m)}catch(e){}}}if(v.console)var Nd=v.console,L=C(Nd.log,Nd);function Od(a,b,c,d){G.call(this);this.context=a;this.cue=c;this.Qo=d;this.Ic=this.Pc=m;a&&(a=a.createBufferSource(),a.buffer=b,this.Ic=this.Pc=a)}D(Od,G);Od.prototype.b=function(){this.Ic&&(this.Ic.disconnect(),this.Pc=this.Ic=m);Od.a.b.call(this)};Od.prototype.play=function(a){this.Pc&&this.Pc.noteGrainOn(a||0,this.Qo.start/1E3,this.Qo.duration/1E3)};function Pd(a,b,c,d){Od.call(this,a,b,c,d);this.Pc&&(this.Ic=this.Pc,this.Ic.connect(a.destination))}D(Pd,Od);
function Qd(a,b,c,d){Od.call(this,a,b,c,d);this.Sf=m;this.Pc&&(b=a.createPanner(),b.panningModel=0,b.distanceModel=2,b.refDistance=5,b.maxDistance=1E3,b.rolloffFactor=1.4,b.setPosition(0,0,0),b.setOrientation(0,0,0,0,0,0),b.setVelocity(0,0,0),this.Sf=b,this.Pc.connect(b),this.Ic=b,this.Ic.connect(a.destination))}D(Qd,Od);Qd.prototype.b=function(){this.Sf&&(this.Sf.disconnect(),this.Sf=m);Qd.a.b.call(this)};Qd.prototype.setPosition=function(a){var b=this.Sf;b&&b.setPosition(a[0],a[1],a[2])};var Rd,Sd=!Hb&&!F||F&&F&&9<=Xb||Hb&&Vb("1.9.1");F&&Vb("9");var Td=F||Gb||Ib;function Ud(a,b){this.width=a;this.height=b}t=Ud.prototype;t.s=function(){return new Ud(this.width,this.height)};t.Cg=function(){return this.width/this.height};t.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};t.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};t.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function Vd(a,b){var c=b||document;return c.querySelectorAll&&c.querySelector?c.querySelectorAll("."+a):c.getElementsByClassName?c.getElementsByClassName(a):Wd(a,b)}
function Wd(a,b){var c,d,e,f;c=document;c=b||c;if(c.querySelectorAll&&c.querySelector&&a)return c.querySelectorAll(""+(a?"."+a:""));if(a&&c.getElementsByClassName){var h=c.getElementsByClassName(a);return h}h=c.getElementsByTagName("*");if(a){f={};for(d=e=0;c=h[d];d++){var j=c.className;"function"==typeof j.split&&0<=Pa(j.split(/\s+/),a)&&(f[e++]=c)}f.length=e;return f}return h}
function Xd(a){a=a.document;a="CSS1Compat"==a.compatMode?a.documentElement:a.body;return new Ud(a.clientWidth,a.clientHeight)}function Yd(a){for(var b;b=a.firstChild;)a.removeChild(b)}function Zd(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function $d(a){this.R=a||v.document||document}function ae(a,b,c){c=(a=c||a.R)||document;var d=m;return(d=c.querySelectorAll&&c.querySelector?c.querySelector("."+b):Vd(b,a)[0])||m}t=$d.prototype;t.createElement=function(a){return this.R.createElement(a)};
t.createTextNode=function(a){return this.R.createTextNode(a)};t.appendChild=function(a,b){a.appendChild(b)};t.append=function(a,b){function c(a){a&&e.appendChild(B(a)?d.createTextNode(a):a)}for(var d=Zd(a),e=a,f=arguments,h=1;h<f.length;h++){var j=f[h];if(ka(j)&&!(ma(j)&&0<j.nodeType)){var k=Qa,n;a:{if((n=j)&&"number"==typeof n.length){if(ma(n)){n="function"==typeof n.item||"string"==typeof n.item;break a}if(la(n)){n="function"==typeof n.item;break a}}n=q}k(n?Ua(j):j,c)}else c(j)}};
t.removeNode=function(a){return a&&a.parentNode?a.parentNode.removeChild(a):m};t.jn=function(a){return Sd&&a.children!=i?a.children:Ra(a.childNodes,function(a){return 1==a.nodeType})};var be=["audio/mpeg","audio/ogg","audio/wav","audio/mp4"],ce=m;function de(a){for(var b=0;b<a.length;b++){var c=a[b],d=c.type;if(!ce){var e={},f=document.createElement("AUDIO");if(f&&f.canPlayType)for(var h=0;h<be.length;h++){var j=be[h];e[j]=!!f.canPlayType(j)}ce=e}if(ce[d])return c}return m};function ee(a){for(var b=arguments[0],c=1;c<arguments.length;c++){var d=arguments[c];if(0==d.lastIndexOf("/",0))b=d;else{var e;if(!(e=""==b))e=d.length-1,e=0<=e&&d.indexOf("/",e)==e;b=e?b+d:b+("/"+d)}}return b};function fe(a,b,c,d,e,f){G.call(this);this.Je=a;this.context=b;this.path=c;this.name=d||"Unknown";this.Rd=e||[];e&&(this.Rd=e,Wa(this.Rd,vc));this.Tm={};if(f)for(a=0;a<f.length;a++)b=f[a],this.Tm[b.name]=b;this.o=this.Cj=m}D(fe,G);t=fe.prototype;t.b=function(){this.o&&(this.o.cancel(),this.o=m);fe.a.b.call(this)};t.load=function(){this.Fj()};t.Fj=function(){if(this.context){var a=de(this.Rd);a&&(a=new Ld(ee(this.path,a.path),2),this.o=this.Je.load(a),ge(this.o,this.kd,this.handleError,this))}};
t.kd=function(a){this.o=m;var b=this.context;b&&b.decodeAudioData(a,C(ba("Cj"),this),C(function(){L("failed to load audio buffer data")},this))};t.handleError=function(){this.o=m};function he(a,b,c){if(!a.Cj)return m;var d;d=B(b)?a.Tm[b]:b;if(!d)return L("WARNING: cue "+b+" not found in bank "+a.name),m;b=Bc(d);if(!b)return m;a=new c(a.context,a.Cj,d,b);a.play();return a};function ie(a,b){fe.call(this,a,b,"../assets/audio/base","BaseSounds",[new uc("audio/wav","base_optimized.wav",137870),new uc("audio/ogg","base_optimized.ogg",16480),new uc("audio/mpeg","base_optimized.mp3",12955)],[new zc("player_leave",0,[new J(820,641)]),new zc("click",0,[new J(0,105)]),new zc("player_join",0,[new J(205,515)])])}D(ie,fe);function je(a){switch(a){case 1:return"OES_texture_float";case 2:return"OES_texture_half_float";case 3:return"WEBGL_lose_context";case 4:return"OES_standard_derivatives";case 5:return"OES_vertex_array_object";case 6:return"WEBGL_debug_renderer_info";case 7:return"WEBGL_debug_shaders";case 8:return"WEBGL_compressed_texture_s3tc";case 9:return"OES_depth_texture";case 10:return"OES_element_index_uint";case 11:return"EXT_texture_filter_anisotropic";default:return m}}
function ke(){this.mn=m;this.ig=Array(11);this.ik=Array(11)}ke.prototype.we=function(a){this.mn=a;a=a.getSupportedExtensions();for(var b=0;b<this.ig.length;b++){this.ig[b]=q;this.ik[b]=m;var c=je(b);if(c)for(var d=0;d<a.length;d++){var e=a[d],f=e.indexOf(c);if(-1!=f&&c.length==e.length-f){this.ig[b]=l;break}}}};ke.prototype.isSupported=function(a){return!!this.ig[a]};ke.prototype.enable=function(a){return!!this.get(a)};
ke.prototype.get=function(a){var b=this.ik[a];if(!b&&this.ig[a]){b=je(a);if(!b)return m;b=this.mn.getExtension(b);this.ik[a]=b}return b};function le(a,b,c){this.width=a;this.height=b;this.$c=15;this.Vh=c}
function me(a,b){var c=Fa(b.type),d,e,f=c.indexOf(";");-1!=f?(d=c.substr(0,f),e=Fa(c.substr(f+1))):(d=c,e="");switch(a.$c){case ne:c="a";break;case oe:c="ra";break;case pe:c="rgb";break;case qe:c="rgba";break;default:return m}switch(d){case "image/gif":f="gif";break;case "image/jpeg":f="jpeg";break;case "image/png":f="png";break;case "image/webp":f="webp";break;case "application/octet-stream":f=m;break;default:return m}e=e.split(",");for(var h=0;h<e.length;h++){var j=e[h].split("=");if(!(2>j.length)){var k=
Fa(j[0]).toLowerCase(),j=Fa(j[1]).toLowerCase();"codec"==k?f=j:"format"==k&&(c=j)}}if(!f)return m;e=6408;h=m;switch(f){case "s3tc.dxt1":h=8;switch(c){case "rgb":e=33776;break;case "rgba":e=33777;break;default:return m}break;case "s3tc.dxt3":h=8;e=33778;if("rgba"!=c)return m;break;case "s3tc.dxt5":h=8;e=33779;if("rgba"!=c)return m;break;default:switch(c){case "a":e=6406;break;case "ra":e=6410;break;case "rgb":e=6407;break;case "rgba":e=6408;break;default:return m}}return new re(d,f,c,e,h)}
var ne=8,oe=9,pe=7,qe=15;function re(a,b,c,d,e){this.Tp=a;this.Ks=b;this.iq=c;this.Xc=d;this.dt=e};function se(a,b){ad.call(this);this.d=a;this.url=b;this.o=this.ya=this.crossOrigin=m}D(se,ad);t=se.prototype;t.b=function(){$c(this.S);this.ya&&(this.ya.src="",this.ya=m);se.a.b.call(this)};t.load=function(a){this.o=a;this.ya=this.d.createElement("IMG");this.crossOrigin&&(this.ya.crossOrigin=this.crossOrigin);this.S.listen(this.ya,"load",this.kd);this.S.listen(this.ya,["abort","error"],this.uf);this.ya.src=this.url};
t.cancel=function(){this.ya&&($c(this.S),this.ya.src="",this.ya=m,this.o.G(m),this.o=m)};t.kd=function(){var a=this.ya;this.ya=m;this.o.D(a);this.o=m};t.uf=function(){this.ya=m;this.o.G(m);this.o=m};function te(a){G.call(this);this.g=a;this.qo=String(ue++);a=this.g;a.Ld[this.qo]=this;a.Nk++}D(te,G);te.prototype.b=function(){var a=this.g;kb(a.Ld,this.qo);a.Nk--;this.w();te.a.b.call(this)};var ue=0;te.prototype.w=A;te.prototype.restore=A;function ve(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}ve.prototype.BYTES_PER_ELEMENT=4;ve.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};ve.prototype.toString=Array.prototype.join;"undefined"==typeof Float32Array&&(ve.BYTES_PER_ELEMENT=4,ve.prototype.BYTES_PER_ELEMENT=ve.prototype.BYTES_PER_ELEMENT,ve.prototype.set=ve.prototype.set,ve.prototype.toString=ve.prototype.toString,ea("Float32Array",ve));function we(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}we.prototype.BYTES_PER_ELEMENT=8;we.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};we.prototype.toString=Array.prototype.join;if("undefined"==typeof Float64Array){try{we.BYTES_PER_ELEMENT=8}catch(xe){}we.prototype.BYTES_PER_ELEMENT=we.prototype.BYTES_PER_ELEMENT;we.prototype.set=we.prototype.set;we.prototype.toString=we.prototype.toString;ea("Float64Array",we)};function N(){return new Float32Array(4)}function ye(a,b,c,d){var e=N();ze(e,a,b,c,d);return e}function ze(a,b,c,d,e){a[0]=b;a[1]=c;a[2]=d;a[3]=e}function Ae(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3]}function Be(a,b){var c=1/256;b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c;b[3]=a[3]*c}function Ce(a,b){return a.length==b.length&&a[0]==b[0]&&a[1]==b[1]&&a[2]==b[2]&&a[3]==b[3]};function De(a,b,c,d){te.call(this,a);this.width=b;this.height=c;this.iq=d;this.bd=0;this.Tk=9986;this.Pk=9729;this.xs=this.ws=10497;this.hr=1;this.handle=this.Gi=m}D(De,te);De.prototype.w=function(){this.g.f.deleteTexture(this.handle);this.handle=m;De.a.w.call(this)};De.prototype.restore=function(){var a=this.g.f;De.a.restore.call(this);this.handle&&a.deleteTexture(this.handle);this.handle=a.createTexture();this.bd=4294967295};
De.prototype.bind=function(){var a=this.g.f;a.bindTexture(3553,this.handle);var b=this.bd;this.bd=0;b&1&&a.texParameteri(3553,10241,this.Tk);b&2&&a.texParameteri(3553,10240,this.Pk);b&4&&a.texParameteri(3553,10242,this.ws);b&8&&a.texParameteri(3553,10243,this.xs);b&16&&this.g.yh.isSupported(11)&&a.texParameteri(3553,34046,this.hr)};function Ee(a){9728!=a.Tk&&(a.bd|=1,a.Tk=9728);9728!=a.Pk&&(a.bd|=2,a.Pk=9728)}
function Fe(a,b,c){a.Gi=[];b=a.width/b;c=a.height/c;for(var d=0,e=0;d<c;d++)for(var f=d/c,h=0;h<b;h++,e++){var j=h/b;a.Gi[e]=ye(j,f,j+1/b,f+1/c)}}function Ge(a,b,c){a.Gi&&(a=a.Gi[b])&&Ae(c,a);return c};function He(a,b,c,d,e){De.call(this,b,e?e.width:1,e?e.height:1,6408);this.Je=a;this.path=c;this.name=d;this.yn=this.zf=m;this.er=q;this.o=m;if(e){this.zf=e;this.width=e.width;this.height=e.height;for(a=0;a<this.zf.Vh.length;a++)Wa(this.zf.Vh[a],vc)}}D(He,De);t=He.prototype;t.b=function(){this.o&&(this.o.cancel(),this.o=m);He.a.b.call(this)};t.restore=function(){He.a.restore.call(this);this.o||this.load()};t.load=function(){this.Fj()};
t.Fj=function(){var a=this.Je.d,b;a:{var c=this.zf;b=this.g;var d;d=Math.min(Math.max(0,0),c.Vh.length-1);d=c.Vh[d];for(var e=0;e<d.length;e++){var f=d[e],h=me(c,f);if(h&&("image/webp"!=h.Tp||b.kk.Fl)){switch(h.Xc){case 33776:case 33777:case 33778:case 33779:if(!b.kk.Co)continue}b=f;break a}}b=m}if(b&&(c=me(this.zf,b))){this.yn=c;b=ee(this.path,b.path);d=m;a:switch(c.Xc){case 33776:case 33777:case 33778:case 33779:c=l;break a;default:c=q}d=c?new Ld(b,2):new se(a,b);this.o=this.Je.load(d);ge(this.o,
this.kd,this.handleError,this)}};t.kd=function(a){this.o=m;Ie(this,a)};t.handleError=function(){this.o=m;var a=this.g.d.createElement("CANVAS");a.width=16;a.height=16;var b=a.getContext("2d");b.fillStyle="rgb(255,0,0)";b.fillRect(0,0,a.width,a.height);Ie(this,a)};
function Ie(a,b){var c=a.g.f;Je(a.g,a);a.handle.Q=a.name;var d=a.width,e=a.height,f=a.yn;if(b instanceof HTMLCanvasElement||b instanceof HTMLImageElement)c.texImage2D(3553,0,f.Xc,f.Xc,5121,b);else if(b instanceof ArrayBuffer)switch(f.Xc){default:c.texImage2D(3553,0,f.Xc,d,e,0,f.Xc,5121,b);break;case 33776:case 33777:case 33778:case 33779:c.compressedTexImage2D(3553,0,f.Xc,d,e,0,b)}a.er=l};function Ke(a,b){He.call(this,a,b,"../assets/blocksets","simple",new le(256,256,[[new uc("image/png","simple.png",23183)]]));Fe(this,16,16)}D(Ke,He);function Le(a,b,c,d){te.call(this,a);this.Aj=b;this.lineHeight=c;this.Kn=2;this.Op=0;this.nn=[];for(a=0;a<d.length;a+=4){c=d[a];var e=0;c.length?e=c.charCodeAt(0):(e=c,c=String.fromCharCode(e));var f=d[a+1],h=d[a+2],j=d[a+3],k=Ge(b,a/4,N());this.nn[e]=new Me(c,f,h,j,k)}}D(Le,te);
function Ne(a,b,c,d,e){b.ea(c.length);for(var f=1/a.Aj.width,h=1/a.Aj.height,j=0,k=0,n=0,p=0,r=l,w=0,u=0;u<c.length;u++){var z=c[u];if("\r"!=z)if("\n"==z)k=Math.max(j+w,k),w=j=0,n+=a.lineHeight+a.Kn,p+=a.Kn,r=l;else if(z=a.nn[z.charCodeAt(0)])r?p=Math.max(p,a.lineHeight):j+=a.Op+w,w=z.Lp,j+=z.up,b.add(z.Do[0],z.Do[1],z.Dj*f,a.lineHeight*h,d,0+j,e+n,z.Dj,a.lineHeight),j+=z.Dj,r=q}k=Math.max(j+w,k);return[k,p]}function Me(a,b,c,d,e){this.Js=a;this.up=b;this.Dj=c;this.Lp=d;this.Do=e};function Oe(a,b,c){a=new He(b,c,"../assets/fonts","monospace",new le(128,128,[[new uc("image/png","monospace.png",1256)]]));Fe(a,8,8);Ee(a);Le.call(this,c,a,8,Pe);H(this,a)}D(Oe,Le);
var Pe=[0,0,8,0,1,0,8,0,2,0,8,0,3,0,8,0,4,0,8,0,5,0,8,0,6,0,8,0,7,0,8,0,8,0,8,0,9,0,8,0,10,0,8,0,11,0,8,0,12,0,8,0,13,0,8,0,14,0,8,0,15,0,8,0,16,0,8,0,17,0,8,0,18,0,8,0,19,0,8,0,20,0,8,0,21,0,8,0,22,0,8,0,23,0,8,0,24,0,8,0,25,0,8,0,26,0,8,0,27,0,8,0,28,0,8,0,29,0,8,0,30,0,8,0,31,0,8,0," ",0,8,0,"!",0,8,0,'"',0,8,0,"#",0,8,0,"$",0,8,0,"%",0,8,0,"&",0,8,0,"'",0,8,0,"(",0,8,0,")",0,8,0,"*",0,8,0,"+",0,8,0,",",0,8,0,"-",0,8,0,".",0,8,0,"/",0,8,0,"0",0,8,0,"1",0,8,0,"2",0,8,0,"3",0,8,0,"4",0,8,0,"5",0,
8,0,"6",0,8,0,"7",0,8,0,"8",0,8,0,"9",0,8,0,":",0,8,0,";",0,8,0,"<",0,8,0,"=",0,8,0,">",0,8,0,"?",0,8,0,"@",0,8,0,"A",0,8,0,"B",0,8,0,"C",0,8,0,"D",0,8,0,"E",0,8,0,"F",0,8,0,"G",0,8,0,"H",0,8,0,"I",0,8,0,"J",0,8,0,"K",0,8,0,"L",0,8,0,"M",0,8,0,"N",0,8,0,"O",0,8,0,"P",0,8,0,"Q",0,8,0,"R",0,8,0,"S",0,8,0,"T",0,8,0,"U",0,8,0,"V",0,8,0,"W",0,8,0,"X",0,8,0,"Y",0,8,0,"Z",0,8,0,"[",0,8,0,"\\",0,8,0,"]",0,8,0,"^",0,8,0,"_",0,8,0,"`",0,8,0,"a",0,8,0,"b",0,8,0,"c",0,8,0,"d",0,8,0,"e",0,8,0,"f",0,8,0,"g",0,
8,0,"h",0,8,0,"i",0,8,0,"j",0,8,0,"k",0,8,0,"l",0,8,0,"m",0,8,0,"n",0,8,0,"o",0,8,0,"p",0,8,0,"q",0,8,0,"r",0,8,0,"s",0,8,0,"t",0,8,0,"u",0,8,0,"v",0,8,0,"w",0,8,0,"x",0,8,0,"y",0,8,0,"z",0,8,0,"{",0,8,0,"|",0,8,0,"}",0,8,0,"~",0,8,0,"\u2302",0,8,0,"\u00c7",0,8,0,"\u00fc",0,8,0,"\u00e9",0,8,0,"\u00e2",0,8,0,"\u00e4",0,8,0,"\u00e0",0,8,0,"\u00e5",0,8,0,"\u00e7",0,8,0,"\u00ea",0,8,0,"\u00eb",0,8,0,"\u00e8",0,8,0,"\u00ef",0,8,0,"\u00ee",0,8,0,"\u00ec",0,8,0,"\u00c4",0,8,0,"\u00c5",0,8,0,"\u00c9",0,8,
0,"\u00e6",0,8,0,"\u00c6",0,8,0,"\u00f4",0,8,0,"\u00f6",0,8,0,"\u00f2",0,8,0,"\u00fb",0,8,0,"\u00f9",0,8,0,"\u00ff",0,8,0,"\u00d6",0,8,0,"\u00dc",0,8,0,"\u00f8",0,8,0,"\u00a3",0,8,0,"\u00d8",0,8,0,"\u00d7",0,8,0,"\u0192",0,8,0,"\u00e1",0,8,0,"\u00ed",0,8,0,"\u00f3",0,8,0,"\u00fa",0,8,0,"\u00f1",0,8,0,"\u00d1",0,8,0,"\u00aa",0,8,0,"\u00ba",0,8,0,"\u00bf",0,8,0,"\u00ae",0,8,0,"\u00ac",0,8,0,"\u00bd",0,8,0,"\u00bc",0,8,0,"\u00a1",0,8,0,"\u00ab",0,8,0,"\u00bb",0,5,0];function Qe(a,b,c,d){te.call(this,a);this.name=b;this.Ro=c||m;this.hn=d||m;this.nd=this.handle=this.jd=this.Fd=m}D(Qe,te);t=Qe.prototype;t.load=function(){this.restore()};t.w=function(){var a=this.g.f;this.Fd&&(a.deleteShader(this.Fd),this.Fd=m);this.jd&&(a.deleteShader(this.jd),this.jd=m);this.handle&&(a.deleteProgram(this.handle),this.handle=m);Qe.a.w.call(this)};t.restore=function(){Re(this);this.Gb()};
function Re(a){a.Ro&&a.hn&&(a.nd=m,a.Fd=a.createShader(35633,a.Ro),a.jd=a.createShader(35632,a.hn),a.Fd&&a.jd&&(a.handle=a.createProgram(a.Fd,a.jd)))}t.Gb=function(){var a;if(!(a=!Se(this,35633,this.Fd)))if(!(a=!Se(this,35632,this.jd))){a=this.handle;var b=this.g.f,c=Fa(b.getProgramInfoLog(a));if(c&&c.length){this.nd=this.nd||[];for(var d=c.split("\n"),e=0;e<d.length;e++){var f=d[e];f.length&&this.nd.push(f)}L("program "+this.name+":"+c)}a=!b.getProgramParameter(a,35714)}return a?(this.w(),q):l};
t.createShader=function(a,b){var c=this.g.f,d=c.createShader(a);if(!d)return m;c.shaderSource(d,b);c.compileShader(d);return d};function Se(a,b,c){var d=a.g.f,e=Fa(d.getShaderInfoLog(c));if(e&&e.length){a.nd=a.nd||[];for(var f=e.split("\n"),h=0;h<f.length;h++){var j=f[h];j.length&&a.nd.push(j)}L("shader "+a.name+"/"+b+":"+e)}return!!d.getShaderParameter(c,35713)}
t.createProgram=function(a,b){var c=this.g.f,d=c.createProgram();if(!d)return m;c.attachShader(d,a);c.attachShader(d,b);this.Cp(d);c.linkProgram(d);return d};t.Cp=A;function Te(a,b,c){Qe.call(this,a,"FaceProgram",b,c);this.uj=this.pa=this.Id=-1;this.Yi=this.Sc=this.Ll=this.Ml=this.Kl=this.Mo=this.vb=this.wb=this.oa=m}D(Te,Qe);Te.prototype.w=function(){this.uj=this.pa=this.Id=-1;this.Yi=this.Sc=this.Ll=this.Ml=this.Kl=this.Mo=this.vb=this.wb=this.oa=m;Te.a.w.call(this)};
function Ue(a){Te.call(this,a,"precision highp float;uniform mat4 a,d;uniform vec2 b;uniform vec3 c,e,f,g;attribute vec3 j,k;varying vec3 h;void n(){float m=max(dot(j,f),0.);h=e+g*m;}varying vec4 i;attribute vec4 l;void main(){gl_Position=a*vec4(k,1);i=l;n();}","precision mediump float;uniform mat4 a,d;uniform vec2 b,k;uniform vec3 c,e,f,g;vec4 o(vec4 l){float m,n;m=gl_FragCoord.z/gl_FragCoord.w;n=1.-smoothstep(b.x,b.y,m);return vec4(mix(c.rgb,l.rgb,n).rgb,l.a);}varying vec3 h;vec4 p(vec4 l){return vec4(l.rgb*h,l.a);}varying vec4 i;uniform sampler2D j;void main(){vec2 l=(i.xy+1.)/k;vec4 m,n;m=texture2D(j,l);if(m.a==0.)discard;n=m+i.z;gl_FragColor=o(p(n));}")}
D(Ue,Te);
Ue.prototype.Gb=function(){var a=this.g.f;if(!Ue.a.Gb.call(this)||!this.handle)return q;this.Id=a.getAttribLocation(this.handle,"j");this.pa=a.getAttribLocation(this.handle,"k");this.uj=a.getAttribLocation(this.handle,"l");this.oa=a.getUniformLocation(this.handle,"a");this.wb=a.getUniformLocation(this.handle,"b");this.vb=a.getUniformLocation(this.handle,"c");this.Mo=a.getUniformLocation(this.handle,"d");this.Kl=a.getUniformLocation(this.handle,"e");this.Ml=a.getUniformLocation(this.handle,"f");this.Ll=
a.getUniformLocation(this.handle,"g");this.Sc=a.getUniformLocation(this.handle,"j");this.Yi=a.getUniformLocation(this.handle,"k");return l};function Ve(a,b,c){Qe.call(this,a,"LineProgram",b,c);this.Yc=this.pa=-1;this.vb=this.wb=this.oa=m}D(Ve,Qe);Ve.prototype.w=function(){this.Yc=this.pa=-1;this.vb=this.wb=this.oa=m;Ve.a.w.call(this)};
function We(a){Ve.call(this,a,"precision highp float;uniform mat4 a;uniform vec2 b;uniform vec3 c;varying vec4 d;attribute vec3 e;attribute vec4 f;void main(){gl_Position=a*vec4(e,1);d=f;}","precision mediump float;uniform mat4 a;uniform vec2 b;uniform vec3 c;vec4 h(vec4 e){float f,g;f=gl_FragCoord.z/gl_FragCoord.w;g=1.-smoothstep(b.x,b.y,f);return vec4(mix(c.rgb,e.rgb,g).rgb,e.a);}varying vec4 d;void main(){gl_FragColor=h(d);}")}D(We,Ve);
We.prototype.Gb=function(){var a=this.g.f;if(!We.a.Gb.call(this)||!this.handle)return q;this.pa=a.getAttribLocation(this.handle,"e");this.Yc=a.getAttribLocation(this.handle,"f");this.oa=a.getUniformLocation(this.handle,"a");this.wb=a.getUniformLocation(this.handle,"b");this.vb=a.getUniformLocation(this.handle,"c");return l};function Xe(a,b,c){Qe.call(this,a,"ModelProgram",b,c);this.jm=this.Id=this.pa=-1;this.Sc=this.Lo=this.Ol=this.Nl=this.vb=this.wb=this.oa=m}D(Xe,Qe);Xe.prototype.w=function(){this.jm=this.Id=this.pa=-1;this.Sc=this.Lo=this.Ol=this.Nl=this.vb=this.wb=this.oa=m;Xe.a.w.call(this)};
function Ye(a){Xe.call(this,a,"precision highp float;uniform mat4 a,d,e,f[20];uniform vec2 b;uniform vec3 c;vec4 l(vec3 k){return d*e*vec4(k,1);}varying vec2 g;attribute vec3 h,i;attribute vec2 j;void main(){gl_Position=l(h);g=j;}","precision mediump float;uniform mat4 a,d,e,f[20];uniform vec2 b;uniform vec3 c;vec4 l(vec4 i){float j,k;j=gl_FragCoord.z/gl_FragCoord.w;k=1.-smoothstep(b.x,b.y,j);return vec4(mix(c.rgb,i.rgb,k).rgb,i.a);}varying vec2 g;uniform sampler2D h;void main(){vec4 i=texture2D(h,g);if(i.a==0.)discard;gl_FragColor=l(i);}")}
D(Ye,Xe);
Ye.prototype.Gb=function(){var a=this.g.f;if(!Ye.a.Gb.call(this)||!this.handle)return q;this.pa=a.getAttribLocation(this.handle,"h");this.Id=a.getAttribLocation(this.handle,"i");this.jm=a.getAttribLocation(this.handle,"j");this.oa=a.getUniformLocation(this.handle,"a");this.wb=a.getUniformLocation(this.handle,"b");this.vb=a.getUniformLocation(this.handle,"c");this.Nl=a.getUniformLocation(this.handle,"d");this.Ol=a.getUniformLocation(this.handle,"e");this.Lo=a.getUniformLocation(this.handle,"f");this.Sc=
a.getUniformLocation(this.handle,"h");return l};function Ze(a,b,c){Qe.call(this,a,"SpriteProgram",b,c);this.Yc=this.tj=this.pa=-1;this.Xi=this.Sc=this.oa=m}D(Ze,Qe);Ze.prototype.w=function(){this.Yc=this.tj=this.pa=-1;this.Xi=this.Sc=this.oa=m;Ze.a.w.call(this)};
function $e(a){Ze.call(this,a,"precision highp float;uniform mat4 a;varying vec2 b;varying vec4 c;attribute vec3 d;attribute vec2 e;attribute vec4 f;void main(){gl_Position=a*vec4(d,1);b=e;c=f;}","precision mediump float;uniform mat4 a;varying vec2 b;varying vec4 c;uniform sampler2D d;uniform vec4 e;void main(){vec4 f,g;f=texture2D(d,b);g=f*c*e;if(g.a==0.)discard;gl_FragColor=g;}")}D($e,Ze);
$e.prototype.Gb=function(){var a=this.g.f;if(!$e.a.Gb.call(this)||!this.handle)return q;this.pa=a.getAttribLocation(this.handle,"d");this.tj=a.getAttribLocation(this.handle,"e");this.Yc=a.getAttribLocation(this.handle,"f");this.oa=a.getUniformLocation(this.handle,"a");this.Sc=a.getUniformLocation(this.handle,"d");this.Xi=a.getUniformLocation(this.handle,"e");return l};function af(a,b){He.call(this,a,b,"../assets/textures","ui",new le(256,256,[[new uc("image/png","ui.png",949)]]));Fe(this,16,16)}D(af,He);function O(){return new Float32Array(3)}function bf(a,b,c){var d=O();Q(d,a,b,c);return d}function Q(a,b,c,d){a[0]=b;a[1]=c;a[2]=d}function cf(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2]}function df(a,b,c){c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2]}function ef(a,b,c){c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b}function ff(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)}function gf(a,b){var c=a[0]-b[0],d=a[1]-b[1],e=a[2]-b[2];return c*c+d*d+e*e}
function hf(a,b,c){var d=b[0]-a[0],e=b[1]-a[1];a=b[2]-a[2];(b=Math.sqrt(d*d+e*e+a*a))?(b=1/b,c[0]=d*b,c[1]=e*b,c[2]=a*b):c[0]=c[1]=c[2]=0}function jf(a,b){return a.length==b.length&&a[0]==b[0]&&a[1]==b[1]&&a[2]==b[2]};function kf(){return new Float32Array(16)}function lf(){var a=kf();a[0]=a[5]=a[10]=a[15]=1;return a}function mf(a,b,c,d,e,f,h,j,k){a[0]=b;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=d;a[11]=e;a[12]=f;a[13]=h;a[14]=j;a[15]=k}
function nf(a,b,c){var d=a[0],e=a[1],f=a[2],h=a[3],j=a[4],k=a[5],n=a[6],p=a[7],r=a[8],w=a[9],u=a[10],z=a[11],x=a[12],M=a[13],K=a[14];a=a[15];var V=b[0],ja=b[1],Ga=b[2],ab=b[3],bb=b[4],cb=b[5],db=b[6],eb=b[7],fb=b[8],gb=b[9],hb=b[10],ib=b[11],P=b[12],of=b[13],pf=b[14];b=b[15];c[0]=d*V+j*ja+r*Ga+x*ab;c[1]=e*V+k*ja+w*Ga+M*ab;c[2]=f*V+n*ja+u*Ga+K*ab;c[3]=h*V+p*ja+z*Ga+a*ab;c[4]=d*bb+j*cb+r*db+x*eb;c[5]=e*bb+k*cb+w*db+M*eb;c[6]=f*bb+n*cb+u*db+K*eb;c[7]=h*bb+p*cb+z*db+a*eb;c[8]=d*fb+j*gb+r*hb+x*ib;c[9]=
e*fb+k*gb+w*hb+M*ib;c[10]=f*fb+n*gb+u*hb+K*ib;c[11]=h*fb+p*gb+z*hb+a*ib;c[12]=d*P+j*of+r*pf+x*b;c[13]=e*P+k*of+w*pf+M*b;c[14]=f*P+n*of+u*pf+K*b;c[15]=h*P+p*of+z*pf+a*b}
function qf(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],h=a[4],j=a[5],k=a[6],n=a[7],p=a[8],r=a[9],w=a[10],u=a[11],z=a[12],x=a[13],M=a[14],K=a[15],V=c*j-d*h,ja=c*k-e*h,Ga=c*n-f*h,ab=d*k-e*j,bb=d*n-f*j,cb=e*n-f*k,db=p*x-r*z,eb=p*M-w*z,fb=p*K-u*z,gb=r*M-w*x,hb=r*K-u*x,ib=w*K-u*M,P=V*ib-ja*hb+Ga*gb+ab*fb-bb*eb+cb*db;0!=P&&(P=1/P,b[0]=(j*ib-k*hb+n*gb)*P,b[1]=(-d*ib+e*hb-f*gb)*P,b[2]=(x*cb-M*bb+K*ab)*P,b[3]=(-r*cb+w*bb-u*ab)*P,b[4]=(-h*ib+k*fb-n*eb)*P,b[5]=(c*ib-e*fb+f*eb)*P,b[6]=(-z*cb+M*Ga-K*ja)*P,b[7]=(p*cb-
w*Ga+u*ja)*P,b[8]=(h*hb-j*fb+n*db)*P,b[9]=(-c*hb+d*fb-f*db)*P,b[10]=(z*bb-x*Ga+K*V)*P,b[11]=(-p*bb+r*Ga-u*V)*P,b[12]=(-h*gb+j*eb-k*db)*P,b[13]=(c*gb-d*eb+e*db)*P,b[14]=(-z*ab+x*ja-M*V)*P,b[15]=(p*ab-r*ja+w*V)*P)}function rf(a,b,c){var d=b[0],e=b[1];b=b[2];c[0]=d*a[0]+e*a[4]+b*a[8]+a[12];c[1]=d*a[1]+e*a[5]+b*a[9]+a[13];c[2]=d*a[2]+e*a[6]+b*a[10]+a[14]}function sf(a,b,c){var d=b[0],e=b[1];b=b[2];c[0]=d*a[0]+e*a[4]+b*a[8];c[1]=d*a[1]+e*a[5]+b*a[9];c[2]=d*a[2]+e*a[6]+b*a[10]}
function tf(a,b,c){var d=b[0],e=b[1];b=b[2];var f=1/(d*a[3]+e*a[7]+b*a[11]+a[15]);c[0]=(d*a[0]+e*a[4]+b*a[8]+a[12])*f;c[1]=(d*a[1]+e*a[5]+b*a[9]+a[13])*f;c[2]=(d*a[2]+e*a[6]+b*a[10]+a[14])*f}new Float64Array(3);new Float64Array(3);new Float64Array(4);new Float64Array(4);new Float64Array(4);new Float64Array(16);function R(a){G.call(this);this.ec=a;this.g=a.g;this.Wd=24576;this.c=new ArrayBuffer(this.Wd*R.tg);this.Cn=new Int8Array(this.c);this.Ql=new Uint8Array(this.c);this.kf=0}D(R,G);R.$o=2;R.vg=6;R.ug=10;R.rj=4;R.tg=R.rj*R.ug;R.qp=0;R.pp=3;R.tp=6;
R.cq=new Int8Array([0,0,1,0,0,1,1,1,0,0,1,0,1,0,0,1,0,1,0,0,1,1,1,0,0,1,0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,-1,0,1,0,0,0,1,0,0,0,-1,0,0,0,0,1,1,0,0,0,-1,1,0,0,0,1,0,0,0,0,-1,1,1,0,0,0,1,0,0,1,0,1,0,0,0,0,1,1,0,1,0,1,1,0,0,1,1,1,0,1,0,0,1,0,0,1,1,0,0,1,0,0,0,0,0,0,0,0,0,-1,0,0,0,0,0,1,0,0,0,-1,0,1,0,0,0,1,0,1,0,-1,0,1,1,0,0,0,0,1,0,-1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,1,0,1,0,0,0,0,0,0,1,1,1,1,0,0,1,0,0,0,1,0,1,1,0,0,1,1,0,0,0,0,0,-1,0,0,1,1,0,0,0,0,1,-1,0,0,0,1,0,0,0,1,1,-1,0,0,0,0,0,0,0,1,0,-1,0,
0,1,0,0,0]);R.Rm=function(a){for(var b=a.createBuffer(),c=Math.floor(65535/R.vg),d=c*R.vg,e=new Uint16Array([0,1,2,0,2,3]),d=new Uint16Array(d),f=0,h=0,j=0;f<c;f++){for(var k=0;k<e.length;k++)d[h+k]=e[k]+j;h+=e.length;j+=R.rj}a.bindBuffer(34963,b);a.bufferData(34963,d,35044);a.bindBuffer(34963,m);return b};R.prototype.ea=function(a){a=Math.max(this.Wd,this.kf+a);return a>this.Wd?this.Vd(a):l};
R.prototype.Vd=function(a){a=Math.ceil(a||this.Wd*R.$o);if(a>=65535/R.vg)return q;var b=new ArrayBuffer(a*R.tg);(new Uint8Array(b)).set(new Uint8Array(this.c));this.Wd=a;this.c=b;this.Cn=new Int8Array(this.c);this.Ql=new Uint8Array(this.c);return l};
function uf(a,b,c,d,e,f){for(var h=a.kf++;h>=a.Wd;)if(!a.Vd())return;var j=R.cq;b*=40;var k=a.Cn;a=a.Ql;for(var h=h*R.tg,n=0,p=0;n<R.rj;n++,p+=10)k[h+p+0]=j[b+p+0]+c,k[h+p+1]=j[b+p+1]+d,k[h+p+2]=j[b+p+2]+e,k[h+p+3]=j[b+p+3],k[h+p+4]=j[b+p+4],k[h+p+5]=j[b+p+5],a[h+p+6]=j[b+p+6]?255*f[2]:255*f[0],a[h+p+7]=j[b+p+7]?255*f[3]:255*f[1],a[h+p+8]=j[b+p+8],a[h+p+9]=j[b+p+9]}
R.prototype.finish=function(a){var b=this.g.f,c=this.kf*R.tg,d=this.kf*R.vg;if(!c)return a&&b.deleteBuffer(a),{buffer:m,cf:0,Em:0};a=a||b.createBuffer();b.bindBuffer(34962,a);b.bufferData(34962,this.Ql.subarray(0,c),35048);b={buffer:a,cf:d,Em:c};this.kf=0;return b};
R.prototype.uc=function(a,b,c,d){var e=this.g.f,f=this.ec.Ac;if(d){var h=R.Ti;nf(a.Wc,b,h);e.uniformMatrix4fv(f.oa,q,h);e.bindBuffer(34962,c);e.vertexAttribPointer(f.pa,3,5120,q,R.ug,R.qp);e.vertexAttribPointer(f.Id,3,5120,q,R.ug,R.pp);e.vertexAttribPointer(f.uj,4,5121,q,R.ug,R.tp);e.drawElements(4,d,5123,0)}};R.Ti=kf();R=Ba(R,"blk.graphics.BlockBuilder",{Rm:"createIndexBuffer",Vd:"expand_",finish:"finish"});function vf(a){G.call(this);this.M=a;this.ga=[]}D(vf,G);vf.prototype.flush=function(a){this.M.rm(q);var b=this.M.g.f;b.uniformMatrix4fv(this.M.Lf.Nl,q,a.Wc);a=this.M.Lf.Ol;for(var c=0;c<this.ga.length;c++){var d=this.ga[c],e=d.ar,d=d.transform;b.uniformMatrix4fv(a,q,d);e.A(d)}this.ga.length=0;wf(this.M.g,m)};vf=Ba(vf,"blk.graphics.RenderList",{flush:"flush"});function xf(){this.Kg=q;this.Lg=this.Mg=32774;this.Qg=1;this.Og=0;this.Pg=1;this.Ng=0;this.blendColor=N();this.colorMask=yf}var yf=15;xf.prototype.od=function(a,b){this!=b&&(b?this.pd(a,b):this.Hc(a))};
xf.prototype.Hc=function(a){this.Kg?a.enable(3042):a.disable(3042);a.blendEquationSeparate(this.Mg,this.Lg);a.blendFuncSeparate(this.Qg,this.Og,this.Pg,this.Ng);a.blendColor(this.blendColor[0],this.blendColor[1],this.blendColor[2],this.blendColor[3]);a.colorMask(!!(this.colorMask&1),!!(this.colorMask&2),!!(this.colorMask&4),!!(this.colorMask&8))};
xf.prototype.pd=function(a,b){this.Kg!=b.Kg&&(this.Kg?a.enable(3042):a.disable(3042));(this.Mg!=b.Mg||this.Lg!=b.Lg)&&a.blendEquationSeparate(this.Mg,this.Lg);(this.Qg!=b.Qg||this.Og!=b.Og||this.Pg!=b.Pg||this.Ng!=b.Ng)&&a.blendFuncSeparate(this.Qg,this.Og,this.Pg,this.Ng);Ce(this.blendColor,b.blendColor)||a.blendColor(this.blendColor[0],this.blendColor[1],this.blendColor[2],this.blendColor[3]);this.colorMask!=b.colorMask&&a.colorMask(!!(this.colorMask&1),!!(this.colorMask&2),!!(this.colorMask&4),
!!(this.colorMask&8))};new xf;new xf;function zf(){this.Xb=q;this.depthFunc=513;this.jh=0;this.ih=1;this.depthMask=l;this.ii=q;this.ki=this.ji=0}zf.prototype.od=function(a,b){this!=b&&(b?this.pd(a,b):this.Hc(a))};zf.prototype.Hc=function(a){this.Xb?a.enable(2929):a.disable(2929);a.depthFunc(this.depthFunc);a.depthRange(this.jh,this.ih);a.depthMask(this.depthMask);this.ii?a.enable(32823):a.disable(32823);a.polygonOffset(this.ji,this.ki)};
zf.prototype.pd=function(a,b){this.Xb!=b.Xb&&(this.Xb?a.enable(2929):a.disable(2929));this.depthFunc!=b.depthFunc&&a.depthFunc(this.depthFunc);(this.jh!=b.jh||this.ih!=b.ih)&&a.depthRange(this.jh,this.ih);this.depthMask!=b.depthMask&&a.depthMask(this.depthMask);this.ii!=b.ii&&(this.ii?a.enable(32823):a.disable(32823));(this.ji!=b.ji||this.ki!=b.ki)&&a.polygonOffset(this.ji,this.ki)};/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
function Af(a,b){this.Bi=[];this.Un=a;this.Vm=b||m}t=Af.prototype;t.Hb=q;t.tf=q;t.Hj=q;t.Ep=q;t.Cl=q;t.Ij=0;t.cancel=function(a){if(this.Hb)this.ag instanceof Af&&this.ag.cancel();else{if(this.la){var b=this.la;delete this.la;a?b.cancel(a):(b.Ij--,0>=b.Ij&&b.cancel())}this.Un?this.Un.call(this.Vm,this):this.Cl=l;this.Hb||this.G(new Bf(this))}};t.Qm=function(a,b){this.Hj=q;Cf(this,a,b)};function Cf(a,b,c){a.Hb=l;a.ag=c;a.tf=!b;Df(a)}function Ef(a){a.Hb&&(a.Cl||g(new Ff(a)),a.Cl=q)}
t.D=function(a){Ef(this);Cf(this,l,a)};t.G=function(a){Ef(this);Cf(this,q,a)};function ge(a,b,c,d){a.Bi.push([b,c,d]);a.Hb&&Df(a)}function Gf(a){return Sa(a.Bi,function(a){return la(a[1])})}
function Df(a){a.Sl&&(a.Hb&&Gf(a))&&(v.clearTimeout(a.Sl),delete a.Sl);a.la&&(a.la.Ij--,delete a.la);for(var b=a.ag,c=q,d=q;a.Bi.length&&!a.Hj;){var e=a.Bi.shift(),f=e[0],h=e[1],e=e[2];if(f=a.tf?h:f)try{var j=f.call(e||a.Vm,b);y(j)&&(a.tf=a.tf&&(j==b||j instanceof Error),a.ag=b=j);b instanceof Af&&(d=l,a.Hj=l)}catch(k){b=k,a.tf=l,Gf(a)||(c=l)}}a.ag=b;d&&(ge(b,C(a.Qm,a,l),C(a.Qm,a,q)),b.Ep=l);c&&(a.Sl=v.setTimeout(function(){g(b)},0))}function Hf(){var a=new Af;a.D(m);return a}
function Ff(a){Ca.call(this);this.Wb=a}D(Ff,Ca);Ff.prototype.message="Deferred has already fired";Ff.prototype.name="AlreadyCalledError";function Bf(a){Ca.call(this);this.Wb=a}D(Bf,Ca);Bf.prototype.message="Deferred was cancelled";Bf.prototype.name="CancelledError";var If,Jf,Kf,Lf;Lf=Kf=Jf=If=q;var Mf=Db();Mf&&(-1!=Mf.indexOf("Firefox")||-1!=Mf.indexOf("Camino")||(-1!=Mf.indexOf("iPhone")||-1!=Mf.indexOf("iPod")?If=l:-1!=Mf.indexOf("iPad")?Jf=l:-1!=Mf.indexOf("Android")?Kf=l:-1!=Mf.indexOf("Chrome")&&(Lf=l)));var Nf=If,Of=Jf,Pf=Kf,Qf=Lf;function Rf(a){G.call(this);this.g=a;this.rd=[]}D(Rf,G);Rf.prototype.b=function(){Qa(this.rd,I);this.rd.length=0;Rf.a.b.call(this)};Rf.prototype.X=function(a){this.rd.push(a)};Rf.prototype.we=function(a){for(var b=new Af,c=0;c<this.rd.length;c++)Re(this.rd[c]);Qf&&!a?dd(function(){Sf(this,b)},5,this):Sf(this,b);return b};function Sf(a,b){for(var c=0;c<a.rd.length;c++){var d=a.rd[c];try{if(!d.Gb()){b.G(q);break}}catch(e){b.G(e);break}}b.Hb||b.D(m)};function Tf(){this.nh=l;this.We=q;this.cullFace=1029;this.Dh=2305;this.ti=q;this.vi=1;this.si=this.ui=q}Tf.prototype.od=function(a,b){this!=b&&(b?this.pd(a,b):this.Hc(a))};Tf.prototype.Hc=function(a){this.nh?a.enable(3024):a.disable(3024);this.We?a.enable(2884):a.disable(2884);a.cullFace(this.cullFace);a.frontFace(this.Dh);this.ti?a.enable(32928):a.disable(32928);a.sampleCoverage(this.vi,this.ui);this.si?a.enable(32926):a.disable(32926)};
Tf.prototype.pd=function(a,b){this.nh!=b.nh&&(this.nh?a.enable(3024):a.disable(3024));this.We!=b.We&&(this.We?a.enable(2884):a.disable(2884));this.cullFace!=b.cullFace&&a.cullFace(this.cullFace);this.Dh!=b.Dh&&a.frontFace(this.Dh);this.ti!=b.ti&&(this.ti?a.enable(32928):a.disable(32928));(this.vi!=b.vi||this.ui!=b.ui)&&a.sampleCoverage(this.vi,this.ui);this.si!=b.si&&(this.si?a.enable(32926):a.disable(32926))};function Uf(a,b,c,d){te.call(this,a);this.ze=b;this.ye=y(c)?c:16;this.Bq=y(d)?d:32;this.tb=new ArrayBuffer(this.ye*this.ze);this.Oa=m;this.lc=0;this.Zi=[];this.cc=q;this.yb=Number.MAX_VALUE;this.xb=Number.MIN_VALUE}D(Uf,te);t=Uf.prototype;t.w=function(){this.g.f.deleteBuffer(this.Oa);this.Oa=m;this.cc=l;this.yb=Number.MIN_VALUE;this.xb=Number.MAX_VALUE;Uf.a.w.call(this)};
t.restore=function(){var a=this.g.f;Uf.a.restore.call(this);this.Oa=a.createBuffer();this.cc=l;this.yb=Number.MIN_VALUE;this.xb=Number.MAX_VALUE;Vf(this)};t.ea=function(a){a=Math.max(this.ye,this.lc+a);return a>this.ye?this.Vd(a):l};t.Vd=function(a){a=a||this.ye+this.Bq;if(65535<=a)return q;var b=new ArrayBuffer(a*this.ze);(new Uint8Array(b)).set(new Uint8Array(this.tb));this.ye=a;this.tb=b;this.cc=l;this.yb=Number.MIN_VALUE;this.xb=Number.MAX_VALUE;this.Sj();return l};
function Wf(a){for(var b=0,b=a.Zi.length?a.Zi.pop():a.lc++;b>=a.ye;)if(!a.Vd())return 65535;a.cc=l;a.yb=Math.min(a.yb,b);a.xb=Math.max(a.xb,b);return b}t.clear=function(){this.lc=0;this.Zi.length=0;this.cc=q;this.yb=Number.MAX_VALUE;this.xb=Number.MIN_VALUE};function Vf(a){var b=a.g.f;b.bindBuffer(34962,a.Oa);a.cc&&(b.bufferData(34962,a.tb,35048),a.cc=q,a.yb=Number.MAX_VALUE,a.xb=Number.MIN_VALUE)}t.Sj=A;function Xf(a,b){Uf.call(this,a,96);this.bs=b;this.hd=new Float32Array(this.tb);this.De=new Uint32Array(this.tb)}D(Xf,Uf);Xf.prototype.Sj=function(){this.hd=new Float32Array(this.tb);this.De=new Uint32Array(this.tb)};var Yf=new Float32Array([0,0,0,0,0,0,0,1,0,0,1,0,1,0,0,1,0,0,1,1,0,1,1,0]);
Xf.prototype.add=function(a,b,c,d,e,f,h,j,k,n){var p=Wf(this);if(65535==p)return p;n=n||0;for(var r=this.hd,w=this.De,u=p*this.ze/4,z=0,x=0;4>z;z++,x+=6)r[u+x+0]=Yf[x+0]*j+f,r[u+x+1]=Yf[x+1]*k+h,r[u+x+2]=Yf[x+2]+n,r[u+x+3]=Yf[x+3]?a+c:a,r[u+x+4]=Yf[x+4]?b+d:b,w[u+x+5]=e;return p};
Xf.prototype.update=function(a,b,c,d,e,f,h,j,k,n,p){p=p||0;for(var r=this.hd,w=this.De,u=a*this.ze/4,z=0,x=0;4>z;z++,x+=6)r[u+x+0]=Yf[x+0]*k+h,r[u+x+1]=Yf[x+1]*n+j,r[u+x+2]=Yf[x+2]+p,r[u+x+3]=Yf[x+3]?b+d:b,r[u+x+4]=Yf[x+4]?c+e:c,w[u+x+5]=f;this.cc=l;this.yb=Math.min(this.yb,a);this.xb=Math.max(this.xb,a)};
Xf.prototype.remove=function(a){for(var b=this.hd,c=a*this.ze,d=0;4>d;d++)b[c+0]=0,b[c+1]=0,b[c+2]=0,c+=96;a==this.lc?this.lc--:(this.Zi.push(a),this.cc=l,this.yb=Math.min(this.yb,a),this.xb=Math.max(this.xb,a))};
Xf.prototype.uc=function(a,b,c){var d=this.g.f,e=this.bs;if(this.lc){if(b){var f=Zf;nf(a,b,f);d.uniformMatrix4fv(e.oa,q,f)}else d.uniformMatrix4fv(e.oa,q,a);y(c)?d.uniform4fv(e.Xi,c):d.uniform4f(e.Xi,1,1,1,1);Vf(this);d.vertexAttribPointer(e.pa,3,5126,q,24,0);d.vertexAttribPointer(e.tj,2,5126,q,24,12);d.vertexAttribPointer(e.Yc,4,5121,l,24,20);d.drawElements(4,6*this.lc,5123,0)}};var Zf=kf();function $f(a,b,c,d,e,f){Af.call(this,e,f);this.ga=a;this.Uj=[];this.en=!!b;this.dq=!!c;this.Sp=!!d;for(b=0;b<a.length;b++)ge(a[b],C(this.pn,this,b,l),C(this.pn,this,b,q));0==a.length&&!this.en&&this.D(this.Uj)}D($f,Af);$f.prototype.Tn=0;$f.prototype.pn=function(a,b,c){this.Tn++;this.Uj[a]=[b,c];this.Hb||(this.en&&b?this.D([a,c]):this.dq&&!b?this.G(c):this.Tn==this.ga.length&&this.D(this.Uj));this.Sp&&!b&&(c=m);return c};$f.prototype.G=function(a){$f.a.G.call(this,a);Qa(this.ga,function(a){a.cancel()})};function S(a,b,c){te.call(this,c);this.mode=ag;this.Kf=new bg;this.Wf=new Rf(c);H(this,this.Wf);this.Wh=new We(c);this.Wf.X(this.Wh);this.Mi=new $e(c);this.Wf.X(this.Mi);this.Ac=new Ue(c);this.Wf.X(this.Ac);this.Lf=new Ye(c);this.Wf.X(this.Lf);this.font=new Oe(0,b,c);H(this,this.font);this.Na=new Ke(b,c);H(this,this.Na);Ee(this.Na);this.Pl=new af(b,c);Ee(this.Pl);H(this,this.Pl);this.Le=this.Li=m;this.sm=new R(this);H(this,this.sm);this.mo=new vf(this);H(this,this.mo)}D(S,te);S.prototype.we=function(){return new $f([])};
var cg=S,dg=new Tf;dg.We=l;cg.rp=dg;var ag=0;S.cm=new xf;var eg=S,fg=new zf;fg.Xb=l;fg.depthFunc=515;eg.dm=fg;S.Xo=new xf;var gg=S,hg=new zf;hg.Xb=l;hg.depthFunc=515;gg.ep=hg;S.Yo=new xf;var ig=S,jg=new zf;jg.Xb=l;jg.depthFunc=515;ig.hp=jg;S.Zo=new xf;var kg=S,lg=new zf;lg.Xb=l;lg.depthFunc=515;kg.gp=lg;var mg=S,ng=new zf;ng.Xb=q;ng.depthFunc=515;mg.fp=ng;t=S.prototype;t.w=function(){var a=this.g.f;a.deleteBuffer(this.Li);this.Li=m;a.deleteBuffer(this.Le);this.Le=m};
t.restore=function(){for(var a=this.g.f,b=a.createBuffer(),c=Math.floor(10922.5),d=6*c,e=new Uint16Array([0,1,2,2,1,3]),d=new Uint16Array(d),f=0,h=0,j=0;f<c;f++){for(var k=0;k<e.length;k++)d[h+k]=e[k]+j;h+=e.length;j+=4}a.bindBuffer(34963,b);a.bufferData(34963,d,35044);a.bindBuffer(34963,m);this.Li=b;this.Le=R.Rm(a)};
t.reset=function(a,b){var c=this.g,d=c.f,e=S.rp;c.mi!=e&&(e&&c.f&&e.od(c.f,c.mi),c.mi=e);d.viewport(0,0,d.canvas.width,d.canvas.height);d.clearColor(a[0],a[1],a[2],a[3]);d.clearDepth(1);d.clear((b?16384:0)|256);this.mode=ag};t.om=function(){if(2!=this.mode){this.mode=2;var a=this.g,b=a.f;og(a,S.cm);pg(a,S.dm);qg(a,this.Ac);rg(this.Kf,b,this.Ac);Je(a,this.Na);b.uniform2f(this.Ac.Yi,this.Na.width,this.Na.height);b.bindBuffer(34963,this.Le);b.enableVertexAttribArray(0);b.enableVertexAttribArray(1);b.enableVertexAttribArray(2)}};
t.pm=function(){if(3!=this.mode){this.mode=3;var a=this.g,b=a.f;og(a,S.Xo);pg(a,S.ep);qg(a,this.Ac);rg(this.Kf,b,this.Ac);Je(a,this.Na);b.uniform2f(this.Ac.Yi,this.Na.width,this.Na.height);b.bindBuffer(34963,this.Le);b.enableVertexAttribArray(0);b.enableVertexAttribArray(1);b.enableVertexAttribArray(2)}};
t.rm=function(){if(6!=this.mode){this.mode=6;var a=this.g,b=a.f;og(a,S.cm);pg(a,S.dm);qg(a,this.Lf);var c=this.Kf,d=this.Lf;c.Xk&&(c.Xk=q,b.uniform2f(d.wb,c.nf,c.mf),b.uniform3f(d.vb,c.wa[0],c.wa[1],c.wa[2]));Je(a,this.Na)}};t.qm=function(){if(4!=this.mode){this.mode=4;var a=this.g,b=a.f;og(a,S.Yo);pg(a,S.hp);qg(a,this.Wh);var a=this.Kf,c=this.Wh;a.Mk&&(a.Mk=q,b.uniform2f(c.wb,a.nf,a.mf),b.uniform3f(c.vb,a.wa[0],a.wa[1],a.wa[2]));b.enableVertexAttribArray(0);b.enableVertexAttribArray(1);b.disableVertexAttribArray(2)}};
t.Jg=function(a,b){this.mode=5;var c=this.g,d=c.f;og(c,S.Zo);pg(c,b?S.gp:S.fp);qg(c,this.Mi);Je(c,a);d.bindBuffer(34963,this.Li);d.enableVertexAttribArray(0);d.enableVertexAttribArray(1);d.enableVertexAttribArray(2)};function bg(){this.Zc=O();this.Bd=O();this.Ad=O();this.mf=this.nf=0;this.wa=O();this.Xk=this.jk=this.Mk=l}
bg.prototype.update=function(a,b,c,d,e,f){var h=q;jf(this.Zc,a)||(cf(this.Zc,a),h=l);if(!jf(this.Bd,b)||!jf(this.Ad,c))cf(this.Bd,b),cf(this.Ad,c),h=l;if(this.nf!=d||this.mf!=e||!jf(this.wa,f))this.nf=d,this.mf=e,cf(this.wa,f),h=l;h&&(this.Xk=this.jk=this.Mk=l)};function rg(a,b,c){a.jk&&(a.jk=q,b.uniform3f(c.Kl,a.Zc[0],a.Zc[1],a.Zc[2]),b.uniform3f(c.Ml,a.Bd[0],a.Bd[1],a.Bd[2]),b.uniform3f(c.Ll,a.Ad[0],a.Ad[1],a.Ad[2]),b.uniform2f(c.wb,a.nf,a.mf),b.uniform3f(c.vb,a.wa[0],a.wa[1],a.wa[2]))}
S=Ba(S,"blk.graphics.RenderState",{reset:"reset",om:"beginChunkPass1",pm:"beginChunkPass2",rm:"beginModels",qm:"beginLines",Jg:"beginSprites"});function sg(){this.buffer=new Uint8Array(512);this.offset=0;this.va=new Float32Array(16);this.Fa=new Uint8Array(this.va.buffer);this.fq=(this.lf=v.Float64Array?new Float64Array(1):m)?new Uint8Array(this.lf.buffer):m}t=sg.prototype;t.finish=function(){for(var a=new Uint8Array(this.offset),b=0;b<this.offset;b++)a[b]=this.buffer[b];this.offset=0;return a.buffer};
t.ea=function(a){if(this.offset+a>this.buffer.length){a=this.offset+a;var b=this.buffer.length;do b+=1024;while(b<a);a=new Uint8Array(b);for(b=0;b<this.offset;b++)a[b]=this.buffer[b];this.buffer=a}};function tg(a,b){a.ea(2);a.buffer[a.offset++]=b>>8;a.buffer[a.offset++]=b}function ug(a,b){a.ea(4);a.buffer[a.offset++]=b>>24;a.buffer[a.offset++]=b>>16;a.buffer[a.offset++]=b>>8;a.buffer[a.offset++]=b}function vg(a,b){a.ea(1);a.buffer[a.offset++]=b}
function wg(a,b){a.ea(2);a.buffer[a.offset++]=b>>8;a.buffer[a.offset++]=b}t.bb=function(a){this.ea(4);this.buffer[this.offset++]=a>>24;this.buffer[this.offset++]=a>>16;this.buffer[this.offset++]=a>>8;this.buffer[this.offset++]=a};t.pc=function(a){this.ea(5);for(a&=4294967295;a&4294967168;)this.buffer[this.offset++]=a&127|128,a>>>=7;this.buffer[this.offset++]=a&127};t.lj=function(a){this.pc(a<<1^a>>31)};
t.Vo=function(a){this.ea(4);this.va[0]=a;this.buffer[this.offset++]=this.Fa[0];this.buffer[this.offset++]=this.Fa[1];this.buffer[this.offset++]=this.Fa[2];this.buffer[this.offset++]=this.Fa[3]};t.As=function(a){this.ea(12);this.va[0]=a[0];this.va[1]=a[1];this.va[2]=a[2];for(a=0;12>a;a++)this.buffer[this.offset++]=this.Fa[a]};t.Bs=function(a){this.ea(16);this.va[0]=a[0];this.va[1]=a[1];this.va[2]=a[2];this.va[3]=a[3];for(a=0;16>a;a++)this.buffer[this.offset++]=this.Fa[a]};
t.da=function(a){65535<=a.length&&(a=a.substr(0,65535));this.ea(4+3*a.length);wg(this,a.length);var b=this.offset;this.offset+=2;for(var c=0,d=0;d<a.length;d++){var e=a.charCodeAt(d);128>e?(this.buffer[this.offset++]=e,c++):2048>e?(this.buffer[this.offset++]=e>>6|192,this.buffer[this.offset++]=e&63|128,c+=2):(this.buffer[this.offset++]=e>>12|224,this.buffer[this.offset++]=e>>6&63|128,this.buffer[this.offset++]=e&63|128,c+=3)}a=this.offset;this.offset=b;wg(this,c);this.offset=a};var xg=m;
function yg(){xg||(xg=new sg);return xg};function zg(){this.u=this.y=this.x=0}var Ag=new zg,Bg=new zg,Cg=new (aa());function Dg(a,b,c,d,e){G.call(this);this.context=a;this.path=b;this.name=c;this.duration=d;this.Rd=e;Wa(this.Rd,vc);this.qa=this.di=this.Ji=m}D(Dg,G);Dg.prototype.b=function(){this.di&&(this.di.disconnect(),this.di=m);this.Ji&&(this.Ji.disconnect(),this.Ji=m);this.qa&&(this.qa.pause(),this.qa=m);Dg.a.b.call(this)};
Dg.prototype.play=function(a){if(this.context&&!this.qa){var b=de(this.Rd);b&&(b=ee(this.path,b.path),this.qa=document.createElement("AUDIO"),this.qa.autoplay=q,this.qa.src=b,b=this.context.createMediaElementSource(this.qa),b.connect(this.context.destination),this.di=this.Ji=b)}this.qa&&(this.qa.loop=a||q,this.qa.play())};Dg.prototype.stop=function(){this.qa&&(this.qa.currentTime=0,this.qa.pause())};function Eg(a,b,c,d,e){G.call(this);this.Je=a;this.context=b;this.path=c;this.name=d||"Unknown";this.ng={};e&&this.Di(e)}D(Eg,G);Eg.prototype.b=function(){Eg.a.b.call(this)};Eg.prototype.Di=function(a){for(var b=0;b<a.length;b++){var c=a[b];this.ng[c.name]=c}};Eg.prototype.load=function(){Fg(this)};Eg.prototype.play=function(a,b,c){var d;d=B(a)?this.ng[a]:a;if(!d)return L("WARNING: track "+a+" not found in list"),m;Fg(this,c);d.play(b);return d};
function Fg(a,b){Ya(a.ng,function(a){a.stop(b)},a)};function Gg(a,b){Eg.call(this,a,b,"../assets/audio/music","Music",[new Dg(b,"../assets/audio/music","track1",383380,[new uc("audio/ogg","track1.ogg",4861360)])])}D(Gg,Eg);function Hg(a,b,c,d,e,f,h){this.P=a;this.um=b;this.vm=c;this.wm=d;this.Fb=e;this.ak=f;this.eo=h};function Ig(){var a=O(),b=O();this.min=a;this.max=b}function Jg(a,b,c,d,e,f){var h=new Ig;h.min[0]=a<d?a:d;h.min[1]=b<e?b:e;h.min[2]=c<f?c:f;h.max[0]=a<d?d:a;h.max[1]=b<e?e:b;h.max[2]=c<f?f:c;return h}
function Kg(a,b,c){var d=a.min;a=a.max;var e=Lg[0];e[0]=Math.abs(b[3]);e[1]=Math.abs(b[4]);e[2]=Math.abs(b[5]);var f=0,h=1,j=2;e[0]<e[2]&&(f=2,j=0);e[1]<e[j]?(h=j,j=1):e[1]>e[f]&&(h=f,f=1);var k=0,n=Number.MAX_VALUE,p=b[3+f],r=(d[f]-b[f])/p,f=(a[f]-b[f])/p;r>f&&(p=r,r=f,f=p);if(!(r>n||f<k)){r>k&&(k=r);f<n&&(n=f);if(1E-6>e[h]){if(b[h]<d[h]||b[h]>a[h]||b[j]<d[j]||b[j]>a[j])return}else{p=b[3+h];r=(d[h]-b[h])/p;f=(a[h]-b[h])/p;r>f&&(p=r,r=f,f=p);if(r>n||f<k)return;r>k&&(k=r);f<n&&(n=f);if(1E-6>e[j]){if(b[j]<
d[j]||b[j]>a[j])return}else{p=b[3+j];r=(d[j]-b[j])/p;f=(a[j]-b[j])/p;r>f&&(p=r,r=f,f=p);if(r>n||f<k)return;r>k&&(k=r)}}c&&(c[0]=b[0]+b[3]*k,c[1]=b[1]+b[4]*k,c[2]=b[2]+b[5]*k)}}var Lg=[O(),O(),O()];function Mg(a,b,c,d){this.map=a;this.x=b;this.y=c;this.u=d;this.Sb=Jg(b,c,d,b+16,c+128,d+16);this.state=Ng;this.mh=l;this.version=this.re=0;this.Fb=new Uint16Array(32768);this.tl=this.Ci=m}var Ng=0;Mg.prototype.Cc=function(a,b,c){return 2==this.state?this.Fb[(a&15)+16*(c&15)+256*(b&127)]:0};Mg.prototype.hc=function(a,b,c,d){b=(a&15)+16*(c&15)+256*(b&127);a=this.Fb[b];this.Fb[b]=d;a!=d&&!this.mh&&(d=this.mh,this.mh=l,this.Ci=m,d||this.map.yp(this));return a};
Mg.prototype.Bk=function(a){var b=Og[0];Kg(this.Sb,a,b);var c=Math.floor(b[0]),d=Math.floor(b[1]),e=Math.floor(b[2]),f=0==a[3]?0:0>a[3]?-1:1,h=0==a[4]?0:0>a[4]?-1:1,j=0==a[5]?0:0>a[5]?-1:1,k=(c+(0<f?1:0)-b[0])/a[3],n=(d+(0<h?1:0)-b[1])/a[4],p=(e+(0<j?1:0)-b[2])/a[5];isNaN(k)&&(k=Number.POSITIVE_INFINITY);isNaN(n)&&(n=Number.POSITIVE_INFINITY);isNaN(p)&&(p=Number.POSITIVE_INFINITY);var r=f/a[3],w=h/a[4],u=j/a[5];isNaN(r)&&(r=Number.POSITIVE_INFINITY);isNaN(w)&&(w=Number.POSITIVE_INFINITY);isNaN(u)&&
(u=Number.POSITIVE_INFINITY);for(var z=this.Fb,x=b=0;256>x;x++){var M=c-this.x,K=d-this.y,V=e-this.u;if(0<=M&&(16>M&&0<=K&&128>K&&0<=V&&16>V)&&(b=z[M+16*V+256*K],b>>8))break;k<n&&k<p?(k+=r,c+=f):n<p?(n+=w,d+=h):(p+=u,e+=j)}return b?(f=Pg,h=c+1,j=d+1,k=e+1,Q(f.min,c,d,e),Q(f.max,h,j,k),f=O(),Kg(Pg,a,f),new Hg(this,c,d,e,b,Math.sqrt(gf(a,f)),f)):m};var Og=[O(),O()],Pg=new Ig;function Qg(){G.call(this);this.bo=q;this.Hi=l;this.xg=[];this.Ge=[];this.$i=[];this.ke=[];this.Ln=[this.Ge,this.$i,this.ke];this.$a=0}D(Qg,G);Qg.lp=20;Qg.mp=6;Qg.kp=32;Qg.prototype.pause=function(){this.bo=l};Qg.prototype.Ua=s("$a");
Qg.prototype.dd=function(a,b){if(a.Kc)switch(a.Yf){case 0:E(this.xg,a);break;case 1:E(this.Ge,a);break;case 2:E(this.$i,a);break;default:E(this.ke,a)}else a.Kc=l,this.$a++;a.Yf=b;switch(b){case 0:this.xg.push(a);break;case 1:this.Ge.push(a);this.Hi=l;break;case 2:this.$i.push(a);break;default:this.ke.push(a),this.Hi=l}};Qg.prototype.cancel=function(a){if(a.Kc){switch(a.Yf){case 0:E(this.xg,a);break;case 1:E(this.Ge,a);break;case 2:E(this.$i,a);break;default:E(this.ke,a)}this.$a--}};
Qg.ts=function(a,b){return a.zo-b.zo};Qg.prototype.update=function(a,b){if(this.bo||!this.$a)return 0;var c=Qg.lp,d=tc(),e=a.of,f=0,h=this.xg;if(h.length){for(var j=0;j<h.length;j++)f+=h[j].Jj(),h[j].Kc=q;this.$a-=h.length;c-=h.length;h.length=0}if(0>=c)return f;if(this.Hi||!(e%Qg.kp))this.Ge.length&&this.Dl(a,b,this.Ge),this.ke.length&&this.Dl(a,b,this.ke),this.Hi=q;for(j=0;j<this.Ln.length;j++)for(e=this.Ln[j];c&&e.length;){if(tc()-d>Qg.mp)return f;h=e.shift();f+=h.Jj();h.Kc=q;this.$a--;c--}return f};
Qg.prototype.Dl=function(a,b,c){wa("length",c.length);for(a=0;a<c.length;a++);Wa(c,Qg.ts)};Qg=Ba(Qg,"blk.env.client.BuildQueue",{update:"update",Dl:"sortListByDistance_"});function Rg(){G.call(this);this.Sa={};this.La=this.i=0}D(Rg,G);t=Rg.prototype;t.Ua=s("i");t.Dc=s("La");t.add=function(a){this.i++;this.Sa[a.id]=a;this.La+=a.gd};t.remove=function(a){this.i--;delete this.Sa[a.id];this.La-=a.gd};t.forEach=function(a,b){for(var c in this.Sa)a.call(b||v,this.Sa[c])};function Sg(a,b){var c=ye(0,0,0,0);this.q=a;this.vp=b||m;this.ft=m;this.color=c||N()};function Tg(a){Uf.call(this,a,32);this.hd=new Float32Array(this.tb);this.De=new Uint32Array(this.tb);this.restore()}D(Tg,Uf);Tg.prototype.Sj=function(){this.hd=new Float32Array(this.tb);this.De=new Uint32Array(this.tb)};function Ug(a,b,c,d,e,f,h){var j=Wf(a);if(65535!=j){var k=a.hd,n=a.De;a=j*a.ze/4;k[a+0]=b;k[a+1]=c;k[a+2]=d;n[a+3]=4294967295;k[a+4]=e;k[a+5]=f;k[a+6]=h;n[a+7]=4294967295}}
Tg.prototype.uc=function(a,b,c){var d=this.g.f;a=a.Wh;if(this.lc){var e=Vg;nf(b.Wc,c,e);d.uniformMatrix4fv(a.oa,q,e);Vf(this);d.vertexAttribPointer(a.pa,3,5126,q,16,0);d.vertexAttribPointer(a.Yc,4,5121,l,16,12);d.drawArrays(1,0,2*this.lc)}};var Vg=kf();function T(a,b,c,d){te.call(this,b.g);this.id=T.Zk++;this.qg=a;this.ec=b;this.P=c;this.Me=d;a=c.x;var e=c.y+d,f=c.u,h=kf();mf(h,1,1,1,0,a,e,f,1);this.Uo=h;this.Mj=bf(c.x+T.L/2,c.y+d+T.L/2,c.u+T.L/2);this.Sb=new Ig;this.Od=ye(this.Mj[0],this.Mj[1],this.Mj[2],T.L);this.Sg=b.sm;this.tm=c.map.Ca;this.Wj=l;this.jf=m;this.gr=this.zo=this.gd=this.zh=0;this.Kc=q;this.Yf=3;this.Tj=q;this.Vb=m}D(T,te);T.prototype.b=function(){this.ic(q);T.a.b.call(this)};T.Zk=0;T.L=16;T.wg=4;T.hm=128/T.L;
T.prototype.w=function(){this.g.f.deleteBuffer(this.jf);this.jf=m;this.gd=this.zh=0;this.Vb&&(I(this.Vb),this.Vb=m);T.a.w.call(this)};T.prototype.restore=function(){T.a.restore.call(this);this.Tj&&(this.ic(q),this.ic(l));this.qg.Dk(this.P.x,this.P.y+this.Me,this.P.u,3)};T.prototype.Ck=function(){this.Wj=l};T.Hp=za("blk.env.client.SegmentRenderer#build:fast");T.Ip=za("blk.env.client.SegmentRenderer#build:slow");
T.prototype.Jj=function(){this.Wj=q;for(var a=this.tm,b=this.ec.Na,c=this.P.Fb,d=T.mg,e=T.Eo,f=T.Hp(),h=this.Me,j=this.Me+T.L-1,k=h;k<=j;k++)for(var n=1;n<T.L-1;n++)for(var p=1;p<T.L-1;p++){var r=p+16*n+256*k,w=c[r];if(w>>8){e[0]=c[r+16]>>8;e[1]=c[r-16]>>8;e[2]=127<=k?0:c[r+256]>>8;e[3]=(0>=k?w:c[r-256])>>8;e[4]=c[r+1]>>8;e[5]=c[r-1]>>8;for(var r=a.ga[w>>8],u=0;6>u;u++)if(!e[u]||e[u]!=w>>8&&a.ga[e[u]].$h.q&64)Ge(b,r.rk(p,k,n,u,w>>16&255,w&65535),d),uf(this.Sg,u,p,k-this.Me,n,d)}}va(f);f=T.Ip();a=
Array(4);a[0]=this.qg.view.Ga(this.P.x-16,this.P.y,this.P.u);a[1]=this.qg.view.Ga(this.P.x+16,this.P.y,this.P.u);a[2]=this.qg.view.Ga(this.P.x,this.P.y,this.P.u-16);a[3]=this.qg.view.Ga(this.P.x,this.P.y,this.P.u+16);for(n=p=0;n<T.L-1;n++)Wg(this,p,h,j,n,a);n=T.L-1;for(p=0;p<T.L-1;p++)Wg(this,p,h,j,n,a);p=T.L-1;for(n=1;n<T.L;n++)Wg(this,p,h,j,n,a);n=0;for(p=1;p<T.L;p++)Wg(this,p,h,j,n,a);va(f);f=this.Sg.finish(this.jf);this.jf=f.buffer;this.zh=f.cf;h=this.gd;this.gd=f.Em;return this.gd-h};
function Wg(a,b,c,d,e,f){for(var h=a.tm,j=a.ec.Na,k=a.P.Fb,n=T.mg,p=T.Eo,r=a.P.x,w=a.P.u;c<=d;c++){var u=b+16*e+256*c,z=k[u];if(z>>8){p[0]=e==T.L-1?f[3]?f[3].Cc(r+b,c,w+e+1)>>8:0:k[u+16]>>8;p[1]=e?k[u-16]>>8:f[2]?f[2].Cc(r+b,c,w+e-1)>>8:0;p[2]=127<=c?0:k[u+256]>>8;p[3]=(0>=c?z:k[u-256])>>8;p[4]=b==T.L-1?f[1]?f[1].Cc(r+b+1,c,w+e)>>8:0:k[u+1]>>8;p[5]=b?k[u-1]>>8:f[0]?f[0].Cc(r+b-1,c,w+e)>>8:0;for(var u=h.ga[z>>8],x=0;6>x;x++)if(!p[x]||p[x]!=z>>8&&h.ga[p[x]].$h.q&64)Ge(j,u.rk(b,c,e,x,z>>16&255,z&65535),
n),uf(a.Sg,x,b,c-a.Me,e,n)}}}
T.prototype.ic=function(a){if(this.Tj!=a)if(this.Tj=a){a=this.Vb=new Tg(this.g);var b=bf(0,0,0),c=bf(T.L,T.L,T.L);Ug(a,b[0],b[1],b[2],c[0],b[1],b[2]);Ug(a,b[0],b[1],b[2],b[0],c[1],b[2]);Ug(a,b[0],b[1],b[2],b[0],b[1],c[2]);Ug(a,c[0],b[1],c[2],b[0],b[1],c[2]);Ug(a,c[0],b[1],c[2],c[0],b[1],b[2]);Ug(a,c[0],b[1],c[2],c[0],c[1],c[2]);Ug(a,c[0],b[1],b[2],c[0],c[1],b[2]);Ug(a,b[0],b[1],c[2],b[0],c[1],c[2]);Ug(a,b[0],c[1],b[2],c[0],c[1],b[2]);Ug(a,b[0],c[1],b[2],b[0],c[1],c[2]);Ug(a,c[0],c[1],c[2],c[0],c[1],
b[2]);Ug(a,c[0],c[1],c[2],b[0],c[1],c[2])}else I(this.Vb),this.Vb=m};T.prototype.A=function(a,b){this.zh&&this.Sg.uc(b,this.Uo,this.jf,this.zh)};T.mg=N();T.Eo=new Uint16Array(6);T=Ba(T,"blk.env.client.SegmentRenderer",{Jj:"build"});function Xg(a,b,c){G.call(this);this.g=a.g;this.ec=a;this.map=b;this.view=c;this.Xe=q;this.Mc=new Rg;H(this,this.Mc);this.Tb=new Qg;H(this,this.Tb);this.Kh=[];this.Kk=this.Jn=0;this.In=m;this.ss=Array(512);this.fj=Array(1024);this.Hf=0;this.So=Array(1024);this.Gn=this.Lk=0;this.view.xj(this)}D(Xg,G);t=Xg.prototype;t.b=function(){this.view.sl(this);Xg.a.b.call(this)};t.ic=function(a){this.Xe!=a&&(this.Xe=a,this.Mc.forEach(function(b){b.ic(a)}))};
t.tk=function(){var a;a="Render: "+(this.Mc.Ua()+" cached (");a+=Math.floor(this.Mc.Dc()/1E3)+"K), ";a+=this.Kk+" visible, ";return a+=this.Tb.Ua()+" req"};t.Km=function(a){this.ck(a,3)};t.Im=function(a){this.ck(a,3)};t.Jm=function(a){var b=Yg(a,q);if(b){for(var c=0;c<b.Nc.length;c++){var d=b.Nc[c];d&&(d.Kc&&this.Tb.cancel(d),this.Mc.remove(d),I(d))}a.tl=m}};function Yg(a,b){var c=a.tl;!c&&!b&&(c={Nc:Array(T.hm)},a.tl=c);return c}
t.ck=function(a,b){if(2==a.state)for(var c=Yg(a),d=0;d<c.Nc.length;d++){var e=c.Nc[d];e||(e=new T(this,this.ec,a,d*T.L),e.ic(this.Xe),c.Nc[d]=e,this.Mc.add(e),this.Tb.dd(e,b))}};t.Oh=function(a,b,c,d){this.Ph(a,b,c,a,b,c,d)};t.Ph=function(a,b,c,d,e,f,h){a--;b--;c--;d++;e++;f++;c>>=4;d>>=4;f>>=4;b>>=T.wg;e>>=T.wg;for(a>>=4;a<=d;a++)for(var j=c;j<=f;j++)for(var k=b;k<=e;k++)this.Dk(a<<4,k<<T.wg,j<<4,h)};
t.Dk=function(a,b,c,d){if(a=this.view.Ga(a,b,c)){c=Yg(a);b>>=T.wg;var e=c.Nc[b];e||(e=new T(this,this.ec,a,b*T.L),e.ic(this.Xe),c.Nc[b]=e,this.Mc.add(e),this.Tb.dd(e,d));if(!e.Wj||e.Yf!=d)e.Ck(),this.Tb.dd(e,d)}};t.Dm=function(a,b){var c=this.Tb.update(a,b),d=this.Mc;d.La+=c};
t.A=function(a,b){var c=this.ec,d=this.map;this.In=b;this.Lk=this.Hf=this.Kk=this.Jn=0;this.Gn=a.of;this.view.Bh(b,this.Wq,this);this.Dm(a,b);if(!this.Tb.Ua()&&this.Kh.length){for(var e=0;e<this.Kh.length;e++)this.Kh[e].D(m);this.Kh.length=0}e=b.Ah-16;c.Kf.update(d.fd.Zc,d.fd.Bd,d.fd.Ad,0.5*e,0.85*e,d.fd.wa);if(this.Xe){c.qm();for(e=0;e<this.Hf;e++)d=this.fj[e],d.Vb&&d.Vb.uc(d.ec,b,d.Uo)}this.Hf&&this.Zm(a,b,c);this.Lk&&this.$m(a,b,c)};
t.Zm=function(a,b,c){c.om();for(c=0;c<this.Hf;c++)this.fj[c].A(a,b),this.fj[c]=m};t.$m=function(a,b,c){c.pm();for(c=0;c<this.Lk;c++)this.So[c].A(a,b),this.So[c]=m};
t.Wq=function(a){this.ss[this.Jn++]=a;a=Yg(a);for(var b=0;b<T.hm;b++){var c=a.Nc[b],d;if(d=c){a:{d=c.Od;for(var e=this.In.nk,f=0;f<e.length;f++){var h=e[f],h=h[0]*d[0]+h[1]*d[1]+h[2]*d[2]+h[3];if(h<-d[3]){d=-1;break a}if(Math.abs(h)<d[3]){d=0;break a}}d=1}d=-1!=d}if(d&&(c.Kc||0<c.gd))c.Kc&&1<c.Yf&&this.Tb.dd(c,1),c.gr=this.Gn,this.Kk++,this.fj[this.Hf++]=c}};
Xg=Ba(Xg,"blk.env.client.ViewRenderer",{ck:"ensureChunkRenderData_",Oh:"invalidateBlock",Ph:"invalidateBlockRegion",Dk:"invalidateSegment",Dm:"buildChunks_",A:"render",Zm:"drawChunkPass1_",$m:"drawChunkPass2_"});function Zg(a,b){fe.call(this,a,b,"../assets/audio/blocks","BlockSounds",[new uc("audio/wav","blocks_optimized.wav",776760),new uc("audio/ogg","blocks_optimized.ogg",69007),new uc("audio/mpeg","blocks_optimized.mp3",71052)],[new zc("block_grass",0,[new J(2081,328),new J(2509,368),new J(2977,318),new J(3395,373)]),new zc("block_gravel",0,[new J(3868,389),new J(4357,338),new J(4795,313),new J(5208,363)]),new zc("block_cloth",0,[new J(0,404),new J(504,409),new J(1013,378),new J(1491,490)]),new zc("block_stone",
0,[new J(5671,338),new J(6109,338),new J(6547,293),new J(6940,303)]),new zc("block_wood",0,[new J(7343,272),new J(7715,282),new J(8097,262),new J(8459,237)])])}D(Zg,fe);function $g(a,b){this.attributes=[new ah(3,0),new ah(2,24)];this.Bp=a;this.$p=b}function ah(a,b){this.size=a;this.type=5126;this.Of=q;this.hg=32;this.offset=b};function bh(){};function ch(){this.name=m;this.index=0;this.parent=m;this.children=[];this.transform=lf();this.Sb=new Ig;this.Od=N()};function dh(a){this.Uk=a;a=a.Tg;this.Fp=new Float32Array(16*a.length);this.Ds=new Float32Array(16*a.length);this.ls=l;this.reset()}dh.prototype.reset=function(){this.ls=l;for(var a=this.Uk.Tg,b=0,c=0;b<a.length;b++,c+=16)for(var d=a[b],e=0;16>e;e++)this.Fp[c+e]=d.transform[e]};function eh(a){G.call(this);this.id=a;this.Sb=new Ig;this.Od=N();this.jq=m;this.ao=[];this.Tg=[];this.Fs={}}D(eh,G);eh.prototype.yl=ba("jq");eh.prototype.Ve=function(){return new dh(this)};function fh(){this.$h=new bh;this.primitiveType=4;this.aq=this.cf=0};function gh(a,b,c){G.call(this);this.f=a.f;this.Dg=b;this.lm=Array(32);for(var d=this.bk=0;d<b.length;d++){var e=b[d];this.lm[e.index]=e;this.bk|=1<<e.index}this.rh=c;this.lb=a.yh.get(5);this.Bb=m;this.lb&&(this.Bb=this.lb.createVertexArrayOES(),this.lb.bindVertexArrayOES(this.Bb),this.Hc(),this.lb.bindVertexArrayOES(m))}D(gh,G);t=gh.prototype;t.b=function(){this.lb&&(this.lb.deleteVertexArrayOES(this.Bb),this.Bb=m);this.lb=m;gh.a.b.call(this)};
t.od=function(a){this!=a&&(this.lb?this.lb.bindVertexArrayOES(this.Bb):a?this.pd(a):this.Hc())};t.reset=function(){this.lb&&this.lb.bindVertexArrayOES(m)};t.Hc=function(){var a=this.f;a.bindBuffer(34963,this.rh);for(var b=m,c=0;c<this.Dg.length;c++){var d=this.Dg[c];a.enableVertexAttribArray(d.index);b!=d.buffer&&(b=d.buffer,a.bindBuffer(34962,d.buffer));a.vertexAttribPointer(d.index,d.size,d.type,d.Of,d.hg,d.offset)}};
t.pd=function(a){var b=this.f;this.rh!=a.rh&&b.bindBuffer(34963,this.rh);for(var c=m,d=0;d<this.Dg.length;d++){var e=this.Dg[d];a.bk&1<<e.index||b.enableVertexAttribArray(e.index);var f=a.lm[e.index];f&&f.Fm==e.Fm||(c!=e.buffer&&(c=e.buffer,b.bindBuffer(34962,e.buffer)),b.vertexAttribPointer(e.index,e.size,e.type,e.Of,e.hg,e.offset))}};
function hh(a,b,c,d,e,f,h){this.index=a;this.buffer=b;this.size=c;this.type=d;this.Of=e;this.hg=f;this.offset=h;this.Fm=[this.index,na(this.buffer),this.size,this.type,this.Of,this.hg,this.offset].join(":")};function ih(a,b,c){te.call(this,a);this.Fh=b;this.Bb=this.bf=this.Ke=m;this.Ns=c||m}D(ih,te);ih.prototype.w=function(){var a=this.g.f;I(this.Bb);this.Bb=m;a.deleteBuffer(this.Ke);this.Ke=m;a.deleteBuffer(this.bf);this.bf=m;ih.a.w.call(this)};
ih.prototype.restore=function(){ih.a.restore.call(this);var a=this.g.f;this.Ke=a.createBuffer();this.bf=a.createBuffer();a.bindBuffer(34962,this.Ke);a.bufferData(34962,this.Fh.Bp,35044);a.bindBuffer(34963,this.bf);a.bufferData(34963,this.Fh.$p,35044);for(var a=[],b=0;b<this.Fh.attributes.length;b++){var c=this.Fh.attributes[b];a.push(new hh(b,this.Ke,c.size,c.type,c.Of,c.hg,c.offset))}this.Bb=new gh(this.g,a,this.bf)};ih.prototype.bind=function(){this.Bb&&wf(this.g,this.Bb)};function jh(a){dh.call(this,a);this.ba=a.ba;this.Zd=a.Zd}D(jh,dh);jh.prototype.A=function(){var a=this.ba.f;this.Zd.bind();for(var b=this.Uk.ao,c=0;c<b.length;c++){var d=b[c];a.drawElements(d.primitiveType,d.cf,5123,d.aq)}};function kh(a,b){eh.call(this,a);this.ba=b;this.Zd=m}D(kh,eh);kh.prototype.yl=function(a){kh.a.yl.call(this,a);this.Zd=new ih(this.ba,a,this.id);H(this,this.Zd);this.Zd.restore()};kh.prototype.Ve=function(){return new jh(this)};function lh(a,b){var c=new kh("pumpkin",b),d=c.Sb,e=[-0.5,-1,0,0.5,1,0.5],f=d.min,d=d.max;if(e.length){var h=0;Q(f,e[h],e[h+1],e[h+2]);Q(d,e[h],e[h+1],e[h+2]);h++;for(var j=1;j<e.length/3;j++,h++)e[h]<f[0]?f[0]=e[h]:e[h]>d[0]&&(d[0]=e[h]),e[h+1]<f[1]?f[1]=e[h+1]:e[h+1]>d[1]&&(d[1]=e[h+1]),e[h+2]<f[2]?f[2]=e[h+2]:e[h+2]>d[2]&&(d[2]=e[h+2])}else Q(f,0,0,0),Q(d,0,0,0);ze(c.Od,0,0,0,1);e=ye(96,112,112,128);f=ye(112,112,128,128);d=ye(96,96,112,112);Be(e,e);Be(f,f);Be(d,d);e=new Float32Array([-0.5,-1,0.5,
0,0,1,e[2],e[3],0.5,-1,0.5,0,0,1,e[0],e[3],0.5,1,0.5,0,0,1,e[0],e[1],-0.5,1,0.5,0,0,1,e[2],e[1],-0.5,-1,-0.5,0,0,-1,f[0],f[3],-0.5,1,-0.5,0,0,-1,f[0],f[1],0.5,1,-0.5,0,0,-1,f[2],f[1],0.5,-1,-0.5,0,0,-1,f[2],f[3],-0.5,1,-0.5,0,1,0,d[2],d[1],-0.5,1,0.5,0,1,0,d[2],d[3],0.5,1,0.5,0,1,0,d[0],d[3],0.5,1,-0.5,0,1,0,d[0],d[1],-0.5,-1,-0.5,0,-1,0,e[0],e[1],0.5,-1,-0.5,0,-1,0,e[2],e[1],0.5,-1,0.5,0,-1,0,e[2],e[3],-0.5,-1,0.5,0,-1,0,e[0],e[3],0.5,-1,-0.5,1,0,0,e[0],e[3],0.5,1,-0.5,1,0,0,e[0],e[1],0.5,1,0.5,
1,0,0,e[2],e[1],0.5,-1,0.5,1,0,0,e[2],e[3],-0.5,-1,-0.5,-1,0,0,e[2],e[3],-0.5,-1,0.5,-1,0,0,e[0],e[3],-0.5,1,0.5,-1,0,0,e[0],e[1],-0.5,1,-0.5,-1,0,0,e[2],e[1]]);f=new Uint16Array(36);for(j=h=d=0;6>d;d++,h+=6,j+=4)f[h+0]=0+j,f[h+1]=1+j,f[h+2]=2+j,f[h+3]=0+j,f[h+4]=2+j,f[h+5]=3+j;c.yl(new $g(e.buffer,f));e=new fh;c.ao.push(e);e.primitiveType=4;e.cf=36;e=new ch;e.index=c.Tg.length;e.name=m;e.parent=m;c.Tg.push(e);f=e.Sb;d=c.Sb;cf(f.min,d.min);cf(f.max,d.max);Ae(e.Od,c.Od);return c};function mh(){G.call(this);this.Mf={}}D(mh,G);mh.prototype.b=function(){for(var a in this.Mf)I(this.Mf[a]);this.Mf={};mh.a.b.call(this)};mh.prototype.update=aa();function nh(a,b){mh.call(this);this.fb=a;this.ba=b;this.Pn={}}D(nh,mh);function oh(a,b){nh.call(this,a,b);this.Pn.pumpkin={id:"pumpkin",Xp:lh}}D(oh,nh);function ph(){this.ga=Array(256)}function qh(a,b){a.ga[b.id]=b};function rh(){G.call(this);this.gb={};this.Tc=[];this.La=this.$a=0}D(rh,G);t=rh.prototype;t.b=function(){this.Tc.length=0;rh.a.b.call(this)};t.update=function(){for(;this.Tc.length;){var a=this.Tc.shift();sh(this,a)}};t.Dc=s("La");t.get=function(a,b,c){return 0!=b>>7?m:this.gb[(a>>4&65535)<<16|c>>4&65535]||m};t.add=function(a){this.gb[(a.x>>4&65535)<<16|a.u>>4&65535]=a;0<a.re||this.Tc.push(a);this.$a++;this.La+=65792};t.remove=function(a){sh(this,a);0<a.re||E(this.Tc,a)};
function sh(a,b){delete a.gb[(b.x>>4&65535)<<16|b.u>>4&65535];a.La-=65792;a.$a--}t.Qk=function(a){this.Tc.push(a)};t.Rk=function(a){E(this.Tc,a)};function th(){G.call(this);this.yo=bf(0,191/255,1);this.Zc=bf(110/255,110/255,110/255);this.Bd=bf(1,1,-0.5);this.Ad=bf(130/255,130/255,130/255);this.wa=bf(1,1,1);cf(this.wa,this.yo)}D(th,G);th.prototype.update=aa();function uh(a,b,c,d,e){this.id=a;this.name=b;this.$h=c;this.q=d;this.ht=0;this.Qs=1;this.it=0;this.km=e}uh.prototype.rk=s("km");function vh(a,b,c,d,e){uh.call(this,a,b,c,d,e)}D(vh,uh);var wh=new Sg(17,"block_gravel"),xh=new Sg(17,"block_stone"),yh=new Sg(17,"block_wood"),zh=new Sg(97,"block_stone"),Ah=new Sg(17,"block_cloth");function Bh(){uh.call(this,6,"Red Cloth",Ah,17,129)}D(Bh,vh);function Ch(){uh.call(this,7,"Green Cloth",Ah,17,145)}D(Ch,vh);function Dh(){uh.call(this,8,"Yellow Cloth",Ah,17,162)}D(Dh,vh);function Eh(){uh.call(this,9,"Blue Cloth",Ah,17,177)}D(Eh,vh);function Fh(){uh.call(this,3,"Brick",xh,17,7)}D(Fh,vh);function Gh(){uh.call(this,1,"Dirt",wh,17,2)}D(Gh,vh);Gh.prototype.rk=function(a,b,c,d,e,f){if(f&1)switch(d){case 0:case 1:case 4:case 5:return 3;case 2:return 0;default:case 3:return 2}else return 2};function Hh(){uh.call(this,5,"Glass",zh,17,49)}D(Hh,vh);function Ih(){uh.call(this,2,"Stone",xh,17,1)}D(Ih,vh);function Jh(){uh.call(this,4,"Wood",yh,17,4)}D(Jh,vh);function Kh(){G.call(this);this.Ca=new ph;qh(this.Ca,new Gh);qh(this.Ca,new Ih);qh(this.Ca,new Fh);qh(this.Ca,new Jh);qh(this.Ca,new Hh);qh(this.Ca,new Bh);qh(this.Ca,new Ch);qh(this.Ca,new Dh);qh(this.Ca,new Eh);this.fd=new th;H(this,this.fd);this.Jd=[];this.Qa=new rh;H(this,this.Qa)}D(Kh,G);t=Kh.prototype;t.b=function(){Kh.a.b.call(this)};t.tk=function(){var a;a="Chunks: "+(this.Qa.$a+" cached (");a+=Math.floor(this.Qa.Dc()/1E3)+"K), ";return a+=this.Qa.$a-this.Qa.Tc.length+" used"};
t.update=function(a){this.fd.update(a);this.Qa.update(a)};t.Ga=function(a,b,c){var d=this.Qa.get(a,b,c);if(d)return d;d=new Mg(this,a&-16,b&-128,c&-16);this.Qa.add(d);this.po(d);return d};t.$k=function(a){for(var b=0;b<this.Jd.length;b++){var c=this.Jd[b],d=c.qc,e=a.Sb,f=d.min,d=d.max,h=e.min,e=e.max;-1!=(d[0]<h[0]||f[0]>e[0]||d[1]<h[1]||f[1]>e[1]||d[2]<h[2]||f[2]>e[2]?-1:f[0]>h[0]||e[0]>d[0]||f[1]>h[1]||e[1]>d[1]||f[2]>h[2]||e[2]>d[2]?0:1)&&c.$k(a)}};t.yp=A;t.Qk=function(a){this.Qa.Qk(a)};t.Rk=function(a){this.Qa.Rk(a)};
t.po=A;t.Cc=function(a,b,c){var d=this.Qa.get(a,b,c);return d?d.Cc(a,b,c):0};t.hc=function(a,b,c,d){var e=this.Qa.get(a,b,c);if(e){if(2!=e.state)return L("setBlock before chunk fully loaded - inconsistent state!"),0}else return 0;e=e.hc(a,b,c,d);if(e!=d)for(d=0;d<this.Jd.length;d++)for(var f=this.Jd[d],h=a,j=b,k=c,n=0;n<f.v.length;n++)f.v[n].Oh(h,j,k,0);return e};function Lh(){Kh.call(this)}D(Lh,Kh);Lh.prototype.po=aa();function Mh(){this.buffer=new Uint8Array(0);this.offset=0;this.va=new Float32Array(16);this.Fa=new Uint8Array(this.va.buffer);this.fq=(this.lf=v.Float64Array?new Float64Array(1):m)?new Uint8Array(this.lf.buffer):m}t=Mh.prototype;t.Ej=function(a,b){this.buffer=a instanceof Uint8Array?a:new Uint8Array(a);this.offset=b};function Nh(a){var b=a.buffer[a.offset++];a=a.buffer[a.offset++];b=b<<8|a;return 32767<b?b-65536:b}
function Oh(a){var b=a.buffer[a.offset++],c=a.buffer[a.offset++],d=a.buffer[a.offset++];a=a.buffer[a.offset++];b=b<<24|c<<16|d<<8|a;return 2147483647<b?b-4294967296:b}function Ph(a){return a.buffer[a.offset++]}function Qh(a){var b=a.buffer[a.offset++];a=a.buffer[a.offset++];return b<<8|a}t.ca=function(){var a=this.buffer[this.offset++],b=this.buffer[this.offset++],c=this.buffer[this.offset++],d=this.buffer[this.offset++];return a<<24|b<<16|c<<8|d};
t.z=function(){for(var a=0,b=0,c;(c=this.buffer[this.offset++]&255)&128;)a|=(c&127)<<b,b+=7;return a|c<<b};t.ni=function(){var a=this.z();return(a<<31>>31^a)>>1^a&-2147483648};t.ko=function(){this.Fa[0]=this.buffer[this.offset++];this.Fa[1]=this.buffer[this.offset++];this.Fa[2]=this.buffer[this.offset++];this.Fa[3]=this.buffer[this.offset++];return this.va[0]};t.Er=function(){for(var a=0;12>a;a++)this.Fa[a]=this.buffer[this.offset++];return this.va};
t.Fr=function(){for(var a=0;16>a;a++)this.Fa[a]=this.buffer[this.offset++];return this.va};t.t=function(){var a=Qh(this);Qh(this);for(var b=Array(a),c=0;c<a;){var d=this.buffer[this.offset++];if(128>d)b[c++]=String.fromCharCode(d);else if(191<d&&224>d){var e=this.buffer[this.offset++];b[c++]=String.fromCharCode((d&31)<<6|e&63)}else{var e=this.buffer[this.offset++],f=this.buffer[this.offset++];b[c++]=String.fromCharCode((d&15)<<12|(e&63)<<6|f&63)}}return b.join("")};var Rh=m;
function Sh(){Rh||(Rh=new Mh);return Rh};function Th(a){this.Nm=y(a)?a:1}Th.cp=1;
Th.prototype.so=function(a,b){switch(Th.cp){case 1:vg(b,1);var c;a:{ug(b,a.x);ug(b,a.y);ug(b,a.u);vg(b,this.Nm);switch(this.Nm){default:case 0:c=new Uint8Array(a.Fb.buffer);b.ea(4+c.length);b.bb(c.length);for(var d=0;d<c.length;d++)b.buffer[b.offset++]=c[d];break;case 1:b.ea(65668);d=b.offset+4;c=a.Fb;for(var d=b.buffer.subarray(d,d+65664),e=0,f=0,h=0,j=0;j<c.length;j++){var k=c[j];j&&k==f?h++:(f=k,h=1);if(j>=c.length-2||c[j+1]!=f)1<h||255==f>>8?(d[e++]=255,d[e++]=h>>8,d[e++]=h&255,d[e++]=f>>8,d[e++]=
f&255):(d[e++]=k>>8,d[e++]=k&255)}c=e;if(0>c){c=q;break a}b.bb(c);b.offset+=c;break;case 2:c=q;break a}c=l}return c;default:return q}};
Th.prototype.Wm=function(a,b){switch(Ph(b)){case 1:var c;a:{c=Oh(b);var d=Oh(b),e=Oh(b);a.x=c;a.y=d;a.u=e;var f=a.Sb,h=c+16,j=d+128,k=e+16;Q(f.min,c,d,e);Q(f.max,h,j,k);d=Ph(b);c=a.Fb;switch(d){default:case 0:b.ca();d=0;for(e=b.offset;32768>d;d++,e+=2)c[d]=b.buffer[e+1]<<8|b.buffer[e];break;case 1:h=b.ca();d=b.buffer;f=b.offset;e=0;f=f?f:0;h=h?h:d.length;for(j=f;j<f+h;)if(k=d[j++],255==k)for(var k=d[j++]<<8|d[j++],n=d[j++]<<8|d[j++],p=0;p<k;p++)c[e++]=n;else c[e++]=k<<8|d[j++];break;case 2:c=q;break a}a.mh=
q;a.state=2;a.map.$k(a);c=l}return c;default:return q}};Th.Bl=m;Th.ln=function(){Th.Bl||(Th.Bl=new Th(1));return Th.Bl};Th=Ba(Th,"blk.io.ChunkSerializer",{so:"serializeToWriter",Wm:"deserializeFromReader"});function Uh(a){this.factory=a;this.Qc=this.kg=0}t=Uh.prototype;t.getTime=s("kg");t.setTime=function(a){this.kg=(1E3*a|0)/1E3};t.read=function(a){var b=this.factory.q;b&2&&(this.kg=a.z()/1E3);b&4||(this.Qc=a.z())};t.write=function(a){var b=this.factory.q;b&2&&a.pc(1E3*this.kg|0);b&4||a.pc(this.Qc)};t.td=function(){this.factory.td(this)};function Vh(a){Uh.call(this,a);this.wl=this.Si=0;this.Ih=q}D(Vh,Uh);Vh.prototype.read=function(a){Vh.a.read.call(this,a);this.Si=a.z()/1E3;this.Ih=q};
Vh.prototype.write=function(a){Vh.a.write.call(this,a);a.pc(1E3*this.Si|0)};function Wh(a){Uh.call(this,a);this.ei=0}D(Wh,Uh);Wh.prototype.read=function(a){Wh.a.read.call(this,a);this.ei=a.z()};Wh.prototype.write=function(a){Wh.a.write.call(this,a);a.pc(this.ei)};function Xh(a,b,c,d){G.call(this);this.ma=a;this.factory=b;this.dl=m;this.Ud=c;this.ed=d;this.la=m;this.O=[];this.ta=0;this.Pb=Yh(b,this);this.hb=d&(Zh|$h)?Yh(b,this):m;this.Y=[]}D(Xh,G);t=Xh.prototype;t.b=function(){var a=this.getParent();a&&(E(a.O,this),a.Qd(this));this.factory.zd.push(this.Pb);this.hb&&this.factory.zd.push(this.hb);for(a=0;a<this.Y.length;a++)this.factory.zd.push(this.Y[a]);Xh.a.b.call(this)};t.ob=s("ma");t.getParent=s("la");
function ai(a,b){if(a.la!=b){var c=a.la;a.la=b;a.el(c,b);c&&(E(c.O,a),c.Qd(a));b&&b.wj(a)}}t.wj=function(a){this.O.push(a);this.Zg(a)};t.el=A;t.Zg=A;t.Qd=A;t.sk=ca(m);function U(a){return a.hb||a.Pb}t.read=function(a){this.Pb.read(a)};t.pl=function(a){this.Pb.pl(a)};t.write=function(a){this.Pb.write(a)};function bi(a,b){if(a.ed&Zh){1==a.Y.length&&(a.Y[0].time=b);var c=Yh(a.factory,a);c.time=b;a.Pb.Pj(c);a.Y.push(c)}}
t.Mh=function(a){var b=this.ed;if(this.hb){this.Pb.eh(this.hb);if(b&Zh){var c=this.hb;if(this.Y.length&&!(this.Y[0].time>a)){for(var d=m,e=1;e<this.Y.length&&!(d=this.Y[e],d.time>=a);e++);if(e>=this.Y.length){d=this.Y[this.Y.length-1];c.Mh(d,d,0);for(c=0;c<this.Y.length-1;c++)this.factory.zd.push(this.Y[c]);this.Y.splice(0,this.Y.length-1)}else{var f=this.Y[e-1];a=(a-f.time)/(d.time-f.time);a=Math.min(Math.max(a,0),1);c.Mh(f,d,a);d=1<=a?e:e-1;if(0<d){for(c=0;c<d;c++)this.factory.zd.push(this.Y[c]);
this.Y.splice(0,d)}}}}b&$h&&this.Pb.Qj(this.hb)}};t.fh=function(a){a=ci(this.ma.Ub[a]||m);a.Qc=this.Ud;return a};t.Ta=function(a){a instanceof Wh&&(0==a.ei?ai(this,m):ai(this,this.ma.B[a.ei]||m))};function di(a,b,c){a.$j||ei(a.ma.cg,b,c===i?0:c,a.update,a)}t.qd=function(){this.hb&&this.Pb.eh(this.hb)};t.zr=A;t.Ck=function(){var a=!!this.ta;this.ta|=fi;a||(a=this.ma,a.jb[a.ib++]=this)};t.te=function(){this.ta=0;this.Pb.te();this.hb&&this.hb.te()};var $h=4,Zh=8,fi=2;function gi(a){G.call(this);this.Kr=a}D(gi,G);function hi(a){G.call(this);this.Lr=a;this.vl=[[],[],[],[],[]];this.No=[]}D(hi,G);function ei(a,b,c,d,e){var f=a.No.pop()||new ii;f.Ar=b;f.ul=a.Lr.W.mb;f.Oi=-1==c?0:0==c?f.ul+0.001:c;f.D=d;f.Kj=e||v;a=a.vl[b];b=0;for(c=a.length;b<c;)d=b+c>>1,0<f.Oi-a[d].Oi?b=d+1:c=d;a.splice(b,0,f)}var ji=Number.MAX_VALUE;
hi.prototype.update=function(a){a=a.time;for(var b=tc(),c=this.vl.length-1;0<=c;c--){for(var d=this.vl[c];d.length;){var e=d[0];if(e.Oi>a)break;d.shift();var f=a-e.ul,h=e.D,j=e.Kj;e.D=e.Kj=m;this.No.push(e);h.call(j,a,f)}if(tc()-b>=ji)break}};function ii(){this.Ar=ki;this.Oi=this.ul=0;this.Kj=this.D=m}var ki=0;function li(){this.Gf=this.bi=this.Lb=this.Zn=this.zn=this.Rf=this.ci=this.md=this.ee=this.ff=this.uh=this.gf=this.wh=this.ef=this.th=0}li.prototype.update=function(a){this.Lb+=this.ef;this.Lb+=this.gf;this.Lb+=this.ff;this.Lb+=this.md;this.bi+=this.Rf;1<=a-this.Gf&&(this.Gf=a,this.zn=this.Lb,this.Zn=this.bi,this.bi=this.Lb=0);this.ci=this.Rf=this.ee=this.md=this.uh=this.ff=this.wh=this.gf=this.th=this.ef=0};function mi(a,b){for(var c=String(a);c.length<b;)c=" "+c;return c}
li.prototype.Gh=function(){return["i/s:",mi(Math.round(this.zn),4)," o/s:",mi(Math.round(this.Zn),4)," ec:",mi(this.th,2),"/",mi(this.ef,4)," eu:",mi(this.wh,2),"/",mi(this.gf,4)," ed:",mi(this.uh,2),"/",mi(this.ff,4)," ic:",mi(this.ee,2),"/",mi(this.md,4)," oc:",mi(this.ci,2),"/",mi(this.Rf,4)].join("")};function ni(a,b,c){this.Rc=a;this.Qp=b;this.q=c;this.Tl=[]}function ci(a){return a.Tl.length?(a=a.Tl.pop(),a.Qc=0,a):new a.Qp(a)}ni.prototype.td=function(a){this.Tl.push(a)};function oi(a,b){gi.call(this,a);this.n=new li;this.cg=new hi(a);H(this,this.cg);this.rg=[];this.Ub={};this.dk={};this.Yk=b;this.B={};this.bg=m;this.jb=Array(256);this.ib=0;var c=new ni(0,Wh,0);this.Ub[c.Rc]=c}D(oi,gi);function pi(a,b){a.dk[b.Rc]=b}function qi(a){var b=a.Yk;a.Yk+=2;return b}t=oi.prototype;t.Rj=function(a,b){var c=this.dk[a].Rj(this,qi(this),b);this.Kd(c);return c};t.Kd=function(a){this.B[a.Ud]=a;var b=!!a.ta;a.ta|=1;b||(this.jb[this.ib++]=a);a.ed&128&&(this.bg=a)};
t.gn=function(a,b){for(var c in this.B)a.call(b||v,this.B[Number(c)])};t.ud=function(a,b){if(!(a.ta&4)){switch(b||ri){default:case ri:for(var c=a.O.length-1;0<=c;c--){var d=a.O[c];a.Qd(d);a.ma.ud(d)}if(d=a.sk())for(c=0;c<d.length;c++)a.ma.ud(d[c]);break;case si:for(c=0;c<a.O.length;c++)ai(a.O[c],m);if(d=a.sk())for(c=0;c<d.length;c++)ai(d[c],m);case ti:}delete this.B[a.Ud];c=!!a.ta;a.ta|=4;c||(this.jb[this.ib++]=a);I(a)}};t.fh=function(a){a=ci(this.Ub[a]||m);a.Qc=0;return a};
t.xh=function(a,b){for(var c=0;c<b;c++){var d=a[c],e=d.Qc;0==e?this.Ta(d):(e=this.B[e]||m)&&e.Ta(d);d instanceof Vh&&(d.Ih=l)}};t.Ta=A;t.fo=function(){for(var a=0;a<this.ib;a++){var b=this.jb[a];b.qd()}for(a=0;a<this.ib;a++){b=this.jb[a];this.jb[a]=m;if(b.ta&1)for(var c=0;c<this.rg.length;c++)this.rg[c].df(b);if(b.ta&4)for(c=0;c<this.rg.length;c++)this.rg[c].vh(b);b.te()}this.ib=0};t.ll=function(a){for(var b=0;b<this.ib;b++){var c=this.jb[b];c.zr(a);this.ho(a,c)}};t.ho=A;
t.qe=function(){for(var a=0;a<this.ib;a++){var b=this.jb[a];this.jb[a]=m;b.te()}this.ib=0};var ri=0,si=1,ti=2,oi=Ba(oi,"gf.sim.Simulator",{gn:"forEachEntity",xh:"executeCommands",fo:"postNetworkUpdateEntities",ll:"postTickUpdateEntities",qe:"postUpdate"});function ui(){this.zj=[];this.i=0}ui.prototype.compact=aa();ui.prototype.Ua=s("i");ui.prototype.zg=function(a){this.zj[this.i++]=a};function vi(a){for(var b=0;b<a.i;b++){var c=a.zj[b];c.factory.td(c)}a.i=0};function wi(){this.Sn=1;this.Rl=[];this.Ed=0;this.al=[];this.oe=0;this.$n=[];this.bl=0}wi.prototype.compact=aa();wi.prototype.zg=function(a){this.al[this.oe++]=a;a instanceof Vh&&(a.wl=this.Sn++,a.Ih=q,this.$n[this.bl++]=a)};
wi.prototype.write=function(a){a.pc(this.Sn-1);var b=this.oe;a.pc(this.oe);for(var c=0;c<this.oe;c++){var d=this.al[c];this.al[c]=m;a.pc(d.factory.Rc);d.write(a);d instanceof Vh?this.Rl[this.Ed++]=d:d.factory.td(d)}this.bl=this.oe=0;1500<this.Ed&&L("massive backup of commands, dying");return b};function W(a,b){oi.call(this,a,1);this.rb=b;b.Ja.X(30,this.un,this);this.Nh=[];this.Af=new ui;this.ne=new wi;this.Ff=0}D(W,oi);W.prototype.b=function(){W.a.b.call(this)};W.prototype.Ib=function(a){return this.rb.Ab[a]||m};W.prototype.Kd=function(a){W.a.Kd.call(this,a);a.ed&($h|Zh)&&this.Nh.push(a)};W.prototype.ud=function(a,b){W.a.ud.call(this,a,b);a.ed&($h|Zh)&&E(this.Nh,a)};W.bp=20;
W.prototype.update=function(a){var b=xi(this.Kr.W);this.Ak(b-0.5);this.xh(this.Af.zj,this.Af.Ua());vi(this.Af);this.cg.update(a);this.ll(a);this.ro(a);this.qe(a);this.Se(a)};W.prototype.Ak=function(a){for(var b=0;b<this.Nh.length;b++)this.Nh[b].Mh(a);a=this.ne;this.xh(a.Rl,a.Ed);this.xh(a.$n,a.bl)};W.prototype.zi=function(a){this.ne.zg(a)};W.prototype.ro=function(a){if(this.ne.oe&&a.time-this.Ff>=1/W.bp){this.Ff=a.time;a=yg();vg(a,31);var b=this.ne.write(a);this.n.ci+=b;this.n.Rf+=a.offset;this.rb.send(a.finish())}};
W.oj=15;W.prototype.Se=function(a){a.time-this.Gk<W.oj||(this.Gk=a.time,this.Af.compact(),this.ne.compact())};
W.prototype.un=function(a,b,c){b=c.z()/1E3;var d=c.z(),e=c.z(),f=c.z(),h=c.z();a=c.z();this.n.th+=e;this.n.wh+=f;this.n.uh+=h;this.n.ee+=a;var j=this.ne,k=j.Rl,n=j.Ed;if(n)if(k[n-1].wl<=d){for(var p=0;p<n;p++){var r=k[p];r.factory.td(r)}j.Ed=0}else{for(var w=n,p=0;p<n;p++){r=k[p];if(r.wl>d){w=p;break}r.factory.td(r)}k.splice(0,w);j.Ed-=w}for(d=0;d<this.ib;d++)j=this.jb[d],this.jb[d]=m,j.te();this.ib=0;k=m;for(d=j=0;d<e;d++){var j=c.offset,p=c.z()<<1,u=c.z(),r=c.z(),w=c.z(),n=c.z(),u=this.dk[u]||m;
if(!u)return q;(w=w?this.rb.cj[w]||m:m)&&(w!=yi(this.rb)&&r&$h)&&(r&=~$h);p=u.Rj(this,p,r);p.dl=w;p.read(c);this.n.ef+=c.offset-j;bi(p,b);this.Kd(p);n&&(k||(k=[]),k.push([p,n]))}for(d=0;d<f;d++){j=c.offset;p=c.z()<<1;p=this.B[p]||m;if(!p)return q;p.pl(c);this.n.gf+=c.offset-j;bi(p,b)}for(d=0;d<h;d++){j=c.offset;p=c.z()<<1;this.n.ff+=c.offset-j;p=this.B[p]||m;if(!p)return q;this.ud(p,ti)}if(k)for(d=0;d<k.length;d++){p=k[d][0];b=this.B[k[d][1]]||m;if(!b)return q;ai(p,b)}this.fo();for(d=0;d<a;d++){j=
c.offset;b=c.z();b=this.Ub[b]||m;if(!b)return q;b=ci(b);b.read(c);this.n.md+=c.offset-j;this.Af.zg(b)}return l};W=Ba(W,"gf.sim.ClientSimulator",{update:"update",Ak:"interpolateEntities",ro:"sendPendingCommands_",Se:"compact_",un:"handleSyncSimulation_"});function zi(a){switch(a){case 0:return"user closed the connection";case 1:return"socket killed or timed out";case 2:return"network protocol mismatch";case 3:return"unexpected data sent/received";case 4:return"access denied";case 5:return"kicked by console";case 6:return"banned";case 7:return"server full";default:return"unknown"}};function Ai(){this.Kp=this.Jp=this.ot=this.Os=this.Vs=this.Ws=this.mm=0}Ai.prototype.s=function(){return new Ai};Ai.prototype.toString=ca("[stats]");var Bi=function(){var a;return Cb?(a=/Windows NT ([0-9.]+)/,(a=a.exec(Db()))?a[1]:"0"):Bb?(a=/10[_.][0-9_.]+/,(a=a.exec(Db()))?a[0].replace(/_/g,"."):"10"):""}();function Ci(){this.Vl="";this.type=Di;this.platform=Ei;this.pe="";this.Sd=Fi}Ci.prototype.s=function(){var a=new Ci;a.Vl=this.Vl;a.type=this.type;a.platform=this.platform;a.pe=this.pe;a.Sd=this.Sd;return a};Ci.prototype.toString=function(){return[this.type,this.platform+this.pe,this.Sd].join("/")};var Di="unknown",Ei="other",Fi="desktop";function Gi(){this.Fg="none";this.Eg="0";this.Q="User"}Gi.prototype.s=function(){var a=new Gi;a.Fg=this.Fg;a.Eg=this.Eg;a.Q=this.Q;return a};Gi.prototype.toString=ca("[user]");function Hi(a){a=Ea(Da(Fa(a)));return!a.length?"User":a};function Ii(a,b,c,d,e){this.j=a||"";this.oc=b||0;this.q=c||0;this.info=d||new Gi;this.Ag=e||new Ci;this.Td=0;this.n=new Ai;this.data=this.Ka=m}Ii.prototype.toString=function(){return this.info.Q+" ("+this.j+"/"+this.oc+")"};function Ji(a){return new Ii(a.j,a.oc,a.q,a.info.s(),a.Ag.s())};function Ki(a,b,c){oi.call(this,a,2);this.rb=b;this.rb.Aa.push(this);this.rb.Ja.X(31,this.rn,this);this.sr=c;this.v=[];this.Fe={};this.Nj=new ui}D(Ki,oi);t=Ki.prototype;t.b=function(){yc(this.v);Ki.a.b.call(this)};t.Ib=function(a){return this.rb.Ab[a]||m};t.xj=function(a){this.v.push(a);var b=a.Ib();b&&(this.Fe[b.j]=a);this.gn(function(b){a.rr(b)},this)};t.sl=function(a){var b=a.Ib();b&&delete this.Fe[b.j];E(this.v,a);I(a)};
t.update=function(a){for(var b=0;b<this.v.length;b++)this.v[b].Ps();this.cg.update(a);this.ll(a);this.qe(a);this.Se(a)};t.Ta=aa();t.zi=function(a,b){var c=this.Fe[b.j];c&&c.$s(a);this.Nj.zg(a)};t.ho=function(a,b){if(!(b.ed&1))for(var c=0;c<this.v.length;c++)this.v[c].rr(b)};t.qe=function(a){for(var b=0;b<this.v.length;b++)this.v[b].flush(a.time);vi(this.Nj);Ki.a.qe.call(this,a)};Ki.oj=15;t=Ki.prototype;t.Se=function(a){if(!(a.time-this.Gk<Ki.oj)){this.Gk=a.time;this.Nj.compact();for(a=0;a<this.v.length;a++)this.v[a].compact()}};
t.Oj=A;t.Xj=A;t.Xl=function(a){var b=this.Fe[a.j]||m;b||(b=new this.sr(this,this.rb,a),this.xj(b))};t.Yl=function(a){(a=this.Fe[a.j]||m)&&this.sl(a)};t.Zl=A;t.rn=function(a,b,c){if(!a.zb)return q;b=this.Fe[a.zb.j]||m;if(!b)return q;var d=c.z(),e=c.z();this.n.ee+=e;this.n.md+=a.data.byteLength;for(var f=0;f<e;f++){var h=c.z(),h=this.Ub[h]||m;if(!h)return q;h=ci(h);h.read(c);var j=0==h.Qc;j||(j=this.B[h.Qc]||m,j=!j||j.dl!=a.zb);if(j)return h.td(),q;b.Zs(h)}b.et(d);return l};
Ki=Ba(Ki,"gf.sim.ServerSimulator",{update:"update",qe:"postUpdate",Se:"compact_",rn:"handleExecCommands_"});function Li(a){a=U(a.ma.bg);a.ij===i&&(a.ij=a.sg?a.fa.ob().B[a.sg]||m:m);return a.ij};function Mi(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],h=2*c,j=2*d,k=2*e,n=h*f,p=j*f,f=k*f,h=h*c,r=j*c,c=k*c,j=j*d,d=k*d,e=k*e;b[0]=1-(j+e);b[1]=r+f;b[2]=c-p;b[3]=0;b[4]=r-f;b[5]=1-(h+e);b[6]=d+n;b[7]=0;b[8]=c+p;b[9]=d-n;b[10]=1-(h+j);b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1}
function Ni(a,b,c,d){var e=a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3];if(1<e||-1>e)return Ae(d,b),d;var f=1;0>e&&(f=-1,e=-e);var h=Math.acos(e);if(1E-6>=h)return Ae(d,b),d;var j=1/Math.sin(h),e=Math.sin((1-c)*h)*j;c=f*Math.sin(c*h)*j;d[0]=a[0]*e+b[0]*c;d[1]=a[1]*e+b[1]*c;d[2]=a[2]*e+b[2]*c;d[3]=a[3]*e+b[3]*c;return d};function Oi(a,b,c,d){Xh.call(this,a,b,c,d);this.Qb=l;this.Pd=N();this.Jl=kf();U(this).wo(bf(1,1,1))}D(Oi,Xh);Oi.prototype.qd=function(){Oi.a.qd.call(this);this.Qb=l};
function Pi(a){if(a.Qb){a.Qb=q;var b=U(a),c=b.dc,d=b.ue,e=b.wi;a.Pd[0]=c[0];a.Pd[1]=c[1];a.Pd[2]=c[2];a.Pd[3]=b.Ug*Math.max(e[0],Math.max(e[1],e[2]));b=a.Jl;Mi(d,b);var d=e[0],f=e[1],e=e[2],h=b[1],j=b[2],k=b[3],n=b[4],p=b[5],r=b[6],w=b[7],u=b[8],z=b[9],x=b[10],M=b[11],K=b[12],V=b[13],ja=b[14],Ga=b[15];b[0]*=d;b[1]=h*d;b[2]=j*d;b[3]=k*d;b[4]=n*f;b[5]=p*f;b[6]=r*f;b[7]=w*f;b[8]=u*e;b[9]=z*e;b[10]=x*e;b[11]=M*e;b[12]=K;b[13]=V;b[14]=ja;b[15]=Ga;d=c[0];f=c[1];c=c[2];e=b[1];h=b[2];j=b[3];k=b[4];n=b[5];
p=b[6];r=b[7];w=b[8];u=b[9];z=b[10];x=b[11];M=b[12];K=b[13];V=b[14];ja=b[15];b[0]+=d*j;b[1]=e+f*j;b[2]=h+c*j;b[3]=j;b[4]=k+d*r;b[5]=n+f*r;b[6]=p+c*r;b[7]=r;b[8]=w+d*x;b[9]=u+f*x;b[10]=z+c*x;b[11]=x;b[12]=M+d*ja;b[13]=K+f*ja;b[14]=V+c*ja;b[15]=ja;a.getParent()}}
Oi.prototype.Ne=function(a){var b=U(this),c=a.ej,d=b.dc;Mi(b.ue,c);if(c==c){var b=c[1],e=c[2],f=c[3],h=c[6],j=c[7],k=c[11];c[1]=c[4];c[2]=c[8];c[3]=c[12];c[4]=b;c[6]=c[9];c[7]=c[13];c[8]=e;c[9]=h;c[11]=c[14];c[12]=f;c[13]=j;c[14]=k}else c[0]=c[0],c[1]=c[4],c[2]=c[8],c[3]=c[12],c[4]=c[1],c[5]=c[5],c[6]=c[9],c[7]=c[13],c[8]=c[2],c[9]=c[6],c[10]=c[10],c[11]=c[14],c[12]=c[3],c[13]=c[7],c[14]=c[11],c[15]=c[15];b=-d[0];e=-d[1];d=-d[2];f=c[1]*b+c[5]*e+c[9]*d+c[13];h=c[2]*b+c[6]*e+c[10]*d+c[14];j=c[3]*b+
c[7]*e+c[11]*d+c[15];c[12]=c[0]*b+c[4]*e+c[8]*d+c[12];c[13]=f;c[14]=h;c[15]=j;Qi(a)};function Ri(a,b,c,d){Oi.call(this,a,b,c,d);this.Mb=m;this.oi=q}D(Ri,Oi);t=Ri.prototype;t.b=function(){I(this.Mb);this.Mb=m;Ri.a.b.call(this)};t.Gr=function(){var a=U(this).rf();if(this.oi){this.Mb&&(I(this.Mb),this.Mb=m);if(a){a:{var b=this.ma.bg.Eh.On,c=b.Mf[a];if(!c){c=b.Pn[a];c=!c?m:c.Xp(b.fb,b.ba);if(!c){a=m;break a}b.Mf[a]=c}a=c.Ve()}this.Mb=a}this.oi=q}};t.rf=function(){return U(this).rf()};
t.qd=function(){Ri.a.qd.call(this);var a=U(this).rf(),a=a.length?a:m;if(a!=(this.Mb?this.Mb.Uk.id:m)&&!this.oi)this.oi=l,ei(this.ma.cg,ki,0,this.Gr,this)};t.A=function(a,b,c,d){if(this.Mb){b=this.Mb;a=lf();d.ga.push({ar:b,transform:a});this.Qb&&Pi(this);d=this.Jl;a[0]=d[0];a[1]=d[1];a[2]=d[2];a[3]=d[3];a[4]=d[4];a[5]=d[5];a[6]=d[6];a[7]=d[7];a[8]=d[8];a[9]=d[9];a[10]=d[10];a[11]=d[11];a[12]=d[12];a[13]=d[13];a[14]=d[14];a[15]=d[15];for(d=this.getParent();d!=m;)d instanceof Oi&&nf(d.Jl,a,a),d=d.getParent()}};function Si(a,b,c,d){Ri.call(this,a,b,c,d)}D(Si,Ri);function Ti(a){a=U(a);a.Jh===i&&(a.Jh=a.yf?a.fa.ob().B[a.yf]||m:m);return a.Jh};O();O();function Ui(){this.height=this.width=1;this.Rb=i;this.pr=0.1;this.Ah=100;this.Tf=l;this.Qf=lf();this.nl=lf();this.ej=lf();this.Ek=lf();this.Wc=lf();this.fe=lf();this.position=O();this.direction=O();this.nk=[N(),N(),N(),N(),N(),N()]}function Vi(a,b){var c,d;b instanceof Ud?(c=b.width,d=b.height):(c=b,d=i);if(a.width!=c||a.height!=d)a.width=c,a.height=d,a.Tf=l}function Wi(a,b){a.Ah!=b&&(a.Ah=b,a.Tf=l)}
function Qi(a){if(a.Tf){a.Tf=q;var b=2/a.width,c=2/-a.height;mf(a.Qf,b,c,1,0,-1,1,0,1);var b=a.Rb===i?a.width/a.height:a.Rb,c=a.pr,d=a.Ah,e=Math.PI/4/2,f=d-c,h=Math.sin(e);0==f||(0==h||0==b)||(e=Math.cos(e)/h,mf(a.nl,e/b,e,-(d+c)/f,-1,0,0,-(2*c*d)/f,0));nf(a.nl,a.ej,a.Wc);qf(a.Wc,a.fe)}nf(a.nl,a.ej,a.Wc);qf(a.ej,a.Ek);qf(a.Wc,a.fe);c=a.Wc;b=a.nk;ze(b[0],c[3]+c[0],c[7]+c[4],c[11]+c[8],c[15]+c[12]);ze(b[1],c[3]-c[0],c[7]-c[4],c[11]-c[8],c[15]-c[12]);ze(b[2],c[3]-c[1],c[7]-c[5],c[11]-c[9],c[15]-c[13]);
ze(b[3],c[3]+c[1],c[7]+c[5],c[11]+c[9],c[15]+c[13]);ze(b[4],c[3]+c[2],c[7]+c[6],c[11]+c[10],c[15]+c[14]);ze(b[5],c[3]-c[2],c[7]-c[6],c[11]-c[10],c[15]-c[14]);for(c=0;c<b.length;c++)d=b[c],f=1/Math.sqrt(d[0]*d[0]+d[1]*d[1]+d[2]*d[2]),d[0]*=f,d[1]*=f,d[2]*=f,d[3]*=f;Q(a.position,0,0,0);rf(a.Ek,a.position,a.position);b=2*(0.5/a.width)-1;c=1-2*(0.5/a.height);d=Xi[0];f=Xi[1];Q(d,b,c,-1);Q(f,b,c,1);tf(a.fe,d,d);tf(a.fe,f,f);hf(d,f,a.direction);a=b=a.direction;a[0]=-b[0];a[1]=-b[1];a[2]=-b[2]}
var Xi=[O(),O(),O(),O(),O(),O(),O(),O()];function X(a,b){G.call(this);this.map=a;this.aa=Math.min(Math.max(Math.floor(b),X.qj),X.pj);this.sb=2*this.aa+1;this.gb=Array(this.sb*X.im*this.sb);this.rc=O();this.$=new Int32Array(3);this.qc=Jg(this.rc[0]-16*this.aa,0,this.rc[2]-16*this.aa,this.rc[0]+16*this.aa,128,this.rc[2]+16*this.aa);this.v=[];this.Xq=q}D(X,G);X.em=8;X.jp=16;X.qj=1;X.pj=16;X.im=1;t=X.prototype;t.b=function(){yc(this.v);X.a.b.call(this)};t.xj=function(a){this.v.push(a)};t.sl=function(a){E(this.v,a)};
t.An=function(a){cf(this.rc,a);this.ql();this.Xq=l};t.update=function(a){cf(this.rc,a);var b=a[0]>>4,c=a[2]>>4;a=b-this.$[0];var d=c-this.$[2];if(a||d){var b=b<<4,c=c<<4,e=this.qc,f=b+16*this.aa,h=c+16*this.aa;Q(e.min,b-16*this.aa,0,c-16*this.aa);Q(e.max,f,0,h);this.qc.max[0]+=16;this.qc.max[1]+=128;this.qc.max[2]+=16;this.$[0]+=a;this.$[1]+=0;this.$[2]+=d;this.ql()}};
t.ql=function(){this.$[0]=this.rc[0]>>4;this.$[1]=0;this.$[2]=this.rc[2]>>4;this.jo(this.$[0]-this.aa,0,this.$[2]-this.aa,this.sb,X.im,this.sb)};function Yi(a,b,c){b%=a.sb;c%=a.sb;0>b&&(b=a.sb+b);0>c&&(c=a.sb+c);return b+c*a.sb}
t.jo=function(a,b,c,d,e,f){for(b=a;b<a+d;b++)for(e=c;e<c+f;e++){var h=b,j=e,k=Yi(this,h,j);if(!(0>k||k>this.gb.length))if(h=this.map.Ga(h<<4,0,j<<4),h!=this.gb[k]){if(j=this.gb[k]){for(var n=0;n<this.v.length;n++)this.v[n].Jm(j);j.re--;j.re||j.map.Qk(j)}j=h;j.re||j.map.Rk(j);j.re++;this.gb[k]=h;for(n=0;n<this.v.length;n++)this.v[n].Im(h)}}};t.$k=function(a){for(var b=0;b<this.v.length;b++)this.v[b].Km(a),this.v[b].Ph(a.x,a.y,a.u,a.x+16-1,a.y+128-1,a.u+16-1,3)};
t.Ga=function(a,b,c){if(0>b||128<=b)return m;a>>=4;c>>=4;var d=Math.abs(c-this.$[2]);if(Math.abs(a-this.$[0])>this.aa||0!=b>>7||d>this.aa)return m;b=Yi(this,a,c);return 0>b||b>this.gb.length?m:this.gb[b]};t.hq=function(a,b){Qa(this.gb,a,b)};t.Bh=function(a,b,c){Zi(this,a,this.$[0]-this.aa,this.$[2]-this.aa,this.sb,b,c)};
function Zi(a,b,c,d,e,f,h){var j=X.js,k=16*(c+e),n=16*(d+e);Q(j.min,16*c,0,16*d);Q(j.max,k,128,n);a:{k=j.min;n=j.max;cf(Xi[0],k);Q(Xi[1],k[0],k[1],n[2]);Q(Xi[2],k[0],n[1],k[2]);Q(Xi[3],k[0],n[1],n[2]);Q(Xi[4],n[0],k[1],k[2]);Q(Xi[5],n[0],k[1],n[2]);Q(Xi[6],n[0],n[1],k[2]);cf(Xi[7],n);for(var k=0,n=b.nk,p=0;p<n.length;p++){for(var r=n[p],w=8,u=1,z=0;8>z;z++){var x=Xi[z];0>r[0]*x[0]+r[1]*x[1]+r[2]*x[2]+r[3]&&(u=0,w--)}if(!w){k=-1;break a}k+=u}k=6==k?1:0}if(1==k){b=j.min[0]>>4;c=j.max[0]>>4;d=j.max[2]>>
4;for(j=j.min[2]>>4;j<d;j++)for(e=b;e<c;e++)(k=a.Ga(e<<4,0,j<<4))&&f.call(h,k)}else if(0==k)if(1>=e)(a=a.Ga(c<<4,0,d<<4))&&f.call(h,a);else{j=e/2|0;for(e=0;1>=e;e++)for(k=0;1>=k;k++)Zi(a,b,c+k*j,d+e*j,j,f,h)}}
t.Bk=function(a,b){var c=m,d=Math.floor(a[0]),e=Math.floor(a[1]),f=Math.floor(a[2]),h=0==a[3]?0:0>a[3]?-1:1,j=0==a[4]?0:0>a[4]?-1:1,k=0==a[5]?0:0>a[5]?-1:1,n=(d+(0<h?1:0)-a[0])/a[3],p=(e+(0<j?1:0)-a[1])/a[4],r=(f+(0<k?1:0)-a[2])/a[5];isNaN(n)&&(n=Number.POSITIVE_INFINITY);isNaN(p)&&(p=Number.POSITIVE_INFINITY);isNaN(r)&&(r=Number.POSITIVE_INFINITY);var w=h/a[3],u=j/a[4],z=k/a[5];isNaN(w)&&(w=Number.POSITIVE_INFINITY);isNaN(u)&&(u=Number.POSITIVE_INFINITY);isNaN(z)&&(z=Number.POSITIVE_INFINITY);for(var x=
Math.min(b,16*this.sb),M=0;M<x;M++){var K=this.Ga(d,e,f);if(K&&(c=K.Bk(a)))break;n<p&&n<r?(n+=w,d+=h):p<r?(p+=u,e+=j):(r+=z,f+=k)}return c&&c.ak>b?m:c};t.Cc=function(a,b,c){var d=this.Ga(a,b,c);return d?d.Cc(a,b,c):0};t.hc=function(a,b,c,d){var e=this.Ga(a,b,c);if(!e||!e.hc(a,b,c,d))return q;for(d=0;d<this.v.length;d++)this.v[d].Oh(a,b,c,0);return l};X.jt=[O(),O()];X.js=new Ig;X=Ba(X,"blk.env.ChunkView",{An:"initialize",update:"update",ql:"rebuildCube_",jo:"pullChunks_",hq:"forEachChunk",Bh:"forEachInViewport"});function $i(a,b){G.call(this);this.rb=a;this.Oo=b;this.ve=[];this.Hk=-$i.gm;this.Ff=0}D($i,G);$i.gm=3;$i.np=20;$i.ap=100;t=$i.prototype;t.dd=function(a){0<=Pa(this.ve,a)||(this.ve.push(a),this.Hk=0)};
t.Br=function(a,b){var c=Math.min($i.np,this.ve.length);wa("count",this.ve.length);if(a-this.Hk>$i.gm){this.Hk=a;var d=Og[0];Wa(this.ve,function(a,c){Q(d,a.x+8,b[1],a.u+8);var e=gf(b,d);Q(d,c.x+8,b[1],c.u+8);return e-gf(b,d)})}a-this.Ff>1/$i.ap?this.Ff=a:c=0;if(c)for(var e=yg(),f=Th.ln(),h=0;h<c;h++){var j=this.ve.shift();Bg.x=j.x;Bg.y=j.y;Bg.u=j.u;var k=e,n=Bg;vg(k,73);ug(k,n.x);ug(k,n.y);ug(k,n.u);if(!j.Ci){k=j;var n=f,p=j,r=yg();n.so(p,r)?n=r.finish():(r.offset=0,n=m);k.Ci=n}k=e;j=j.Ci;j instanceof
Uint8Array||(j=new Uint8Array(j));k.ea(j.length);for(n=0;n<j.length;n++)k.buffer[k.offset++]=j[n];this.rb.send(e.finish(),this.Oo);e.offset=0}};t.Km=function(a){this.dd(a)};t.Im=function(a){2==a.state&&this.dd(a)};t.Jm=A;t.Oh=A;t.Ph=A;$i=Ba($i,"blk.env.server.ChunkSendQueue",{Br:"process"});function aj(a){Uh.call(this,a);this.Cg=0}D(aj,Uh);aj.prototype.read=function(a){aj.a.read.call(this,a);this.Cg=a.ko()};aj.prototype.write=function(a){aj.a.write.call(this,a);a.Vo(this.Cg)};function bj(a,b,c,d){Oi.call(this,a,b,c,d);this.Rb=i;this.Db=this.r=m}D(bj,Oi);bj.prototype.b=function(){this.r&&this.Db&&(E(this.r.Jd,this.Db),I(this.Db));bj.a.b.call(this)};bj.prototype.Al=function(a){this.r=a;this.Db=new X(a,X.jp);a.Jd.push(this.Db);this.Db.An(O());di(this,1,0)};bj.prototype.update=function(){var a=cj,b=this.getParent();b instanceof Oi?(b.Qb&&Pi(b),Ae(a,b.Pd)):(this.Qb&&Pi(this),Ae(a,this.Pd));this.Db.update(a);di(this,1,0)};
bj.prototype.Ne=function(a){if(this.Rb){var b=this.Rb;a.Rb!==b&&(a.Rb=b,a.Tf=l)}b=this.getParent();b instanceof Oi?b.Ne(a):bj.a.Ne.call(this,a)};var cj=N();function dj(a){Vh.call(this,a);this.Ui=0}D(dj,Vh);dj.prototype.read=function(a){dj.a.read.call(this,a);this.Ui=a.ca()};dj.prototype.write=function(a){dj.a.write.call(this,a);a.bb(this.Ui)};function ej(a,b,c,d){Xh.call(this,a,b,c,d)}D(ej,Xh);t=ej.prototype;t.ae=function(){return this.getParent()};t.Zg=function(a){ej.a.Zg.call(this,a)};t.Qd=function(a){ej.a.Qd.call(this,a)};t.Ta=function(a){ej.a.Ta.call(this,a);if(a instanceof dj){var b=this.ae();a:{for(var c=0;c<this.O.length;c++)if(this.O[c].Ud==a.Ui){a=this.O[c];break a}a=m}a&&U(b).to(a?a.Ud:0)}};
t.Ob=function(a,b){var c=b.V,d=b.K,e=Ti(this.ae()),f=this.O.length,h=e?Pa(this.O,e):0,e=h;d.xc&&(e=(h+(0<d.xc?1:-1))%f,0>e&&(e=f-1));49 in c.H?e=0:50 in c.H?e=1:51 in c.H?e=2:52 in c.H?e=3:53 in c.H?e=4:54 in c.H?e=5:55 in c.H?e=6:56 in c.H?e=7:57 in c.H?e=8:48 in c.H&&(e=9);e=Math.min(Math.max(e,0),f-1);e!=h&&(c=this.fh(67),c.Ui=(this.O[e]||m).Ud,this.ma.zi(c),this.ma.bg.Eh.ia());return l};function fj(a){Vh.call(this,a);this.fc=this.za=this.cb=this.yi=this.xi=this.Eb=this.Wi=0}D(fj,Vh);var gj=360*(1/32767)*Math.PI/180;fj.prototype.read=function(a){fj.a.read.call(this,a);this.Wi=Ph(a);this.Eb=Ph(a);this.Eb&1&&(this.xi=Qh(a),this.yi=Qh(a));this.cb=Nh(a);this.za=Nh(a)};fj.prototype.write=function(a){fj.a.write.call(this,a);vg(a,this.Wi);vg(a,this.Eb);this.Eb&1&&(wg(a,this.xi),wg(a,this.yi));tg(a,this.cb);tg(a,this.za)};function hj(){this.mk=l}
hj.prototype.Ta=function(a,b){var c=a.Si,d=a.cb*gj,e=a.za*gj,f=a.fc*gj,h=ij,j=Math.sin(d/2),d=Math.cos(d/2),k=Math.sin(e/2),e=Math.cos(e/2),n=Math.sin(f/2),f=Math.cos(f/2);h[0]=d*k*f+j*e*n;h[1]=j*e*f-d*k*n;h[2]=d*e*n-j*k*f;h[3]=d*e*f+j*k*n;b.vo(ij);if(this.mk){h=b.dc;j=jj[4];k=b.ue;d=b.dj;f=jj[5];e=ff(d);1E-4<e?(n=Math.max(0,e-40*c),ef(d,n/e,f)):Q(f,0,0,0);d=a.Wi;e=jj[0];e[0]=0;e[0]+=18*!!(d&1);e[0]-=18*!!(d&2);e[1]=0;e[1]+=18*!!(d&4);e[1]-=18*!!(d&8);e[2]=0;e[2]+=18*!!(d&16);e[2]-=18*!!(d&32);var d=
jj[1],n=k[0]*(k[0]+k[0]),p=k[3]*(k[0]+k[0]),r=k[0]*(k[1]+k[1]),w=k[1]*(k[1]+k[1]),u=k[3]*(k[1]+k[1]),z=k[0]*(k[2]+k[2]),x=k[1]*(k[2]+k[2]),M=k[2]*(k[2]+k[2]),k=k[3]*(k[2]+k[2]),K=e[0],V=e[1],e=e[2];d[0]=K*(1-w-M)+V*(r-k)+e*(z+u);d[1]=K*(r+k)+V*(1-n-M)+e*(x-p);d[2]=K*(z-u)+V*(x+p)+e*(1-n-w);k=jj[2];(e=ff(d))?ef(d,1/e,k):Q(k,0,0,0);e=ff(d);18<e&&(ef(d,18/e,d),e=18);d=e-(f[0]*k[0]+f[1]*k[1]+f[2]*k[2]);0<d&&(e=20*e*c,e>d&&(e=d),ef(k,e,k),df(k,f,f));d=jj[3];ef(f,c,d);df(h,d,j);b.setPosition(j);b.setVelocity(f)}};
var jj=[O(),O(),O(),O(),O(),O()];N();N();N();kf();new Float32Array(6);var ij=N();function kj(a){Xc.call(this);this.Ha=a;this.enabled=l}D(kj,Xc);kj.prototype.Xa=A;kj.prototype.ja=ba("enabled");function lj(a){kj.call(this,a)}D(lj,kj);function mj(){this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=q;this.h={};this.H={};this.ie={};this.Gc=this.he=0}mj.prototype.s=function(){var a=new mj;a.ctrlKey=this.ctrlKey;a.altKey=this.altKey;a.shiftKey=this.shiftKey;a.metaKey=this.metaKey;a.h=lb(this.h);a.H=lb(this.H);a.ie=lb(this.ie);a.he=this.he;a.Gc=this.Gc;return a};mj.prototype.reset=function(){this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=q;this.he&&(jb(this.h),this.he=0);this.Gc&&(jb(this.H),jb(this.ie),this.Gc=0)};
mj.prototype.Xa=function(){this.Gc&&(jb(this.H),jb(this.ie),this.Gc=0)};mj.prototype.update=function(a,b){var c=a.zc.keyIdentifier,d=a.keyCode;d?(25==d&&a.shiftKey&&(d=9),Hb&&d in nj&&(d=nj[d])):c&&c in oj&&(d=oj[c]);b?this.h[d]||(this.h[d]=l,this.H[d]=l,this.he++,this.Gc++):this.h[d]&&(delete this.h[d],this.ie[d]=l,this.he--,this.Gc++);switch(d){case 17:this.ctrlKey=b;break;case 18:this.altKey=b;break;case 16:this.shiftKey=b;break;case 91:case 92:this.metaKey=b}};
var oj={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},nj={61:187,59:186,224:91};function pj(a){kj.call(this,a);this.ok=m;this.c=new mj;this.enabled=q;this.ja(l)}D(pj,kj);function qj(a){if(a.ctrlKey||a.metaKey){switch(a.keyCode){case 82:return l;case 73:return l}if(a.shiftKey)switch(a.keyCode){case 74:return l}}else switch(a.keyCode){case 27:case 116:return l}return q}t=pj.prototype;t.uk=function(a){qj(a)||(a.preventDefault(),this.c.update(a,l),13 in this.c.H&&(this.c.altKey||this.c.metaKey)&&this.ok&&this.ok())};t.Jq=function(a){qj(a)||(a.preventDefault(),this.c.update(a,q))};
t.Iq=function(){this.c.reset()};t.Nb=s("c");t.reset=function(){this.c.reset()};t.Xa=function(){this.c.Xa()};t.ja=function(a){this.enabled!=a&&(pj.a.ja.call(this,a),a?(a=Zd(this.Ha),this.listen(a,"keydown",this.uk),this.listen(a,"keyup",this.Jq),this.listen(a?a.parentWindow||a.defaultView:window,["focus","blur"],this.Iq)):$c(this))};function rj(){this.sa=this.Pa=this.p=this.xc=this.wc=this.vc=this.clientY=this.clientX=this.screenY=this.screenX=0;this.U=q}rj.prototype.s=function(){var a=new rj;a.screenX=this.screenX;a.screenY=this.screenY;a.vc=this.vc;a.wc=this.wc;a.xc=this.xc;a.p=this.p;a.Pa=this.Pa;a.sa=this.sa;a.U=this.U;return a};rj.prototype.reset=function(){this.sa=this.Pa=this.p=this.xc=this.wc=this.vc=this.screenY=this.screenX=0;this.U=q};rj.prototype.Xa=function(){this.sa=this.Pa=this.xc=this.wc=this.vc=0};
rj.prototype.update=function(a,b){var c=a.zc,d=a.screenX,e=a.screenY,f=0,h=0;c.webkitMovementX!==i?(f=c.webkitMovementX,h=c.webkitMovementY):c.mozMovementX!==i?"mousemove"==a.type?(f=c.mozMovementX,h=c.mozMovementY):f=h=0:c.movementX!==i?(f=c.movementX,h=c.movementY):(f=d-this.screenX,h=e-this.screenY);this.screenX=d;this.screenY=e;this.clientX=a.clientX;this.clientY=a.clientY;this.vc+=f*b;this.wc+=h*b};function sj(a){kj.call(this,a);this.c=new rj;this.Ni=!(!a.requestPointerLock&&!a.mozRequestPointerLock&&!a.webkitRequestPointerLock);this.Ai=1;this.ph=this.gj=this.U=this.Mn=q;this.listen(a,"mousedown",this.Kq);this.listen(a,"mousemove",this.vf);this.listen(a,"mouseover",this.Mq);this.listen(a,"mouseout",this.Lq);this.listen(a,Hb?"DOMMouseScroll":"mousewheel",this.Nq);this.listen(a,["selectstart","contextmenu"],function(a){a.preventDefault()});this.Ni&&(this.listen(document,["pointerlockchange","mozpointerlockchange",
"webkitpointerlockchange"],function(){this.U=document.pointerLockElement===a||document.mozPointerLockElement===a||document.webkitPointerLockElement===a}),this.listen(document,["pointerlockerror","mozpointerlockerror","webkitpointerlockerror"],function(){this.U=q}))}D(sj,kj);function tj(a){if(!a.Ni||a.U||!uj(a))return q;(a.Ha.requestPointerLock||a.Ha.mozRequestPointerLock||a.Ha.webkitRequestPointerLock).call(a.Ha);a.c.reset();return l}
function uj(a){return!a.enabled?q:a.Mn&&a.Ni?Hb&&!document.mozFullscreenElement&&!document.mozFullScreenElement?q:l:q}function vj(a){a.gj=q;a.U&&((document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock).call(document),a.c.reset())}t=sj.prototype;
t.Kq=function(a){if(this.enabled&&(a.preventDefault(),!uj(this)||!tj(this))){this.c.update(a,this.Ai);switch(a.button){case 0:this.c.p|=1;this.c.Pa|=1;break;case 1:this.c.p|=2;this.c.Pa|=2;break;case 2:this.c.p|=4,this.c.Pa|=4}!this.U&&(this.c.p&&!this.ph)&&(this.ph=l,this.listen(Zd(this.Ha),"mousemove",this.vf),this.listen(Zd(this.Ha),"mouseup",this.sn),Zc(this,this.Ha,"mousemove",this.vf))}};
t.sn=function(a){if(this.enabled&&(!uj(this)||this.U)){a.preventDefault();this.c.update(a,this.Ai);switch(a.button){case 0:this.c.p&=-2;this.c.sa|=1;break;case 1:this.c.p&=-3;this.c.sa|=2;break;case 2:this.c.p&=-5,this.c.sa|=4}!this.U&&(!this.c.p&&this.ph)&&(this.ph=q,Zc(this,Zd(this.Ha),"mousemove",this.vf),Zc(this,Zd(this.Ha),"mouseup",this.sn),this.listen(this.Ha,"mousemove",this.vf))}};t.vf=function(a){if(this.enabled&&(!uj(this)||this.U))a.preventDefault(),this.c.update(a,this.Ai)};
t.Mq=function(a){this.enabled&&a.preventDefault()};t.Lq=function(a){this.enabled&&a.preventDefault()};t.Nq=function(a){if(this.enabled){a.preventDefault();var b=0;a=a.zc;y(a.wheelDelta)?(b=a.wheelDelta/120,Gb&&(b=-b)):y(a.detail)&&(b=-a.detail/3);this.c.xc+=b}};t.Nb=function(){this.c.U=this.U;return this.c};t.Xa=function(){this.c.Xa()};t.ja=function(a){a!=this.enabled&&(sj.a.ja.call(this,a),a?this.gj&&(tj(this),this.gj=q):this.U&&(vj(this),this.gj=l))};function wj(a){kj.call(this,a)}D(wj,kj);function xj(a,b){gi.call(this,a);this.Ha=b;this.Yd=this.Ce=this.K=this.V=m;this.V=new pj(b);H(this,this.V);this.K=new sj(b);H(this,this.K);this.Ce=new wj(b);H(this,this.Ce);this.Yd=new lj(b);H(this,this.Yd)}D(xj,gi);xj.prototype.Xa=function(){this.V&&this.V.Xa();this.K&&this.K.Xa();this.Ce&&this.Ce.Xa();this.Yd&&this.Yd.Xa()};xj.prototype.ja=function(a){this.V&&this.V.ja(a);this.K&&this.K.ja(a);this.Ce&&this.Ce.ja(a);this.Yd&&this.Yd.ja(a)};function yj(a,b,c,d){Xh.call(this,a,b,c,d)}D(yj,Xh);yj.prototype.ae=function(){return this.getParent()};function zj(a,b,c,d){Ri.call(this,a,b,c,d)}D(zj,Ri);zj.prototype.el=function(a,b){zj.a.el.call(this,a,b)};zj.prototype.gl=A;function Aj(a,b,c,d){Xh.call(this,a,b,c,d);this.rs=new Ui;this.mr=new hj}D(Aj,yj);
Aj.prototype.Ta=function(a){Aj.a.Ta.call(this,a);var b=this.ae();if(b&&a instanceof fj){this.mr.Ta(a,U(b));var c,d=U(this);d.gi===i&&(d.gi=d.Uf?d.fa.ob().B[d.Uf]||m:m);c=d.gi;var d=Bj(U(c)),e=d.Db,f=this.rs;Wi(f,16*d.Db.aa+16);d.Ne(f);if(a.Eb&&(d=Ti(b))){var h=Cj;h.time=a.getTime();h.viewport=f;h.Lm=e;h.il=c;h.wp=b;h.screenX=0.5;h.screenY=0.5;a.Eb&1&&(h.screenX=a.xi/65535,h.screenY=a.yi/65535);var b=h.ol,j=2*(h.screenX/f.width)-1,k=1-2*(h.screenY/f.height);c=Xi[0];e=Xi[1];Q(c,j,k,-1);Q(e,j,k,1);tf(f.fe,
c,c);tf(f.fe,e,e);hf(c,e,e);var f=c[1],j=c[2],k=e[0],n=e[1],e=e[2];b[0]=c[0];b[1]=f;b[2]=j;b[3]=k;b[4]=n;b[5]=e;a.Ih||(a=a.Eb,a&4&&d.gl(h,0),a&32&&d.gl(h,1))}}};var Cj=new function(){this.time=0;this.wp=this.il=this.Lm=this.viewport=m;this.screenY=this.screenX=0;this.ol=new Float32Array(6)};function Dj(a,b,c,d){Ri.call(this,a,b,c,d)}D(Dj,zj);Dj.prototype.qf=function(){var a=U(this).qf();return Li(this).r.Ca.ga[a]};Dj.prototype.xl=function(a){U(this).xl(a.id)};
Dj.prototype.gl=function(a,b){var c=a.Lm.Bk(a.ol,100);if(c&&100>=c.ak)if(0==b){var d=c.um,e=c.vm,f=c.wm,h=0,j=0,k=0,c=c.eo;c[0]==d?h--:c[0]==d+1&&h++;c[1]==e?j--:c[1]==e+1&&j++;c[2]==f?k--:c[2]==f+1&&k++;c=d+h;e+=j;f+=k;j=this.qf();k=a.il;j=j?j.id<<8:0;Li(this).hc(c,e,f,j,k)}else 1==b&&(f=c.um,k=c.vm,c=c.wm,e=a.il,Li(this).hc(f,k,c,0,e))};function Ej(a,b,c,d){Xh.call(this,a,b,c,d)}D(Ej,Xh);Ej.prototype.Ib=function(){var a=U(this);a.aj===i&&(a.aj=a.Ee?a.fa.ob().Ib(a.Ee):m);return a.aj};Ej.prototype.sk=function(){var a=U(this);a.yg===i&&(a.yg=a.He?a.fa.ob().B[a.He]||m:m);return[a.yg,Fj(U(this)),Bj(U(this)),Gj(U(this))]};Ej.prototype.qd=function(){Ej.a.qd.call(this);this.ta&1&&(this.Oo=this.ob().Ib(U(this).Ee))};function Hj(a,b,c,d){Xh.call(this,a,b,c,d);this.le=this.Eh=m}D(Hj,Xh);function Ij(a){Uh.call(this,a);this.data=this.u=this.y=this.x=0}D(Ij,Uh);Ij.prototype.read=function(a){Ij.a.read.call(this,a);this.x=a.ni();this.y=a.ni();this.u=a.ni();this.data=Qh(a)};Ij.prototype.write=function(a){Ij.a.write.call(this,a);a.lj(this.x);a.lj(this.y);a.lj(this.u);wg(a,this.data)};function Jj(a,b,c){var d=a>>24&255,e=a>>16&255,f=a>>8&255;a&=255;return(d+c*((b>>24&255)-d)&255)<<24|(e+c*((b>>16&255)-e)&255)<<16|(f+c*((b>>8&255)-f)&255)<<8|a+c*((b&255)-a)&255};function Kj(a,b){this.mc=a;this.Pf=0;this.q=b}Kj.prototype.kn=function(a){var b=Y(a,this.l);return"target."+Y(a,this.m)+"(source."+b+"());"};Kj.prototype.$d=function(a){var b=Y(a,this.l);return"result."+Y(a,this.m)+"(target."+b+"());"};var Lj=0;function Mj(a,b){return(b.q&Nj)-(a.q&Nj)||a.Pf-b.Pf}function Y(a,b){for(var c in a)if(a[c]===b)return c;return m}var Nj=1;function Oj(a,b,c,d){Kj.call(this,a,b);this.l=c;this.m=d}D(Oj,Kj);t=Oj.prototype;t.s=function(){return new Oj(this.mc,this.q,this.l,this.m)};
t.$b=function(a){a=Y(a,this.m);var b=Sh(),b=Y(b,b.ni);return"target."+a+"(reader."+b+"());"};t.ac=function(a){a=Y(a,this.l);var b=yg();return"writer."+Y(b,b.lj)+"(target."+a+"() | 0);"};t.kn=function(a){var b=Y(a,this.l);return"target."+Y(a,this.m)+"(source."+b+"() | 0);"};t.$d=function(a){var b=Y(a,this.l);a=Y(a,this.m);return"var _s = source."+b+"();var _t = target."+b+"();target."+a+"((_s + t * (_t - _s)) | 0);"};function Pj(a,b,c,d){Kj.call(this,a,b);this.l=c;this.m=d}D(Pj,Kj);
Pj.prototype.s=function(){return new Pj(this.mc,this.q,this.l,this.m)};Pj.prototype.$b=function(a){a=Y(a,this.m);var b=Sh(),b=Y(b,b.ko);return"target."+a+"(reader."+b+"());"};Pj.prototype.ac=function(a){a=Y(a,this.l);var b=yg();return"writer."+Y(b,b.Vo)+"(target."+a+"());"};Pj.prototype.$d=function(a){var b=Y(a,this.l);a=Y(a,this.m);return"var _s = source."+b+"();var _t = target."+b+"();result."+a+"((_s + t * (_t - _s)));"};function Qj(a,b,c,d){Kj.call(this,a,b);this.l=c;this.m=d}D(Qj,Kj);
Qj.prototype.s=function(){return new Qj(this.mc,this.q,this.l,this.m)};Qj.prototype.$b=function(a){a=Y(a,this.m);var b=Sh(),b=Y(b,b.Er);return"target."+a+"(reader."+b+"());"};Qj.prototype.ac=function(a){a=Y(a,this.l);var b=yg();return"writer."+Y(b,b.As)+"(target."+a+"());"};
Qj.prototype.$d=function(a){var b=Y(a,this.l),c=Y(a,this.m);a=Y(a,Rj);return"var _sv3 = source."+b+"();var _tv3 = target."+b+"();var _rv3 = source."+a+";_rv3[0] = (_tv3[0] - _sv3[0]) * t + _sv3[0];_rv3[1] = (_tv3[1] - _sv3[1]) * t + _sv3[1];_rv3[2] = (_tv3[2] - _sv3[2]) * t + _sv3[2];result."+c+"(_rv3);"};function Sj(a,b,c,d,e){Kj.call(this,a,b);this.l=c;this.m=d;this.qr=e}D(Sj,Kj);Sj.prototype.s=function(){return new Sj(this.mc,this.q,this.l,this.m,this.qr)};
Sj.prototype.$b=function(a){a=Y(a,this.m);var b=Sh(),b=Y(b,b.Fr);return"target."+a+"(reader."+b+"());"};Sj.prototype.ac=function(a){a=Y(a,this.l);var b=yg();return"writer."+Y(b,b.Bs)+"(target."+a+"());"};Sj.prototype.$d=function(a){var b=Y(a,this.l),c=Y(a,this.m),d=Y(a,Tj);a=Y(a,Ni);return"var _rq = source."+d+";source."+a+"(source."+b+"(), target."+b+"(), t, _rq);result."+c+"(_rq);"};function Uj(a,b,c,d){Kj.call(this,a,b);this.l=c;this.m=d}D(Uj,Kj);
Uj.prototype.s=function(){return new Uj(this.mc,this.q,this.l,this.m)};Uj.prototype.$b=function(a){a=Y(a,this.m);var b=Sh(),b=Y(b,b.ca);return"target."+a+"(reader."+b+"());"};Uj.prototype.ac=function(a){a=Y(a,this.l);var b=yg();return"writer."+Y(b,b.bb)+"(target."+a+"());"};Uj.prototype.$d=function(a){var b=Y(a,this.l),c=Y(a,this.m);a=Y(a,Jj);return"result."+c+"(source."+a+"(source."+b+"(), target."+b+"(), t));"};function Vj(a,b,c,d){Kj.call(this,a,b);this.l=c;this.m=d}D(Vj,Kj);
Vj.prototype.s=function(){return new Vj(this.mc,this.q,this.l,this.m)};Vj.prototype.$b=function(a){a=Y(a,this.m);var b=Sh(),b=Y(b,b.t);return"target."+a+"(reader."+b+"());"};Vj.prototype.ac=function(a){a=Y(a,this.l);var b=yg();return"writer."+Y(b,b.da)+"(target."+a+"());"};function Wj(a,b,c,d){Kj.call(this,a,b);this.l=c;this.m=d}D(Wj,Kj);Wj.prototype.s=function(){return new Wj(this.mc,this.q,this.l,this.m)};
Wj.prototype.$b=function(a){a=Y(a,this.m);var b=Sh(),b=Y(b,b.t);return"target."+a+"(reader."+b+"());"};Wj.prototype.ac=function(a){a=Y(a,this.l);var b=yg();return"writer."+Y(b,b.da)+"(target."+a+"());"};function Xj(a,b,c,d){Kj.call(this,a,b);this.l=c;this.m=d}D(Xj,Kj);Xj.prototype.s=function(){return new Xj(this.mc,this.q,this.l,this.m)};Xj.prototype.$b=function(a){a=Y(a,this.m);var b=Sh(),b=Y(b,b.z);return"target."+a+"(reader."+b+"());"};
Xj.prototype.ac=function(a){a=Y(a,this.l);var b=yg();return"writer."+Y(b,b.pc)+"(target."+a+"());"};var Rj=O(),Tj=N();function Yj(a,b){for(var c=0;c<a.length;c++)a[c].Pf=c;a.sort(Mj);this.Yn={};this.lo=Array(a.length);this.zs=Array(a.length);var d="",e="",f="",h="",j="",k="",n="",p="";this.Po=Array(a.length);for(c=0;c<a.length;c++){var r=a[c].s();this.Po[c]=r;this.Yn[r.mc]=r;r.Pf=c;this.lo[c]=new Function("target","reader",r.$b(b));this.zs[c]=new Function("target","writer",r.ac(b));var d=d+r.$b(b),e=e+r.ac(b),w=r.kn(b),f=f+w;r.q&6||(h+=w);r.q&2&&(k+=w);if(r.q&4){var u=r.$d(b),n=n+u,j=j+w;r.q&2||(p+=u)}}this.Dr=new Function("target",
"reader",d);this.ys=new Function("target","writer",e);this.Ls=new Function("source","target",f);this.eh=new Function("source","target",h);this.Pj=new Function("source","target",j);this.Qj=new Function("source","target",k);this.cr=new Function("source","target","t","result",n);this.br=new Function("source","target","t","result",p)}Yj.prototype.Ua=function(){return this.Po.length};function Zj(a,b){return a.Yn[b].Pf}function $j(a,b,c,d,e){for(a=a.lo;c;){if(c&1&&a[b])a[b](d,e);c>>=1;b++}};function Z(a,b){this.fa=a;this.time=0;this.ab=b;this.Ze=this.Ye=0}t=Z.prototype;t.reset=function(a){this.fa=a;this.Ze=this.Ye=this.time=0};function ak(a,b){if(!a.ab){var c=[];a(c);a.ab=new Yj(c,b)}return a.ab}function bk(a,b){var c=a.Ye||a.Ze;31>=b?a.Ye|=1<<b:a.Ze|=1<<b-32;c||a.fa.Ck()}t.te=function(){this.Ye=this.Ze=0};t.read=function(a){this.ab.Dr(this,a)};t.pl=function(a){var b=a.z();$j(this.ab,0,b,this,a);31<this.ab.Ua()&&(b=a.z(),$j(this.ab,32,b,this,a))};
t.write=function(a){this.ab.ys(this,a)};t.eh=function(a){this.ab.eh(this,a)};t.Qj=function(a){this.ab.Qj(this,a)};t.Pj=function(a){this.ab.Pj(this,a)};t.Mh=function(a,b,c){var d=this.ab;this.fa.ed&$h?d.br(a,b,c,this):d.cr(a,b,c,this)};t.Fo=Rj;t.Il=Tj;t.Cr=Ni;t.Pp=Jj;Z.prototype.Fo[0]=Z.prototype.Fo[1];Z.prototype.Cr(Z.prototype.Il,Z.prototype.Il,0,Z.prototype.Il);Z.prototype.Pp(0,0,0);function ck(a,b){var c=b||ak(dk,this);Z.call(this,a,c);this.dc=O();this.yr=Zj(c,ek);this.ue=N();this.Jr=Zj(c,fk);this.wi=O();this.Mr=Zj(c,gk);this.Ug=0;this.Gp=Zj(c,hk);this.dj=O();this.qs=Zj(c,ik)}D(ck,Z);var ek=Lj++,fk=Lj++,gk=Lj++,hk=Lj++,ik=Lj++;t=ck.prototype;t.uq=s("dc");t.setPosition=function(a){jf(this.dc,a)||(cf(this.dc,a),bk(this,this.yr),this.fa.Qb=l)};t.vq=s("ue");t.vo=function(a){Ce(this.ue,a)||(Ae(this.ue,a),bk(this,this.Jr),this.fa.Qb=l)};t.wq=s("wi");
t.wo=function(a){jf(this.wi,a)||(cf(this.wi,a),bk(this,this.Mr),this.fa.Qb=l)};t.mq=s("Ug");t.Rr=function(a){this.Ug!=a&&(this.Ug=a,bk(this,this.Gp),this.fa.Qb=l)};t.zq=s("dj");t.setVelocity=function(a){jf(this.dj,a)||(cf(this.dj,a),bk(this,this.qs))};
function dk(a){a.push(new Qj(ek,Nj|6,ck.prototype.uq,ck.prototype.setPosition));a.push(new Sj(fk,Nj|6,ck.prototype.vq,ck.prototype.vo,l));a.push(new Qj(gk,Nj|6,ck.prototype.wq,ck.prototype.wo));a.push(new Pj(hk,Nj|4,ck.prototype.mq,ck.prototype.Rr));a.push(new Qj(ik,Nj|2,ck.prototype.zq,ck.prototype.setVelocity))};function jk(a,b){var c=b||ak(kk,this);ck.call(this,a,c);this.Wk="";this.kr=Zj(c,lk);this.Vk=0;this.jr=Zj(c,mk);this.Bj=0;this.Ap=Zj(c,nk)}D(jk,ck);var lk=Lj++,mk=Lj++,nk=Lj++;t=jk.prototype;t.rf=s("Wk");t.Wr=function(a){this.Wk!=a&&(this.Wk=a,bk(this,this.kr))};t.sq=s("Vk");t.Vr=function(a){this.Vk!=a&&(this.Vk=a,bk(this,this.jr))};t.lq=s("Bj");t.Qr=function(a){this.Bj!=a&&(this.Bj=a,bk(this,this.Ap))};
function kk(a){dk(a);a.push(new Vj(lk,0,jk.prototype.rf,jk.prototype.Wr));a.push(new Uj(mk,Nj|4,jk.prototype.sq,jk.prototype.Vr));a.push(new Oj(nk,0,jk.prototype.lq,jk.prototype.Qr))};function ok(a,b){var c=b||ak(pk,this);jk.call(this,a,c);this.yf=0;this.Jh=i;this.Zq=Zj(c,qk)}D(ok,jk);var qk=Lj++;ok.prototype.pq=s("yf");ok.prototype.to=function(a){this.yf!=a&&(this.yf=a,bk(this,this.Zq),this.Jh=i)};function pk(a){kk(a);a.push(new Xj(qk,0,ok.prototype.pq,ok.prototype.to))};function rk(a,b){var c=b||ak(sk,this);ck.call(this,a,c)}D(rk,ck);function sk(a){dk(a)};function tk(a,b){var c=b||ak(uk,this);Z.call(this,a,c)}D(tk,Z);function uk(){};function vk(a,b){var c=b||ak(wk,this);Z.call(this,a,c);this.Ee="";this.aj=i;this.os=Zj(c,xk);this.He=0;this.yg=i;this.xp=Zj(c,yk);this.Ue=0;this.dh=i;this.Wp=Zj(c,zk);this.Oe=0;this.Wg=i;this.Mp=Zj(c,Ak);this.Cf=0;this.Qh=i;this.dr=Zj(c,Bk)}D(vk,Z);var xk=Lj++,yk=Lj++,zk=Lj++,Ak=Lj++,Bk=Lj++;t=vk.prototype;t.yq=s("Ee");t.Zr=function(a){this.Ee!=a&&(this.Ee=a,bk(this,this.os),this.aj=i)};t.kq=s("He");t.Pr=function(a){this.He!=a&&(this.He=a,bk(this,this.xp),this.yg=i)};t.oq=s("Ue");
function Fj(a){a.dh===i&&(a.dh=a.Ue?a.fa.ob().B[a.Ue]||m:m);return a.dh}t.Tr=function(a){this.Ue!=a&&(this.Ue=a,bk(this,this.Wp),this.dh=i)};t.nq=s("Oe");function Bj(a){a.Wg===i&&(a.Wg=a.Oe?a.fa.ob().B[a.Oe]||m:m);return a.Wg}t.Sr=function(a){this.Oe!=a&&(this.Oe=a,bk(this,this.Mp),this.Wg=i)};t.qq=s("Cf");function Gj(a){a.Qh===i&&(a.Qh=a.Cf?a.fa.ob().B[a.Cf]||m:m);return a.Qh}t.Ur=function(a){this.Cf!=a&&(this.Cf=a,bk(this,this.dr),this.Qh=i)};
function wk(a){a.push(new Wj(xk,0,vk.prototype.yq,vk.prototype.Zr));a.push(new Xj(yk,0,vk.prototype.kq,vk.prototype.Pr));a.push(new Xj(zk,0,vk.prototype.oq,vk.prototype.Tr));a.push(new Xj(Ak,0,vk.prototype.nq,vk.prototype.Sr));a.push(new Xj(Bk,0,vk.prototype.qq,vk.prototype.Ur))};function Ck(a,b){var c=b||ak(Dk,this);Z.call(this,a,c);this.sg=0;this.ij=i;this.vs=Zj(c,Ek)}D(Ck,Z);var Ek=Lj++;Ck.prototype.Aq=s("sg");Ck.prototype.$r=function(a){this.sg!=a&&(this.sg=a,bk(this,this.vs),this.ij=i)};function Dk(a){a.push(new Xj(Ek,0,Ck.prototype.Aq,Ck.prototype.$r))};function Fk(a,b,c,d,e){Xh.call(this,a,b,c,d);this.El=e}D(Fk,Xh);Fk.prototype.Zg=function(a){a instanceof Oi&&this.El.Kd(a)};Fk.prototype.Qd=function(a){a instanceof Oi&&this.El.ud(a)};function Gk(a){this.lt=a||Hk;this.nt=[]}function Hk(){this.ol=new Float32Array(6);this.end=this.start=this.at=0;this.fa=this.mt=m;this.eo=O();this.ak=0};function Ik(){Gk.call(this);this.B=[]}D(Ik,Gk);Ik.prototype.Kd=function(a){this.B.push(a)};Ik.prototype.ud=function(a){E(this.B,a)};Ik.prototype.forEach=function(a,b){for(var c=0;c<this.B.length&&a.call(b||v,this.B[c])!==q;c++);};Ik.prototype.Bh=function(a,b,c){for(a=0;a<this.B.length&&b.call(c||v,this.B[a],0)!==q;a++);};N();function Jk(a,b,c,d){Fk.call(this,a,b,c,d,new Ik);this.r=m}D(Jk,Fk);t=Jk.prototype;t.Al=ba("r");t.Ta=function(a){Jk.a.Ta.call(this,a);a instanceof Ij&&this.hc(a.x,a.y,a.u,a.data)};t.update=function(a){L("client var = "+U(this).Pi);di(this,2,a+1)};t.A=function(a,b,c){this.El.Bh(b,function(d,e){d.A(a,b,e,c)})};
t.hc=function(a,b,c,d){var e=this.r;if(d&&!e.Ca.ga[d>>8])L("unknown block type",d);else{var f=e.hc(a,b,c,d);if(f!=d&&(d=(d?d:f)>>8))if(d=(e=e.Ca.ga[d])?e.$h.vp:m)if(e=Kk,e[0]=a,e[1]=b,e[2]=c,a=this.ma.bg.Eh,!a.e.Ya.Za&&(b=a.Ii.blocks)&&100>Math.sqrt(gf(a.e.ra.listener.dc,e)))(a=he(b,d,Qd))&&a.setPosition(e)}};var Kk=O();function Lk(a,b){var c=b||ak(Mk,this);Z.call(this,a,c)}D(Lk,Z);function Mk(){};function Nk(a,b){var c=b||ak(Ok,this);Lk.call(this,a,c);this.Pi=0;this.fs=Zj(c,Pk)}D(Nk,Lk);var Pk=Lj++;Nk.prototype.xq=s("Pi");Nk.prototype.Yr=function(a){this.Pi!=a&&(this.Pi=a,bk(this,this.fs))};function Ok(a){a.push(new Pj(Pk,0,Nk.prototype.xq,Nk.prototype.Yr))};function Qk(a){this.C=a;this.K=this.V=m}Qk.prototype.Nb=function(){this.V=this.C.V?this.C.V.Nb():m;this.K=this.C.K?this.C.K.Nb():m};Qk.prototype.reset=function(){this.C.Xa();this.K=this.V=m};function Rk(a,b,c,d){Aj.call(this,a,b,c,d);this.ka=1;this.lr=l;this.Nd=this.Md=0;this.cb=1E-4;this.oh=this.fc=this.za=0;this.mk=l}D(Rk,Aj);var Sk=1/140*Math.PI,Tk=85*Math.PI/180;
Rk.prototype.Ob=function(a,b,c){if(!this.ae())return l;var d=b.K;if(!(0>=a.time)){var e;e=b.V;var f=0;87 in e.h&&(f|=32);83 in e.h&&(f|=16);65 in e.h&&(f|=2);68 in e.h&&(f|=1);81 in e.h&&(f|=4);90 in e.h&&(f|=8);32 in e.h&&(f|=128);e=f;var h=b.V,f=b.K;37 in h.h&&(this.cb+=Sk);39 in h.h&&(this.cb-=Sk);38 in h.h&&(this.za+=Sk);40 in h.h&&(this.za-=Sk);219 in h.h&&(this.fc+=Sk);221 in h.h&&(this.fc-=Sk);if(f.U||f.p&1){var j=f.U?0.2:0.25,h=f.vc*j,f=f.wc*j;this.lr?(this.Md=(this.Md+h)/2,this.Nd=(this.Nd+
f)/2,0.01>Math.abs(this.Md)&&(this.Md=0),0.01>Math.abs(this.Nd)&&(this.Nd=0)):(this.Md=h,this.Nd=f);f=this.Nd*this.ka;this.cb-=this.Md*this.ka*Sk;this.za-=f*Sk}f=b.V;b=b.K;h=0;69 in f.H?h|=6:69 in f.h?h|=2:69 in f.ie&&(h|=8);var j=2,k=4,n=8;f.ctrlKey&&(j=16,k=32,n=64);b.U?(b.Pa&1?(h|=k,h|=j):b.p&1?h|=j:b.sa&1&&(h|=n),b.Pa&4?(h|=32,h|=16):b.p&4?h|=16:b.sa&4&&(h|=64)):(b.sa&1&&(f.ctrlKey?(this.oh=Number.MAX_VALUE,h|=k,h|=j,h|=n):4>this.oh&&(h|=k,h|=j,h|=n)),b.sa&4&&(h|=32,h|=16,h|=64),this.oh=b.p?this.oh+
(Math.abs(b.vc)+Math.abs(b.wc)):0);f=h;this.mk||(this.za=Math.max(-Tk,Math.min(Tk,this.za)),this.fc=0);b=this.fh(65);b.setTime(a.time);b.Si=(1E3*a.Ri|0)/1E3;b.Wi=e;b.Eb=f;a=this.za;e=this.fc;b.cb=32767*(180*this.cb/Math.PI%360/360)|0;b.za=32767*(180*a/Math.PI%360/360)|0;b.fc=32767*(180*e/Math.PI%360/360)|0;f&&!d.U&&(a=d.clientX/c.width,c=d.clientY/c.height,b.Eb|=1,b.xi=65535*a|0,b.yi=65535*c|0);this.ma.zi(b)}return l};function Uk(a,b){var c=b||ak(Vk,this);Z.call(this,a,c)}D(Uk,Z);function Vk(){};function Wk(a,b){var c=b||ak(Xk,this);Uk.call(this,a,c);this.Uf=0;this.gi=i;this.wr=Zj(c,Yk)}D(Wk,Uk);var Yk=Lj++;Wk.prototype.tq=s("Uf");Wk.prototype.Xr=function(a){this.Uf!=a&&(this.Uf=a,bk(this,this.wr),this.gi=i)};function Xk(a){a.push(new Xj(Yk,0,Wk.prototype.tq,Wk.prototype.Xr))};function Zk(a,b){var c=b||ak($k,this);jk.call(this,a,c)}D(Zk,jk);function $k(a){kk(a)};function al(a,b){var c=b||ak(bl,this);Zk.call(this,a,c);this.Gj=0;this.Dp=Zj(c,cl)}D(al,Zk);var cl=Lj++;al.prototype.qf=s("Gj");al.prototype.xl=function(a){this.Gj!=a&&(this.Gj=a,bk(this,this.Dp))};function bl(a){kk(a);a.push(new Oj(cl,0,al.prototype.qf,al.prototype.xl))};function dl(a,b,c,d){Ri.call(this,a,b,c,d)}D(dl,zj);function el(a,b){var c=b||ak(fl,this);Zk.call(this,a,c)}D(el,Zk);function fl(a){kk(a)};function gl(a,b,c){this.Rc=a;this.bq=b;this.cs=c;this.zd=[]}gl.prototype.Rj=function(a,b,c){return new this.bq(a,this,b,c)};function Yh(a,b){if(a.zd.length){var c=a.zd.pop();c.reset(b);return c}return new a.cs(b)};function hl(a,b){B(b)?il(a,i,b):Ya(b,sa(il,a))}function il(a,b,c){var d;a:if(d=String(c).replace(/\-([a-z])/g,function(a,b){return b.toUpperCase()}),a.style[d]===i){var e=Ib?"Webkit":Hb?"Moz":F?"ms":Gb?"O":m,f=B(i)?"undefined".replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"):"\\s";c=c.replace(RegExp("(^"+(f?"|["+f+"]+":"")+")([a-z])","g"),function(a,b,c){return b+c.toUpperCase()});e+=c;if(a.style[e]!==i){d=e;break a}}d&&(a.style[d]=b)}
function jl(a){var b=a.offsetWidth,c=a.offsetHeight,d=Ib&&!b&&!c;return(!y(b)||d)&&a.getBoundingClientRect?(b=a.getBoundingClientRect(),F&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop),new Ud(b.right-b.left,b.bottom-b.top)):new Ud(b,c)}var kl=Hb?"MozUserSelect":Ib?"WebkitUserSelect":m;
function ll(a){var b=a.getElementsByTagName("*");if(kl){var c="none";a.style[kl]=c;if(b){a=0;for(var d;d=b[a];a++)d.style[kl]=c}}else if(F||Gb)if(c="on",a.setAttribute("unselectable",c),b)for(a=0;d=b[a];a++)d.setAttribute("unselectable",c)};function ml(a,b){G.call(this);this.Pe=b;this.C=a.C;this.ba=a.ba;this.M=a.M;this.Hl=new Xf(this.M.g,this.M.Mi);H(this,this.Hl);this.Hl.restore();this.hasFocus=q;this.Sa=[];var c=a.d,d=c.createElement("DIV");hl(d,{position:"absolute",left:"10px",bottom:"10px",width:"50%",display:"none"});c=c.createElement("INPUT");c.type="text";hl(c,{"font-family":"monospace-8bit","font-size":"1em",border:"1px solid black","background-color":"#EEE",color:"#000",width:"100%",padding:"3px"});d.appendChild(c);a.F.Ia.parentNode.appendChild(d);
this.Bn=d;this.Qi=c;this.T=new Xc(this);H(this,this.T);this.T.listen(c,"keydown",this.uk)}D(ml,G);t=ml.prototype;t.uk=function(a){switch(a.keyCode){case 27:nl(this);a.preventDefault();a.stopPropagation();break;case 13:var b=Ea(Da(Fa(this.Qi.value)));b.length&&this.Pe.postMessage("main",b);nl(this);a.preventDefault();a.stopPropagation()}};function nl(a){a.Qi.value="";a.Qi.blur();hl(a.Bn,{display:"none"});a.C.ja(l);a.C.Ha.focus()}
t.Ob=function(a,b){return 84 in b.V.H?(hl(this.Bn,{display:""}),this.C.ja(q),v.setTimeout(C(function(){this.Qi.focus()},this),10),this.C.V&&this.C.V.reset(),l):q};t.update=function(){var a=this.Pe.Nb();if(a)for(var b=0;b<a.length;b++){var c=a[b];switch(c.type){case 2:this.log(c.userName+": "+c.value)}}};
t.A=function(a,b,c){var d=this.M.font;if(!(2>=arguments.length)||this.Sa.length){var e=this.Hl;e.clear();for(var f=tc(),h=0;h<this.Sa.length;h++){var j=this.Sa[h];0==j.timestamp?j.timestamp=f:15E3<f-j.timestamp&&(this.Sa.splice(h,1),h--)}f=0;for(h=2;h<arguments.length;h++)arguments[h]&&(j=Ne(d,e,arguments[h],4294967295,f),f+=j[1]+2);for(var k=this.Sa.length,h=0;h<k;h++)j=this.Sa[h],j=Ne(d,e,j.value,j.color,f),f+=j[1]+2;h=ol;mf(h,2,2,1,0,10,40,0,1);this.M.Jg(d.Aj,q);h[12]+=2;h[13]+=2;e.uc(b.Qf,h,pl);
h[12]-=2;h[13]-=2;e.uc(b.Qf,h)}};t.log=function(a){var b=new Date,c=String(b.getHours());2>c.length&&(c="0"+c);var d=String(b.getMinutes());2>d.length&&(d="0"+d);b=String(b.getSeconds());2>b.length&&(b="0"+b);c="["+[c,d,b].join(":")+"] ";for(d=0;d<arguments.length;d++)c+=arguments[d],d<arguments.length-1&&(c+=" ");this.add(c);L(c)};t.add=function(a,b){this.Sa.push(new ql(a,b||4294967295))};var ol=kf(),pl=ye(0.5,0.5,0.5,1);function ql(a,b){this.timestamp=0;this.value=a;this.color=b};function rl(a,b){G.call(this);this.N=m;this.Yq=a;this.q=b;this.gq=this.eb=l}D(rl,G);t=rl.prototype;t.b=function(){this.Yb();rl.a.b.call(this)};t.Dn=s("eb");t.setActive=ba("eb");t.close=function(){sl(this.N)};t.ua=A;t.Yb=A;t.update=A;t.A=A;var tl={},ul={},vl={};function wl(a,b,c){c=c||Rd||(Rd=new $d);a=a(b||xl,i,i);a=ma(a)?q&&(a.bh===tl||a.bh===ul)?a.content:"zSoyz":String(a);b=c.R;c=b.createElement("div");F?(c.innerHTML="<br>"+a,c.removeChild(c.firstChild)):c.innerHTML=a;if(1==c.childNodes.length)c=c.removeChild(c.firstChild);else{for(a=b.createDocumentFragment();c.firstChild;)a.appendChild(c.firstChild);c=a}return c}var xl={};function yl(a,b,c,d,e){rl.call(this,a,8);this.d=b;this.parentElement=c;this.S=new Xc(this);H(this,this.S);this.zk=this.d.createElement("DIV");this.zk.className="a";this.root=wl(d,e,this.d);this.Wb=new Af(this.close,this)}D(yl,rl);
yl.prototype.ua=function(){yl.a.ua.call(this);this.d.appendChild(this.parentElement,this.zk);this.d.appendChild(this.parentElement,this.root);var a=Vd("v",this.root||this.d.R);Qa(a,function(a){var c=a.getAttribute("data-id"),d;d=a.className;d=B(d)&&d.match(/\S+/g)||[];0<=Pa(d,"x")&&a.focus();this.S.listen(a,"click",function(){this.nm(c);this.close();this.Wb.D(c)})},this)};yl.prototype.Yb=function(){$c(this.S);this.d.removeNode(this.root);this.d.removeNode(this.zk);this.root=m;yl.a.Yb.call(this)};
yl.prototype.nm=A;F&&Vb(8);function $(a,b){a!=m&&this.append.apply(this,arguments)}t=$.prototype;t.Oa="";t.set=function(a){this.Oa=""+a};t.append=function(a,b,c){this.Oa+=a;if(b!=m)for(var d=1;d<arguments.length;d++)this.Oa+=arguments[d];return this};t.clear=function(){this.Oa=""};t.toString=s("Oa");function zl(a,b){function c(){}c.prototype=a;var d=new c,e;for(e in b)d[e]=b[e];return d}function Al(a){return a&&a.bh&&a.bh===tl?a.content:String(a).replace(Bl,Cl)}function Dl(a){return a&&a.bh===vl?"zSoyz":String(a)}var El={"\x00":"&#0;",'"':"&quot;","&":"&amp;","'":"&#39;","<":"&lt;",">":"&gt;","\t":"&#9;","\n":"&#10;","\x0B":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;","-":"&#45;","/":"&#47;","=":"&#61;","`":"&#96;","\u0085":"&#133;","\u00a0":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};
function Cl(a){return El[a]}var Bl=/[\x00\x22\x26\x27\x3c\x3e]/g;function Fl(a,b){var c=b||new $,d=new $;(d||new $).append('<div class="',"r",'">',Al(a.ce),"</div>");(d||new $).append('<div class="',"t",'">',Dl(a.body),"</div>");(d||new $).append('<div class="',"u",'">',a.p?Dl(a.p):"","</div>");d=zl(a,{Vp:d.toString()});(c||new $).append('<div class="',"p",'"><div class="',"q",'">',Dl(d.Vp),"</div></div>")}function Gl(a,b){(b||new $).append('<div class="',"v",a.Bc?" x":"",'" data-id="',Al(a.id),'"><a class="',"w",'">',Al(a.label),"</a></div>")}
function Hl(a,b){var c=b||new $;Gl(zl(a,{id:"close",label:"Close"}),c)}function Il(a){a=a||new $;Gl(zl({Bc:l},{id:"reload",label:"Reload"}),a)};function Jl(a,b){var c=b||new $,d="Error in "+Al(a.location),e=new $;Il(e);Hl({Bc:q},e);Fl(zl(a,{ce:d,body:Al(a.message)+"<br/>"+Al(a.zp),p:e.toString()}),c);return b?"":c.toString()}function Kl(a,b){var c=b||new $,d="Trying to connect to "+Al(a.Or);Fl(zl(a,{ce:"Connecting...",body:d}),c);return b?"":c.toString()}
function Ll(a,b){var c=b||new $,d=new $;switch(a.reason){case 2:d.append("Version mismatch - reload and try again.");break;case 3:d.append("Invalid/broken packet.");break;case 4:d.append("Access denied.");break;case 6:d.append("Banned by an administrator! Go away!");break;case 7:d.append("Server is full. Try again later.");break;default:d.append("Unable to contact the server or a timeout occurred while connecting. Check your network settings and try again, or contact the server admin.")}var e=new $;
Il(e);Hl({Bc:q},e);Fl(zl(a,{ce:"Connection Failed",body:d.toString(),p:e.toString()}),c);return b?"":c.toString()}
function Ml(a,b){var c=b||new $,d=new $;switch(a.reason){case 1:d.append("Timeout while communicating with the server. Check your connection and try again.");break;case 2:d.append("Version mismatch - reload and try again.");break;case 3:d.append("Invalid/broken packet.");break;case 4:d.append("Access denied.");break;case 5:d.append("Kicked by an administrator!");break;case 6:d.append("Banned by an administrator!");break;case 7:d.append("Server is full. Try again later.");break;default:d.append("Whoops.")}var e=
new $;switch(a.reason){case 4:case 5:case 6:Hl({Bc:l},e);break;default:Il(e),Hl({Bc:q},e)}Fl(zl(a,{ce:"Connection Lost",body:d.toString(),p:e.toString()}),c);return b?"":c.toString()};function Nl(a,b,c,d){yl.call(this,"",a,b,c,d)}D(Nl,yl);function Ol(a,b,c,d,e){b=new Nl(a.d,b,Jl,{location:c,message:d,zp:e});Pl(a,b);return b.Wb};function Ql(a,b,c,d,e,f){this.Is=a;this.type=b;this.pt=c;this.userName=d;this.timestamp=e;this.value=f||m};function Rl(a){G.call(this);this.Da=a;this.Ma=[];this.hk=[]}D(Rl,G);Rl.prototype.Ie=function(a){if(0<=Pa(this.Ma,a))return m;this.Ma.push(a);a=new Ql(this,0,a.j,a.info.Q,ta());this.hk.push(a);return a};Rl.prototype.pi=function(a){return E(this.Ma,a)?(a=new Ql(this,1,a.j,a.info.Q,ta()),this.hk.push(a),a):m};Rl.prototype.postMessage=function(a,b){if(!(0<=Pa(this.Ma,a)))return m;var c=new Ql(this,2,a.j,a.info.Q,ta(),b);this.hk.push(c);return c};function Sl(a){G.call(this);this.Z=a;this.$c={};this.me=[];this.Ei(a.Ja)}D(Sl,G);t=Sl.prototype;t.b=function(){Ya(this.$c,I);this.$c={};Sl.a.b.call(this)};t.Ei=A;function Tl(a,b,c){var d=a.$c[b];!d&&c&&(d=new Rl(b),a.$c[b]=d);return d}t.Nb=function(){if(this.me.length){var a=this.me;this.me=[];return a}return m};t.Oj=A;t.Xj=A;t.Xl=A;t.Yl=function(a){Ya(this.$c,function(b){b.pi(a)})};t.Zl=A;function Ul(){this.sh="";this.name="Server";this.location="us";this.pk="unknown";this.qk="0";this.Sk=32;this.li={}}Ul.prototype.s=function(){var a=new Ul;a.sh=this.sh;a.name=this.name;a.location=this.location;a.pk=this.pk;a.qk=this.qk;a.Sk=this.Sk;a.li=lb(this.li);return a};Ul.prototype.toString=ca("[server]");function Vl(){this.xa=this.oc=0}var Wl=new Vl;function Xl(a,b){var c=b||new Gi;c.Fg=a.t();c.Eg=a.t();c.Q=a.t();return c}function Yl(a,b){a.da(b.Fg);a.da(b.Eg);a.da(b.Q);return l}function Zl(a,b){var c=b||new Ii;c.j=a.t();c.oc=Ph(a);c.q=a.ca();var d;if(!(d=!Xl(a,c.info)))d=c.Ag||new Ci,d.type=a.t(),d.platform=a.t(),d.pe=a.t(),d.Sd=a.t(),d=!d;return d?m:c}var $l=new function(){this.xa=this.Qe=this.eg=0};
function am(a,b,c){var d=yg();$l.eg=a;$l.Qe=b;$l.xa=c;vg(d,1);d.bb($l.eg);d.bb($l.Qe);d.bb($l.xa);return d.finish()}var bm=new function(){this.Qe=this.eg=0;this.og=[]},cm=new function(){this.info=new Ul;this.Ma=[]};function dm(){this.yj=this.Gl=0;this.zb=new Ii}var em=new dm,fm=new dm;
function gm(a,b){var c=yg();fm.Gl=3;fm.yj=a;fm.zb=b;vg(c,4);wg(c,fm.Gl);wg(c,fm.yj);var d=fm.zb;c.da(d.j);vg(c,d.oc);c.bb(d.q);var e;if(!(e=!Yl(c,d.info)))d=d.Ag,c.da(d.type),c.da(d.platform),c.da(d.pe),c.da(d.Sd),e=q;return e?(c.offset=0,m):c.finish()}function hm(){this.reason=0}var im=new hm,jm=new hm;function km(){var a=yg();jm.reason=0;vg(a,5);a.bb(jm.reason);return a.finish()}var lm=new function(){this.zb=new Ii},mm=new function(){this.j="";this.reason=0};
function nm(){this.j="";this.info=new Gi}var om=new nm,pm=new nm;function qm(a,b){var c=yg();pm.j=a;pm.info=b;vg(c,8);c.da(pm.j);return!Yl(c,pm.info)?(c.offset=0,m):c.finish()}function rm(){this.Da=this.j="";this.timestamp=0;this.Uc=[]}var sm=new rm,tm=new rm;function um(a,b){var c=ta(),d=yg();tm.j=a;tm.Da=b;tm.timestamp=c;tm.Uc=[];vg(d,20);d.da(tm.j);d.da(tm.Da);d.bb(tm.timestamp);d.bb(tm.Uc.length);for(c=0;c<tm.Uc.length;c++)d.da(tm.Uc[c]);return d.finish()}
var vm=new function(){this.Da=this.j="";this.timestamp=0};function wm(){this.Da=this.j="";this.timestamp=0;this.message=""}var xm=new wm,ym=new wm;function zm(a,b,c,d){var e=yg();ym.j=a;ym.Da=b;ym.timestamp=c;ym.message=d;vg(e,22);e.da(ym.j);e.da(ym.Da);e.bb(ym.timestamp);e.da(ym.message);return e.finish()};function Am(a){Sl.call(this,a);this.sc=a}D(Am,Sl);t=Am.prototype;t.join=function(a){this.sc.send(um(this.sc.id,a))};t.postMessage=function(a,b){this.sc.send(zm(this.sc.id,a,ta(),b))};t.Ei=function(a){a.X(20,this.Cq,this);a.X(21,this.Dq,this);a.X(22,this.Eq,this)};
t.Cq=function(a,b,c){sm.j=c.t();sm.Da=c.t();sm.timestamp=c.ca();a=c.ca();sm.Uc.length=a;for(b=0;b<a;b++)sm.Uc[b]=c.t();if(!sm)return q;c=this.sc.Ab[sm.j]||m;if(!c)return l;a=Tl(this,sm.Da,l);if(!a)return l;for(b=0;b<sm.Uc.length;b++){var d=this.sc.Ab[sm.Uc[b]]||m;d&&a.Ie(d)}(c=a.Ie(c))&&this.me.push(c);return l};t.Dq=function(a,b,c){vm.j=c.t();vm.Da=c.t();vm.timestamp=c.ca();if(!vm)return q;a=this.sc.Ab[vm.j]||m;if(!a)return l;b=Tl(this,vm.Da,q);if(!b)return l;(a=b.pi(a))&&this.me.push(a);return l};
t.Eq=function(a,b,c){xm.j=c.t();xm.Da=c.t();xm.timestamp=c.ca();xm.message=c.t();if(!xm)return q;a=this.sc.Ab[xm.j]||m;if(!a)return l;b=Tl(this,xm.Da,q);if(!b)return l;(a=b.postMessage(a,xm.message))&&this.me.push(a);return l};function Bm(a,b){G.call(this);a.W=b.W;this.e=a;this.Z=b;this.Z.Aa.push(this);this.Ei(b.Ja);this.Pe=new Am(this.Z);this.Z.Aa.push(this.Pe);this.r=new Lh;H(this,this.r);this.yd=new W(a,this.Z);H(this,this.yd);var c=this.yd,d=new ni(64,aj,0);c.Ub[d.Rc]=d;d=new ni(65,fj,2);c.Ub[d.Rc]=d;d=new ni(66,Ij,0);c.Ub[d.Rc]=d;d=new ni(67,dj,2);c.Ub[d.Rc]=d;c=this.yd;pi(c,new gl(64,Hj,Ck));pi(c,new gl(65,Jk,Nk));pi(c,new gl(66,bj,rk));pi(c,new gl(67,Ej,vk));pi(c,new gl(68,Rk,Wk));pi(c,new gl(69,Si,ok));pi(c,new gl(70,
ej,tk));pi(c,new gl(71,dl,el));pi(c,new gl(72,Dj,al));this.yd.rg.push(this);this.Bf=new Qk(this.e.C);this.dg=new Ui;this.To=[];this.Ra=new ml(this.e,this.Pe);H(this,this.Ra);this.Ii={};this.Lc=m;this.kl=[];this.le=m;this.On=new oh(this.e.fb,this.e.ba);H(this,this.On);c=this.e.If;this.Z.Ka.jc=c.jc;c.Zp||(this.Ra.log("wsad to move"),this.Ra.log("left click to place blocks, right click to remove"),this.Z.ge()||this.Ra.log("t to chat"))}D(Bm,G);t=Bm.prototype;
t.b=function(){var a=this.e.ra,b;for(b in this.Ii){var c=this.Ii[b];E(a.Gg,c);I(c)}Bm.a.b.call(this)};t.ob=s("yd");t.wf=A;t.load=function(){var a=new Af;this.Yh("blocks",new Zg(this.e.fb,this.e.ra.context));a.D(m);return a};t.handleError=function(a,b){L("Error: "+a,b);this.Ra.log("Error: "+a,b);this.Z.disconnect();Cm(this.e);Dm(this.e);var c=Ol(this.e.N,this.e.F.Ia,"game",a,b);ge(c,function(a){"reload"==a?window.location.reload(q):window.location.href="http://google.com"},m,i)};
t.rl=function(){var a=this.e.Ya,b=yi(this.Z).info.s();b.Q=a.userName;a=this.Z;a.send(qm(a.id,b))};Bm.op=2;t=Bm.prototype;t.update=function(a){if(2!=this.Z.state)if(this.Z.Nb(Bm.op),2==this.Z.state){var b=this.Z.Td;this.Ra.log("Disconnected: "+zi(b));Cm(this.e);Dm(this.e);a=this.e.N;b=new Nl(a.d,this.e.F.Ia,Ml,{reason:b});Pl(a,b);ge(b.Wb,function(a){"reload"==a?window.location.reload(q):window.location.href="http://google.com"},m,i)}else this.r.update(a),this.yd.update(a),this.Ra.update(a)};
t.A=function(a){if(2!=this.Z.state){Vi(this.dg,this.e.F.Dc());Qi(this.dg);this.Bf.Nb();this.Ra.Ob(a,this.Bf)||this.Ob(a,this.Bf);var b=a.time;a.time-=0.5;this.yd.Ak(a.time);this.qi(a);a.time=b;this.Bf.reset()}};t.qi=function(a){var b=this.e.ba;b.Ej()&&(this.Ig(a),this.qh(a),this.af(a,this.Bf),b.end())};t.Ob=ca(q);t.Ig=aa();t.qh=aa();t.af=function(a){var b=[a,this.dg];(a=this.Gh(a))&&Va(b,a);this.Ra.A.apply(this.Ra,b)};t.Gh=ca(m);t.Yh=function(a,b){this.Ii[a]=b;this.e.ra.Yh(b)};t.ia=function(){this.e.ia()};
t.df=function(a){if(a instanceof Hj)this.Lc=a,this.Lc.Eh=this;else if(a instanceof Ej){var b=a.Ib();b.data=a;this.kl.push(a);b==yi(this.Z)&&(this.le=a,this.Lc.le=a);this.wf()}};t.vh=function(a){a instanceof Ej&&(E(this.kl,a),this.wf())};t.Ei=function(a){a.X(73,this.qn,this);a.X(74,this.tn,this)};t.Xl=function(a){var b=this.e;b.Ya.Za||he(b.Hg,"player_join",Pd);this.Ra.log(a.info.Q+" ("+a.j+") connected on "+a.Ag.toString())};
t.Yl=function(a){Cm(this.e);this.Ra.log(a.info.Q+" ("+a.j+") disconnected:",zi(a.Td))};t.Zl=function(){this.wf()};t.qn=function(a,b,c){Ag.x=Oh(c);Ag.y=Oh(c);Ag.u=Oh(c);if(!Ag)return q;b=this.r;a=Th.ln();b=b.Ga(Ag.x,Ag.y,Ag.u);return!a.Wm(b,c)?q:l};t.tn=function(){return!Cg?q:l};t.Oj=A;t.Xj=A;Bm=Ba(Bm,"blk.game.client.ClientController",{update:"update",A:"render",qi:"renderFrame_",af:"drawOverlays",df:"entityAdded",vh:"entityRemoved",qn:"handleChunkData_",tn:"handleReadyPlayer_"});function Em(a,b,c){G.call(this);this.e=a;this.d=a.d;a=a.F.Ia;Td?a=a.parentElement:(a=a.parentNode,a=ma(a)&&1==a.nodeType?a:m);this.parentElement=a;this.S=new Xc(this);H(this,this.S);this.root=wl(b,c,this.d)}D(Em,G);Em.prototype.b=function(){this.Yb();Em.a.b.call(this)};Em.prototype.ua=function(){this.d.appendChild(this.parentElement,this.root)};Em.prototype.Yb=function(){$c(this.S);this.d.removeNode(this.root)};Em.prototype.fg=function(a){this.root.style.display=a?"":"none"};function Fm(a,b){var c=b||new $;c.append('<div class="',"i",'">');Gm({id:"fullscreen",label:"Fullscreen"},c);Gm({id:"settings",label:"Settings"},c);Gm({id:"help",label:"Help"},c);c.append("</div>");return b?"":c.toString()}function Gm(a,b){(b||new $).append('<div class="',"j",'" data-id="',Al(a.id),'"><a class="',"blkMenubarButtonLabel",'">',Al(a.label),"</a></div>")};function Hm(a){Em.call(this,a,Fm,{});ll(this.root)}D(Hm,Em);Hm.prototype.ua=function(){Hm.a.ua.call(this);var a=Vd("j",this.root||this.d.R);Qa(a,function(a){var c=a.getAttribute("data-id");this.S.listen(a,"click",function(){switch(c){case "fullscreen":this.e.Go();break;case "settings":this.e.ia();Im(this.e);break;case "help":this.e.ia(),Jm(this.e)}})},this)};function Km(a,b){var c=b||new $;c.append('<div class="',"k",'"><div class="',"blkPlayerListingHeader",'"></div><div class="',"blkPlayerListingBody",'"></div><div class="',"blkPlayerListingFooter",'"></div></div>');return b?"":c.toString()}
function Lm(a,b){var c=b||new $;c.append('<div class="',"l",'"><div class="',"m"," ",30>a.xa?"h":60>a.xa?"g":100>a.xa?"f":150>a.xa?"e":"d",'"></div><div class="',"n",'">',Al(a.Q),' <span class="',"o",'">\x3c!-- (',Al(a.j),")--\x3e</span></div></div>");return b?"":c.toString()};function Mm(a){Em.call(this,a.e,Km,{});ll(this.root);this.ad=a;this.xm=ae(this.d,"blkPlayerListingBody",this.root);this.Fc=v.setInterval(C(function(){this.refresh()},this),Mm.sp);this.refresh()}D(Mm,Em);Mm.sp=3E3;Mm.prototype.b=function(){v.clearInterval(this.Fc);Mm.a.b.call(this)};
Mm.prototype.refresh=function(){Yd(this.xm);for(var a=this.ad.kl,b=0;b<a.length;b++)a[b]={index:b,value:a[b]};var c=function(a,b){var c=a.Ib().info.Q,d=b.Ib().info.Q,c=String(c).toLowerCase(),d=String(d).toLowerCase();return c<d?-1:c==d?0:1}||Xa;Wa(a,function(a,b){return c(a.value,b.value)||a.index-b.index});for(b=0;b<a.length;b++)a[b]=a[b].value;for(b=0;b<a.length;b++){var d=a[b].Ib(),d=wl(Lm,{j:d.j,Q:d.info.Q,xa:d.n.mm},this.d);this.xm.appendChild(d)}};Mm=Ba(Mm,"blk.ui.PlayerListing",{refresh:"refresh"});function Nm(a,b){Bm.call(this,a,b);this.Ki=new Xf(this.e.M.g,this.e.M.Mi);H(this,this.Ki);this.Ki.restore();var c=this.hi=new Mm(this);this.To.push(c);H(this,c);c.ua();this.Z.ge()&&this.hi.fg(q);c=this.ir=new Hm(this.e);this.To.push(c);H(this,c);c.ua();this.Qn=new Gg(this.e.fb,this.e.ra.context);H(this,this.Qn);this.e.ai.Di(this.Qn);this.jj=m;this.jl=new Ui;this.nc=m;this.xe=0}D(Nm,Bm);t=Nm.prototype;
t.df=function(a){Nm.a.df.call(this,a);a instanceof Jk?(this.jj=a,this.jj.Al(this.r)):a instanceof bj&&a.dl==yi(this.Z)&&(a.Al(this.r),this.nc=new Xg(this.e.M,this.r,a.Db),H(this,this.nc),this.nc.ic(2<=this.xe))};t.vh=function(a){Nm.a.vh.call(this,a)};t.wf=function(){Nm.a.wf.call(this);this.hi.refresh()};t.update=function(a){Nm.a.update.call(this,a);this.e.ra.listener.update(this.jl.Ek)};
t.Ob=function(a,b){if(Nm.a.Ob.call(this,a,b))return l;var c=b.V;if(79 in c.H)return this.e.ia(),Im(this.e),l;if(191 in c.H)return this.e.ia(),Jm(this.e),l;if(9 in c.H)return this.e.ia(),c=this.hi,c.root.style.display="none"==c.root.style.display?"":"none",l;if(86 in c.H)return this.xe++,2<this.xe&&(this.xe=0),this.nc&&this.nc.ic(2<=this.xe),l;77 in c.H&&(this.e.ia(),c=this.e.ai,c.Fk?c.stop():c.co());var c=this.jl,d=this.le;if(d){var e=Bj(U(d)),f=c.width/c.height;if(f!=e.Rb){e.Rb=f;var h=e.fh(64);
h.Cg=f;e.ma.zi(h)}Gj(U(d)).Ob(a,b);if(!Fj(U(d)).Ob(a,b,c))return this.handleError("Input backup"),l}return q};t.Ig=function(a){Nm.a.Ig.call(this,a);this.e.M.reset(this.r.fd.yo,l)};t.qh=function(a){Nm.a.qh.call(this,a);var b=this.e.M.mo,c=this.jl,d=this.e.F,e=this.le;e?(e=Bj(U(e)),Wi(c,16*e.Db.aa+16),Vi(c,d.Dc()),e.Ne(c)):(Wi(c,100),Vi(c,d.Dc()));this.nc&&this.nc.A(a,c);this.jj&&this.jj.A(a,c,b);b.flush(c)};t.af=function(a,b){Nm.a.af.call(this,a,b);this.an(a,b);this.Ym(a)};
t.Gh=function(a){if(!this.xe)return m;var b=this.ob(),c="Sim: "+b.n.Gh();b.n.update(a.time);a=this.r.tk();b=this.nc?this.nc.tk():m;return[c,a,b]};t.an=function(a,b){var c=this.e.M,d=this.dg,e=c.Pl,f=this.Ki;f.clear();var h=Nm.mg;if(b.K.U){var j=d.width/2/2-8,k=d.height/2/2-8;Ge(e,11,h);f.add(h[0],h[1],h[2]-h[0],h[3]-h[1],4294967295,j,k,16,16)}h=Nm.Ti;mf(h,2,2,1,0,0,0,0,1);c.Jg(e,q);f.uc(d.Qf,h)};
t.Ym=function(){var a=this.le;if(a){var b=Gj(U(a)),c=Ti(b.ae()),a=this.e.M,d=this.dg,e=a.Na,f=this.Ki;f.clear();for(var h=0,j=17*b.O.length,k=Nm.mg,n=function(a){var b=a.qf();Ge(e,b.km,k);f.add(k[0],k[1],k[2]-k[0],k[3]-k[1],a==c?4294967295:4286019447,h,0,16,16);h+=17},p=0;p<b.O.length;p++)n.call(v,b.O[p]);b=Nm.Ti;mf(b,2,2,1,0,d.width/2-j,d.height-32-2,0,1);a.Jg(e,q);f.uc(d.Qf,b)}};Nm.Ti=kf();Nm.mg=N();
Nm=Ba(Nm,"blk.game.fps.FpsClientController",{df:"entityAdded",update:"update",Ob:"processInput",Ig:"beginDrawing",qh:"drawWorld",af:"drawOverlays",an:"drawInputUI_",Ym:"drawBlockTypes_"});function Om(a,b){rl.call(this,"game-url",14);var c=Nm;this.nb=a;this.F=a.F;this.ad=new c(a,b);H(this,this.ad)}D(Om,rl);t=Om.prototype;t.ua=function(){Om.a.ua.call(this);ge(this.ad.load(),function(){this.F.fg(l);Pm(this.nb)},aa(),this)};t.Yb=function(){this.F.fg(q);Dm(this.nb);Om.a.Yb.call(this)};t.rl=function(){this.ad.rl()};t.update=function(a){Om.a.update.call(this,a);this.ad.update(a)};t.A=function(a){Om.a.A.call(this,a);this.ad.A(a)};function Qm(a,b){var c=b||new $,d=new $;Hl({Bc:l},d);Fl(zl(a,{ce:"Help",body:'Conceptualized and coded by <a href="http://twitter.com/benvanik" target="_blank">@benvanik</a> as a 20% project at Google.<br/>Copyright Google, Inc 2012.<br/><br/><a href="http://benvanik.github.com/blk-game/" target="_blank">More information</a>, <a href="https://www.github.com/benvanik/blk-game" target="_blank">source code</a>.<br/><br/><span class="C">Controls:</span><table class="D"><tr><td>Movement</td><td>WSAD</td></tr><tr><td>Place block</td><td>Left click</td></tr><tr><td>Remove block</td><td>Right-click, ctrl-click</td></tr><tr><td>Change block type</td><td>Number keys, mouse wheel</td></tr><tr><td>Chat</td><td>T</td></tr><tr><td>Start/stop music</td><td>M</td></tr><tr><td>Show player list</td><td>TAB</td></tr><tr><td>Toggle fullscreen</td><td>Alt-enter</td></tr><tr><td>Settings</td><td>O</td></tr><tr><td>Help</td><td>?</td></tr></table><br/>Use Chrome (or go fullscreen in Firefox) to get awesome FPS control goodness!',
p:d.toString()}),c);return b?"":c.toString()};function Rm(a,b){yl.call(this,"help",a,b,Qm,{})}D(Rm,yl);function Sm(a,b){var c=b||new $;c.append('<div class="',"E",'"><div class="',"F",'"><div class="',"G",'">BLK, by <a href="http://twitter.com/benvanik" target="_blank">@benvanik</a></div><div class="',"H",'">TODO: some awesome logo or something<br/>',"Welcome to my 20% project hacky game tech demo thingie!",'<br/><a href="." target="_blank">',"More Information",'</a><br/><table class="',"I",'"><tr><td class="',"blkMainMenuSinglePlayerButton",'">',"Single-player",'</td><td class="',"blkMainMenuMultiPlayerButton",
'">',"Multi-player",'</td></tr></table></div><table class="',"J",'"><tr><td class="',"blkMainMenuSettingsButton",'">',"Settings",'</td><td class="',"blkMainMenuHelpButton",'">',"Help","</td></tr></table></div></div>");return b?"":c.toString()};function Tm(a,b){rl.call(this,"",8);this.nb=a;this.kb=a.d;this.ur=b;this.T=new Xc(this);H(this,this.T);this.Lc=wl(Sm,{},this.kb);this.be=this.kb.createElement("A");this.be.className="c";var c=this.be;if("textContent"in c)c.textContent="View on GitHub";else if(c.firstChild&&3==c.firstChild.nodeType){for(;c.lastChild!=c.firstChild;)c.removeChild(c.lastChild);c.firstChild.data="View on GitHub"}else Yd(c),c.appendChild(Zd(c).createTextNode("View on GitHub"));this.be.href="http://github.com/benvanik/blk-game";
this.be.target="_blank"}D(Tm,rl);function Um(a,b,c){b=ae(a.kb,b,a.Lc);a.T.listen(b,"click",c,q,a)}
Tm.prototype.ua=function(){Tm.a.ua.call(this);this.kb.R.body.appendChild(this.be);this.kb.appendChild(this.ur,this.Lc);Um(this,"blkMainMenuSinglePlayerButton",function(){this.nb.ia();this.nb.ah("local://blk-0")});Um(this,"blkMainMenuMultiPlayerButton",function(){this.nb.ia();this.nb.ah("ws://localhost:1337")});Um(this,"blkMainMenuSettingsButton",function(){this.nb.ia();Im(this.nb)});Um(this,"blkMainMenuHelpButton",function(){this.nb.ia();Jm(this.nb)})};
Tm.prototype.Yb=function(){this.kb.removeNode(this.be);$c(this.T);this.kb.removeNode(this.Lc);this.Lc=m;Tm.a.Yb.call(this)};function Vm(a,b){var c=b||new $,d=new $,e=d||new $;Gl(zl({Bc:l},{id:"save",label:"Save"}),e);Hl({Bc:q},d);Fl(zl(a,{ce:"Settings",body:'<div class="K"><div class="blkSettingsLabel">Name:</div><div class="L"><input class="N blkSettingsNameValue" type="text"/></div></div><div class="K blkSettingsSensitivitySlider"><div class="blkSettingsLabel">Mouse:</div><div class="L"><div class="R T"><input type="checkbox" class="S"/>Mouse Lock</div><span class="M">Sensitivity: </span><input class="O" type="range" min="1" max="100" /><div class="P"></div> <div class="Q">reset</div></div></div>\x3c!--<div class="K blkSettingsDistanceSlider"><div class="blkSettingsLabel">View Distance:</div><div class="L"><input class="O" type="range" min="1" max="100" /><div class="P"></div> <div class="Q">reset</div></div></div>--\x3e<div class="K blkSettingsAudio"><div class="blkSettingsLabel">Audio:</div><div class="L"><div class="R blkSettingsSoundFx"><input type="checkbox" class="S"/>Sound FX</div><div class="R blkSettingsMusic"><input type="checkbox" class="S"/>Music</div></div></div>',
p:d.toString()}),c);return b?"":c.toString()};function Wm(a,b,c){yl.call(this,"settings",a,b,Vm,{});this.xo=c}D(Wm,yl);Wm.prototype.ua=function(){Wm.a.ua.call(this);var a=this.xo;ae(this.d,"blkSettingsNameValue",this.root).value=a.userName;Xm(this,"blkSettingsSensitivitySlider",1,100,50,50*a.ka,function(a){return Na(a/50,2)});Ym(this,"T",a.pb);Xm(this,"blkSettingsDistanceSlider",X.qj,X.pj,X.em,a.Cb,function(a){return Na(a)});Ym(this,"blkSettingsSoundFx",!a.Za);Ym(this,"blkSettingsMusic",!a.bc)};
function Xm(a,b,c,d,e,f,h){function j(){n.innerHTML=h(Number(k.value))}if(b=ae(a.d,b)){var k=ae(a.d,"O",b);if(k){k.min=String(c);k.max=String(d);k.value=String(f);var n=ae(a.d,"P",b);j();a.S.listen(k,"change",j);c=ae(a.d,"Q",b);a.S.listen(c,"click",function(){k.value=String(e);j()})}}}function Zm(a,b){var c=ae(a.d,b);if(c)return c=ae(a.d,"O",c),!c?i:Number(c.value)}
function Ym(a,b,c){if(b=ae(a.d,b)){var d=ae(a.d,"S",b);d&&(ll(b),d.checked=c,a.S.listen(b,"click",function(a){a.target!=d&&(d.checked=!d.checked)}))}}function $m(a,b){var c=ae(a.d,b);if(c)return c=ae(a.d,"S",c),!c?i:c.checked}
Wm.prototype.nm=function(a){if("save"==a){a=this.xo;var b=ae(this.d,"blkSettingsNameValue",this.root).value,b=Hi(b);a.userName=b;b=Zm(this,"blkSettingsSensitivitySlider");y(b)&&(a.ka=b/50);b=$m(this,"T");y(b)&&(a.pb=b);b=Zm(this,"blkSettingsDistanceSlider");y(b)&&(a.Cb=b);b=$m(this,"blkSettingsSoundFx");y(b)&&(a.Za=!b);b=$m(this,"blkSettingsMusic");y(b)&&(a.bc=!b);a.save()}};function an(a,b){var c=b||new $;c.append('<div class="',"U",'"><div class="',"V",'">Loading...</div></div>');return b?"":c.toString()};function bn(a,b){yl.call(this,"",a,b,an,{})}D(bn,yl);function cn(){this.gs=this.Ri=this.time=this.of=0}cn.prototype.Ec=function(a,b,c,d){this.of=a;this.time=b;this.Ri=c;this.gs=d};function dn(){this.hs=tc();this.Re=this.xa=this.mb=0;this.wn=q}function en(a){return(tc()-a.hs)/1E3}function xi(a){return!a.wn?0:en(a)+a.Re};function fn(a,b){G.call(this);this.If=a;this.W=b||new dn;this.Te=[];this.Gs=m}D(fn,G);fn.prototype.b=function(){yc(this.Te);this.Te.length=0;fn.a.b.call(this)};fn.prototype.getTime=function(){return xi(this.W)};function gn(){this.Ri=this.time=this.of=0;this.hasFocus=q}gn.prototype.Ec=function(a,b,c,d){this.of=a;this.time=b;this.Ri=c;this.hasFocus=d};function hn(a,b,c,d){G.call(this);this.T=new Xc(this);H(this,this.T);this.Wl=a;this.Lj=this.se=this.Yj=m;if(!b){if(a=v.requestAnimationFrame||v.webkitRequestAnimationFrame||v.mozRequestAnimationFrame||v.oRequestAnimationFrame||v.msRequestAnimationFrame)this.se=a;if(a=v.cancelAnimationFrame||v.webkitCancelAnimationFrame||v.mozCancelAnimationFrame||v.oCancelAnimationFrame||v.msCancelAnimationFrame)this.Lj=a}this.xd=0;this.Fc=m;this.Ik=0;this.Ae=l;this.lk=d||0;this.Fi=m;c&&(this.T.listen(v,"blur",function(){this.Ae=
q}),this.T.listen(v,"focus",function(){this.Ae||(this.Ae=l,this.xd&&this.start(l))}))}D(hn,G);hn.prototype.b=function(){this.stop(l);this.Yj=m;hn.a.b.call(this)};hn.prototype.hasFocus=s("Ae");
hn.prototype.start=function(a){if(!a&&(this.xd++,1<this.xd))return;if(this.Ae){var b=this;this.Fc=this.se?this.se.call(v,function(){jn(b)},this.Yj):v.setTimeout(function(){jn(b)},62.5)}this.Wl(tc());this.lk&&(b=this,this.Fi=v.setInterval(Aa(function(){var a=b;if(tc()-a.Ik>=a.lk&&a.xd){var d=tc();a.Ik=d;a.Wl(d)}},"gf.timing.RenderTimer#simulateTick"),this.lk))};
hn.prototype.stop=function(a){if(a||this.xd)a||this.xd--,this.xd||(a=this.Fc,this.Lj?this.Lj.call(v,a):this.se||v.clearTimeout(a),this.Fc=m,this.Fi!==m&&(v.clearInterval(this.Fi),this.Fi=m))};function jn(a){if(a.Fc!==m){a.Fc=m;a.Ae&&(a.Fc=a.se?a.se.call(v,function(){jn(a)},a.Yj):v.setTimeout(function(){jn(a)},16));var b=tc();a.Ik=b;a.Wl(b)}};function kn(a,b){fn.call(this,a,b);this.S=new Xc(this);H(this,this.S);this.Gf=en(this.W);this.fn=l;this.eq=kn.dp;this.Be=0;this.ns=new gn;this.ms=0;this.qi=new cn;this.Hr=0;var c=this;this.$f=new hn(function(a){c.no(a)},i,i,500);H(this,this.$f);this.jg=q}D(kn,fn);kn.dp=0.016777;kn.fm=0.25;function Pm(a){a.jg||(a.jg=l,a.$f.start())}function Dm(a){a.jg&&(a.jg=q,a.$f.stop())}t=kn.prototype;
t.no=function(){var a=en(this.W),b=a-this.Gf;this.Gf=a;b>kn.fm&&(b=kn.fm);this.Be+=b;a=1;if(this.fn){for(a=this.eq;this.Be>=a;){this.Ul(this.W.mb,a);var c=this.W;c.mb+=a;this.Be-=a;if(!this.jg)break}a=this.Be/a}else this.Ul(this.W.mb,b),c=this.W,c.mb+=b;this.$f.hasFocus()&&this.oo(xi(this.W),b,a)};t.Ul=function(a,b){if(!(0>=b)){var c=this.ns;c.Ec(this.ms++,a,b,this.$f.hasFocus());this.update(c)}};t.oo=function(a,b,c){var d=this.qi;d.Ec(this.Hr++,a,b,c);this.A(d)};t.update=A;t.A=A;
kn=Ba(kn,"gf.Game",{no:"renderTick_",Ul:"update_",oo:"render_"});function ln(a,b){gi.call(this,a);this.d=b||m}D(ln,gi);ln.prototype.load=function(a){var b=new Af(function(){a.cancel()},this);a.load(b);return b};function mn(a){G.call(this);this.context=a;this.dc=O()}D(mn,G);mn.prototype.update=function(a){if(this.context){var b=this.context.listener;if(a){var c=nn[0],d=nn[1];Q(c,0,0,0);rf(a,c,c);b.setPosition(c[0],c[1],c[2]);cf(this.dc,c);Q(c,0,0,1);sf(a,c,c);Q(d,0,1,0);sf(a,d,d);b.setOrientation(-c[0],-c[1],-c[2],d[0],d[1],d[2])}else b.setPosition(0,0,0),b.setOrientation(0,0,1,0,1,0);b.setVelocity(0,0,0)}};var nn=[O(),O()];function on(a,b){gi.call(this,a);this.d=b;this.context=m;v.webkitAudioContext?this.context=new window.webkitAudioContext:v.AudioContext&&(this.context=new window.AudioContext);this.listener=new mn(this.context);H(this,this.listener);this.Gg=[];this.Vi=[]}D(on,gi);on.prototype.b=function(){Qa(this.Gg,I);this.Gg.length=0;Qa(this.Vi,I);this.Vi.length=0;on.a.b.call(this)};on.prototype.Yh=function(a){this.Gg.push(a);a.load()};function pn(a,b){G.call(this);this.fb=a;this.ra=b;this.Fk=this.Sh=q;this.ub=this.Nf=m}D(pn,G);pn.prototype.b=function(){this.Di(m);pn.a.b.call(this)};pn.prototype.Di=function(a){if(a!=this.ub){if(this.ub){this.stop();var b=this.ub;E(this.ra.Vi,b);I(b)}if(this.ub=a)a=this.ub,this.ra.Vi.push(a),a.load(),this.Sh||qn(this,0)}};function qn(a,b){var c=10+60*Math.random(),c=b+1E3*c;cd.clearTimeout(a.Nf);a.Nf=dd(a.co,c,a)}
pn.prototype.co=function(){if(!this.Sh&&this.ub){this.stop();var a=m,b=this.ub,c=[],d;for(d in b.ng)c.push(b.ng[d]);c.length&&(a=c[0]);a&&(this.ub.play(a),this.Fk=l,qn(this,a.duration))}};pn.prototype.stop=function(){this.ub&&(this.Nf!==m&&(cd.clearTimeout(this.Nf),this.Nf=m),Fg(this.ub),this.Fk=q)};var rn="fullscreen_changed_"+Wc++,sn="orientation_changed_"+Wc++;function tn(a){G.call(this);this.Hd=a||window;this.Xh=Oc(this.Hd,"resize",this.Qq,q,this);this.kc=Xd(this.Hd||window);if(Ib&&Cb||Gb&&this.Hd.self!=this.Hd.top)this.hj=window.setInterval(C(this.Hm,this),un)}D(tn,bd);var vn={},un=500;t=tn.prototype;t.Xh=m;t.Hd=m;t.kc=m;t.hj=m;t.Dc=function(){return this.kc?this.kc.s():m};t.b=function(){tn.a.b.call(this);this.Xh&&(Sc(this.Xh),this.Xh=m);this.hj&&(window.clearInterval(this.hj),this.hj=m);this.kc=this.Hd=m};t.Qq=function(){this.Hm()};
t.Hm=function(){var a=Xd(this.Hd||window);if(!(a==this.kc||(!a||!this.kc?0:a.width==this.kc.width&&a.height==this.kc.height)))this.kc=a,this.dispatchEvent("resize")};function wn(a,b){G.call(this);this.d=a;var c=a.R,d=c.body;this.parentElement=b||d;this.T=new Xc(this);H(this,this.T);d=a.createElement("DIV");hl(d,{position:"absolute",left:0,top:0,right:0,bottom:0});a.appendChild(this.parentElement,d);var e=a.createElement("DIV");hl(e,{position:"absolute",left:0,top:0,right:0,bottom:0});a.appendChild(d,e);this.Ia=d;this.canvas=new xn(a,e);H(this,this.canvas);this.Fn=l;this.Rh=this.Xd=q;this.orientation=yn;this.Xs=v.devicePixelRatio||1;var e=a.R.parentWindow||a.R.defaultView||
window,f=na(e),e=vn[f]=vn[f]||new tn(e);this.T.listen(e,"resize",function(){this.je()});this.T.listen(a.R.body,"orientationchange",C(function(){this.orientation=window.orientation;this.je();this.dispatchEvent(sn)},this));this.je();if((this.Xd=!(!d.requestFullScreen&&!d.mozRequestFullScreen&&!d.webkitRequestFullScreen))&&(c.fullScreenEnabled!==i||c.mozFullScreenEnabled!==i))this.Xd=c.fullScreenEnabled||c.mozFullScreenEnabled;this.Xd&&this.T.listen(c,["fullscreenchange","mozfullscreenchange","webkitfullscreenchange"],
function(){this.Rh=!!c.fullScreenElement||c.mozFullScreen||c.webkitIsFullScreen;this.je();this.dispatchEvent(rn)})}D(wn,bd);var yn=0;wn.prototype.Dc=function(){return this.canvas.size};wn.prototype.fg=function(a){a!=this.Fn&&(this.Fn=a,this.canvas.yc.style.display=a?"":"none")};wn.prototype.je=function(){this.canvas.je()};
function xn(a,b){G.call(this);this.parentElement=b;this.yc=a.createElement("CANVAS");ll(this.yc);hl(this.yc,{position:"absolute",left:0,top:0,right:0,bottom:0,cursor:"crosshair","-webkit-tap-highlight-color":"rgba(0,0,0,0)","-webkit-touch-callout":"none"});a.appendChild(b,this.yc);this.size=new Ud(1,1)}D(xn,G);
xn.prototype.je=function(){var a;a=this.parentElement;var b;b:{b=Zd(a);if(b.defaultView&&b.defaultView.getComputedStyle&&(b=b.defaultView.getComputedStyle(a,m))){b=b.display||b.getPropertyValue("display")||"";break b}b=""}if("none"!=(b||(a.currentStyle?a.currentStyle.display:m)||a.style&&a.style.display))a=jl(a);else{b=a.style;var c=b.display,d=b.visibility,e=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";a=jl(a);b.display=c;b.position=e;b.visibility=d}b=window.devicePixelRatio||
1;this.yc.width=a.width*b;this.yc.height=a.height*b;hl(this.yc,{width:a.width+"px",height:a.height+"px"});this.size.width=a.width;this.size.height=a.height};var zn="context_lost_"+Wc++,An="context_restored_"+Wc++;function Bn(){this.wk=q;this.lh=this.Vj=m;this.Gd=[]};function Cn(a){Bn.call(this);this.ba=a;this.Co=this.Fl=q}D(Cn,Bn);function Dn(a){var b=a.ba.d.createElement("IMG");if(!b)return a.Fl=q,Hf();var c=new Af;a=C(function(){this.Fl=2==b.height;b.onload=m;b.onerror=m;c.D(m)},a);b.addEventListener("load",a,q);b.addEventListener("error",a,q);b.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA";return c};function En(a,b){G.call(this);this.d=a||(b?new $d(Zd(b)):Rd||(Rd=new $d));this.canvas=b;this.Ld={};this.Nk=0;this.ml=this.Vc=this.ds=this.kh=this.Rg=this.mi=m;this.vj=0;this.Cd=[];this.Ir=m;this.bt=[m];this.T=new Xc(this);H(this,this.T);this.Yg=q;this.T.listen(b,"webglcontextcreationerror",function(a){L("error creating gl context: ",a.statusMessage||"?")});this.T.listen(b,"webglcontextlost",function(a){a.preventDefault();this.w();this.dispatchEvent(zn)});this.T.listen(b,"webglcontextrestored",function(){this.restore();
this.dispatchEvent(An)});this.f=m;this.yh=new ke;this.kk=new Cn(this)}D(En,bd);t=En.prototype;t.b=function(){this.Nk&&Ya(this.Ld,I);this.Ld={};this.w();En.a.b.call(this)};t.w=function(){this.Yg=q;Ya(this.Ld,function(a){a.w()});this.ds=this.kh=this.Rg=this.mi=m;this.Vc&&(this.Vc.reset(),this.Vc=m);this.ml=m;for(var a=this.vj=0;a<this.Cd.length;a++)this.Cd[a]=m;this.Ir=m};
t.restore=function(){this.Cd=Array(this.f.getParameter(34930));for(var a=0;a<this.Cd.length;a++)this.Cd[a]=m;Ya(this.Ld,function(a){a.restore()});this.Yg=l};
t.we=function(a){if(this.f)return Hf();var b=new Af;if(v.WebGLRenderingContext){for(var c=m,d=["webgl","experimental-webgl"],e=0;e<d.length;e++){try{c=this.canvas.getContext(d[e],a)}catch(f){continue}if(c)break}a=c}else a=m;a?(this.f=a,this.yh.we(a),a=this.kk,c=new Af,a.wk?a.lh?c.G(a.lh):c.D(m):(a.Gd.push(c),a.Vj||(d=[],d.push(Dn(a)),a.Co=a.ba.yh.isSupported(8),d=new $f(d),a.Vj=d,ge(a.Vj,function(){this.wk=l;this.lh=m;for(var a=0;a<this.Gd.length;a++)this.Gd[a].D(m);this.Gd.length=0},function(a){this.wk=
l;this.lh=a;for(var b=0;b<this.Gd.length;b++)this.Gd[b].G(a);this.Gd.length=0},a))),ge(c,function(){this.restore();b.D(m)},function(a){b.G(a)},this)):(this.Yg=q,b.G("Unable to create the WebGL context"));return b};t.flush=function(){this.f.flush()};function og(a,b){a.Rg!=b&&(b&&a.f&&b.od(a.f,a.Rg),a.Rg=b)}function pg(a,b){a.kh!=b&&(b&&a.f&&b.od(a.f,a.kh),a.kh=b)}function wf(a,b){a.Vc!=b&&(b?b.od(a.Vc):a.Vc&&a.Vc.reset(),a.Vc=b)}
function qg(a,b){var c=b instanceof Qe?b.handle:b;a.ml!=c&&(a.f.useProgram(c),a.ml=c)}function Je(a,b){var c=a.f;a.Cd[0]!=b&&(0!=a.vj&&(c.activeTexture(33984),a.vj=0),(a.Cd[0]=b)?b.bind():a.f.bindTexture(c.TEXTURE_2D,m))}t.Ej=function(){return!this.Yg?q:l};t.end=aa();function Fn(a,b){G.call(this);this.Nn=b;this.pf=[];a>this.Nn&&g(Error("[goog.structs.SimplePool] Initial cannot be greater than max"));for(var c=0;c<a;c++)this.pf.push(this.gh())}D(Fn,G);t=Fn.prototype;t.Sm=m;t.Xm=m;function Gn(a,b){a.pf.length<a.Nn?a.pf.push(b):a.Zj(b)}t.gh=function(){return this.Sm?this.Sm():{}};t.Zj=function(a){if(this.Xm)this.Xm(a);else if(ma(a))if(la(a.$e))a.$e();else for(var b in a)delete a[b]};t.b=function(){Fn.a.b.call(this);for(var a=this.pf;a.length;)this.Zj(a.pop());delete this.pf};function Hn(){G.call(this);this.type="none"}D(Hn,G);function In(){this.xf=Array(256)}In.prototype.X=function(a,b,c){b=c?C(b,c):b;this.xf[a]=b};function Jn(a,b){var c=Sh();c.Ej(b.data,0);if(c.offset+1<=c.buffer.length){var d=Ph(c),e=a.xf[d];e&&e(b,d,c)}};function Kn(a,b,c){G.call(this);this.Ja=new In;this.W=new dn;this.id=a;this.type=b;this.Ys=c;this.info=new Ul;this.Es=new Hn;this.state=0;this.Ma=[];this.Ab={};this.cj=Array(256);this.Aa=[]}D(Kn,G);Kn.prototype.b=function(){this.Aa.length=0;Kn.a.b.call(this)};Kn.prototype.Ie=function(a){this.Ma.push(a);this.Ab[a.j]=a;this.cj[a.oc]=a;for(var b=0;b<this.Aa.length;b++)this.Aa[b].Xl(a)};Kn.prototype.pi=function(a){if(kb(this.Ab,a.j)){this.cj[a.oc]=m;E(this.Ma,a);for(var b=0;b<this.Aa.length;b++)this.Aa[b].Yl(a)}};function Ln(a){this.timestamp=ta();this.zb=m;this.data=a};function Mn(a){G.call(this);this.sh=a;this.ge=q;this.state=Nn;this.Xg=q;this.jc=0;this.Oc=m;this.Zf=[];this.kj=[]}D(Mn,G);Mn.prototype.b=function(){this.close();Mn.a.b.call(this)};var Nn=0;Mn.prototype.read=function(){if(!this.Zf.length)return m;var a=this.Zf[0];a.timestamp<=ta()?this.Zf.shift():a=m;this.Zf.length||(this.Xg=q);return a};
Mn.prototype.write=function(a){a=new Ln(a);this.jc?(a.timestamp+=this.jc+(Math.random()-0.5)*this.jc/2,this.Oc===m&&(this.Oc=v.setInterval(C(function(){1==this.state&&this.flush()},this),5))):this.Oc!==m&&(v.clearInterval(this.Oc),this.Oc=m);this.kj.push(a);1==this.state&&this.flush()};function On(a,b){a.jc&&(b.timestamp+=a.jc+(Math.random()-0.5)*a.jc/2);a.Zf.push(b);a.Xg=l}Mn.prototype.flush=function(a){for(var b=ta();this.kj.length;){var c=this.kj[0];if(c.timestamp>b&&!a)break;this.kj.shift();this.Wo(c.data)}};
Mn.prototype.close=function(){2!=this.state&&(this.Oc!==m&&(v.clearInterval(this.Oc),this.Oc=m),this.state=2)};function Pn(a,b,c,d){Kn.call(this,"none",a.ge?0:1,b);this.Ja.X(2,this.Pq,this);this.Ja.X(3,this.Rq,this);this.Ja.X(6,this.Uq,this);this.Ja.X(7,this.Vq,this);this.Ja.X(8,this.Tq,this);this.Ja.X(4,this.Gq,this);this.Ja.X(5,this.Hq,this);this.Ka=a;H(this,this.Ka);this.Td=0;this.$g=new Af;a=new Ci;a.Vl=Db()||"";a.type=Gb?"opera":F?"ie":Hb?"gecko":Ib?"webkit":Di;a.platform=Bb?"mac":Cb?"windows":Mb?"linux":Ei;a.pe=Bi;a.Sd=Qf?"chrome":Nf?"iphone":Of?"ipad":Pf?"android":Jb?"mobile":Fi;this.send(gm(b,new Ii("none",
0,0,d,a)));this.Ok=m}D(Pn,Kn);t=Pn.prototype;t.ge=function(){return this.Ka.ge};function yi(a){a.Ok||(a.Ok=a.Ab[a.id]||m);return a.Ok}t.Nb=function(a){if(0==this.state)for(;this.Ka.Xg;){var b=this.Ka.read();if(!b)return;Jn(this.Ja,b);return}else for(var c=tc();this.Ka.Xg;){b=this.Ka.read();if(!b)break;yi(this).n.Jp+=b.data.byteLength;Jn(this.Ja,b);if(a&&tc()-c>=a)break}2==this.Ka.state&&Qn(this,1)};
t.Pq=function(a,b,c){a:{bm.eg=c.ca();bm.Qe=c.ca();a=c.ca();bm.og.length=a;for(b=0;b<a;b++){bm.og[b]=new Vl;var d=c,e=bm.og[b]||Wl;e.oc=Ph(d);e.xa=Qh(d);if(!e){c=m;break a}}c=bm}if(!c)return q;d=en(this.W)-c.Qe/1E3;a=this.W;b=c.eg/1E3;d=Math.abs(d)/2;a.xa=d;b+=d;b<a.mb&&(b=a.mb);a.mb=b;b=en(a);b=a.mb-b;d=b-a.Re;a.Re=0.3<Math.abs(d)?b:0<d?a.Re+0.001:a.Re-0.001;a.wn=l;for(a=0;a<c.og.length;a++)if(b=c.og[a],d=this.cj[b.oc]||m)d.n.mm=b.xa;return l};
t.Rq=function(a,b,c){a:{a=cm.info||new Ul;a.sh=c.t();a.name=c.t();a.location=c.t();a.pk=c.t();a.qk=c.t();a.Sk=c.ca();a.li={};b=c.ca();for(var d=0;d<b;d++){var e,f;e=c.t();f=c.t();a.li[e]=f}if(a){a=c.ca();cm.Ma.length=a;for(b=0;b<a;b++)if(cm.Ma[b]=new Ii,!Zl(c,cm.Ma[b])){c=m;break a}c=cm}else c=m}if(!c)return q;this.info=c.info.s();for(a=0;a<c.Ma.length;a++)this.Ie(Ji(c.Ma[a]));this.state=1;this.$g.D(this);c=Aa(C(function(){if(2!=this.state){var a=xi(this.W)+this.W.xa,b=en(this.W),c=Math.min(65535,
1E3*this.W.xa|0);this.send(am(1E3*a|0,1E3*b|0,c))}2==this.state&&v.clearInterval(h)},this),"gf.net.ClientSession#sendPing");var h=v.setInterval(c,500);c();for(c=0;c<this.Aa.length;c++)this.Aa[c].Oj();return l};t.Uq=function(a,b,c){a=!Zl(c,lm.zb)?m:lm;if(!a)return q;this.Ie(Ji(a.zb));return l};t.Vq=function(a,b,c){mm.j=c.t();mm.reason=c.ca();if(!mm)return q;a=this.Ab[mm.j]||m;if(!a)return l;a.Td=mm.reason;this.pi(a);return l};
t.Tq=function(a,b,c){om.j=c.t();b=!Xl(c,om.info)?m:om;if(!b)return q;a=this.Ab[b.j]||m;if(!a)return l;b=b.info.Q;b=Hi(b);a.info.Q=b;for(b=0;b<this.Aa.length;b++)this.Aa[b].Zl(a);return l};t.Gq=function(a,b,c){em.Gl=Qh(c);em.yj=Qh(c);a=!Zl(c,em.zb)?m:em;if(!a)return q;this.id=a.zb.j;return l};t.Hq=function(a,b,c){im.reason=c.ca();if(!im)return q;L("disconnected by server",im.reason);Qn(this,im.reason);return l};
function Qn(a,b){a.state=2;a.Td=b;I(a.Ka);for(var c=0;c<a.Aa.length;c++)a.Aa[c].Xj();a.$g.Hb||a.$g.G(a.Td)}t.disconnect=function(){this.send(km());this.Ka.flush(l);Qn(this,0)};t.send=function(a){a&&(2==this.Ka.state?Qn(this,1):2!=this.state&&(1==this.state&&(yi(this).n.Kp+=a.byteLength),this.Ka.write(a)))};function Rn(a){for(var b=new Uint8Array(2*a.length),c=0,d=0;d<a.length;d++){for(var e=a.charCodeAt(d);255<e;)b[c++]=e,e>>=8;b[c++]=e}return b.subarray(0,c).buffer}function Sn(a){a=new Uint8Array(a);for(var b=Array(a.length),c=0;c<b.length;c++)b[c]=a[c];return String.fromCharCode.apply(m,b)};function Tn(a){Mn.call(this,a);this.I=new WebSocket(a);this.I.binaryType="arraybuffer";this.Bm=C(this.Oq,this);this.zm=C(this.uf,this);this.ym=C(this.Fq,this);this.Am=C(this.vk,this);this.I.addEventListener("open",this.Bm,q);this.I.addEventListener("error",this.zm,q);this.I.addEventListener("close",this.ym,q);this.I.addEventListener("message",this.Am,q)}D(Tn,Mn);t=Tn.prototype;t.Oq=function(){this.state=1;this.flush()};t.uf=function(a){L("error",a)};t.Fq=function(a){L("close",a);this.close()};
t.vk=function(a){a=a.data;var b=m;a instanceof ArrayBuffer?b=new Ln(a):B(a)&&(b=new Ln(Rn(a)));b&&On(this,b)};t.Wo=function(a){1!=this.I.readyState?this.close():this.I.send(a)};t.close=function(){this.I.removeEventListener("open",this.Bm,q);this.I.removeEventListener("error",this.zm,q);this.I.removeEventListener("close",this.ym,q);this.I.removeEventListener("message",this.Am,q);this.I.close();Tn.a.close.call(this)};function Un(a,b){Mn.call(this,a);this.ge=l;this.state=1;this.I=b;this.es=!!b.webkitPostMessage&&!(v.Cs&&b instanceof MessagePort);this.Np=!Gb;var c=this;this.I.onmessage=function(a){c.vk(a)};this.I.onerror=function(a){L("port error",a)};this.Cm=C(this.Sq,this);v.addEventListener("unload",this.Cm,q)}D(Un,Mn);Un.prototype.vk=function(a){a=a.data;var b=m;a instanceof ArrayBuffer?b=new Ln(a):B(a)?b=new Ln(Rn(a)):a&&a.close&&this.close();b&&On(this,b)};Un.prototype.Sq=function(){this.close()};
Un.prototype.Wo=function(a){this.es?this.I.webkitPostMessage(a,[a]):this.Np?this.I.postMessage(a):this.I.postMessage(Sn(a))};Un.prototype.close=function(){this.I.onmessage=m;v.removeEventListener("unload",this.Cm,q);try{this.I.postMessage({close:l}),this.I.close&&this.I.close()}catch(a){}Un.a.close.call(this)};function Vn(a,b){var c=m;if(v.Worker&&a instanceof Worker||v.SharedWorker&&a instanceof SharedWorker||v.MessagePort&&a instanceof MessagePort)c=new Un(a,a);else if(B(a))c=new Tn(a);else return c=new Af,c.G(m),c;var d=new Pn(c,7,0,b),c=d.$g,e=v.setInterval(function(){0==d.state&&d.Nb();0!=d.state&&v.clearInterval(e)},16);return c};function Wn(){};function Xn(a){G.call(this);this.d=a;this.na=[];this.de=m}D(Xn,G);Xn.prototype.b=function(){this.de&&(Qc(this.de,"navigate",this.$q,q,this),I(this.de),this.de=m);for(;this.na.length;){var a=this.na.pop();a.N=m;I(a)}Xn.a.b.call(this)};Xn.prototype.$q=function(a){L("navigate: ",a.kt,a.Rs)};function Yn(a){if(a.de){for(var b=[],c=0;c<a.na.length;c++)b.push(a.na[c].Yq);b=b.join("/");a.de.ct(b)}}function Zn(a,b){$n(a,l);Pl(a,b,l);Yn(a)}function Pl(a,b,c){b.N=a;a.na.push(b);ao(a);b.ua();c||Yn(a)}
function sl(a,b){var c=a.na.pop();c.N=m;I(c);ao(a);b||Yn(a)}function $n(a,b){for(;a.na.length;)sl(a,l);b||Yn(a)}function ao(a){for(var b=l,c=l,d=a.na.length-1;0<=d;d--){var e=a.na[d];e.setActive(b);e.gq=c;e.q&6&&(c=b=q);e.q&8&&(c=q)}}Xn.prototype.update=function(a){for(var b=0;b<this.na.length;b++)this.na[b].update(a)};Xn.prototype.A=function(a){for(var b=0;b<this.na.length;b++){var c=this.na[b];c.Dn()&&c.A(a)}};function bo(a,b,c){kn.call(this,b);this.fn=q;this.d=a;this.Ya=c;this.fb=new ln(this,this.d);H(this,this.fb);this.Te.push(this.fb);this.F=new wn(this.d);H(this,this.F);this.F.fg(q);this.C=new xj(this,this.F.Ia);H(this,this.C);this.Te.push(this.C);a=C(this.Go,this);this.C.V.ok=a;this.ba=new En(this.d,this.F.canvas.yc);H(this,this.ba);this.M=new S(this,this.fb,this.ba);H(this,this.M);this.ra=new on(this,this.d);H(this,this.ra);this.Te.push(this.ra);this.ai=new pn(this.fb,this.ra);H(this,this.ai);this.Hg=
new ie(this.fb,this.ra.context);this.ra.Yh(this.Hg);this.N=new Xn(this.d);H(this,this.N);this.Kb=q}D(bo,kn);t=bo.prototype;t.b=function(){bo.a.b.call(this)};function co(a){var b=a.C,c=b.K,d=a.Ya.ka,d=Math.min(Math.max(d,0.1),10);c.Ai=d;b.K.Mn=a.Ya.pb;a.Kb&&a.Ya.pb?tj(b.K):vj(b.K);b=a.ai;c=a.Ya.bc;b.Sh!=c&&(c&&b.stop(),b.Sh=c);if(a.Kb){var e=m;a=a.N;b=function(a){if(a instanceof Om)return e=a,q};for(c=0;c<a.na.length&&b.call(v,a.na[c])!==q;c++);a=e}else a=m;a&&a.rl()}
t.start=function(){co(this);var a=new bn(this.d,this.F.Ia);Zn(this.N,a);ge(this.ba.we({alpha:q,antialias:q}),function(){ge(this.M.we(),function(){$n(this.N);Pm(this);_gaq.push(["_trackEvent","game","setup_succeeded"]);if(this.If.host)_gaq.push(["_trackEvent","game","connect_to_host",this.If.host]),this.ah(this.If.host);else{this.Kb&&(this.Kb=q);var a=new Tm(this,this.F.Ia);Zn(this.N,a)}},function(a){eo(this,"Unable to setup graphics resources",a)},this)},function(a){eo(this,"Unable to create the graphics context",
a)},this)};function eo(a,b,c){_gaq.push(["_trackEvent","game","setup_fail",b]);$n(a.N);a=Ol(a.N,a.F.Ia,"setup",b,c||m);ge(a,function(a){"reload"==a&&window.location.reload()},m,i)}t.update=function(a){this.N.update(a)};t.A=function(a){this.N.A(a)};t.ia=function(){this.Ya.Za||he(this.Hg,"click",Pd)};function Cm(a){a.Ya.Za||he(a.Hg,"player_leave",Pd)}
t.Go=function(){this.ia();var a=!this.F.Rh,b=this.F;if(b.Rh){if(b.Xd){var c=b.d.R;(c.cancelFullScreen||c.mozCancelFullScreen||c.webkitCancelFullScreen).call(c);b.Rh=q}}else b.Xd&&(b=b.Ia,(b.requestFullScreen||b.mozRequestFullScreen||b.webkitRequestFullScreen).call(b,Element.ALLOW_KEYBOARD_INPUT));this.Kb&&(a&&this.C.K.Ni&&this.Ya.pb)&&tj(this.C.K)};function Im(a){a.Kb&&a.C.ja(q);var b=new Wm(a.d,a.F.Ia,a.Ya);Pl(a.N,b);ge(b.Wb,function(a){this.ia();"save"==a&&co(this);this.Kb&&this.C.ja(l)},m,a)}
function Jm(a){function b(){this.ia();this.Kb&&this.C.ja(l)}a.Kb&&a.C.ja(q);var c=new Rm(a.d,a.F.Ia);Pl(a.N,c);ge(c.Wb,b,b,a)}
t.ah=function(a){var b,c=this.N,d=new Nl(c.d,this.F.Ia,Kl,{Or:a});Pl(c,d);b=d.Wb;c=new Af;d=new Zb(a);""!=d.gc&&""!=d.cd&&""!=d.Vf||c.G('Invalid address format: "'+a+'"');var e=new Wn,f=new Gi;f.Q=Hi(this.Ya.userName);if(!c.Hb)switch(d.gc){case "ws":this.Pm(d,e,f,c);break;case "local":this.Om(d,e,f,c);break;default:c.G('Unsupported scheme "'+d.gc+'"')}var h=xa("connectToHost:wait");ge(c,function(c){L("Connection established to "+a);ya(h);b.cancel();this.Kb=l;c=new Om(this,c);Zn(this.N,c)},function(c){L("Error connecting to "+
a,c);ya(h);b.cancel();var d=this.N;c=new Nl(d.d,this.F.Ia,Ll,{reason:c});Pl(d,c);ge(c.Wb,function(a){"reload"==a&&window.location.reload()},m,i)},this)};bo.ip=q;bo.prototype.Om=function(a,b,c,d){if(Qf){var e=new Af;v.webkitStorageInfo?v.webkitStorageInfo.requestQuota(1,4294967296,function(a){e.D(a)},function(a){e.G(a)}):e.G(m);ge(e,function(e){4294967296>e?d.G(m):this.Uh(a,b,c,d)},function(){L("unable to get quota - no saving!");this.Uh(a,b,c,d)},this)}else this.Uh(a,b,c,d)};
bo.prototype.Uh=function(a,b,c,d){if(v.Worker){a="server-"+a.cd+"";var e;bo.ip&&this.If.as&&Qf&&v.SharedWorker?(a=new SharedWorker("worker-server.js",a),e=a.port):e=a=new Worker("worker-server.js");a.onerror=function(a){L("Error in worker: "+a.message+"("+a.filename+":"+a.Ts+")")};var f=xa("launchLocalServer_:connect");ge(Vn(e,c),function(a){ya(f);e.addEventListener("message",function(a){if(a.data instanceof Object&&"gf_log"==a.data.type){var b=a.data.args;b.unshift("{server}");window.console.log.apply(window.console,
b);a.stopPropagation()}},l);d.D(a)},function(a){ya(f);d.G(a)})}else d.G("Workers not supported")};bo.prototype.Pm=function(a,b,c,d){a=Vn(a.toString(),c);ge(a,d.D,d.G,d)};bo=Ba(bo,"blk.game.client.ClientGame",{ah:"connectToHost",Om:"connectToLocalHost_",Uh:"launchLocalServer_",Pm:"connectToRemoteHost_"});function fo(a){this.R=a}var go=/\s*;\s*/;t=fo.prototype;t.set=function(a,b,c,d,e,f){/[;=\s]/.test(a)&&g(Error('Invalid cookie name "'+a+'"'));/[;\r\n]/.test(b)&&g(Error('Invalid cookie value "'+b+'"'));y(c)||(c=-1);e=e?";domain="+e:"";d=d?";path="+d:"";f=f?";secure":"";c=0>c?"":0==c?";expires="+(new Date(1970,1,1)).toUTCString():";expires="+(new Date(ta()+1E3*c)).toUTCString();this.R.cookie=a+"="+b+e+d+c+f};
t.get=function(a,b){for(var c=a+"=",d=(this.R.cookie||"").split(go),e=0,f;f=d[e];e++){if(0==f.lastIndexOf(c,0))return f.substr(c.length);if(f==a)return""}return b};t.remove=function(a,b,c){var d=this.tc(a);this.set(a,"",0,b,c);return d};t.Zb=function(){return ho(this).keys};t.Jb=function(){return ho(this).ps};t.Ua=function(){return!this.R.cookie?0:(this.R.cookie||"").split(go).length};t.tc=function(a){return y(this.get(a))};t.clear=function(){for(var a=ho(this).keys,b=a.length-1;0<=b;b--)this.remove(a[b])};
function ho(a){a=(a.R.cookie||"").split(go);for(var b=[],c=[],d,e,f=0;e=a[f];f++)d=e.indexOf("="),-1==d?(b.push(""),c.push(e)):(b.push(e.substring(0,d)),c.push(e.substring(d+1)));return{keys:b,ps:c}};function io(a){this.kb=a;this.userName="User";this.ka=1;this.pb=l;this.Cb=jo;this.bc=this.Za=q}var jo=X.em;io.prototype.s=function(){var a=new io(this.kb);a.userName=this.userName;a.ka=this.ka;a.pb=this.pb;a.Cb=this.Cb;a.Za=this.Za;a.bc=this.bc;return a};io.prototype.reset=function(){this.userName="User";this.ka=1;this.pb=l;this.Cb=jo;this.bc=this.Za=q};
io.prototype.load=function(){var a=new fo(this.kb.R);this.userName=a.get("s_un",this.userName);this.userName=decodeURIComponent(this.userName.replace(/\+/g," "));1>this.userName.length&&(this.userName="User");this.ka=Number(a.get("s_ms",String(this.ka)));if(0>=this.ka||10<this.ka)this.ka=1;this.pb="true"==a.get("s_ml",String(this.pb));this.Cb=Number(a.get("s_vd",String(this.Cb)))|0;if(this.Cb<=X.qj||this.Cb>X.pj)this.Cb=jo;this.Za="true"==a.get("s_sm",String(this.Za));this.bc="true"==a.get("s_mm",
String(this.bc))};io.prototype.save=function(){var a=new fo(this.kb.R);a.set("s_un",encodeURIComponent(String(this.userName)),31104E3,"/");a.set("s_ms",String(this.ka),31104E3,"/");a.set("s_ml",String(this.pb),31104E3,"/");a.set("s_vd",String(this.Cb),31104E3,"/");a.set("s_sm",String(this.Za),31104E3,"/");a.set("s_mm",String(this.bc),31104E3,"/")};function ko(){this.hf=[];this.cl=new tb;this.Io=this.Jo=this.Ko=this.Ao=0;this.gg=new tb;this.Mm=this.Ho=0;this.Zk=1;this.fk=new Fn(0,4E3);this.fk.gh=function(){return new lo};this.Bo=new Fn(0,50);this.Bo.gh=function(){return new mo};var a=this;this.xk=new Fn(0,2E3);this.xk.gh=function(){return String(a.Zk++)};this.xk.Zj=aa();this.Yp=3}ko.prototype.ha=vd("goog.debug.Trace");function mo(){this.$l=this.time=this.count=0}
mo.prototype.toString=function(){var a=[];a.push(this.type," ",this.count," (",Math.round(10*this.time)/10," ms)");this.$l&&a.push(" [VarAlloc = ",this.$l,"]");return a.join("")};function lo(){}function no(a,b,c,d){var e=[];-1==c?e.push("    "):e.push(oo(a.bn-c));e.push(" ",po(a.bn-b));0==a.gk?e.push(" Start        "):1==a.gk?(e.push(" Done "),e.push(oo(a.gt-a.startTime)," ms ")):e.push(" Comment      ");e.push(d,a);0<a.ks&&e.push("[VarAlloc ",a.ks,"] ");return e.join("")}
lo.prototype.toString=function(){return this.type==m?this.Rp:"["+this.type+"] "+this.Rp};ko.prototype.reset=function(a){this.Yp=a;for(a=0;a<this.hf.length;a++){var b=this.fk.id;b&&Gn(this.xk,b);Gn(this.fk,this.hf[a])}this.hf.length=0;this.cl.clear();this.Ao=ta();this.Mm=this.Ho=this.Io=this.Jo=this.Ko=0;b=this.gg.Zb();for(a=0;a<b.length;a++){var c=this.gg.get(b[a]);c.count=0;c.time=0;c.$l=0;Gn(this.Bo,c)}this.gg.clear()};
ko.prototype.toString=function(){for(var a=[],b=-1,c=[],d=0;d<this.hf.length;d++){var e=this.hf[d];1==e.gk&&c.pop();a.push(" ",no(e,this.Ao,b,c.join("")));b=e.bn;a.push("\n");0==e.gk&&c.push("|  ")}if(0!=this.cl.Ua()){var f=ta();a.push(" Unstopped timers:\n");d=this.cl;b=function(b){a.push("  ",b," (",f-b.startTime," ms, started at ",po(b.startTime),")\n")};if(ka(d))try{Qa(d,b,i)}catch(h){h!==qb&&g(h)}else{d=sb(d);try{for(;;)b.call(i,d.next())}catch(j){j!==qb&&g(j)}}}b=this.gg.Zb();for(d=0;d<b.length;d++)c=
this.gg.get(b[d]),1<c.count&&a.push(" TOTAL ",c,"\n");a.push("Total tracers created ",this.Ho,"\n","Total comments created ",this.Mm,"\n","Overhead start: ",this.Ko," ms\n","Overhead end: ",this.Jo," ms\n","Overhead comment: ",this.Io," ms\n");return a.join("")};function oo(a){a=Math.round(a);var b="";1E3>a&&(b=" ");100>a&&(b="  ");10>a&&(b="   ");return b+a}function po(a){a=Math.round(a);return String(100+a/1E3%60).substring(1,3)+"."+String(1E3+a%1E3).substring(1,4)}new ko;var qo=Aa(function(a,b,c,d){a=new $d(a);c=new qc(c,d);d=new io(a);d.load();(new bo(a,c,d)).start()},"blk.client.start");ea("blk.client.start",qo);
