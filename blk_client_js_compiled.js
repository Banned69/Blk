function g(a){throw a;}var i=void 0,l=!0,m=null,q=!1;function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function s(a){return function(){return this[a]}}function ca(a){return function(){return a}}var t,da=da||{},v=this;function ea(a,b){var c=a.split("."),d=v;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&y(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function fa(a){a=a.split(".");for(var b=v,c;c=a.shift();)if(b[c]!=m)b=b[c];else return m;return b}function A(){}function ga(a){return a}
function ha(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function y(a){return a!==i}function ja(a){return"array"==ha(a)}function ka(a){var b=ha(a);return"array"==b||"object"==b&&"number"==typeof a.length}function B(a){return"string"==typeof a}function la(a){return"function"==ha(a)}function ma(a){var b=typeof a;return"object"==b&&a!=m||"function"==b}function na(a){return a[oa]||(a[oa]=++pa)}var oa="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),pa=0;
function qa(a,b,c){return a.call.apply(a.bind,arguments)}function ra(a,b,c){a||g(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function C(a,b,c){C=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?qa:ra;return C.apply(m,arguments)}
function sa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var ta=Date.now||function(){return+new Date};function D(a,b){function c(){}c.prototype=b.prototype;a.a=b.prototype;a.prototype=new c};function ua(a){Error.captureStackTrace?Error.captureStackTrace(this,ua):this.stack=Error().stack||"";a&&(this.message=String(a))}D(ua,Error);ua.prototype.name="CustomError";function va(a){return a.replace(/\xa0|\s/g," ")}function wa(a){return a.replace(/\xa0|[ \t]+/g," ")}function xa(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function ya(a){if(!za.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Aa,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Ba,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Ca,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Da,"&quot;"));return a}var Aa=/&/g,Ba=/</g,Ca=/>/g,Da=/\"/g,za=/[&<>\"]/;
function Ea(a,b){var c=y(b)?a.toFixed(b):String(a),d=c.indexOf(".");-1==d&&(d=c.length);d=Math.max(0,1-d);return Array(d+1).join("0")+c};var Fa=Array.prototype,Ha=Fa.indexOf?function(a,b,c){return Fa.indexOf.call(a,b,c)}:function(a,b,c){c=c==m?0:0>c?Math.max(0,a.length+c):c;if(B(a))return!B(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Ia=Fa.forEach?function(a,b,c){Fa.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=B(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Ja=Fa.filter?function(a,b,c){return Fa.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,
h=B(a)?a.split(""):a,j=0;j<d;j++)if(j in h){var k=h[j];b.call(c,k,j,a)&&(e[f++]=k)}return e},Ka=Fa.some?function(a,b,c){return Fa.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=B(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return l;return q};function E(a,b){var c=Ha(a,b),d;(d=0<=c)&&Fa.splice.call(a,c,1);return d}function La(a){return Fa.concat.apply(Fa,arguments)}function Ma(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}
function Na(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c],e;if(ja(d)||(e=ka(d))&&Object.prototype.hasOwnProperty.call(d,"callee"))a.push.apply(a,d);else if(e)for(var f=a.length,h=d.length,j=0;j<h;j++)a[f+j]=d[j];else a.push(d)}}function Oa(a,b){Fa.sort.call(a,b||Pa)}function Pa(a,b){return a>b?1:a<b?-1:0};function Qa(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function Ra(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function Sa(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function Ta(a){for(var b in a)delete a[b]}function Ua(a,b){var c;(c=b in a)&&delete a[b];return c}function Va(a){var b={},c;for(c in a)b[c]=a[c];return b}var Wa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function Xa(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Wa.length;f++)c=Wa[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function Ya(a){if("function"==typeof a.Jb)return a.Jb();if(B(a))return a.split("");if(ka(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Ra(a)}function Za(a,b,c){if("function"==typeof a.forEach)a.forEach(b,c);else if(ka(a)||B(a))Ia(a,b,c);else{var d;if("function"==typeof a.Zb)d=a.Zb();else if("function"!=typeof a.Jb)if(ka(a)||B(a)){d=[];for(var e=a.length,f=0;f<e;f++)d.push(f)}else d=Sa(a);else d=i;for(var e=Ya(a),f=e.length,h=0;h<f;h++)b.call(c,e[h],d&&d[h],a)}};var $a="StopIteration"in v?v.StopIteration:Error("StopIteration");function jb(){}jb.prototype.next=function(){g($a)};jb.prototype.sj=function(){return this};function kb(a){if(a instanceof jb)return a;if("function"==typeof a.sj)return a.sj(q);if(ka(a)){var b=0,c=new jb;c.next=function(){for(;;){b>=a.length&&g($a);if(b in a)return a[b++];b++}};return c}g(Error("Not implemented"))};function lb(a,b){this.r={};this.h=[];var c=arguments.length;if(1<c){c%2&&g(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){a instanceof lb?(c=a.Zb(),d=a.Jb()):(c=Sa(a),d=Ra(a));for(var e=0;e<c.length;e++)this.set(c[e],d[e])}}t=lb.prototype;t.i=0;t.pg=0;t.Ua=s("i");t.Jb=function(){mb(this);for(var a=[],b=0;b<this.h.length;b++)a.push(this.r[this.h[b]]);return a};t.Zb=function(){mb(this);return this.h.concat()};
t.tc=function(a){return nb(this.r,a)};t.clear=function(){this.r={};this.pg=this.i=this.h.length=0};t.remove=function(a){return nb(this.r,a)?(delete this.r[a],this.i--,this.pg++,this.h.length>2*this.i&&mb(this),l):q};function mb(a){if(a.i!=a.h.length){for(var b=0,c=0;b<a.h.length;){var d=a.h[b];nb(a.r,d)&&(a.h[c++]=d);b++}a.h.length=c}if(a.i!=a.h.length){for(var e={},c=b=0;b<a.h.length;)d=a.h[b],nb(e,d)||(a.h[c++]=d,e[d]=1),b++;a.h.length=c}}t.get=function(a,b){return nb(this.r,a)?this.r[a]:b};
t.set=function(a,b){nb(this.r,a)||(this.i++,this.h.push(a),this.pg++);this.r[a]=b};t.s=function(){return new lb(this)};t.sj=function(a){mb(this);var b=0,c=this.h,d=this.r,e=this.pg,f=this,h=new jb;h.next=function(){for(;;){e!=f.pg&&g(Error("The map has changed since the iterator was created"));b>=c.length&&g($a);var h=c[b++];return a?h:d[h]}};return h};function nb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};var ob,pb,qb,rb,sb,tb,ub;function vb(){return v.navigator?v.navigator.userAgent:m}sb=rb=qb=pb=ob=q;var wb;if(wb=vb()){var xb=v.navigator;ob=0==wb.indexOf("Opera");pb=!ob&&-1!=wb.indexOf("MSIE");rb=(qb=!ob&&-1!=wb.indexOf("WebKit"))&&-1!=wb.indexOf("Mobile");sb=!ob&&!qb&&"Gecko"==xb.product}var yb=ob,F=pb,zb=sb,Ab=qb,Bb=rb,Cb,Db=v.navigator;Cb=Db&&Db.platform||"";tb=-1!=Cb.indexOf("Mac");ub=-1!=Cb.indexOf("Win");var Eb=-1!=Cb.indexOf("Linux");
function Fb(){var a=v.document;return a?a.documentMode:i}var Gb;a:{var Hb="",Ib;if(yb&&v.opera)var Jb=v.opera.version,Hb="function"==typeof Jb?Jb():Jb;else if(zb?Ib=/rv\:([^\);]+)(\)|;)/:F?Ib=/MSIE\s+([^\);]+)(\)|;)/:Ab&&(Ib=/WebKit\/(\S+)/),Ib)var Kb=Ib.exec(vb()),Hb=Kb?Kb[1]:"";if(F){var Lb=Fb();if(Lb>parseFloat(Hb)){Gb=String(Lb);break a}}Gb=Hb}var Mb={};
function Nb(a){var b;if(!(b=Mb[a])){b=0;for(var c=xa(String(Gb)).split("."),d=xa(String(a)).split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var h=c[f]||"",j=d[f]||"",k=RegExp("(\\d*)(\\D*)","g"),n=RegExp("(\\d*)(\\D*)","g");do{var p=k.exec(h)||["","",""],r=n.exec(j)||["","",""];if(0==p[0].length&&0==r[0].length)break;b=((0==p[1].length?0:parseInt(p[1],10))<(0==r[1].length?0:parseInt(r[1],10))?-1:(0==p[1].length?0:parseInt(p[1],10))>(0==r[1].length?0:parseInt(r[1],10))?1:0)||((0==p[2].length)<
(0==r[2].length)?-1:(0==p[2].length)>(0==r[2].length)?1:0)||(p[2]<r[2]?-1:p[2]>r[2]?1:0)}while(0==b)}b=Mb[a]=0<=b}return b}var Ob=v.document,Pb=!Ob||!F?i:Fb()||("CSS1Compat"==Ob.compatMode?parseInt(Gb,10):5);var Qb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function Rb(a,b){var c;if(a instanceof Rb)this.Va=y(b)?b:a.Va,Sb(this,a.gc),c=a.bj,Tb(this),this.bj=c,c=a.cd,Tb(this),this.cd=c,Ub(this,a.Vf),c=a.fi,Tb(this),this.fi=c,Vb(this,a.Jc.s()),c=a.Ch,Tb(this),this.Ch=c;else if(a&&(c=String(a).match(Qb))){this.Va=!!b;Sb(this,c[1]||"",l);var d=c[2]||"";Tb(this);this.bj=d?decodeURIComponent(d):"";d=c[3]||"";Tb(this);this.cd=d?decodeURIComponent(d):"";Ub(this,c[4]);d=c[5]||"";Tb(this);this.fi=d?decodeURIComponent(d):"";Vb(this,c[6]||"",l);c=c[7]||"";Tb(this);
this.Ch=c?decodeURIComponent(c):""}else this.Va=!!b,this.Jc=new Wb(m,0,this.Va)}t=Rb.prototype;t.gc="";t.bj="";t.cd="";t.Vf=m;t.fi="";t.Ch="";t.fr=q;t.Va=q;
t.toString=function(){var a=[],b=this.gc;b&&a.push(Xb(b,Yb),":");if(b=this.cd){a.push("//");var c=this.bj;c&&a.push(Xb(c,Yb),"@");a.push(encodeURIComponent(String(b)));b=this.Vf;b!=m&&a.push(":",String(b))}if(b=this.fi)this.cd&&"/"!=b.charAt(0)&&a.push("/"),a.push(Xb(b,"/"==b.charAt(0)?Zb:$b));(b=this.Jc.toString())&&a.push("?",b);(b=this.Ch)&&a.push("#",Xb(b,ac));return a.join("")};t.s=function(){return new Rb(this)};
function Sb(a,b,c){Tb(a);a.gc=c?b?decodeURIComponent(b):"":b;a.gc&&(a.gc=a.gc.replace(/:$/,""))}function Ub(a,b){Tb(a);b?(b=Number(b),(isNaN(b)||0>b)&&g(Error("Bad port number "+b)),a.Vf=b):a.Vf=m}function Vb(a,b,c){Tb(a);b instanceof Wb?(a.Jc=b,a.Jc.zl(a.Va)):(c||(b=Xb(b,bc)),a.Jc=new Wb(b,0,a.Va))}function Tb(a){a.fr&&g(Error("Tried to modify a read-only Uri"))}t.zl=function(a){this.Va=a;this.Jc&&this.Jc.zl(a);return this};function Xb(a,b){return B(a)?encodeURI(a).replace(b,cc):m}
function cc(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Yb=/[#\/\?@]/g,$b=/[\#\?:]/g,Zb=/[\#\?]/g,bc=/[\#\?@]/g,ac=/#/g;function Wb(a,b,c){this.Ea=a||m;this.Va=!!c}function dc(a){if(!a.J&&(a.J=new lb,a.i=0,a.Ea))for(var b=a.Ea.split("&"),c=0;c<b.length;c++){var d=b[c].indexOf("="),e=m,f=m;0<=d?(e=b[c].substring(0,d),f=b[c].substring(d+1)):e=b[c];e=decodeURIComponent(e.replace(/\+/g," "));e=ec(a,e);a.add(e,f?decodeURIComponent(f.replace(/\+/g," ")):"")}}t=Wb.prototype;
t.J=m;t.i=m;t.Ua=function(){dc(this);return this.i};t.add=function(a,b){dc(this);this.Ea=m;a=ec(this,a);var c=this.J.get(a);c||this.J.set(a,c=[]);c.push(b);this.i++;return this};t.remove=function(a){dc(this);a=ec(this,a);return this.J.tc(a)?(this.Ea=m,this.i-=this.J.get(a).length,this.J.remove(a)):q};t.clear=function(){this.J=this.Ea=m;this.i=0};t.tc=function(a){dc(this);a=ec(this,a);return this.J.tc(a)};
t.Zb=function(){dc(this);for(var a=this.J.Jb(),b=this.J.Zb(),c=[],d=0;d<b.length;d++)for(var e=a[d],f=0;f<e.length;f++)c.push(b[d]);return c};t.Jb=function(a){dc(this);var b=[];if(a)this.tc(a)&&(b=La(b,this.J.get(ec(this,a))));else{a=this.J.Jb();for(var c=0;c<a.length;c++)b=La(b,a[c])}return b};t.set=function(a,b){dc(this);this.Ea=m;a=ec(this,a);this.tc(a)&&(this.i-=this.J.get(a).length);this.J.set(a,[b]);this.i++;return this};
t.get=function(a,b){var c=a?this.Jb(a):[];return 0<c.length?String(c[0]):b};t.toString=function(){if(this.Ea)return this.Ea;if(!this.J)return"";for(var a=[],b=this.J.Zb(),c=0;c<b.length;c++)for(var d=b[c],e=encodeURIComponent(String(d)),d=this.Jb(d),f=0;f<d.length;f++){var h=e;""!==d[f]&&(h+="="+encodeURIComponent(String(d[f])));a.push(h)}return this.Ea=a.join("&")};t.s=function(){var a=new Wb;a.Ea=this.Ea;this.J&&(a.J=this.J.s(),a.i=this.i);return a};
function ec(a,b){var c=String(b);a.Va&&(c=c.toLowerCase());return c}t.zl=function(a){a&&!this.Va&&(dc(this),this.Ea=m,Za(this.J,function(a,c){var d=c.toLowerCase();c!=d&&(this.remove(c),this.remove(d),0<a.length&&(this.Ea=m,this.J.set(ec(this,d),Ma(a)),this.i+=a.length))},this));this.Va=a};t.extend=function(a){for(var b=0;b<arguments.length;b++)Za(arguments[b],function(a,b){this.add(b,a)},this)};function fc(a,b,c){this.Bg=a;Xa(this.Bg,{buildServer:{help:"Build server daemon address.",type:String,defaultValue:m}});this.uri=new Rb(b);this.Xf=new Wb(i,0,l);(a=this.uri.Jc)&&this.Xf.extend(a);this.Xf.extend(c);this.Hs=gc(this,"buildServer")}function hc(a,b){var c=parseFloat(a.Bg[b].defaultValue),d=a.Xf.get(b,c);return!y(d)?c:Number(d)}function gc(a,b){var c=a.Bg[b].defaultValue,d=a.Xf.get(b,c);return!y(d)||!d||!d.length||/^[\s\xa0]*$/.test(String(d))?c:String(d)};function ic(a,b){fc.call(this,{simulatedLatency:{help:"Extra latency, in ms, to add to send/recv.",type:Number,defaultValue:0},userName:{help:"User name for multiplayer.",type:String,defaultValue:m},host:{help:"Host endpoint for connections.",type:String,defaultValue:m},sharedWorkers:{help:"Whether to enable shared web workers.",type:Number,defaultValue:1},demo:{help:"Run in demo mode.",type:Boolean,defaultValue:q}},a,b);this.jc=hc(this,"simulatedLatency");this.host=gc(this,"host");this.as=hc(this,
"sharedWorkers");var c;a:switch(c=this.Bg.demo.defaultValue,this.Xf.get("demo",c)){case i:case "":break a;case 0:case "0":case q:case "false":c=q;break a;default:c=l}this.Zp=c||q}D(ic,fc);var jc;var kc=v.performance;jc=kc&&kc.now?function(){return kc.now()}:kc&&kc.webkitNow?function(){return kc.webkitNow()}:i;var lc=jc?jc:Date.now;function mc(a,b,c){this.type=a;this.path=b;this.size=c}function nc(a,b){return a.size-b.size};function G(){0!=oc&&(this.Ms=Error().stack,pc[na(this)]=this)}var oc=0,pc={};G.prototype.$j=q;G.prototype.$e=function(){if(!this.$j&&(this.$j=l,this.b(),0!=oc)){var a=na(this);delete pc[a]}};function H(a,b){a.hh||(a.hh=[]);a.hh.push(b)}G.prototype.b=function(){this.hh&&qc.apply(m,this.hh);if(this.Vn)for(;this.Vn.length;)this.Vn.shift()()};function I(a){a&&"function"==typeof a.$e&&a.$e()}function qc(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];ka(d)?qc.apply(m,d):I(d)}};function rc(a,b,c){G.call(this);this.name=a;this.xr=b;this.hl=this.bm=0;this.Jk=m;this.qb=c;for(a=0;a<this.qb.length;a++)this.bm+=this.qb[a].am;Oa(this.qb,sc)}D(rc,G);function tc(a){if(a.qb.length){if(1==a.qb.length)return a.qb[0]}else return m;switch(a.xr){case 0:return uc(a,l);case 1:return uc(a,q);case 2:var b=a.qb[a.hl];a.hl=(a.hl+1)%a.qb.length;return b;default:return uc(a,l)}}
function uc(a,b){for(var c=0;5>c;c++){for(var d=m,e=Math.random()*a.bm,f=0;f<a.qb.length;f++){d=a.qb[f];if(e<d.am)break;e-=d.am}if(b||d!=a.Jk)return a.Jk=d}return a.Jk||a.qb[0]}function J(a,b){this.start=a;this.duration=b;this.am=y(i)?i:1;this.Xn=0}function sc(a,b){return a.Xn-b.Xn};var vc=!F||F&&9<=Pb,wc=F&&!Nb("9");!Ab||Nb("528");zb&&Nb("1.9b")||F&&Nb("8")||yb&&Nb("9.5")||Ab&&Nb("528");zb&&!Nb("8")||F&&Nb("9");function xc(a,b){this.type=a;this.currentTarget=this.target=b}t=xc.prototype;t.b=aa();t.$e=aa();t.sd=q;t.defaultPrevented=q;t.ri=l;t.stopPropagation=function(){this.sd=l};t.preventDefault=function(){this.defaultPrevented=l;this.ri=q};function yc(a){yc[" "](a);return a}yc[" "]=A;function zc(a,b){a&&this.Ec(a,b)}D(zc,xc);t=zc.prototype;t.target=m;t.relatedTarget=m;t.offsetX=0;t.offsetY=0;t.clientX=0;t.clientY=0;t.screenX=0;t.screenY=0;t.button=0;t.keyCode=0;t.charCode=0;t.ctrlKey=q;t.altKey=q;t.shiftKey=q;t.metaKey=q;t.vr=q;t.zc=m;
t.Ec=function(a,b){var c=this.type=a.type;xc.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(zb){var e;a:{try{yc(d.nodeName);e=l;break a}catch(f){}e=q}e||(d=m)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=Ab||a.offsetX!==i?a.offsetX:a.layerX;this.offsetY=Ab||a.offsetY!==i?a.offsetY:a.layerY;this.clientX=a.clientX!==i?a.clientX:a.pageX;this.clientY=a.clientY!==i?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.vr=tb?a.metaKey:a.ctrlKey;this.state=a.state;this.zc=a;a.defaultPrevented&&this.preventDefault();delete this.sd};t.stopPropagation=function(){zc.a.stopPropagation.call(this);this.zc.stopPropagation?this.zc.stopPropagation():this.zc.cancelBubble=l};
t.preventDefault=function(){zc.a.preventDefault.call(this);var a=this.zc;if(a.preventDefault)a.preventDefault();else if(a.returnValue=q,wc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};t.b=aa();function Ac(){}var Bc=0;t=Ac.prototype;t.key=0;t.vd=q;t.Vg=q;t.Ec=function(a,b,c,d,e,f){la(a)?this.En=l:a&&a.handleEvent&&la(a.handleEvent)?this.En=q:g(Error("Invalid listener argument"));this.listener=a;this.io=b;this.src=c;this.type=d;this.capture=!!e;this.Hh=f;this.Vg=q;this.key=++Bc;this.vd=q};t.handleEvent=function(a){return this.En?this.listener.call(this.Hh||this.src,a):this.listener.handleEvent.call(this.listener,a)};var Cc={},Dc={},Ec={},Fc={};
function Gc(a,b,c,d,e){if(ja(b)){for(var f=0;f<b.length;f++)Gc(a,b[f],c,d,e);return m}a:{b||g(Error("Invalid event type"));d=!!d;var h=Dc;b in h||(h[b]={i:0,Wa:0});h=h[b];d in h||(h[d]={i:0,Wa:0},h.i++);var h=h[d],f=na(a),j;h.Wa++;if(h[f]){j=h[f];for(var k=0;k<j.length;k++)if(h=j[k],h.listener==c&&h.Hh==e){if(h.vd)break;j[k].Vg=q;a=j[k].key;break a}}else j=h[f]=[],h.i++;var n=Hc,p=vc?function(a){return n.call(p.src,p.key,a)}:function(a){a=n.call(p.src,p.key,a);if(!a)return a},k=p;k.src=a;h=new Ac;
h.Ec(c,k,a,b,d,e);h.Vg=q;c=h.key;k.key=c;j.push(h);Cc[c]=h;Ec[f]||(Ec[f]=[]);Ec[f].push(h);a.addEventListener?(a==v||!a.Um)&&a.addEventListener(b,k,d):a.attachEvent(b in Fc?Fc[b]:Fc[b]="on"+b,k);a=c}return a}function Ic(a,b,c,d,e){if(ja(b))for(var f=0;f<b.length;f++)Ic(a,b[f],c,d,e);else if(d=!!d,a=Jc(a,b,d))for(f=0;f<a.length;f++)if(a[f].listener==c&&a[f].capture==d&&a[f].Hh==e){Kc(a[f].key);break}}
function Kc(a){if(!Cc[a])return q;var b=Cc[a];if(b.vd)return q;var c=b.src,d=b.type,e=b.io,f=b.capture;c.removeEventListener?(c==v||!c.Um)&&c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(d in Fc?Fc[d]:Fc[d]="on"+d,e);c=na(c);Ec[c]&&(e=Ec[c],E(e,b),0==e.length&&delete Ec[c]);b.vd=l;if(b=Dc[d][f][c])b.Rn=l,Lc(d,f,c,b);delete Cc[a];return l}
function Lc(a,b,c,d){if(!d.Zh&&d.Rn){for(var e=0,f=0;e<d.length;e++)d[e].vd?d[e].io.src=m:(e!=f&&(d[f]=d[e]),f++);d.length=f;d.Rn=q;0==f&&(delete Dc[a][b][c],Dc[a][b].i--,0==Dc[a][b].i&&(delete Dc[a][b],Dc[a].i--),0==Dc[a].i&&delete Dc[a])}}function Jc(a,b,c){var d=Dc;return b in d&&(d=d[b],c in d&&(d=d[c],a=na(a),d[a]))?d[a]:m}
function Mc(a,b,c,d,e){var f=1;b=na(b);if(a[b]){a.Wa--;a=a[b];a.Zh?a.Zh++:a.Zh=1;try{for(var h=a.length,j=0;j<h;j++){var k=a[j];k&&!k.vd&&(f&=Nc(k,e)!==q)}}finally{a.Zh--,Lc(c,d,b,a)}}return Boolean(f)}function Nc(a,b){a.Vg&&Kc(a.key);return a.handleEvent(b)}
function Hc(a,b){if(!Cc[a])return l;var c=Cc[a],d=c.type,e=Dc;if(!(d in e))return l;var e=e[d],f,h;if(!vc){f=b||fa("window.event");var j=l in e,k=q in e;if(j){if(0>f.keyCode||f.returnValue!=i)return l;a:{var n=q;if(0==f.keyCode)try{f.keyCode=-1;break a}catch(p){n=l}if(n||f.returnValue==i)f.returnValue=l}}n=new zc;n.Ec(f,this);f=l;try{if(j){for(var r=[],w=n.currentTarget;w;w=w.parentNode)r.push(w);h=e[l];h.Wa=h.i;for(var u=r.length-1;!n.sd&&0<=u&&h.Wa;u--)n.currentTarget=r[u],f&=Mc(h,r[u],d,l,n);if(k){h=
e[q];h.Wa=h.i;for(u=0;!n.sd&&u<r.length&&h.Wa;u++)n.currentTarget=r[u],f&=Mc(h,r[u],d,q,n)}}else f=Nc(c,n)}finally{r&&(r.length=0)}return f}d=new zc(b,this);return f=Nc(c,d)}var Oc=0;function Pc(a){G.call(this);this.vn=a;this.h=[]}D(Pc,G);var Qc=[];Pc.prototype.listen=function(a,b,c,d,e){ja(b)||(Qc[0]=b,b=Qc);for(var f=0;f<b.length;f++){var h=Gc(a,b[f],c||this,d||q,e||this.vn||this);this.h.push(h)}return this};function Rc(a,b,c,d,e,f){if(ja(c))for(var h=0;h<c.length;h++)Rc(a,b,c[h],d,e,f);else{a:{d=d||a;f=f||a.vn||a;e=!!e;if(b=Jc(b,c,e))for(c=0;c<b.length;c++)if(!b[c].vd&&b[c].listener==d&&b[c].capture==e&&b[c].Hh==f){b=b[c];break a}b=m}b&&(b=b.key,Kc(b),E(a.h,b))}}
function Sc(a){Ia(a.h,Kc);a.h.length=0}Pc.prototype.b=function(){Pc.a.b.call(this);Sc(this)};Pc.prototype.handleEvent=function(){g(Error("EventHandler.handleEvent not implemented"))};function Tc(){G.call(this);this.S=new Pc(this);H(this,this.S)}D(Tc,G);Tc.prototype.load=function(a){a.D(m)};Tc.prototype.cancel=A;function Uc(){G.call(this)}D(Uc,G);t=Uc.prototype;t.Um=l;t.fl=m;t.addEventListener=function(a,b,c,d){Gc(this,a,b,c,d)};t.removeEventListener=function(a,b,c,d){Ic(this,a,b,c,d)};
t.dispatchEvent=function(a){var b=a.type||a,c=Dc;if(b in c){if(B(a))a=new xc(a,this);else if(a instanceof xc)a.target=a.target||this;else{var d=a;a=new xc(b,this);Xa(a,d)}var d=1,e,c=c[b],b=l in c,f;if(b){e=[];for(f=this;f;f=f.fl)e.push(f);f=c[l];f.Wa=f.i;for(var h=e.length-1;!a.sd&&0<=h&&f.Wa;h--)a.currentTarget=e[h],d&=Mc(f,e[h],a.type,l,a)&&a.ri!=q}if(q in c)if(f=c[q],f.Wa=f.i,b)for(h=0;!a.sd&&h<e.length&&f.Wa;h++)a.currentTarget=e[h],d&=Mc(f,e[h],a.type,q,a)&&a.ri!=q;else for(e=this;!a.sd&&e&&
f.Wa;e=e.fl)a.currentTarget=e,d&=Mc(f,e,a.type,q,a)&&a.ri!=q;a=Boolean(d)}else a=l;return a};t.b=function(){Uc.a.b.call(this);var a=0;if(this!=m){var b=na(this);if(Ec[b])for(var b=Ec[b],c=b.length-1;0<=c;c--)Kc(b[c].key),a++}else Qa(Cc,function(b,c){Kc(c);a++});this.fl=m};var Vc=v.window;function Wc(a,b,c){la(a)?c&&(a=C(a,c)):a&&"function"==typeof a.handleEvent?a=C(a.handleEvent,a):g(Error("Invalid listener argument"));return 2147483647<b?-1:Vc.setTimeout(a,b||0)};function Xc(a){return Yc(a||arguments.callee.caller,[])}
function Yc(a,b){var c=[];if(0<=Ha(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(Zc(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){0<e&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=String(f);break;case "boolean":f=f?"true":"false";break;case "function":f=(f=Zc(f))?f:"[fn]";break;default:f=typeof f}40<f.length&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(Yc(a.caller,b))}catch(h){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function Zc(a){if($c[a])return $c[a];a=String(a);if(!$c[a]){var b=/function ([^\(]+)/.exec(a);$c[a]=b?b[1]:"[Anonymous]"}return $c[a]}var $c={};function ad(a,b,c,d,e){this.reset(a,b,c,d,e)}ad.prototype.Nr=0;ad.prototype.dn=m;ad.prototype.cn=m;var bd=0;ad.prototype.reset=function(a,b,c,d,e){this.Nr="number"==typeof e?e:bd++;this.kg=d||ta();this.Jf=a;this.nr=b;this.Us=c;delete this.dn;delete this.cn};ad.prototype.uo=ba("Jf");function cd(a){this.or=a}cd.prototype.la=m;cd.prototype.Jf=m;cd.prototype.O=m;cd.prototype.xf=m;function dd(a,b){this.name=a;this.value=b}dd.prototype.toString=s("name");var ed=new dd("SEVERE",1E3),fd=new dd("WARNING",900),gd=new dd("INFO",800),hd=new dd("CONFIG",700),id=new dd("FINE",500);t=cd.prototype;t.getParent=s("la");t.jn=function(){this.O||(this.O={});return this.O};t.uo=ba("Jf");function jd(a){return a.Jf?a.Jf:a.la?jd(a.la):m}
t.log=function(a,b,c){if(a.value>=jd(this).value){a=this.rq(a,b,c);b="log:"+a.nr;v.console&&(v.console.timeStamp?v.console.timeStamp(b):v.console.markTimeline&&v.console.markTimeline(b));v.msWriteProfilerMark&&v.msWriteProfilerMark(b);for(b=this;b;){c=b;var d=a;if(c.xf)for(var e=0,f=i;f=c.xf[e];e++)f(d);b=b.getParent()}}};
t.rq=function(a,b,c){var d=new ad(a,String(b),this.or);if(c){d.dn=c;var e;var f=arguments.callee.caller;try{var h;var j=fa("window.location.href");if(B(c))h={message:c,name:"Unknown error",lineNumber:"Not available",fileName:j,stack:"Not available"};else{var k,n,p=q;try{k=c.lineNumber||c.Ss||"Not available"}catch(r){k="Not available",p=l}try{n=c.fileName||c.filename||c.sourceURL||j}catch(w){n="Not available",p=l}h=p||!c.lineNumber||!c.fileName||!c.stack?{message:c.message,name:c.name,lineNumber:k,
fileName:n,stack:c.stack||"Not available"}:c}e="Message: "+ya(h.message)+'\nUrl: <a href="view-source:'+h.fileName+'" target="_new">'+h.fileName+"</a>\nLine: "+h.lineNumber+"\n\nBrowser stack:\n"+ya(h.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+ya(Xc(f)+"-> ")}catch(u){e="Exception trying to expose exception! You win, we lose. "+u}d.cn=e}return d};t.info=function(a,b){this.log(gd,a,b)};function kd(a,b){a.log(id,b,i)}t.wj=function(a,b){this.jn()[a]=b};var ld={},md=m;
function nd(a){md||(md=new cd(""),ld[""]=md,md.uo(hd));var b;if(!(b=ld[a])){b=new cd(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=nd(a.substr(0,c));c.wj(d,b);b.la=c;ld[a]=b}return b};function od(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}g(Error("Invalid JSON string: "+a))};function pd(){}pd.prototype.Gm=m;function qd(a){var b;if(!(b=a.Gm))b={},rd(a)&&(b[0]=l,b[1]=l),b=a.Gm=b;return b};var sd;function td(){}D(td,pd);td.prototype.Ve=function(){var a=rd(this);return a?new ActiveXObject(a):new XMLHttpRequest};
function rd(a){if(!a.xn&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.xn=d}catch(e){}}g(Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed"))}return a.xn}sd=new td;function ud(a){G.call(this);this.headers=new lb;this.nj=a||m}D(ud,Uc);ud.prototype.ha=nd("goog.net.XhrIo");var vd=/^https?$/i;t=ud.prototype;t.eb=q;t.k=m;t.mj=m;t.Th="";t.Hn="";t.Df=0;t.Ef="";t.ek=q;t.Lh=q;t.yk=q;t.ld=q;t.lg=0;t.Dd=m;t.wd="";t.us=q;
t.send=function(a,b,c,d){this.k&&g(Error("[goog.net.XhrIo] Object is active with another request="+this.Th+"; newUri="+a));b=b?b.toUpperCase():"GET";this.Th=a;this.Ef="";this.Df=0;this.Hn=b;this.ek=q;this.eb=l;this.k=this.nj?this.nj.Ve():sd.Ve();this.mj=this.nj?qd(this.nj):qd(sd);this.k.onreadystatechange=C(this.Wn,this);try{kd(this.ha,wd(this,"Opening Xhr")),this.yk=l,this.k.open(b,a,l),this.yk=q}catch(e){kd(this.ha,wd(this,"Error opening Xhr: "+e.message));xd(this,e);return}a=c||"";var f=this.headers.s();
d&&Za(d,function(a,b){f.set(b,a)});d=v.FormData&&a instanceof v.FormData;"POST"==b&&(!f.tc("Content-Type")&&!d)&&f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");Za(f,function(a,b){this.k.setRequestHeader(b,a)},this);this.wd&&(this.k.responseType=this.wd);"withCredentials"in this.k&&(this.k.withCredentials=this.us);try{this.Dd&&(Vc.clearTimeout(this.Dd),this.Dd=m),0<this.lg&&(kd(this.ha,wd(this,"Will abort after "+this.lg+"ms if incomplete")),this.Dd=Vc.setTimeout(C(this.is,
this),this.lg)),kd(this.ha,wd(this,"Sending request")),this.Lh=l,this.k.send(a),this.Lh=q}catch(h){kd(this.ha,wd(this,"Send error: "+h.message)),xd(this,h)}};t.is=function(){"undefined"!=typeof da&&this.k&&(this.Ef="Timed out after "+this.lg+"ms, aborting",this.Df=8,kd(this.ha,wd(this,this.Ef)),this.dispatchEvent("timeout"),this.abort(8))};function xd(a,b){a.eb=q;a.k&&(a.ld=l,a.k.abort(),a.ld=q);a.Ef=b;a.Df=5;yd(a);zd(a)}
function yd(a){a.ek||(a.ek=l,a.dispatchEvent("complete"),a.dispatchEvent("error"))}t.abort=function(a){this.k&&this.eb&&(kd(this.ha,wd(this,"Aborting")),this.eb=q,this.ld=l,this.k.abort(),this.ld=q,this.Df=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),zd(this))};t.b=function(){this.k&&(this.eb&&(this.eb=q,this.ld=l,this.k.abort(),this.ld=q),zd(this,l));ud.a.b.call(this)};t.Wn=function(){!this.yk&&!this.Lh&&!this.ld?this.tr():Ad(this)};t.tr=function(){Ad(this)};
function Ad(a){if(a.eb&&"undefined"!=typeof da)if(a.mj[1]&&4==a.sf()&&2==Bd(a))kd(a.ha,wd(a,"Local request error detected and ignored"));else if(a.Lh&&4==a.sf())Vc.setTimeout(C(a.Wn,a),0);else if(a.dispatchEvent("readystatechange"),4==a.sf()){kd(a.ha,wd(a,"Request complete"));a.eb=q;try{var b=Bd(a),c,d;a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:d=l;break a;default:d=q}if(!(c=d)){var e;if(e=0===b){var f=String(a.Th).match(Qb)[1]||m;if(!f&&self.location)var h=self.location.protocol,
f=h.substr(0,h.length-1);e=!vd.test(f?f.toLowerCase():"")}c=e}if(c)a.dispatchEvent("complete"),a.dispatchEvent("success");else{a.Df=6;var j;try{j=2<a.sf()?a.k.statusText:""}catch(k){kd(a.ha,"Can not get status: "+k.message),j=""}a.Ef=j+" ["+Bd(a)+"]";yd(a)}}finally{zd(a)}}}
function zd(a,b){if(a.k){var c=a.k,d=a.mj[0]?A:m;a.k=m;a.mj=m;a.Dd&&(Vc.clearTimeout(a.Dd),a.Dd=m);b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){a.ha.log(ed,"Problem encountered resetting onreadystatechange: "+e.message,i)}}}t.Dn=function(){return!!this.k};t.sf=function(){return this.k?this.k.readyState:0};function Bd(a){try{return 2<a.sf()?a.k.status:-1}catch(b){return a.ha.log(fd,"Can not get status: "+b.message,i),-1}}
function Cd(a){try{if(!a.k)return m;if("response"in a.k)return a.k.response;switch(a.wd){case "":case "text":return a.k.responseText;case "arraybuffer":if("mozResponseArrayBuffer"in a.k)return a.k.mozResponseArrayBuffer}a.ha.log(ed,"Response type "+a.wd+" is not supported on this browser",i);return m}catch(b){return kd(a.ha,"Can not get response: "+b.message),m}}function wd(a,b){return b+" ["+a.Hn+" "+a.Th+" "+Bd(a)+"]"};function Dd(a,b,c){Tc.call(this);this.url=a;this.contentType=b;this.timeout=c||0;this.o=this.Ba=m}D(Dd,Tc);Dd.prototype.load=function(a){this.o=a;this.Ba=new ud;H(this,this.Ba);this.Ba.lg=Math.max(0,this.timeout);switch(this.contentType){default:case 0:case 1:this.Ba.wd="";break;case 2:this.Ba.wd="arraybuffer";break;case 3:this.Ba.wd="blob"}this.S.listen(this.Ba,"success",this.kd);this.S.listen(this.Ba,["abort","error","timeout"],this.uf);this.Ba.send(this.url)};
Dd.prototype.cancel=function(){this.Ba&&this.Ba.abort()};Dd.prototype.kd=function(){var a;switch(this.contentType){default:case 0:var b=this.Ba;try{a=b.k?b.k.responseText:""}catch(c){kd(b.ha,"Can not get responseText: "+c.message),a=""}break;case 1:a=this.Ba;a=a.k?od(a.k.responseText):i;break;case 2:case 3:a=Cd(this.Ba)}this.o.D(a);this.o=m};Dd.prototype.uf=function(){this.o.G(m);this.o=m};var Ed=v.postMessage?[v]:[];function L(a){for(var b=0;b<Ed.length;b++){for(var c=Array(arguments.length),d=0;d<c.length;d++)c[d]=arguments[d];try{Ed[b].postMessage({type:"gf_log",args:c},m)}catch(e){}}}if(v.console)var Fd=v.console,L=C(Fd.log,Fd);function Gd(a,b,c,d){G.call(this);this.context=a;this.cue=c;this.Qo=d;this.Ic=this.Pc=m;a&&(a=a.createBufferSource(),a.buffer=b,this.Ic=this.Pc=a)}D(Gd,G);Gd.prototype.b=function(){this.Ic&&(this.Ic.disconnect(),this.Pc=this.Ic=m);Gd.a.b.call(this)};Gd.prototype.play=function(a){this.Pc&&this.Pc.noteGrainOn(a||0,this.Qo.start/1E3,this.Qo.duration/1E3)};function Hd(a,b,c,d){Gd.call(this,a,b,c,d);this.Pc&&(this.Ic=this.Pc,this.Ic.connect(a.destination))}D(Hd,Gd);
function Id(a,b,c,d){Gd.call(this,a,b,c,d);this.Sf=m;this.Pc&&(b=a.createPanner(),b.panningModel=0,b.distanceModel=2,b.refDistance=5,b.maxDistance=1E3,b.rolloffFactor=1.4,b.setPosition(0,0,0),b.setOrientation(0,0,0,0,0,0),b.setVelocity(0,0,0),this.Sf=b,this.Pc.connect(b),this.Ic=b,this.Ic.connect(a.destination))}D(Id,Gd);Id.prototype.b=function(){this.Sf&&(this.Sf.disconnect(),this.Sf=m);Id.a.b.call(this)};Id.prototype.setPosition=function(a){var b=this.Sf;b&&b.setPosition(a[0],a[1],a[2])};var Jd,Kd=!zb&&!F||F&&F&&9<=Pb||zb&&Nb("1.9.1");F&&Nb("9");var Ld=F||yb||Ab;function Md(a,b){this.width=a;this.height=b}t=Md.prototype;t.s=function(){return new Md(this.width,this.height)};t.Cg=function(){return this.width/this.height};t.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};t.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};t.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function Nd(a,b){var c=b||document;return c.querySelectorAll&&c.querySelector?c.querySelectorAll("."+a):c.getElementsByClassName?c.getElementsByClassName(a):Od(a,b)}
function Od(a,b){var c,d,e,f;c=document;c=b||c;if(c.querySelectorAll&&c.querySelector&&a)return c.querySelectorAll(""+(a?"."+a:""));if(a&&c.getElementsByClassName){var h=c.getElementsByClassName(a);return h}h=c.getElementsByTagName("*");if(a){f={};for(d=e=0;c=h[d];d++){var j=c.className;"function"==typeof j.split&&0<=Ha(j.split(/\s+/),a)&&(f[e++]=c)}f.length=e;return f}return h}
function Pd(a){a=a.document;a="CSS1Compat"==a.compatMode?a.documentElement:a.body;return new Md(a.clientWidth,a.clientHeight)}function Qd(a){for(var b;b=a.firstChild;)a.removeChild(b)}function Rd(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function Sd(a){this.R=a||v.document||document}function Td(a,b,c){c=(a=c||a.R)||document;var d=m;return(d=c.querySelectorAll&&c.querySelector?c.querySelector("."+b):Nd(b,a)[0])||m}t=Sd.prototype;t.createElement=function(a){return this.R.createElement(a)};
t.createTextNode=function(a){return this.R.createTextNode(a)};t.appendChild=function(a,b){a.appendChild(b)};t.append=function(a,b){function c(a){a&&e.appendChild(B(a)?d.createTextNode(a):a)}for(var d=Rd(a),e=a,f=arguments,h=1;h<f.length;h++){var j=f[h];if(ka(j)&&!(ma(j)&&0<j.nodeType)){var k=Ia,n;a:{if((n=j)&&"number"==typeof n.length){if(ma(n)){n="function"==typeof n.item||"string"==typeof n.item;break a}if(la(n)){n="function"==typeof n.item;break a}}n=q}k(n?Ma(j):j,c)}else c(j)}};
t.removeNode=function(a){return a&&a.parentNode?a.parentNode.removeChild(a):m};t.jn=function(a){return Kd&&a.children!=i?a.children:Ja(a.childNodes,function(a){return 1==a.nodeType})};var Ud=["audio/mpeg","audio/ogg","audio/wav","audio/mp4"],Vd=m;function Wd(a){for(var b=0;b<a.length;b++){var c=a[b],d=c.type;if(!Vd){var e={},f=document.createElement("AUDIO");if(f&&f.canPlayType)for(var h=0;h<Ud.length;h++){var j=Ud[h];e[j]=!!f.canPlayType(j)}Vd=e}if(Vd[d])return c}return m};function Xd(a){for(var b=arguments[0],c=1;c<arguments.length;c++){var d=arguments[c];if(0==d.lastIndexOf("/",0))b=d;else{var e;if(!(e=""==b))e=d.length-1,e=0<=e&&d.indexOf("/",e)==e;b=e?b+d:b+("/"+d)}}return b};function Yd(a,b,c,d,e,f){G.call(this);this.Je=a;this.context=b;this.path=c;this.name=d||"Unknown";this.Rd=e||[];e&&(this.Rd=e,Oa(this.Rd,nc));this.Tm={};if(f)for(a=0;a<f.length;a++)b=f[a],this.Tm[b.name]=b;this.o=this.Cj=m}D(Yd,G);t=Yd.prototype;t.b=function(){this.o&&(this.o.cancel(),this.o=m);Yd.a.b.call(this)};t.load=function(){this.Fj()};t.Fj=function(){if(this.context){var a=Wd(this.Rd);a&&(a=new Dd(Xd(this.path,a.path),2),this.o=this.Je.load(a),Zd(this.o,this.kd,this.handleError,this))}};
t.kd=function(a){this.o=m;var b=this.context;b&&b.decodeAudioData(a,C(ba("Cj"),this),C(function(){L("failed to load audio buffer data")},this))};t.handleError=function(){this.o=m};function $d(a,b,c){if(!a.Cj)return m;var d;d=B(b)?a.Tm[b]:b;if(!d)return L("WARNING: cue "+b+" not found in bank "+a.name),m;b=tc(d);if(!b)return m;a=new c(a.context,a.Cj,d,b);a.play();return a};function ae(a,b){Yd.call(this,a,b,"../assets/audio/base","BaseSounds",[new mc("audio/wav","base_optimized.wav",137870),new mc("audio/ogg","base_optimized.ogg",16571),new mc("audio/mpeg","base_optimized.mp3",12955)],[new rc("player_leave",0,[new J(820,641)]),new rc("player_join",0,[new J(0,515)]),new rc("click",0,[new J(615,105)])])}D(ae,Yd);function be(a){switch(a){case 1:return"OES_texture_float";case 2:return"OES_texture_half_float";case 3:return"WEBGL_lose_context";case 4:return"OES_standard_derivatives";case 5:return"OES_vertex_array_object";case 6:return"WEBGL_debug_renderer_info";case 7:return"WEBGL_debug_shaders";case 8:return"WEBGL_compressed_texture_s3tc";case 9:return"OES_depth_texture";case 10:return"OES_element_index_uint";case 11:return"EXT_texture_filter_anisotropic";default:return m}}
function ce(){this.mn=m;this.ig=Array(11);this.ik=Array(11)}ce.prototype.we=function(a){this.mn=a;a=a.getSupportedExtensions();for(var b=0;b<this.ig.length;b++){this.ig[b]=q;this.ik[b]=m;var c=be(b);if(c)for(var d=0;d<a.length;d++){var e=a[d],f=e.indexOf(c);if(-1!=f&&c.length==e.length-f){this.ig[b]=l;break}}}};ce.prototype.isSupported=function(a){return!!this.ig[a]};ce.prototype.enable=function(a){return!!this.get(a)};
ce.prototype.get=function(a){var b=this.ik[a];if(!b&&this.ig[a]){b=be(a);if(!b)return m;b=this.mn.getExtension(b);this.ik[a]=b}return b};function de(a,b,c){this.width=a;this.height=b;this.$c=15;this.Vh=c}
function ee(a,b){var c=xa(b.type),d,e,f=c.indexOf(";");-1!=f?(d=c.substr(0,f),e=xa(c.substr(f+1))):(d=c,e="");switch(a.$c){case fe:c="a";break;case ge:c="ra";break;case he:c="rgb";break;case ie:c="rgba";break;default:return m}switch(d){case "image/gif":f="gif";break;case "image/jpeg":f="jpeg";break;case "image/png":f="png";break;case "image/webp":f="webp";break;case "application/octet-stream":f=m;break;default:return m}e=e.split(",");for(var h=0;h<e.length;h++){var j=e[h].split("=");if(!(2>j.length)){var k=
xa(j[0]).toLowerCase(),j=xa(j[1]).toLowerCase();"codec"==k?f=j:"format"==k&&(c=j)}}if(!f)return m;e=6408;h=m;switch(f){case "s3tc.dxt1":h=8;switch(c){case "rgb":e=33776;break;case "rgba":e=33777;break;default:return m}break;case "s3tc.dxt3":h=8;e=33778;if("rgba"!=c)return m;break;case "s3tc.dxt5":h=8;e=33779;if("rgba"!=c)return m;break;default:switch(c){case "a":e=6406;break;case "ra":e=6410;break;case "rgb":e=6407;break;case "rgba":e=6408;break;default:return m}}return new je(d,f,c,e,h)}
var fe=8,ge=9,he=7,ie=15;function je(a,b,c,d,e){this.Tp=a;this.Ks=b;this.iq=c;this.Xc=d;this.dt=e};function ke(a,b){Tc.call(this);this.d=a;this.url=b;this.o=this.ya=this.crossOrigin=m}D(ke,Tc);t=ke.prototype;t.b=function(){Sc(this.S);this.ya&&(this.ya.src="",this.ya=m);ke.a.b.call(this)};t.load=function(a){this.o=a;this.ya=this.d.createElement("IMG");this.crossOrigin&&(this.ya.crossOrigin=this.crossOrigin);this.S.listen(this.ya,"load",this.kd);this.S.listen(this.ya,["abort","error"],this.uf);this.ya.src=this.url};
t.cancel=function(){this.ya&&(Sc(this.S),this.ya.src="",this.ya=m,this.o.G(m),this.o=m)};t.kd=function(){var a=this.ya;this.ya=m;this.o.D(a);this.o=m};t.uf=function(){this.ya=m;this.o.G(m);this.o=m};function le(a){G.call(this);this.g=a;this.qo=String(me++);a=this.g;a.Ld[this.qo]=this;a.Nk++}D(le,G);le.prototype.b=function(){var a=this.g;Ua(a.Ld,this.qo);a.Nk--;this.w();le.a.b.call(this)};var me=0;le.prototype.w=A;le.prototype.restore=A;function ne(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}ne.prototype.BYTES_PER_ELEMENT=4;ne.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};ne.prototype.toString=Array.prototype.join;"undefined"==typeof Float32Array&&(ne.BYTES_PER_ELEMENT=4,ne.prototype.BYTES_PER_ELEMENT=ne.prototype.BYTES_PER_ELEMENT,ne.prototype.set=ne.prototype.set,ne.prototype.toString=ne.prototype.toString,ea("Float32Array",ne));function oe(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}oe.prototype.BYTES_PER_ELEMENT=8;oe.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};oe.prototype.toString=Array.prototype.join;if("undefined"==typeof Float64Array){try{oe.BYTES_PER_ELEMENT=8}catch(pe){}oe.prototype.BYTES_PER_ELEMENT=oe.prototype.BYTES_PER_ELEMENT;oe.prototype.set=oe.prototype.set;oe.prototype.toString=oe.prototype.toString;ea("Float64Array",oe)};function N(){return new Float32Array(4)}function qe(a,b,c,d){var e=N();re(e,a,b,c,d);return e}function re(a,b,c,d,e){a[0]=b;a[1]=c;a[2]=d;a[3]=e}function se(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3]}function te(a,b){var c=1/256;b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c;b[3]=a[3]*c}function ue(a,b){return a.length==b.length&&a[0]==b[0]&&a[1]==b[1]&&a[2]==b[2]&&a[3]==b[3]};function ve(a,b,c,d){le.call(this,a);this.width=b;this.height=c;this.iq=d;this.bd=0;this.Tk=9986;this.Pk=9729;this.xs=this.ws=10497;this.hr=1;this.handle=this.Gi=m}D(ve,le);ve.prototype.w=function(){this.g.f.deleteTexture(this.handle);this.handle=m;ve.a.w.call(this)};ve.prototype.restore=function(){var a=this.g.f;ve.a.restore.call(this);this.handle&&a.deleteTexture(this.handle);this.handle=a.createTexture();this.bd=4294967295};
ve.prototype.bind=function(){var a=this.g.f;a.bindTexture(3553,this.handle);var b=this.bd;this.bd=0;b&1&&a.texParameteri(3553,10241,this.Tk);b&2&&a.texParameteri(3553,10240,this.Pk);b&4&&a.texParameteri(3553,10242,this.ws);b&8&&a.texParameteri(3553,10243,this.xs);b&16&&this.g.yh.isSupported(11)&&a.texParameteri(3553,34046,this.hr)};function we(a){9728!=a.Tk&&(a.bd|=1,a.Tk=9728);9728!=a.Pk&&(a.bd|=2,a.Pk=9728)}
function xe(a,b,c){a.Gi=[];b=a.width/b;c=a.height/c;for(var d=0,e=0;d<c;d++)for(var f=d/c,h=0;h<b;h++,e++){var j=h/b;a.Gi[e]=qe(j,f,j+1/b,f+1/c)}}function ye(a,b,c){a.Gi&&(a=a.Gi[b])&&se(c,a);return c};function ze(a,b,c,d,e){ve.call(this,b,e?e.width:1,e?e.height:1,6408);this.Je=a;this.path=c;this.name=d;this.yn=this.zf=m;this.er=q;this.o=m;if(e){this.zf=e;this.width=e.width;this.height=e.height;for(a=0;a<this.zf.Vh.length;a++)Oa(this.zf.Vh[a],nc)}}D(ze,ve);t=ze.prototype;t.b=function(){this.o&&(this.o.cancel(),this.o=m);ze.a.b.call(this)};t.restore=function(){ze.a.restore.call(this);this.o||this.load()};t.load=function(){this.Fj()};
t.Fj=function(){var a=this.Je.d,b;a:{var c=this.zf;b=this.g;var d;d=Math.min(Math.max(0,0),c.Vh.length-1);d=c.Vh[d];for(var e=0;e<d.length;e++){var f=d[e],h=ee(c,f);if(h&&("image/webp"!=h.Tp||b.kk.Fl)){switch(h.Xc){case 33776:case 33777:case 33778:case 33779:if(!b.kk.Co)continue}b=f;break a}}b=m}if(b&&(c=ee(this.zf,b))){this.yn=c;b=Xd(this.path,b.path);d=m;a:switch(c.Xc){case 33776:case 33777:case 33778:case 33779:c=l;break a;default:c=q}d=c?new Dd(b,2):new ke(a,b);this.o=this.Je.load(d);Zd(this.o,
this.kd,this.handleError,this)}};t.kd=function(a){this.o=m;Ae(this,a)};t.handleError=function(){this.o=m;var a=this.g.d.createElement("CANVAS");a.width=16;a.height=16;var b=a.getContext("2d");b.fillStyle="rgb(255,0,0)";b.fillRect(0,0,a.width,a.height);Ae(this,a)};
function Ae(a,b){var c=a.g.f;Be(a.g,a);a.handle.Q=a.name;var d=a.width,e=a.height,f=a.yn;if(b instanceof HTMLCanvasElement||b instanceof HTMLImageElement)c.texImage2D(3553,0,f.Xc,f.Xc,5121,b);else if(b instanceof ArrayBuffer)switch(f.Xc){default:c.texImage2D(3553,0,f.Xc,d,e,0,f.Xc,5121,b);break;case 33776:case 33777:case 33778:case 33779:c.compressedTexImage2D(3553,0,f.Xc,d,e,0,b)}a.er=l};function Ce(a,b){ze.call(this,a,b,"../assets/blocksets","simple",new de(256,256,[[new mc("image/png","simple.png",23183)]]));xe(this,16,16)}D(Ce,ze);function De(a,b,c,d){le.call(this,a);this.Aj=b;this.lineHeight=c;this.Kn=2;this.Op=0;this.nn=[];for(a=0;a<d.length;a+=4){c=d[a];var e=0;c.length?e=c.charCodeAt(0):(e=c,c=String.fromCharCode(e));var f=d[a+1],h=d[a+2],j=d[a+3],k=ye(b,a/4,N());this.nn[e]=new Ee(c,f,h,j,k)}}D(De,le);
function Fe(a,b,c,d,e){b.ea(c.length);for(var f=1/a.Aj.width,h=1/a.Aj.height,j=0,k=0,n=0,p=0,r=l,w=0,u=0;u<c.length;u++){var z=c[u];if("\r"!=z)if("\n"==z)k=Math.max(j+w,k),w=j=0,n+=a.lineHeight+a.Kn,p+=a.Kn,r=l;else if(z=a.nn[z.charCodeAt(0)])r?p=Math.max(p,a.lineHeight):j+=a.Op+w,w=z.Lp,j+=z.up,b.add(z.Do[0],z.Do[1],z.Dj*f,a.lineHeight*h,d,0+j,e+n,z.Dj,a.lineHeight),j+=z.Dj,r=q}k=Math.max(j+w,k);return[k,p]}function Ee(a,b,c,d,e){this.Js=a;this.up=b;this.Dj=c;this.Lp=d;this.Do=e};function Ge(a,b,c){a=new ze(b,c,"../assets/fonts","monospace",new de(128,128,[[new mc("image/png","monospace.png",1256)]]));xe(a,8,8);we(a);De.call(this,c,a,8,He);H(this,a)}D(Ge,De);
var He=[0,0,8,0,1,0,8,0,2,0,8,0,3,0,8,0,4,0,8,0,5,0,8,0,6,0,8,0,7,0,8,0,8,0,8,0,9,0,8,0,10,0,8,0,11,0,8,0,12,0,8,0,13,0,8,0,14,0,8,0,15,0,8,0,16,0,8,0,17,0,8,0,18,0,8,0,19,0,8,0,20,0,8,0,21,0,8,0,22,0,8,0,23,0,8,0,24,0,8,0,25,0,8,0,26,0,8,0,27,0,8,0,28,0,8,0,29,0,8,0,30,0,8,0,31,0,8,0," ",0,8,0,"!",0,8,0,'"',0,8,0,"#",0,8,0,"$",0,8,0,"%",0,8,0,"&",0,8,0,"'",0,8,0,"(",0,8,0,")",0,8,0,"*",0,8,0,"+",0,8,0,",",0,8,0,"-",0,8,0,".",0,8,0,"/",0,8,0,"0",0,8,0,"1",0,8,0,"2",0,8,0,"3",0,8,0,"4",0,8,0,"5",0,
8,0,"6",0,8,0,"7",0,8,0,"8",0,8,0,"9",0,8,0,":",0,8,0,";",0,8,0,"<",0,8,0,"=",0,8,0,">",0,8,0,"?",0,8,0,"@",0,8,0,"A",0,8,0,"B",0,8,0,"C",0,8,0,"D",0,8,0,"E",0,8,0,"F",0,8,0,"G",0,8,0,"H",0,8,0,"I",0,8,0,"J",0,8,0,"K",0,8,0,"L",0,8,0,"M",0,8,0,"N",0,8,0,"O",0,8,0,"P",0,8,0,"Q",0,8,0,"R",0,8,0,"S",0,8,0,"T",0,8,0,"U",0,8,0,"V",0,8,0,"W",0,8,0,"X",0,8,0,"Y",0,8,0,"Z",0,8,0,"[",0,8,0,"\\",0,8,0,"]",0,8,0,"^",0,8,0,"_",0,8,0,"`",0,8,0,"a",0,8,0,"b",0,8,0,"c",0,8,0,"d",0,8,0,"e",0,8,0,"f",0,8,0,"g",0,
8,0,"h",0,8,0,"i",0,8,0,"j",0,8,0,"k",0,8,0,"l",0,8,0,"m",0,8,0,"n",0,8,0,"o",0,8,0,"p",0,8,0,"q",0,8,0,"r",0,8,0,"s",0,8,0,"t",0,8,0,"u",0,8,0,"v",0,8,0,"w",0,8,0,"x",0,8,0,"y",0,8,0,"z",0,8,0,"{",0,8,0,"|",0,8,0,"}",0,8,0,"~",0,8,0,"\u2302",0,8,0,"\u00c7",0,8,0,"\u00fc",0,8,0,"\u00e9",0,8,0,"\u00e2",0,8,0,"\u00e4",0,8,0,"\u00e0",0,8,0,"\u00e5",0,8,0,"\u00e7",0,8,0,"\u00ea",0,8,0,"\u00eb",0,8,0,"\u00e8",0,8,0,"\u00ef",0,8,0,"\u00ee",0,8,0,"\u00ec",0,8,0,"\u00c4",0,8,0,"\u00c5",0,8,0,"\u00c9",0,8,
0,"\u00e6",0,8,0,"\u00c6",0,8,0,"\u00f4",0,8,0,"\u00f6",0,8,0,"\u00f2",0,8,0,"\u00fb",0,8,0,"\u00f9",0,8,0,"\u00ff",0,8,0,"\u00d6",0,8,0,"\u00dc",0,8,0,"\u00f8",0,8,0,"\u00a3",0,8,0,"\u00d8",0,8,0,"\u00d7",0,8,0,"\u0192",0,8,0,"\u00e1",0,8,0,"\u00ed",0,8,0,"\u00f3",0,8,0,"\u00fa",0,8,0,"\u00f1",0,8,0,"\u00d1",0,8,0,"\u00aa",0,8,0,"\u00ba",0,8,0,"\u00bf",0,8,0,"\u00ae",0,8,0,"\u00ac",0,8,0,"\u00bd",0,8,0,"\u00bc",0,8,0,"\u00a1",0,8,0,"\u00ab",0,8,0,"\u00bb",0,5,0];function Ie(a,b,c,d){le.call(this,a);this.name=b;this.Ro=c||m;this.hn=d||m;this.nd=this.handle=this.jd=this.Fd=m}D(Ie,le);t=Ie.prototype;t.load=function(){this.restore()};t.w=function(){var a=this.g.f;this.Fd&&(a.deleteShader(this.Fd),this.Fd=m);this.jd&&(a.deleteShader(this.jd),this.jd=m);this.handle&&(a.deleteProgram(this.handle),this.handle=m);Ie.a.w.call(this)};t.restore=function(){Je(this);this.Gb()};
function Je(a){a.Ro&&a.hn&&(a.nd=m,a.Fd=a.createShader(35633,a.Ro),a.jd=a.createShader(35632,a.hn),a.Fd&&a.jd&&(a.handle=a.createProgram(a.Fd,a.jd)))}t.Gb=function(){var a;if(!(a=!Ke(this,35633,this.Fd)))if(!(a=!Ke(this,35632,this.jd))){a=this.handle;var b=this.g.f,c=xa(b.getProgramInfoLog(a));if(c&&c.length){this.nd=this.nd||[];for(var d=c.split("\n"),e=0;e<d.length;e++){var f=d[e];f.length&&this.nd.push(f)}L("program "+this.name+":"+c)}a=!b.getProgramParameter(a,35714)}return a?(this.w(),q):l};
t.createShader=function(a,b){var c=this.g.f,d=c.createShader(a);if(!d)return m;c.shaderSource(d,b);c.compileShader(d);return d};function Ke(a,b,c){var d=a.g.f,e=xa(d.getShaderInfoLog(c));if(e&&e.length){a.nd=a.nd||[];for(var f=e.split("\n"),h=0;h<f.length;h++){var j=f[h];j.length&&a.nd.push(j)}L("shader "+a.name+"/"+b+":"+e)}return!!d.getShaderParameter(c,35713)}
t.createProgram=function(a,b){var c=this.g.f,d=c.createProgram();if(!d)return m;c.attachShader(d,a);c.attachShader(d,b);this.Cp(d);c.linkProgram(d);return d};t.Cp=A;function Le(a,b,c){Ie.call(this,a,"FaceProgram",b,c);this.uj=this.pa=this.Id=-1;this.Yi=this.Sc=this.Ll=this.Ml=this.Kl=this.Mo=this.vb=this.wb=this.oa=m}D(Le,Ie);Le.prototype.w=function(){this.uj=this.pa=this.Id=-1;this.Yi=this.Sc=this.Ll=this.Ml=this.Kl=this.Mo=this.vb=this.wb=this.oa=m;Le.a.w.call(this)};
function Me(a){Le.call(this,a,"precision highp float;uniform mat4 a,d;uniform vec2 b;uniform vec3 c,e,f,g;attribute vec3 j,k;varying vec3 h;void n(){float m=max(dot(j,f),0.);h=e+g*m;}varying vec4 i;attribute vec4 l;void main(){gl_Position=a*vec4(k,1);i=l;n();}","precision mediump float;uniform mat4 a,d;uniform vec2 b,k;uniform vec3 c,e,f,g;vec4 o(vec4 l){float m,n;m=gl_FragCoord.z/gl_FragCoord.w;n=1.-smoothstep(b.x,b.y,m);return vec4(mix(c.rgb,l.rgb,n).rgb,l.a);}varying vec3 h;vec4 p(vec4 l){return vec4(l.rgb*h,l.a);}varying vec4 i;uniform sampler2D j;void main(){vec2 l=(i.xy+1.)/k;vec4 m,n;m=texture2D(j,l);if(m.a==0.)discard;n=m+i.z;gl_FragColor=o(p(n));}")}
D(Me,Le);
Me.prototype.Gb=function(){var a=this.g.f;if(!Me.a.Gb.call(this)||!this.handle)return q;this.Id=a.getAttribLocation(this.handle,"j");this.pa=a.getAttribLocation(this.handle,"k");this.uj=a.getAttribLocation(this.handle,"l");this.oa=a.getUniformLocation(this.handle,"a");this.wb=a.getUniformLocation(this.handle,"b");this.vb=a.getUniformLocation(this.handle,"c");this.Mo=a.getUniformLocation(this.handle,"d");this.Kl=a.getUniformLocation(this.handle,"e");this.Ml=a.getUniformLocation(this.handle,"f");this.Ll=
a.getUniformLocation(this.handle,"g");this.Sc=a.getUniformLocation(this.handle,"j");this.Yi=a.getUniformLocation(this.handle,"k");return l};function Ne(a,b,c){Ie.call(this,a,"LineProgram",b,c);this.Yc=this.pa=-1;this.vb=this.wb=this.oa=m}D(Ne,Ie);Ne.prototype.w=function(){this.Yc=this.pa=-1;this.vb=this.wb=this.oa=m;Ne.a.w.call(this)};
function Oe(a){Ne.call(this,a,"precision highp float;uniform mat4 a;uniform vec2 b;uniform vec3 c;varying vec4 d;attribute vec3 e;attribute vec4 f;void main(){gl_Position=a*vec4(e,1);d=f;}","precision mediump float;uniform mat4 a;uniform vec2 b;uniform vec3 c;vec4 h(vec4 e){float f,g;f=gl_FragCoord.z/gl_FragCoord.w;g=1.-smoothstep(b.x,b.y,f);return vec4(mix(c.rgb,e.rgb,g).rgb,e.a);}varying vec4 d;void main(){gl_FragColor=h(d);}")}D(Oe,Ne);
Oe.prototype.Gb=function(){var a=this.g.f;if(!Oe.a.Gb.call(this)||!this.handle)return q;this.pa=a.getAttribLocation(this.handle,"e");this.Yc=a.getAttribLocation(this.handle,"f");this.oa=a.getUniformLocation(this.handle,"a");this.wb=a.getUniformLocation(this.handle,"b");this.vb=a.getUniformLocation(this.handle,"c");return l};function Pe(a,b,c){Ie.call(this,a,"ModelProgram",b,c);this.jm=this.Id=this.pa=-1;this.Sc=this.Lo=this.Ol=this.Nl=this.vb=this.wb=this.oa=m}D(Pe,Ie);Pe.prototype.w=function(){this.jm=this.Id=this.pa=-1;this.Sc=this.Lo=this.Ol=this.Nl=this.vb=this.wb=this.oa=m;Pe.a.w.call(this)};
function Qe(a){Pe.call(this,a,"precision highp float;uniform mat4 a,d,e,f[20];uniform vec2 b;uniform vec3 c;vec4 l(vec3 k){return d*e*vec4(k,1);}varying vec2 g;attribute vec3 h,i;attribute vec2 j;void main(){gl_Position=l(h);g=j;}","precision mediump float;uniform mat4 a,d,e,f[20];uniform vec2 b;uniform vec3 c;vec4 l(vec4 i){float j,k;j=gl_FragCoord.z/gl_FragCoord.w;k=1.-smoothstep(b.x,b.y,j);return vec4(mix(c.rgb,i.rgb,k).rgb,i.a);}varying vec2 g;uniform sampler2D h;void main(){vec4 i=texture2D(h,g);if(i.a==0.)discard;gl_FragColor=l(i);}")}
D(Qe,Pe);
Qe.prototype.Gb=function(){var a=this.g.f;if(!Qe.a.Gb.call(this)||!this.handle)return q;this.pa=a.getAttribLocation(this.handle,"h");this.Id=a.getAttribLocation(this.handle,"i");this.jm=a.getAttribLocation(this.handle,"j");this.oa=a.getUniformLocation(this.handle,"a");this.wb=a.getUniformLocation(this.handle,"b");this.vb=a.getUniformLocation(this.handle,"c");this.Nl=a.getUniformLocation(this.handle,"d");this.Ol=a.getUniformLocation(this.handle,"e");this.Lo=a.getUniformLocation(this.handle,"f");this.Sc=
a.getUniformLocation(this.handle,"h");return l};function Re(a,b,c){Ie.call(this,a,"SpriteProgram",b,c);this.Yc=this.tj=this.pa=-1;this.Xi=this.Sc=this.oa=m}D(Re,Ie);Re.prototype.w=function(){this.Yc=this.tj=this.pa=-1;this.Xi=this.Sc=this.oa=m;Re.a.w.call(this)};
function Se(a){Re.call(this,a,"precision highp float;uniform mat4 a;varying vec2 b;varying vec4 c;attribute vec3 d;attribute vec2 e;attribute vec4 f;void main(){gl_Position=a*vec4(d,1);b=e;c=f;}","precision mediump float;uniform mat4 a;varying vec2 b;varying vec4 c;uniform sampler2D d;uniform vec4 e;void main(){vec4 f,g;f=texture2D(d,b);g=f*c*e;if(g.a==0.)discard;gl_FragColor=g;}")}D(Se,Re);
Se.prototype.Gb=function(){var a=this.g.f;if(!Se.a.Gb.call(this)||!this.handle)return q;this.pa=a.getAttribLocation(this.handle,"d");this.tj=a.getAttribLocation(this.handle,"e");this.Yc=a.getAttribLocation(this.handle,"f");this.oa=a.getUniformLocation(this.handle,"a");this.Sc=a.getUniformLocation(this.handle,"d");this.Xi=a.getUniformLocation(this.handle,"e");return l};function Te(a,b){ze.call(this,a,b,"../assets/textures","ui",new de(256,256,[[new mc("image/png","ui.png",949)]]));xe(this,16,16)}D(Te,ze);function O(){return new Float32Array(3)}function Ue(a,b,c){var d=O();Q(d,a,b,c);return d}function Q(a,b,c,d){a[0]=b;a[1]=c;a[2]=d}function Ve(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2]}function We(a,b,c){c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2]}function Xe(a,b,c){c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b}function Ye(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)}function Ze(a,b){var c=a[0]-b[0],d=a[1]-b[1],e=a[2]-b[2];return c*c+d*d+e*e}
function $e(a,b,c){var d=b[0]-a[0],e=b[1]-a[1];a=b[2]-a[2];(b=Math.sqrt(d*d+e*e+a*a))?(b=1/b,c[0]=d*b,c[1]=e*b,c[2]=a*b):c[0]=c[1]=c[2]=0}function af(a,b){return a.length==b.length&&a[0]==b[0]&&a[1]==b[1]&&a[2]==b[2]};function bf(){return new Float32Array(16)}function cf(){var a=bf();a[0]=a[5]=a[10]=a[15]=1;return a}function df(a,b,c,d,e,f,h,j,k){a[0]=b;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=d;a[11]=e;a[12]=f;a[13]=h;a[14]=j;a[15]=k}
function ef(a,b,c){var d=a[0],e=a[1],f=a[2],h=a[3],j=a[4],k=a[5],n=a[6],p=a[7],r=a[8],w=a[9],u=a[10],z=a[11],x=a[12],M=a[13],K=a[14];a=a[15];var V=b[0],ia=b[1],Ga=b[2],ab=b[3],bb=b[4],cb=b[5],db=b[6],eb=b[7],fb=b[8],gb=b[9],hb=b[10],ib=b[11],P=b[12],nf=b[13],of=b[14];b=b[15];c[0]=d*V+j*ia+r*Ga+x*ab;c[1]=e*V+k*ia+w*Ga+M*ab;c[2]=f*V+n*ia+u*Ga+K*ab;c[3]=h*V+p*ia+z*Ga+a*ab;c[4]=d*bb+j*cb+r*db+x*eb;c[5]=e*bb+k*cb+w*db+M*eb;c[6]=f*bb+n*cb+u*db+K*eb;c[7]=h*bb+p*cb+z*db+a*eb;c[8]=d*fb+j*gb+r*hb+x*ib;c[9]=
e*fb+k*gb+w*hb+M*ib;c[10]=f*fb+n*gb+u*hb+K*ib;c[11]=h*fb+p*gb+z*hb+a*ib;c[12]=d*P+j*nf+r*of+x*b;c[13]=e*P+k*nf+w*of+M*b;c[14]=f*P+n*nf+u*of+K*b;c[15]=h*P+p*nf+z*of+a*b}
function ff(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],h=a[4],j=a[5],k=a[6],n=a[7],p=a[8],r=a[9],w=a[10],u=a[11],z=a[12],x=a[13],M=a[14],K=a[15],V=c*j-d*h,ia=c*k-e*h,Ga=c*n-f*h,ab=d*k-e*j,bb=d*n-f*j,cb=e*n-f*k,db=p*x-r*z,eb=p*M-w*z,fb=p*K-u*z,gb=r*M-w*x,hb=r*K-u*x,ib=w*K-u*M,P=V*ib-ia*hb+Ga*gb+ab*fb-bb*eb+cb*db;0!=P&&(P=1/P,b[0]=(j*ib-k*hb+n*gb)*P,b[1]=(-d*ib+e*hb-f*gb)*P,b[2]=(x*cb-M*bb+K*ab)*P,b[3]=(-r*cb+w*bb-u*ab)*P,b[4]=(-h*ib+k*fb-n*eb)*P,b[5]=(c*ib-e*fb+f*eb)*P,b[6]=(-z*cb+M*Ga-K*ia)*P,b[7]=(p*cb-
w*Ga+u*ia)*P,b[8]=(h*hb-j*fb+n*db)*P,b[9]=(-c*hb+d*fb-f*db)*P,b[10]=(z*bb-x*Ga+K*V)*P,b[11]=(-p*bb+r*Ga-u*V)*P,b[12]=(-h*gb+j*eb-k*db)*P,b[13]=(c*gb-d*eb+e*db)*P,b[14]=(-z*ab+x*ia-M*V)*P,b[15]=(p*ab-r*ia+w*V)*P)}function gf(a,b,c){var d=b[0],e=b[1];b=b[2];c[0]=d*a[0]+e*a[4]+b*a[8]+a[12];c[1]=d*a[1]+e*a[5]+b*a[9]+a[13];c[2]=d*a[2]+e*a[6]+b*a[10]+a[14]}function hf(a,b,c){var d=b[0],e=b[1];b=b[2];c[0]=d*a[0]+e*a[4]+b*a[8];c[1]=d*a[1]+e*a[5]+b*a[9];c[2]=d*a[2]+e*a[6]+b*a[10]}
function jf(a,b,c){var d=b[0],e=b[1];b=b[2];var f=1/(d*a[3]+e*a[7]+b*a[11]+a[15]);c[0]=(d*a[0]+e*a[4]+b*a[8]+a[12])*f;c[1]=(d*a[1]+e*a[5]+b*a[9]+a[13])*f;c[2]=(d*a[2]+e*a[6]+b*a[10]+a[14])*f}new Float64Array(3);new Float64Array(3);new Float64Array(4);new Float64Array(4);new Float64Array(4);new Float64Array(16);var kf=!!v.wtf&&2==v.wtf.trace.API_VERSION,lf=kf?v.wtf.trace.events.createScope:function(){return A},mf=kf?v.wtf.trace.leaveScope:function(a,b){return b},pf=kf?v.wtf.trace.appendScopeData:A,qf=kf?v.wtf.trace.instrument:ga,rf=kf?v.wtf.trace.instrumentType:ga;function R(a){G.call(this);this.ec=a;this.g=a.g;this.Wd=24576;this.c=new ArrayBuffer(this.Wd*R.tg);this.Cn=new Int8Array(this.c);this.Ql=new Uint8Array(this.c);this.kf=0}D(R,G);R.$o=2;R.vg=6;R.ug=10;R.rj=4;R.tg=R.rj*R.ug;R.qp=0;R.pp=3;R.tp=6;
R.cq=new Int8Array([0,0,1,0,0,1,1,1,0,0,1,0,1,0,0,1,0,1,0,0,1,1,1,0,0,1,0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,-1,0,1,0,0,0,1,0,0,0,-1,0,0,0,0,1,1,0,0,0,-1,1,0,0,0,1,0,0,0,0,-1,1,1,0,0,0,1,0,0,1,0,1,0,0,0,0,1,1,0,1,0,1,1,0,0,1,1,1,0,1,0,0,1,0,0,1,1,0,0,1,0,0,0,0,0,0,0,0,0,-1,0,0,0,0,0,1,0,0,0,-1,0,1,0,0,0,1,0,1,0,-1,0,1,1,0,0,0,0,1,0,-1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,1,0,1,0,0,0,0,0,0,1,1,1,1,0,0,1,0,0,0,1,0,1,1,0,0,1,1,0,0,0,0,0,-1,0,0,1,1,0,0,0,0,1,-1,0,0,0,1,0,0,0,1,1,-1,0,0,0,0,0,0,0,1,0,-1,0,
0,1,0,0,0]);R.Rm=function(a){for(var b=a.createBuffer(),c=Math.floor(65535/R.vg),d=c*R.vg,e=new Uint16Array([0,1,2,0,2,3]),d=new Uint16Array(d),f=0,h=0,j=0;f<c;f++){for(var k=0;k<e.length;k++)d[h+k]=e[k]+j;h+=e.length;j+=R.rj}a.bindBuffer(34963,b);a.bufferData(34963,d,35044);a.bindBuffer(34963,m);return b};R.prototype.ea=function(a){a=Math.max(this.Wd,this.kf+a);return a>this.Wd?this.Vd(a):l};
R.prototype.Vd=function(a){a=Math.ceil(a||this.Wd*R.$o);if(a>=65535/R.vg)return q;var b=new ArrayBuffer(a*R.tg);(new Uint8Array(b)).set(new Uint8Array(this.c));this.Wd=a;this.c=b;this.Cn=new Int8Array(this.c);this.Ql=new Uint8Array(this.c);return l};
function sf(a,b,c,d,e,f){for(var h=a.kf++;h>=a.Wd;)if(!a.Vd())return;var j=R.cq;b*=40;var k=a.Cn;a=a.Ql;for(var h=h*R.tg,n=0,p=0;n<R.rj;n++,p+=10)k[h+p+0]=j[b+p+0]+c,k[h+p+1]=j[b+p+1]+d,k[h+p+2]=j[b+p+2]+e,k[h+p+3]=j[b+p+3],k[h+p+4]=j[b+p+4],k[h+p+5]=j[b+p+5],a[h+p+6]=j[b+p+6]?255*f[2]:255*f[0],a[h+p+7]=j[b+p+7]?255*f[3]:255*f[1],a[h+p+8]=j[b+p+8],a[h+p+9]=j[b+p+9]}
R.prototype.finish=function(a){var b=this.g.f,c=this.kf*R.tg,d=this.kf*R.vg;if(!c)return a&&b.deleteBuffer(a),{buffer:m,cf:0,Em:0};a=a||b.createBuffer();b.bindBuffer(34962,a);b.bufferData(34962,this.Ql.subarray(0,c),35048);b={buffer:a,cf:d,Em:c};this.kf=0;return b};
R.prototype.uc=function(a,b,c,d){var e=this.g.f,f=this.ec.Ac;if(d){var h=R.Ti;ef(a.Wc,b,h);e.uniformMatrix4fv(f.oa,q,h);e.bindBuffer(34962,c);e.vertexAttribPointer(f.pa,3,5120,q,R.ug,R.qp);e.vertexAttribPointer(f.Id,3,5120,q,R.ug,R.pp);e.vertexAttribPointer(f.uj,4,5121,q,R.ug,R.tp);e.drawElements(4,d,5123,0)}};R.Ti=bf();R=rf(R,"blk.graphics.BlockBuilder",{Rm:"createIndexBuffer",Vd:"expand_",finish:"finish"});function tf(a){G.call(this);this.M=a;this.ga=[]}D(tf,G);tf.prototype.flush=function(a){this.M.rm(q);var b=this.M.g.f;b.uniformMatrix4fv(this.M.Lf.Nl,q,a.Wc);a=this.M.Lf.Ol;for(var c=0;c<this.ga.length;c++){var d=this.ga[c],e=d.ar,d=d.transform;b.uniformMatrix4fv(a,q,d);e.A(d)}this.ga.length=0;uf(this.M.g,m)};tf=rf(tf,"blk.graphics.RenderList",{flush:"flush"});function vf(){this.Kg=q;this.Lg=this.Mg=32774;this.Qg=1;this.Og=0;this.Pg=1;this.Ng=0;this.blendColor=N();this.colorMask=wf}var wf=15;vf.prototype.od=function(a,b){this!=b&&(b?this.pd(a,b):this.Hc(a))};
vf.prototype.Hc=function(a){this.Kg?a.enable(3042):a.disable(3042);a.blendEquationSeparate(this.Mg,this.Lg);a.blendFuncSeparate(this.Qg,this.Og,this.Pg,this.Ng);a.blendColor(this.blendColor[0],this.blendColor[1],this.blendColor[2],this.blendColor[3]);a.colorMask(!!(this.colorMask&1),!!(this.colorMask&2),!!(this.colorMask&4),!!(this.colorMask&8))};
vf.prototype.pd=function(a,b){this.Kg!=b.Kg&&(this.Kg?a.enable(3042):a.disable(3042));(this.Mg!=b.Mg||this.Lg!=b.Lg)&&a.blendEquationSeparate(this.Mg,this.Lg);(this.Qg!=b.Qg||this.Og!=b.Og||this.Pg!=b.Pg||this.Ng!=b.Ng)&&a.blendFuncSeparate(this.Qg,this.Og,this.Pg,this.Ng);ue(this.blendColor,b.blendColor)||a.blendColor(this.blendColor[0],this.blendColor[1],this.blendColor[2],this.blendColor[3]);this.colorMask!=b.colorMask&&a.colorMask(!!(this.colorMask&1),!!(this.colorMask&2),!!(this.colorMask&4),
!!(this.colorMask&8))};new vf;new vf;function xf(){this.Xb=q;this.depthFunc=513;this.jh=0;this.ih=1;this.depthMask=l;this.ii=q;this.ki=this.ji=0}xf.prototype.od=function(a,b){this!=b&&(b?this.pd(a,b):this.Hc(a))};xf.prototype.Hc=function(a){this.Xb?a.enable(2929):a.disable(2929);a.depthFunc(this.depthFunc);a.depthRange(this.jh,this.ih);a.depthMask(this.depthMask);this.ii?a.enable(32823):a.disable(32823);a.polygonOffset(this.ji,this.ki)};
xf.prototype.pd=function(a,b){this.Xb!=b.Xb&&(this.Xb?a.enable(2929):a.disable(2929));this.depthFunc!=b.depthFunc&&a.depthFunc(this.depthFunc);(this.jh!=b.jh||this.ih!=b.ih)&&a.depthRange(this.jh,this.ih);this.depthMask!=b.depthMask&&a.depthMask(this.depthMask);this.ii!=b.ii&&(this.ii?a.enable(32823):a.disable(32823));(this.ji!=b.ji||this.ki!=b.ki)&&a.polygonOffset(this.ji,this.ki)};/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
function yf(a,b){this.Bi=[];this.Un=a;this.Vm=b||m}t=yf.prototype;t.Hb=q;t.tf=q;t.Hj=q;t.Ep=q;t.Cl=q;t.Ij=0;t.cancel=function(a){if(this.Hb)this.ag instanceof yf&&this.ag.cancel();else{if(this.la){var b=this.la;delete this.la;a?b.cancel(a):(b.Ij--,0>=b.Ij&&b.cancel())}this.Un?this.Un.call(this.Vm,this):this.Cl=l;this.Hb||this.G(new zf(this))}};t.Qm=function(a,b){this.Hj=q;Af(this,a,b)};function Af(a,b,c){a.Hb=l;a.ag=c;a.tf=!b;Bf(a)}function Cf(a){a.Hb&&(a.Cl||g(new Df(a)),a.Cl=q)}
t.D=function(a){Cf(this);Af(this,l,a)};t.G=function(a){Cf(this);Af(this,q,a)};function Zd(a,b,c,d){a.Bi.push([b,c,d]);a.Hb&&Bf(a)}function Ef(a){return Ka(a.Bi,function(a){return la(a[1])})}
function Bf(a){a.Sl&&(a.Hb&&Ef(a))&&(v.clearTimeout(a.Sl),delete a.Sl);a.la&&(a.la.Ij--,delete a.la);for(var b=a.ag,c=q,d=q;a.Bi.length&&!a.Hj;){var e=a.Bi.shift(),f=e[0],h=e[1],e=e[2];if(f=a.tf?h:f)try{var j=f.call(e||a.Vm,b);y(j)&&(a.tf=a.tf&&(j==b||j instanceof Error),a.ag=b=j);b instanceof yf&&(d=l,a.Hj=l)}catch(k){b=k,a.tf=l,Ef(a)||(c=l)}}a.ag=b;d&&(Zd(b,C(a.Qm,a,l),C(a.Qm,a,q)),b.Ep=l);c&&(a.Sl=v.setTimeout(function(){g(b)},0))}function Ff(){var a=new yf;a.D(m);return a}
function Df(a){ua.call(this);this.Wb=a}D(Df,ua);Df.prototype.message="Deferred has already fired";Df.prototype.name="AlreadyCalledError";function zf(a){ua.call(this);this.Wb=a}D(zf,ua);zf.prototype.message="Deferred was cancelled";zf.prototype.name="CancelledError";var Gf,Hf,If,Jf;Jf=If=Hf=Gf=q;var Kf=vb();Kf&&(-1!=Kf.indexOf("Firefox")||-1!=Kf.indexOf("Camino")||(-1!=Kf.indexOf("iPhone")||-1!=Kf.indexOf("iPod")?Gf=l:-1!=Kf.indexOf("iPad")?Hf=l:-1!=Kf.indexOf("Android")?If=l:-1!=Kf.indexOf("Chrome")&&(Jf=l)));var Lf=Gf,Mf=Hf,Nf=If,Of=Jf;function Pf(a){G.call(this);this.g=a;this.rd=[]}D(Pf,G);Pf.prototype.b=function(){Ia(this.rd,I);this.rd.length=0;Pf.a.b.call(this)};Pf.prototype.X=function(a){this.rd.push(a)};Pf.prototype.we=function(a){for(var b=new yf,c=0;c<this.rd.length;c++)Je(this.rd[c]);Of&&!a?Wc(function(){Qf(this,b)},5,this):Qf(this,b);return b};function Qf(a,b){for(var c=0;c<a.rd.length;c++){var d=a.rd[c];try{if(!d.Gb()){b.G(q);break}}catch(e){b.G(e);break}}b.Hb||b.D(m)};function Rf(){this.nh=l;this.We=q;this.cullFace=1029;this.Dh=2305;this.ti=q;this.vi=1;this.si=this.ui=q}Rf.prototype.od=function(a,b){this!=b&&(b?this.pd(a,b):this.Hc(a))};Rf.prototype.Hc=function(a){this.nh?a.enable(3024):a.disable(3024);this.We?a.enable(2884):a.disable(2884);a.cullFace(this.cullFace);a.frontFace(this.Dh);this.ti?a.enable(32928):a.disable(32928);a.sampleCoverage(this.vi,this.ui);this.si?a.enable(32926):a.disable(32926)};
Rf.prototype.pd=function(a,b){this.nh!=b.nh&&(this.nh?a.enable(3024):a.disable(3024));this.We!=b.We&&(this.We?a.enable(2884):a.disable(2884));this.cullFace!=b.cullFace&&a.cullFace(this.cullFace);this.Dh!=b.Dh&&a.frontFace(this.Dh);this.ti!=b.ti&&(this.ti?a.enable(32928):a.disable(32928));(this.vi!=b.vi||this.ui!=b.ui)&&a.sampleCoverage(this.vi,this.ui);this.si!=b.si&&(this.si?a.enable(32926):a.disable(32926))};function Sf(a,b,c,d){le.call(this,a);this.ze=b;this.ye=y(c)?c:16;this.Bq=y(d)?d:32;this.tb=new ArrayBuffer(this.ye*this.ze);this.Oa=m;this.lc=0;this.Zi=[];this.cc=q;this.yb=Number.MAX_VALUE;this.xb=Number.MIN_VALUE}D(Sf,le);t=Sf.prototype;t.w=function(){this.g.f.deleteBuffer(this.Oa);this.Oa=m;this.cc=l;this.yb=Number.MIN_VALUE;this.xb=Number.MAX_VALUE;Sf.a.w.call(this)};
t.restore=function(){var a=this.g.f;Sf.a.restore.call(this);this.Oa=a.createBuffer();this.cc=l;this.yb=Number.MIN_VALUE;this.xb=Number.MAX_VALUE;Tf(this)};t.ea=function(a){a=Math.max(this.ye,this.lc+a);return a>this.ye?this.Vd(a):l};t.Vd=function(a){a=a||this.ye+this.Bq;if(65535<=a)return q;var b=new ArrayBuffer(a*this.ze);(new Uint8Array(b)).set(new Uint8Array(this.tb));this.ye=a;this.tb=b;this.cc=l;this.yb=Number.MIN_VALUE;this.xb=Number.MAX_VALUE;this.Sj();return l};
function Uf(a){for(var b=0,b=a.Zi.length?a.Zi.pop():a.lc++;b>=a.ye;)if(!a.Vd())return 65535;a.cc=l;a.yb=Math.min(a.yb,b);a.xb=Math.max(a.xb,b);return b}t.clear=function(){this.lc=0;this.Zi.length=0;this.cc=q;this.yb=Number.MAX_VALUE;this.xb=Number.MIN_VALUE};function Tf(a){var b=a.g.f;b.bindBuffer(34962,a.Oa);a.cc&&(b.bufferData(34962,a.tb,35048),a.cc=q,a.yb=Number.MAX_VALUE,a.xb=Number.MIN_VALUE)}t.Sj=A;function Vf(a,b){Sf.call(this,a,96);this.bs=b;this.hd=new Float32Array(this.tb);this.De=new Uint32Array(this.tb)}D(Vf,Sf);Vf.prototype.Sj=function(){this.hd=new Float32Array(this.tb);this.De=new Uint32Array(this.tb)};var Wf=new Float32Array([0,0,0,0,0,0,0,1,0,0,1,0,1,0,0,1,0,0,1,1,0,1,1,0]);
Vf.prototype.add=function(a,b,c,d,e,f,h,j,k,n){var p=Uf(this);if(65535==p)return p;n=n||0;for(var r=this.hd,w=this.De,u=p*this.ze/4,z=0,x=0;4>z;z++,x+=6)r[u+x+0]=Wf[x+0]*j+f,r[u+x+1]=Wf[x+1]*k+h,r[u+x+2]=Wf[x+2]+n,r[u+x+3]=Wf[x+3]?a+c:a,r[u+x+4]=Wf[x+4]?b+d:b,w[u+x+5]=e;return p};
Vf.prototype.update=function(a,b,c,d,e,f,h,j,k,n,p){p=p||0;for(var r=this.hd,w=this.De,u=a*this.ze/4,z=0,x=0;4>z;z++,x+=6)r[u+x+0]=Wf[x+0]*k+h,r[u+x+1]=Wf[x+1]*n+j,r[u+x+2]=Wf[x+2]+p,r[u+x+3]=Wf[x+3]?b+d:b,r[u+x+4]=Wf[x+4]?c+e:c,w[u+x+5]=f;this.cc=l;this.yb=Math.min(this.yb,a);this.xb=Math.max(this.xb,a)};
Vf.prototype.remove=function(a){for(var b=this.hd,c=a*this.ze,d=0;4>d;d++)b[c+0]=0,b[c+1]=0,b[c+2]=0,c+=96;a==this.lc?this.lc--:(this.Zi.push(a),this.cc=l,this.yb=Math.min(this.yb,a),this.xb=Math.max(this.xb,a))};
Vf.prototype.uc=function(a,b,c){var d=this.g.f,e=this.bs;if(this.lc){if(b){var f=Xf;ef(a,b,f);d.uniformMatrix4fv(e.oa,q,f)}else d.uniformMatrix4fv(e.oa,q,a);y(c)?d.uniform4fv(e.Xi,c):d.uniform4f(e.Xi,1,1,1,1);Tf(this);d.vertexAttribPointer(e.pa,3,5126,q,24,0);d.vertexAttribPointer(e.tj,2,5126,q,24,12);d.vertexAttribPointer(e.Yc,4,5121,l,24,20);d.drawElements(4,6*this.lc,5123,0)}};var Xf=bf();function Yf(a,b,c,d,e,f){yf.call(this,e,f);this.ga=a;this.Uj=[];this.en=!!b;this.dq=!!c;this.Sp=!!d;for(b=0;b<a.length;b++)Zd(a[b],C(this.pn,this,b,l),C(this.pn,this,b,q));0==a.length&&!this.en&&this.D(this.Uj)}D(Yf,yf);Yf.prototype.Tn=0;Yf.prototype.pn=function(a,b,c){this.Tn++;this.Uj[a]=[b,c];this.Hb||(this.en&&b?this.D([a,c]):this.dq&&!b?this.G(c):this.Tn==this.ga.length&&this.D(this.Uj));this.Sp&&!b&&(c=m);return c};Yf.prototype.G=function(a){Yf.a.G.call(this,a);Ia(this.ga,function(a){a.cancel()})};function S(a,b,c){le.call(this,c);this.mode=Zf;this.Kf=new $f;this.Wf=new Pf(c);H(this,this.Wf);this.Wh=new Oe(c);this.Wf.X(this.Wh);this.Mi=new Se(c);this.Wf.X(this.Mi);this.Ac=new Me(c);this.Wf.X(this.Ac);this.Lf=new Qe(c);this.Wf.X(this.Lf);this.font=new Ge(0,b,c);H(this,this.font);this.Na=new Ce(b,c);H(this,this.Na);we(this.Na);this.Pl=new Te(b,c);we(this.Pl);H(this,this.Pl);this.Le=this.Li=m;this.sm=new R(this);H(this,this.sm);this.mo=new tf(this);H(this,this.mo)}D(S,le);S.prototype.we=function(){return new Yf([])};
var ag=S,bg=new Rf;bg.We=l;ag.rp=bg;var Zf=0;S.cm=new vf;var cg=S,dg=new xf;dg.Xb=l;dg.depthFunc=515;cg.dm=dg;S.Xo=new vf;var eg=S,fg=new xf;fg.Xb=l;fg.depthFunc=515;eg.ep=fg;S.Yo=new vf;var gg=S,hg=new xf;hg.Xb=l;hg.depthFunc=515;gg.hp=hg;S.Zo=new vf;var ig=S,jg=new xf;jg.Xb=l;jg.depthFunc=515;ig.gp=jg;var kg=S,lg=new xf;lg.Xb=q;lg.depthFunc=515;kg.fp=lg;t=S.prototype;t.w=function(){var a=this.g.f;a.deleteBuffer(this.Li);this.Li=m;a.deleteBuffer(this.Le);this.Le=m};
t.restore=function(){for(var a=this.g.f,b=a.createBuffer(),c=Math.floor(10922.5),d=6*c,e=new Uint16Array([0,1,2,2,1,3]),d=new Uint16Array(d),f=0,h=0,j=0;f<c;f++){for(var k=0;k<e.length;k++)d[h+k]=e[k]+j;h+=e.length;j+=4}a.bindBuffer(34963,b);a.bufferData(34963,d,35044);a.bindBuffer(34963,m);this.Li=b;this.Le=R.Rm(a)};
t.reset=function(a,b){var c=this.g,d=c.f,e=S.rp;c.mi!=e&&(e&&c.f&&e.od(c.f,c.mi),c.mi=e);d.viewport(0,0,d.canvas.width,d.canvas.height);d.clearColor(a[0],a[1],a[2],a[3]);d.clearDepth(1);d.clear((b?16384:0)|256);this.mode=Zf};t.om=function(){if(2!=this.mode){this.mode=2;var a=this.g,b=a.f;mg(a,S.cm);ng(a,S.dm);og(a,this.Ac);pg(this.Kf,b,this.Ac);Be(a,this.Na);b.uniform2f(this.Ac.Yi,this.Na.width,this.Na.height);b.bindBuffer(34963,this.Le);b.enableVertexAttribArray(0);b.enableVertexAttribArray(1);b.enableVertexAttribArray(2)}};
t.pm=function(){if(3!=this.mode){this.mode=3;var a=this.g,b=a.f;mg(a,S.Xo);ng(a,S.ep);og(a,this.Ac);pg(this.Kf,b,this.Ac);Be(a,this.Na);b.uniform2f(this.Ac.Yi,this.Na.width,this.Na.height);b.bindBuffer(34963,this.Le);b.enableVertexAttribArray(0);b.enableVertexAttribArray(1);b.enableVertexAttribArray(2)}};
t.rm=function(){if(6!=this.mode){this.mode=6;var a=this.g,b=a.f;mg(a,S.cm);ng(a,S.dm);og(a,this.Lf);var c=this.Kf,d=this.Lf;c.Xk&&(c.Xk=q,b.uniform2f(d.wb,c.nf,c.mf),b.uniform3f(d.vb,c.wa[0],c.wa[1],c.wa[2]));Be(a,this.Na)}};t.qm=function(){if(4!=this.mode){this.mode=4;var a=this.g,b=a.f;mg(a,S.Yo);ng(a,S.hp);og(a,this.Wh);var a=this.Kf,c=this.Wh;a.Mk&&(a.Mk=q,b.uniform2f(c.wb,a.nf,a.mf),b.uniform3f(c.vb,a.wa[0],a.wa[1],a.wa[2]));b.enableVertexAttribArray(0);b.enableVertexAttribArray(1);b.disableVertexAttribArray(2)}};
t.Jg=function(a,b){this.mode=5;var c=this.g,d=c.f;mg(c,S.Zo);ng(c,b?S.gp:S.fp);og(c,this.Mi);Be(c,a);d.bindBuffer(34963,this.Li);d.enableVertexAttribArray(0);d.enableVertexAttribArray(1);d.enableVertexAttribArray(2)};function $f(){this.Zc=O();this.Bd=O();this.Ad=O();this.mf=this.nf=0;this.wa=O();this.Xk=this.jk=this.Mk=l}
$f.prototype.update=function(a,b,c,d,e,f){var h=q;af(this.Zc,a)||(Ve(this.Zc,a),h=l);if(!af(this.Bd,b)||!af(this.Ad,c))Ve(this.Bd,b),Ve(this.Ad,c),h=l;if(this.nf!=d||this.mf!=e||!af(this.wa,f))this.nf=d,this.mf=e,Ve(this.wa,f),h=l;h&&(this.Xk=this.jk=this.Mk=l)};function pg(a,b,c){a.jk&&(a.jk=q,b.uniform3f(c.Kl,a.Zc[0],a.Zc[1],a.Zc[2]),b.uniform3f(c.Ml,a.Bd[0],a.Bd[1],a.Bd[2]),b.uniform3f(c.Ll,a.Ad[0],a.Ad[1],a.Ad[2]),b.uniform2f(c.wb,a.nf,a.mf),b.uniform3f(c.vb,a.wa[0],a.wa[1],a.wa[2]))}
S=rf(S,"blk.graphics.RenderState",{reset:"reset",om:"beginChunkPass1",pm:"beginChunkPass2",rm:"beginModels",qm:"beginLines",Jg:"beginSprites"});function qg(){this.buffer=new Uint8Array(512);this.offset=0;this.va=new Float32Array(16);this.Fa=new Uint8Array(this.va.buffer);this.fq=(this.lf=v.Float64Array?new Float64Array(1):m)?new Uint8Array(this.lf.buffer):m}t=qg.prototype;t.finish=function(){for(var a=new Uint8Array(this.offset),b=0;b<this.offset;b++)a[b]=this.buffer[b];this.offset=0;return a.buffer};
t.ea=function(a){if(this.offset+a>this.buffer.length){a=this.offset+a;var b=this.buffer.length;do b+=1024;while(b<a);a=new Uint8Array(b);for(b=0;b<this.offset;b++)a[b]=this.buffer[b];this.buffer=a}};function rg(a,b){a.ea(2);a.buffer[a.offset++]=b>>8;a.buffer[a.offset++]=b}function sg(a,b){a.ea(4);a.buffer[a.offset++]=b>>24;a.buffer[a.offset++]=b>>16;a.buffer[a.offset++]=b>>8;a.buffer[a.offset++]=b}function tg(a,b){a.ea(1);a.buffer[a.offset++]=b}
function ug(a,b){a.ea(2);a.buffer[a.offset++]=b>>8;a.buffer[a.offset++]=b}t.bb=function(a){this.ea(4);this.buffer[this.offset++]=a>>24;this.buffer[this.offset++]=a>>16;this.buffer[this.offset++]=a>>8;this.buffer[this.offset++]=a};t.pc=function(a){this.ea(5);for(a&=4294967295;a&4294967168;)this.buffer[this.offset++]=a&127|128,a>>>=7;this.buffer[this.offset++]=a&127};t.lj=function(a){this.pc(a<<1^a>>31)};
t.Vo=function(a){this.ea(4);this.va[0]=a;this.buffer[this.offset++]=this.Fa[0];this.buffer[this.offset++]=this.Fa[1];this.buffer[this.offset++]=this.Fa[2];this.buffer[this.offset++]=this.Fa[3]};t.As=function(a){this.ea(12);this.va[0]=a[0];this.va[1]=a[1];this.va[2]=a[2];for(a=0;12>a;a++)this.buffer[this.offset++]=this.Fa[a]};t.Bs=function(a){this.ea(16);this.va[0]=a[0];this.va[1]=a[1];this.va[2]=a[2];this.va[3]=a[3];for(a=0;16>a;a++)this.buffer[this.offset++]=this.Fa[a]};
t.da=function(a){65535<=a.length&&(a=a.substr(0,65535));this.ea(4+3*a.length);ug(this,a.length);var b=this.offset;this.offset+=2;for(var c=0,d=0;d<a.length;d++){var e=a.charCodeAt(d);128>e?(this.buffer[this.offset++]=e,c++):2048>e?(this.buffer[this.offset++]=e>>6|192,this.buffer[this.offset++]=e&63|128,c+=2):(this.buffer[this.offset++]=e>>12|224,this.buffer[this.offset++]=e>>6&63|128,this.buffer[this.offset++]=e&63|128,c+=3)}a=this.offset;this.offset=b;ug(this,c);this.offset=a};var vg=m;
function wg(){vg||(vg=new qg);return vg};function xg(){this.u=this.y=this.x=0}var yg=new xg,zg=new xg,Ag=new (aa());function Bg(a,b,c,d,e){G.call(this);this.context=a;this.path=b;this.name=c;this.duration=d;this.Rd=e;Oa(this.Rd,nc);this.qa=this.di=this.Ji=m}D(Bg,G);Bg.prototype.b=function(){this.di&&(this.di.disconnect(),this.di=m);this.Ji&&(this.Ji.disconnect(),this.Ji=m);this.qa&&(this.qa.pause(),this.qa=m);Bg.a.b.call(this)};
Bg.prototype.play=function(a){if(this.context&&!this.qa){var b=Wd(this.Rd);b&&(b=Xd(this.path,b.path),this.qa=document.createElement("AUDIO"),this.qa.autoplay=q,this.qa.src=b,b=this.context.createMediaElementSource(this.qa),b.connect(this.context.destination),this.di=this.Ji=b)}this.qa&&(this.qa.loop=a||q,this.qa.play())};Bg.prototype.stop=function(){this.qa&&(this.qa.currentTime=0,this.qa.pause())};function Cg(a,b,c,d,e){G.call(this);this.Je=a;this.context=b;this.path=c;this.name=d||"Unknown";this.ng={};e&&this.Di(e)}D(Cg,G);Cg.prototype.b=function(){Cg.a.b.call(this)};Cg.prototype.Di=function(a){for(var b=0;b<a.length;b++){var c=a[b];this.ng[c.name]=c}};Cg.prototype.load=function(){Dg(this)};Cg.prototype.play=function(a,b,c){var d;d=B(a)?this.ng[a]:a;if(!d)return L("WARNING: track "+a+" not found in list"),m;Dg(this,c);d.play(b);return d};
function Dg(a,b){Qa(a.ng,function(a){a.stop(b)},a)};function Eg(a,b){Cg.call(this,a,b,"../assets/audio/music","Music",[new Bg(b,"../assets/audio/music","track1",383380,[new mc("audio/ogg","track1.ogg",4861360)])])}D(Eg,Cg);function Fg(a,b,c,d,e,f,h){this.P=a;this.um=b;this.vm=c;this.wm=d;this.Fb=e;this.ak=f;this.eo=h};function Gg(){var a=O(),b=O();this.min=a;this.max=b}function Hg(a,b,c,d,e,f){var h=new Gg;h.min[0]=a<d?a:d;h.min[1]=b<e?b:e;h.min[2]=c<f?c:f;h.max[0]=a<d?d:a;h.max[1]=b<e?e:b;h.max[2]=c<f?f:c;return h}
function Ig(a,b,c){var d=a.min;a=a.max;var e=Jg[0];e[0]=Math.abs(b[3]);e[1]=Math.abs(b[4]);e[2]=Math.abs(b[5]);var f=0,h=1,j=2;e[0]<e[2]&&(f=2,j=0);e[1]<e[j]?(h=j,j=1):e[1]>e[f]&&(h=f,f=1);var k=0,n=Number.MAX_VALUE,p=b[3+f],r=(d[f]-b[f])/p,f=(a[f]-b[f])/p;r>f&&(p=r,r=f,f=p);if(!(r>n||f<k)){r>k&&(k=r);f<n&&(n=f);if(1E-6>e[h]){if(b[h]<d[h]||b[h]>a[h]||b[j]<d[j]||b[j]>a[j])return}else{p=b[3+h];r=(d[h]-b[h])/p;f=(a[h]-b[h])/p;r>f&&(p=r,r=f,f=p);if(r>n||f<k)return;r>k&&(k=r);f<n&&(n=f);if(1E-6>e[j]){if(b[j]<
d[j]||b[j]>a[j])return}else{p=b[3+j];r=(d[j]-b[j])/p;f=(a[j]-b[j])/p;r>f&&(p=r,r=f,f=p);if(r>n||f<k)return;r>k&&(k=r)}}c&&(c[0]=b[0]+b[3]*k,c[1]=b[1]+b[4]*k,c[2]=b[2]+b[5]*k)}}var Jg=[O(),O(),O()];function Kg(a,b,c,d){this.map=a;this.x=b;this.y=c;this.u=d;this.Sb=Hg(b,c,d,b+16,c+128,d+16);this.state=Lg;this.mh=l;this.version=this.re=0;this.Fb=new Uint16Array(32768);this.tl=this.Ci=m}var Lg=0;Kg.prototype.Cc=function(a,b,c){return 2==this.state?this.Fb[(a&15)+16*(c&15)+256*(b&127)]:0};Kg.prototype.hc=function(a,b,c,d){b=(a&15)+16*(c&15)+256*(b&127);a=this.Fb[b];this.Fb[b]=d;a!=d&&!this.mh&&(d=this.mh,this.mh=l,this.Ci=m,d||this.map.yp(this));return a};
Kg.prototype.Bk=function(a){var b=Mg[0];Ig(this.Sb,a,b);var c=Math.floor(b[0]),d=Math.floor(b[1]),e=Math.floor(b[2]),f=0==a[3]?0:0>a[3]?-1:1,h=0==a[4]?0:0>a[4]?-1:1,j=0==a[5]?0:0>a[5]?-1:1,k=(c+(0<f?1:0)-b[0])/a[3],n=(d+(0<h?1:0)-b[1])/a[4],p=(e+(0<j?1:0)-b[2])/a[5];isNaN(k)&&(k=Number.POSITIVE_INFINITY);isNaN(n)&&(n=Number.POSITIVE_INFINITY);isNaN(p)&&(p=Number.POSITIVE_INFINITY);var r=f/a[3],w=h/a[4],u=j/a[5];isNaN(r)&&(r=Number.POSITIVE_INFINITY);isNaN(w)&&(w=Number.POSITIVE_INFINITY);isNaN(u)&&
(u=Number.POSITIVE_INFINITY);for(var z=this.Fb,x=b=0;256>x;x++){var M=c-this.x,K=d-this.y,V=e-this.u;if(0<=M&&(16>M&&0<=K&&128>K&&0<=V&&16>V)&&(b=z[M+16*V+256*K],b>>8))break;k<n&&k<p?(k+=r,c+=f):n<p?(n+=w,d+=h):(p+=u,e+=j)}return b?(f=Ng,h=c+1,j=d+1,k=e+1,Q(f.min,c,d,e),Q(f.max,h,j,k),f=O(),Ig(Ng,a,f),new Fg(this,c,d,e,b,Math.sqrt(Ze(a,f)),f)):m};var Mg=[O(),O()],Ng=new Gg;function Og(){G.call(this);this.bo=q;this.Hi=l;this.xg=[];this.Ge=[];this.$i=[];this.ke=[];this.Ln=[this.Ge,this.$i,this.ke];this.$a=0}D(Og,G);Og.lp=20;Og.mp=6;Og.kp=32;Og.prototype.pause=function(){this.bo=l};Og.prototype.Ua=s("$a");
Og.prototype.dd=function(a,b){if(a.Kc)switch(a.Yf){case 0:E(this.xg,a);break;case 1:E(this.Ge,a);break;case 2:E(this.$i,a);break;default:E(this.ke,a)}else a.Kc=l,this.$a++;a.Yf=b;switch(b){case 0:this.xg.push(a);break;case 1:this.Ge.push(a);this.Hi=l;break;case 2:this.$i.push(a);break;default:this.ke.push(a),this.Hi=l}};Og.prototype.cancel=function(a){if(a.Kc){switch(a.Yf){case 0:E(this.xg,a);break;case 1:E(this.Ge,a);break;case 2:E(this.$i,a);break;default:E(this.ke,a)}this.$a--}};
Og.ts=function(a,b){return a.zo-b.zo};Og.prototype.update=function(a,b){if(this.bo||!this.$a)return 0;var c=Og.lp,d=lc(),e=a.of,f=0,h=this.xg;if(h.length){for(var j=0;j<h.length;j++)f+=h[j].Jj(),h[j].Kc=q;this.$a-=h.length;c-=h.length;h.length=0}if(0>=c)return f;if(this.Hi||!(e%Og.kp))this.Ge.length&&this.Dl(a,b,this.Ge),this.ke.length&&this.Dl(a,b,this.ke),this.Hi=q;for(j=0;j<this.Ln.length;j++)for(e=this.Ln[j];c&&e.length;){if(lc()-d>Og.mp)return f;h=e.shift();f+=h.Jj();h.Kc=q;this.$a--;c--}return f};
Og.prototype.Dl=function(a,b,c){pf("length",c.length);for(a=0;a<c.length;a++);Oa(c,Og.ts)};Og=rf(Og,"blk.env.client.BuildQueue",{update:"update",Dl:"sortListByDistance_"});function Pg(){G.call(this);this.Sa={};this.La=this.i=0}D(Pg,G);t=Pg.prototype;t.Ua=s("i");t.Dc=s("La");t.add=function(a){this.i++;this.Sa[a.id]=a;this.La+=a.gd};t.remove=function(a){this.i--;delete this.Sa[a.id];this.La-=a.gd};t.forEach=function(a,b){for(var c in this.Sa)a.call(b||v,this.Sa[c])};function Qg(a,b){var c=qe(0,0,0,0);this.q=a;this.vp=b||m;this.ft=m;this.color=c||N()};function Rg(a){Sf.call(this,a,32);this.hd=new Float32Array(this.tb);this.De=new Uint32Array(this.tb);this.restore()}D(Rg,Sf);Rg.prototype.Sj=function(){this.hd=new Float32Array(this.tb);this.De=new Uint32Array(this.tb)};function Sg(a,b,c,d,e,f,h){var j=Uf(a);if(65535!=j){var k=a.hd,n=a.De;a=j*a.ze/4;k[a+0]=b;k[a+1]=c;k[a+2]=d;n[a+3]=4294967295;k[a+4]=e;k[a+5]=f;k[a+6]=h;n[a+7]=4294967295}}
Rg.prototype.uc=function(a,b,c){var d=this.g.f;a=a.Wh;if(this.lc){var e=Tg;ef(b.Wc,c,e);d.uniformMatrix4fv(a.oa,q,e);Tf(this);d.vertexAttribPointer(a.pa,3,5126,q,16,0);d.vertexAttribPointer(a.Yc,4,5121,l,16,12);d.drawArrays(1,0,2*this.lc)}};var Tg=bf();function T(a,b,c,d){le.call(this,b.g);this.id=T.Zk++;this.qg=a;this.ec=b;this.P=c;this.Me=d;a=c.x;var e=c.y+d,f=c.u,h=bf();df(h,1,1,1,0,a,e,f,1);this.Uo=h;this.Mj=Ue(c.x+T.L/2,c.y+d+T.L/2,c.u+T.L/2);this.Sb=new Gg;this.Od=qe(this.Mj[0],this.Mj[1],this.Mj[2],T.L);this.Sg=b.sm;this.tm=c.map.Ca;this.Wj=l;this.jf=m;this.gr=this.zo=this.gd=this.zh=0;this.Kc=q;this.Yf=3;this.Tj=q;this.Vb=m}D(T,le);T.prototype.b=function(){this.ic(q);T.a.b.call(this)};T.Zk=0;T.L=16;T.wg=4;T.hm=128/T.L;
T.prototype.w=function(){this.g.f.deleteBuffer(this.jf);this.jf=m;this.gd=this.zh=0;this.Vb&&(I(this.Vb),this.Vb=m);T.a.w.call(this)};T.prototype.restore=function(){T.a.restore.call(this);this.Tj&&(this.ic(q),this.ic(l));this.qg.Dk(this.P.x,this.P.y+this.Me,this.P.u,3)};T.prototype.Ck=function(){this.Wj=l};T.Hp=lf("blk.env.client.SegmentRenderer#build:fast");T.Ip=lf("blk.env.client.SegmentRenderer#build:slow");
T.prototype.Jj=function(){this.Wj=q;for(var a=this.tm,b=this.ec.Na,c=this.P.Fb,d=T.mg,e=T.Eo,f=T.Hp(),h=this.Me,j=this.Me+T.L-1,k=h;k<=j;k++)for(var n=1;n<T.L-1;n++)for(var p=1;p<T.L-1;p++){var r=p+16*n+256*k,w=c[r];if(w>>8){e[0]=c[r+16]>>8;e[1]=c[r-16]>>8;e[2]=127<=k?0:c[r+256]>>8;e[3]=(0>=k?w:c[r-256])>>8;e[4]=c[r+1]>>8;e[5]=c[r-1]>>8;for(var r=a.ga[w>>8],u=0;6>u;u++)if(!e[u]||e[u]!=w>>8&&a.ga[e[u]].$h.q&64)ye(b,r.rk(p,k,n,u,w>>16&255,w&65535),d),sf(this.Sg,u,p,k-this.Me,n,d)}}mf(f);f=T.Ip();a=
Array(4);a[0]=this.qg.view.Ga(this.P.x-16,this.P.y,this.P.u);a[1]=this.qg.view.Ga(this.P.x+16,this.P.y,this.P.u);a[2]=this.qg.view.Ga(this.P.x,this.P.y,this.P.u-16);a[3]=this.qg.view.Ga(this.P.x,this.P.y,this.P.u+16);for(n=p=0;n<T.L-1;n++)Ug(this,p,h,j,n,a);n=T.L-1;for(p=0;p<T.L-1;p++)Ug(this,p,h,j,n,a);p=T.L-1;for(n=1;n<T.L;n++)Ug(this,p,h,j,n,a);n=0;for(p=1;p<T.L;p++)Ug(this,p,h,j,n,a);mf(f);f=this.Sg.finish(this.jf);this.jf=f.buffer;this.zh=f.cf;h=this.gd;this.gd=f.Em;return this.gd-h};
function Ug(a,b,c,d,e,f){for(var h=a.tm,j=a.ec.Na,k=a.P.Fb,n=T.mg,p=T.Eo,r=a.P.x,w=a.P.u;c<=d;c++){var u=b+16*e+256*c,z=k[u];if(z>>8){p[0]=e==T.L-1?f[3]?f[3].Cc(r+b,c,w+e+1)>>8:0:k[u+16]>>8;p[1]=e?k[u-16]>>8:f[2]?f[2].Cc(r+b,c,w+e-1)>>8:0;p[2]=127<=c?0:k[u+256]>>8;p[3]=(0>=c?z:k[u-256])>>8;p[4]=b==T.L-1?f[1]?f[1].Cc(r+b+1,c,w+e)>>8:0:k[u+1]>>8;p[5]=b?k[u-1]>>8:f[0]?f[0].Cc(r+b-1,c,w+e)>>8:0;for(var u=h.ga[z>>8],x=0;6>x;x++)if(!p[x]||p[x]!=z>>8&&h.ga[p[x]].$h.q&64)ye(j,u.rk(b,c,e,x,z>>16&255,z&65535),
n),sf(a.Sg,x,b,c-a.Me,e,n)}}}
T.prototype.ic=function(a){if(this.Tj!=a)if(this.Tj=a){a=this.Vb=new Rg(this.g);var b=Ue(0,0,0),c=Ue(T.L,T.L,T.L);Sg(a,b[0],b[1],b[2],c[0],b[1],b[2]);Sg(a,b[0],b[1],b[2],b[0],c[1],b[2]);Sg(a,b[0],b[1],b[2],b[0],b[1],c[2]);Sg(a,c[0],b[1],c[2],b[0],b[1],c[2]);Sg(a,c[0],b[1],c[2],c[0],b[1],b[2]);Sg(a,c[0],b[1],c[2],c[0],c[1],c[2]);Sg(a,c[0],b[1],b[2],c[0],c[1],b[2]);Sg(a,b[0],b[1],c[2],b[0],c[1],c[2]);Sg(a,b[0],c[1],b[2],c[0],c[1],b[2]);Sg(a,b[0],c[1],b[2],b[0],c[1],c[2]);Sg(a,c[0],c[1],c[2],c[0],c[1],
b[2]);Sg(a,c[0],c[1],c[2],b[0],c[1],c[2])}else I(this.Vb),this.Vb=m};T.prototype.A=function(a,b){this.zh&&this.Sg.uc(b,this.Uo,this.jf,this.zh)};T.mg=N();T.Eo=new Uint16Array(6);T=rf(T,"blk.env.client.SegmentRenderer",{Jj:"build"});function Vg(a,b,c){G.call(this);this.g=a.g;this.ec=a;this.map=b;this.view=c;this.Xe=q;this.Mc=new Pg;H(this,this.Mc);this.Tb=new Og;H(this,this.Tb);this.Kh=[];this.Kk=this.Jn=0;this.In=m;this.ss=Array(512);this.fj=Array(1024);this.Hf=0;this.So=Array(1024);this.Gn=this.Lk=0;this.view.xj(this)}D(Vg,G);t=Vg.prototype;t.b=function(){this.view.sl(this);Vg.a.b.call(this)};t.ic=function(a){this.Xe!=a&&(this.Xe=a,this.Mc.forEach(function(b){b.ic(a)}))};
t.tk=function(){var a;a="Render: "+(this.Mc.Ua()+" cached (");a+=Math.floor(this.Mc.Dc()/1E3)+"K), ";a+=this.Kk+" visible, ";return a+=this.Tb.Ua()+" req"};t.Km=function(a){this.ck(a,3)};t.Im=function(a){this.ck(a,3)};t.Jm=function(a){var b=Wg(a,q);if(b){for(var c=0;c<b.Nc.length;c++){var d=b.Nc[c];d&&(d.Kc&&this.Tb.cancel(d),this.Mc.remove(d),I(d))}a.tl=m}};function Wg(a,b){var c=a.tl;!c&&!b&&(c={Nc:Array(T.hm)},a.tl=c);return c}
t.ck=function(a,b){if(2==a.state)for(var c=Wg(a),d=0;d<c.Nc.length;d++){var e=c.Nc[d];e||(e=new T(this,this.ec,a,d*T.L),e.ic(this.Xe),c.Nc[d]=e,this.Mc.add(e),this.Tb.dd(e,b))}};t.Oh=function(a,b,c,d){this.Ph(a,b,c,a,b,c,d)};t.Ph=function(a,b,c,d,e,f,h){a--;b--;c--;d++;e++;f++;c>>=4;d>>=4;f>>=4;b>>=T.wg;e>>=T.wg;for(a>>=4;a<=d;a++)for(var j=c;j<=f;j++)for(var k=b;k<=e;k++)this.Dk(a<<4,k<<T.wg,j<<4,h)};
t.Dk=function(a,b,c,d){if(a=this.view.Ga(a,b,c)){c=Wg(a);b>>=T.wg;var e=c.Nc[b];e||(e=new T(this,this.ec,a,b*T.L),e.ic(this.Xe),c.Nc[b]=e,this.Mc.add(e),this.Tb.dd(e,d));if(!e.Wj||e.Yf!=d)e.Ck(),this.Tb.dd(e,d)}};t.Dm=function(a,b){var c=this.Tb.update(a,b),d=this.Mc;d.La+=c};
t.A=function(a,b){var c=this.ec,d=this.map;this.In=b;this.Lk=this.Hf=this.Kk=this.Jn=0;this.Gn=a.of;this.view.Bh(b,this.Wq,this);this.Dm(a,b);if(!this.Tb.Ua()&&this.Kh.length){for(var e=0;e<this.Kh.length;e++)this.Kh[e].D(m);this.Kh.length=0}e=b.Ah-16;c.Kf.update(d.fd.Zc,d.fd.Bd,d.fd.Ad,0.5*e,0.85*e,d.fd.wa);if(this.Xe){c.qm();for(e=0;e<this.Hf;e++)d=this.fj[e],d.Vb&&d.Vb.uc(d.ec,b,d.Uo)}this.Hf&&this.Zm(a,b,c);this.Lk&&this.$m(a,b,c)};
t.Zm=function(a,b,c){c.om();for(c=0;c<this.Hf;c++)this.fj[c].A(a,b),this.fj[c]=m};t.$m=function(a,b,c){c.pm();for(c=0;c<this.Lk;c++)this.So[c].A(a,b),this.So[c]=m};
t.Wq=function(a){this.ss[this.Jn++]=a;a=Wg(a);for(var b=0;b<T.hm;b++){var c=a.Nc[b],d;if(d=c){a:{d=c.Od;for(var e=this.In.nk,f=0;f<e.length;f++){var h=e[f],h=h[0]*d[0]+h[1]*d[1]+h[2]*d[2]+h[3];if(h<-d[3]){d=-1;break a}if(Math.abs(h)<d[3]){d=0;break a}}d=1}d=-1!=d}if(d&&(c.Kc||0<c.gd))c.Kc&&1<c.Yf&&this.Tb.dd(c,1),c.gr=this.Gn,this.Kk++,this.fj[this.Hf++]=c}};
Vg=rf(Vg,"blk.env.client.ViewRenderer",{ck:"ensureChunkRenderData_",Oh:"invalidateBlock",Ph:"invalidateBlockRegion",Dk:"invalidateSegment",Dm:"buildChunks_",A:"render",Zm:"drawChunkPass1_",$m:"drawChunkPass2_"});function Xg(a,b){Yd.call(this,a,b,"../assets/audio/blocks","BlockSounds",[new mc("audio/wav","blocks_optimized.wav",776760),new mc("audio/ogg","blocks_optimized.ogg",68885),new mc("audio/mpeg","blocks_optimized.mp3",71052)],[new rc("block_grass",0,[new J(3657,373),new J(5639,368),new J(6489,328),new J(8378,318)]),new rc("block_gravel",0,[new J(0,338),new J(1935,313),new J(7426,363),new J(7889,389)]),new rc("block_wood",0,[new J(4130,237),new J(4467,272),new J(5277,262),new J(6107,282)]),new rc("block_cloth",
0,[new J(438,404),new J(1345,490),new J(2786,378),new J(6917,409)]),new rc("block_stone",0,[new J(942,303),new J(2348,338),new J(3264,293),new J(4839,338)])])}D(Xg,Yd);function Yg(a,b){this.attributes=[new Zg(3,0),new Zg(2,24)];this.Bp=a;this.$p=b}function Zg(a,b){this.size=a;this.type=5126;this.Of=q;this.hg=32;this.offset=b};function $g(){};function ah(){this.name=m;this.index=0;this.parent=m;this.children=[];this.transform=cf();this.Sb=new Gg;this.Od=N()};function bh(a){this.Uk=a;a=a.Tg;this.Fp=new Float32Array(16*a.length);this.Ds=new Float32Array(16*a.length);this.ls=l;this.reset()}bh.prototype.reset=function(){this.ls=l;for(var a=this.Uk.Tg,b=0,c=0;b<a.length;b++,c+=16)for(var d=a[b],e=0;16>e;e++)this.Fp[c+e]=d.transform[e]};function ch(a){G.call(this);this.id=a;this.Sb=new Gg;this.Od=N();this.jq=m;this.ao=[];this.Tg=[];this.Fs={}}D(ch,G);ch.prototype.yl=ba("jq");ch.prototype.Ve=function(){return new bh(this)};function dh(){this.$h=new $g;this.primitiveType=4;this.aq=this.cf=0};function eh(a,b,c){G.call(this);this.f=a.f;this.Dg=b;this.lm=Array(32);for(var d=this.bk=0;d<b.length;d++){var e=b[d];this.lm[e.index]=e;this.bk|=1<<e.index}this.rh=c;this.lb=a.yh.get(5);this.Bb=m;this.lb&&(this.Bb=this.lb.createVertexArrayOES(),this.lb.bindVertexArrayOES(this.Bb),this.Hc(),this.lb.bindVertexArrayOES(m))}D(eh,G);t=eh.prototype;t.b=function(){this.lb&&(this.lb.deleteVertexArrayOES(this.Bb),this.Bb=m);this.lb=m;eh.a.b.call(this)};
t.od=function(a){this!=a&&(this.lb?this.lb.bindVertexArrayOES(this.Bb):a?this.pd(a):this.Hc())};t.reset=function(){this.lb&&this.lb.bindVertexArrayOES(m)};t.Hc=function(){var a=this.f;a.bindBuffer(34963,this.rh);for(var b=m,c=0;c<this.Dg.length;c++){var d=this.Dg[c];a.enableVertexAttribArray(d.index);b!=d.buffer&&(b=d.buffer,a.bindBuffer(34962,d.buffer));a.vertexAttribPointer(d.index,d.size,d.type,d.Of,d.hg,d.offset)}};
t.pd=function(a){var b=this.f;this.rh!=a.rh&&b.bindBuffer(34963,this.rh);for(var c=m,d=0;d<this.Dg.length;d++){var e=this.Dg[d];a.bk&1<<e.index||b.enableVertexAttribArray(e.index);var f=a.lm[e.index];f&&f.Fm==e.Fm||(c!=e.buffer&&(c=e.buffer,b.bindBuffer(34962,e.buffer)),b.vertexAttribPointer(e.index,e.size,e.type,e.Of,e.hg,e.offset))}};
function fh(a,b,c,d,e,f,h){this.index=a;this.buffer=b;this.size=c;this.type=d;this.Of=e;this.hg=f;this.offset=h;this.Fm=[this.index,na(this.buffer),this.size,this.type,this.Of,this.hg,this.offset].join(":")};function gh(a,b,c){le.call(this,a);this.Fh=b;this.Bb=this.bf=this.Ke=m;this.Ns=c||m}D(gh,le);gh.prototype.w=function(){var a=this.g.f;I(this.Bb);this.Bb=m;a.deleteBuffer(this.Ke);this.Ke=m;a.deleteBuffer(this.bf);this.bf=m;gh.a.w.call(this)};
gh.prototype.restore=function(){gh.a.restore.call(this);var a=this.g.f;this.Ke=a.createBuffer();this.bf=a.createBuffer();a.bindBuffer(34962,this.Ke);a.bufferData(34962,this.Fh.Bp,35044);a.bindBuffer(34963,this.bf);a.bufferData(34963,this.Fh.$p,35044);for(var a=[],b=0;b<this.Fh.attributes.length;b++){var c=this.Fh.attributes[b];a.push(new fh(b,this.Ke,c.size,c.type,c.Of,c.hg,c.offset))}this.Bb=new eh(this.g,a,this.bf)};gh.prototype.bind=function(){this.Bb&&uf(this.g,this.Bb)};function hh(a){bh.call(this,a);this.ba=a.ba;this.Zd=a.Zd}D(hh,bh);hh.prototype.A=function(){var a=this.ba.f;this.Zd.bind();for(var b=this.Uk.ao,c=0;c<b.length;c++){var d=b[c];a.drawElements(d.primitiveType,d.cf,5123,d.aq)}};function ih(a,b){ch.call(this,a);this.ba=b;this.Zd=m}D(ih,ch);ih.prototype.yl=function(a){ih.a.yl.call(this,a);this.Zd=new gh(this.ba,a,this.id);H(this,this.Zd);this.Zd.restore()};ih.prototype.Ve=function(){return new hh(this)};function jh(a,b){var c=new ih("pumpkin",b),d=c.Sb,e=[-0.5,-1,0,0.5,1,0.5],f=d.min,d=d.max;if(e.length){var h=0;Q(f,e[h],e[h+1],e[h+2]);Q(d,e[h],e[h+1],e[h+2]);h++;for(var j=1;j<e.length/3;j++,h++)e[h]<f[0]?f[0]=e[h]:e[h]>d[0]&&(d[0]=e[h]),e[h+1]<f[1]?f[1]=e[h+1]:e[h+1]>d[1]&&(d[1]=e[h+1]),e[h+2]<f[2]?f[2]=e[h+2]:e[h+2]>d[2]&&(d[2]=e[h+2])}else Q(f,0,0,0),Q(d,0,0,0);re(c.Od,0,0,0,1);e=qe(96,112,112,128);f=qe(112,112,128,128);d=qe(96,96,112,112);te(e,e);te(f,f);te(d,d);e=new Float32Array([-0.5,-1,0.5,
0,0,1,e[2],e[3],0.5,-1,0.5,0,0,1,e[0],e[3],0.5,1,0.5,0,0,1,e[0],e[1],-0.5,1,0.5,0,0,1,e[2],e[1],-0.5,-1,-0.5,0,0,-1,f[0],f[3],-0.5,1,-0.5,0,0,-1,f[0],f[1],0.5,1,-0.5,0,0,-1,f[2],f[1],0.5,-1,-0.5,0,0,-1,f[2],f[3],-0.5,1,-0.5,0,1,0,d[2],d[1],-0.5,1,0.5,0,1,0,d[2],d[3],0.5,1,0.5,0,1,0,d[0],d[3],0.5,1,-0.5,0,1,0,d[0],d[1],-0.5,-1,-0.5,0,-1,0,e[0],e[1],0.5,-1,-0.5,0,-1,0,e[2],e[1],0.5,-1,0.5,0,-1,0,e[2],e[3],-0.5,-1,0.5,0,-1,0,e[0],e[3],0.5,-1,-0.5,1,0,0,e[0],e[3],0.5,1,-0.5,1,0,0,e[0],e[1],0.5,1,0.5,
1,0,0,e[2],e[1],0.5,-1,0.5,1,0,0,e[2],e[3],-0.5,-1,-0.5,-1,0,0,e[2],e[3],-0.5,-1,0.5,-1,0,0,e[0],e[3],-0.5,1,0.5,-1,0,0,e[0],e[1],-0.5,1,-0.5,-1,0,0,e[2],e[1]]);f=new Uint16Array(36);for(j=h=d=0;6>d;d++,h+=6,j+=4)f[h+0]=0+j,f[h+1]=1+j,f[h+2]=2+j,f[h+3]=0+j,f[h+4]=2+j,f[h+5]=3+j;c.yl(new Yg(e.buffer,f));e=new dh;c.ao.push(e);e.primitiveType=4;e.cf=36;e=new ah;e.index=c.Tg.length;e.name=m;e.parent=m;c.Tg.push(e);f=e.Sb;d=c.Sb;Ve(f.min,d.min);Ve(f.max,d.max);se(e.Od,c.Od);return c};function kh(){G.call(this);this.Mf={}}D(kh,G);kh.prototype.b=function(){for(var a in this.Mf)I(this.Mf[a]);this.Mf={};kh.a.b.call(this)};kh.prototype.update=aa();function lh(a,b){kh.call(this);this.fb=a;this.ba=b;this.Pn={}}D(lh,kh);function mh(a,b){lh.call(this,a,b);this.Pn.pumpkin={id:"pumpkin",Xp:jh}}D(mh,lh);function nh(){this.ga=Array(256)}function oh(a,b){a.ga[b.id]=b};function ph(){G.call(this);this.gb={};this.Tc=[];this.La=this.$a=0}D(ph,G);t=ph.prototype;t.b=function(){this.Tc.length=0;ph.a.b.call(this)};t.update=function(){for(;this.Tc.length;){var a=this.Tc.shift();qh(this,a)}};t.Dc=s("La");t.get=function(a,b,c){return 0!=b>>7?m:this.gb[(a>>4&65535)<<16|c>>4&65535]||m};t.add=function(a){this.gb[(a.x>>4&65535)<<16|a.u>>4&65535]=a;0<a.re||this.Tc.push(a);this.$a++;this.La+=65792};t.remove=function(a){qh(this,a);0<a.re||E(this.Tc,a)};
function qh(a,b){delete a.gb[(b.x>>4&65535)<<16|b.u>>4&65535];a.La-=65792;a.$a--}t.Qk=function(a){this.Tc.push(a)};t.Rk=function(a){E(this.Tc,a)};function rh(){G.call(this);this.yo=Ue(0,191/255,1);this.Zc=Ue(110/255,110/255,110/255);this.Bd=Ue(1,1,-0.5);this.Ad=Ue(130/255,130/255,130/255);this.wa=Ue(1,1,1);Ve(this.wa,this.yo)}D(rh,G);rh.prototype.update=aa();function sh(a,b,c,d,e){this.id=a;this.name=b;this.$h=c;this.q=d;this.ht=0;this.Qs=1;this.it=0;this.km=e}sh.prototype.rk=s("km");function th(a,b,c,d,e){sh.call(this,a,b,c,d,e)}D(th,sh);var uh=new Qg(17,"block_gravel"),vh=new Qg(17,"block_stone"),wh=new Qg(17,"block_wood"),xh=new Qg(97,"block_stone"),yh=new Qg(17,"block_cloth");function zh(){sh.call(this,6,"Red Cloth",yh,17,129)}D(zh,th);function Ah(){sh.call(this,7,"Green Cloth",yh,17,145)}D(Ah,th);function Bh(){sh.call(this,8,"Yellow Cloth",yh,17,162)}D(Bh,th);function Ch(){sh.call(this,9,"Blue Cloth",yh,17,177)}D(Ch,th);function Dh(){sh.call(this,3,"Brick",vh,17,7)}D(Dh,th);function Eh(){sh.call(this,1,"Dirt",uh,17,2)}D(Eh,th);Eh.prototype.rk=function(a,b,c,d,e,f){if(f&1)switch(d){case 0:case 1:case 4:case 5:return 3;case 2:return 0;default:case 3:return 2}else return 2};function Fh(){sh.call(this,5,"Glass",xh,17,49)}D(Fh,th);function Gh(){sh.call(this,2,"Stone",vh,17,1)}D(Gh,th);function Hh(){sh.call(this,4,"Wood",wh,17,4)}D(Hh,th);function Ih(){G.call(this);this.Ca=new nh;oh(this.Ca,new Eh);oh(this.Ca,new Gh);oh(this.Ca,new Dh);oh(this.Ca,new Hh);oh(this.Ca,new Fh);oh(this.Ca,new zh);oh(this.Ca,new Ah);oh(this.Ca,new Bh);oh(this.Ca,new Ch);this.fd=new rh;H(this,this.fd);this.Jd=[];this.Qa=new ph;H(this,this.Qa)}D(Ih,G);t=Ih.prototype;t.b=function(){Ih.a.b.call(this)};t.tk=function(){var a;a="Chunks: "+(this.Qa.$a+" cached (");a+=Math.floor(this.Qa.Dc()/1E3)+"K), ";return a+=this.Qa.$a-this.Qa.Tc.length+" used"};
t.update=function(a){this.fd.update(a);this.Qa.update(a)};t.Ga=function(a,b,c){var d=this.Qa.get(a,b,c);if(d)return d;d=new Kg(this,a&-16,b&-128,c&-16);this.Qa.add(d);this.po(d);return d};t.$k=function(a){for(var b=0;b<this.Jd.length;b++){var c=this.Jd[b],d=c.qc,e=a.Sb,f=d.min,d=d.max,h=e.min,e=e.max;-1!=(d[0]<h[0]||f[0]>e[0]||d[1]<h[1]||f[1]>e[1]||d[2]<h[2]||f[2]>e[2]?-1:f[0]>h[0]||e[0]>d[0]||f[1]>h[1]||e[1]>d[1]||f[2]>h[2]||e[2]>d[2]?0:1)&&c.$k(a)}};t.yp=A;t.Qk=function(a){this.Qa.Qk(a)};t.Rk=function(a){this.Qa.Rk(a)};
t.po=A;t.Cc=function(a,b,c){var d=this.Qa.get(a,b,c);return d?d.Cc(a,b,c):0};t.hc=function(a,b,c,d){var e=this.Qa.get(a,b,c);if(e){if(2!=e.state)return L("setBlock before chunk fully loaded - inconsistent state!"),0}else return 0;e=e.hc(a,b,c,d);if(e!=d)for(d=0;d<this.Jd.length;d++)for(var f=this.Jd[d],h=a,j=b,k=c,n=0;n<f.v.length;n++)f.v[n].Oh(h,j,k,0);return e};function Jh(){Ih.call(this)}D(Jh,Ih);Jh.prototype.po=aa();function Kh(){this.buffer=new Uint8Array(0);this.offset=0;this.va=new Float32Array(16);this.Fa=new Uint8Array(this.va.buffer);this.fq=(this.lf=v.Float64Array?new Float64Array(1):m)?new Uint8Array(this.lf.buffer):m}t=Kh.prototype;t.Ej=function(a,b){this.buffer=a instanceof Uint8Array?a:new Uint8Array(a);this.offset=b};function Lh(a){var b=a.buffer[a.offset++];a=a.buffer[a.offset++];b=b<<8|a;return 32767<b?b-65536:b}
function Mh(a){var b=a.buffer[a.offset++],c=a.buffer[a.offset++],d=a.buffer[a.offset++];a=a.buffer[a.offset++];b=b<<24|c<<16|d<<8|a;return 2147483647<b?b-4294967296:b}function Nh(a){return a.buffer[a.offset++]}function Oh(a){var b=a.buffer[a.offset++];a=a.buffer[a.offset++];return b<<8|a}t.ca=function(){var a=this.buffer[this.offset++],b=this.buffer[this.offset++],c=this.buffer[this.offset++],d=this.buffer[this.offset++];return a<<24|b<<16|c<<8|d};
t.z=function(){for(var a=0,b=0,c;(c=this.buffer[this.offset++]&255)&128;)a|=(c&127)<<b,b+=7;return a|c<<b};t.ni=function(){var a=this.z();return(a<<31>>31^a)>>1^a&-2147483648};t.ko=function(){this.Fa[0]=this.buffer[this.offset++];this.Fa[1]=this.buffer[this.offset++];this.Fa[2]=this.buffer[this.offset++];this.Fa[3]=this.buffer[this.offset++];return this.va[0]};t.Er=function(){for(var a=0;12>a;a++)this.Fa[a]=this.buffer[this.offset++];return this.va};
t.Fr=function(){for(var a=0;16>a;a++)this.Fa[a]=this.buffer[this.offset++];return this.va};t.t=function(){var a=Oh(this);Oh(this);for(var b=Array(a),c=0;c<a;){var d=this.buffer[this.offset++];if(128>d)b[c++]=String.fromCharCode(d);else if(191<d&&224>d){var e=this.buffer[this.offset++];b[c++]=String.fromCharCode((d&31)<<6|e&63)}else{var e=this.buffer[this.offset++],f=this.buffer[this.offset++];b[c++]=String.fromCharCode((d&15)<<12|(e&63)<<6|f&63)}}return b.join("")};var Ph=m;
function Qh(){Ph||(Ph=new Kh);return Ph};function Rh(a){this.Nm=y(a)?a:1}Rh.cp=1;
Rh.prototype.so=function(a,b){switch(Rh.cp){case 1:tg(b,1);var c;a:{sg(b,a.x);sg(b,a.y);sg(b,a.u);tg(b,this.Nm);switch(this.Nm){default:case 0:c=new Uint8Array(a.Fb.buffer);b.ea(4+c.length);b.bb(c.length);for(var d=0;d<c.length;d++)b.buffer[b.offset++]=c[d];break;case 1:b.ea(65668);d=b.offset+4;c=a.Fb;for(var d=b.buffer.subarray(d,d+65664),e=0,f=0,h=0,j=0;j<c.length;j++){var k=c[j];j&&k==f?h++:(f=k,h=1);if(j>=c.length-2||c[j+1]!=f)1<h||255==f>>8?(d[e++]=255,d[e++]=h>>8,d[e++]=h&255,d[e++]=f>>8,d[e++]=
f&255):(d[e++]=k>>8,d[e++]=k&255)}c=e;if(0>c){c=q;break a}b.bb(c);b.offset+=c;break;case 2:c=q;break a}c=l}return c;default:return q}};
Rh.prototype.Wm=function(a,b){switch(Nh(b)){case 1:var c;a:{c=Mh(b);var d=Mh(b),e=Mh(b);a.x=c;a.y=d;a.u=e;var f=a.Sb,h=c+16,j=d+128,k=e+16;Q(f.min,c,d,e);Q(f.max,h,j,k);d=Nh(b);c=a.Fb;switch(d){default:case 0:b.ca();d=0;for(e=b.offset;32768>d;d++,e+=2)c[d]=b.buffer[e+1]<<8|b.buffer[e];break;case 1:h=b.ca();d=b.buffer;f=b.offset;e=0;f=f?f:0;h=h?h:d.length;for(j=f;j<f+h;)if(k=d[j++],255==k)for(var k=d[j++]<<8|d[j++],n=d[j++]<<8|d[j++],p=0;p<k;p++)c[e++]=n;else c[e++]=k<<8|d[j++];break;case 2:c=q;break a}a.mh=
q;a.state=2;a.map.$k(a);c=l}return c;default:return q}};Rh.Bl=m;Rh.ln=function(){Rh.Bl||(Rh.Bl=new Rh(1));return Rh.Bl};Rh=rf(Rh,"blk.io.ChunkSerializer",{so:"serializeToWriter",Wm:"deserializeFromReader"});function Sh(a){this.factory=a;this.Qc=this.kg=0}t=Sh.prototype;t.getTime=s("kg");t.setTime=function(a){this.kg=(1E3*a|0)/1E3};t.read=function(a){var b=this.factory.q;b&2&&(this.kg=a.z()/1E3);b&4||(this.Qc=a.z())};t.write=function(a){var b=this.factory.q;b&2&&a.pc(1E3*this.kg|0);b&4||a.pc(this.Qc)};t.td=function(){this.factory.td(this)};function Th(a){Sh.call(this,a);this.wl=this.Si=0;this.Ih=q}D(Th,Sh);Th.prototype.read=function(a){Th.a.read.call(this,a);this.Si=a.z()/1E3;this.Ih=q};
Th.prototype.write=function(a){Th.a.write.call(this,a);a.pc(1E3*this.Si|0)};function Uh(a){Sh.call(this,a);this.ei=0}D(Uh,Sh);Uh.prototype.read=function(a){Uh.a.read.call(this,a);this.ei=a.z()};Uh.prototype.write=function(a){Uh.a.write.call(this,a);a.pc(this.ei)};function Vh(a,b,c,d){G.call(this);this.ma=a;this.factory=b;this.dl=m;this.Ud=c;this.ed=d;this.la=m;this.O=[];this.ta=0;this.Pb=Wh(b,this);this.hb=d&(Xh|Yh)?Wh(b,this):m;this.Y=[]}D(Vh,G);t=Vh.prototype;t.b=function(){var a=this.getParent();a&&(E(a.O,this),a.Qd(this));this.factory.zd.push(this.Pb);this.hb&&this.factory.zd.push(this.hb);for(a=0;a<this.Y.length;a++)this.factory.zd.push(this.Y[a]);Vh.a.b.call(this)};t.ob=s("ma");t.getParent=s("la");
function Zh(a,b){if(a.la!=b){var c=a.la;a.la=b;a.el(c,b);c&&(E(c.O,a),c.Qd(a));b&&b.wj(a)}}t.wj=function(a){this.O.push(a);this.Zg(a)};t.el=A;t.Zg=A;t.Qd=A;t.sk=ca(m);function U(a){return a.hb||a.Pb}t.read=function(a){this.Pb.read(a)};t.pl=function(a){this.Pb.pl(a)};t.write=function(a){this.Pb.write(a)};function $h(a,b){if(a.ed&Xh){1==a.Y.length&&(a.Y[0].time=b);var c=Wh(a.factory,a);c.time=b;a.Pb.Pj(c);a.Y.push(c)}}
t.Mh=function(a){var b=this.ed;if(this.hb){this.Pb.eh(this.hb);if(b&Xh){var c=this.hb;if(this.Y.length&&!(this.Y[0].time>a)){for(var d=m,e=1;e<this.Y.length&&!(d=this.Y[e],d.time>=a);e++);if(e>=this.Y.length){d=this.Y[this.Y.length-1];c.Mh(d,d,0);for(c=0;c<this.Y.length-1;c++)this.factory.zd.push(this.Y[c]);this.Y.splice(0,this.Y.length-1)}else{var f=this.Y[e-1];a=(a-f.time)/(d.time-f.time);a=Math.min(Math.max(a,0),1);c.Mh(f,d,a);d=1<=a?e:e-1;if(0<d){for(c=0;c<d;c++)this.factory.zd.push(this.Y[c]);
this.Y.splice(0,d)}}}}b&Yh&&this.Pb.Qj(this.hb)}};t.fh=function(a){a=ai(this.ma.Ub[a]||m);a.Qc=this.Ud;return a};t.Ta=function(a){a instanceof Uh&&(0==a.ei?Zh(this,m):Zh(this,this.ma.B[a.ei]||m))};function bi(a,b,c){a.$j||ci(a.ma.cg,b,c===i?0:c,a.update,a)}t.qd=function(){this.hb&&this.Pb.eh(this.hb)};t.zr=A;t.Ck=function(){var a=!!this.ta;this.ta|=di;a||(a=this.ma,a.jb[a.ib++]=this)};t.te=function(){this.ta=0;this.Pb.te();this.hb&&this.hb.te()};var Yh=4,Xh=8,di=2;function ei(a){G.call(this);this.Kr=a}D(ei,G);function fi(a){G.call(this);this.Lr=a;this.vl=[[],[],[],[],[]];this.No=[]}D(fi,G);function ci(a,b,c,d,e){var f=a.No.pop()||new gi;f.Ar=b;f.ul=a.Lr.W.mb;f.Oi=-1==c?0:0==c?f.ul+0.001:c;f.D=d;f.Kj=e||v;a=a.vl[b];b=0;for(c=a.length;b<c;)d=b+c>>1,0<f.Oi-a[d].Oi?b=d+1:c=d;a.splice(b,0,f)}var hi=Number.MAX_VALUE;
fi.prototype.update=function(a){a=a.time;for(var b=lc(),c=this.vl.length-1;0<=c;c--){for(var d=this.vl[c];d.length;){var e=d[0];if(e.Oi>a)break;d.shift();var f=a-e.ul,h=e.D,j=e.Kj;e.D=e.Kj=m;this.No.push(e);h.call(j,a,f)}if(lc()-b>=hi)break}};function gi(){this.Ar=ii;this.Oi=this.ul=0;this.Kj=this.D=m}var ii=0;function ji(){this.Gf=this.bi=this.Lb=this.Zn=this.zn=this.Rf=this.ci=this.md=this.ee=this.ff=this.uh=this.gf=this.wh=this.ef=this.th=0}ji.prototype.update=function(a){this.Lb+=this.ef;this.Lb+=this.gf;this.Lb+=this.ff;this.Lb+=this.md;this.bi+=this.Rf;1<=a-this.Gf&&(this.Gf=a,this.zn=this.Lb,this.Zn=this.bi,this.bi=this.Lb=0);this.ci=this.Rf=this.ee=this.md=this.uh=this.ff=this.wh=this.gf=this.th=this.ef=0};function ki(a,b){for(var c=String(a);c.length<b;)c=" "+c;return c}
ji.prototype.Gh=function(){return["i/s:",ki(Math.round(this.zn),4)," o/s:",ki(Math.round(this.Zn),4)," ec:",ki(this.th,2),"/",ki(this.ef,4)," eu:",ki(this.wh,2),"/",ki(this.gf,4)," ed:",ki(this.uh,2),"/",ki(this.ff,4)," ic:",ki(this.ee,2),"/",ki(this.md,4)," oc:",ki(this.ci,2),"/",ki(this.Rf,4)].join("")};function li(a,b,c){this.Rc=a;this.Qp=b;this.q=c;this.Tl=[]}function ai(a){return a.Tl.length?(a=a.Tl.pop(),a.Qc=0,a):new a.Qp(a)}li.prototype.td=function(a){this.Tl.push(a)};function mi(a,b){ei.call(this,a);this.n=new ji;this.cg=new fi(a);H(this,this.cg);this.rg=[];this.Ub={};this.dk={};this.Yk=b;this.B={};this.bg=m;this.jb=Array(256);this.ib=0;var c=new li(0,Uh,0);this.Ub[c.Rc]=c}D(mi,ei);function ni(a,b){a.dk[b.Rc]=b}function oi(a){var b=a.Yk;a.Yk+=2;return b}t=mi.prototype;t.Rj=function(a,b){var c=this.dk[a].Rj(this,oi(this),b);this.Kd(c);return c};t.Kd=function(a){this.B[a.Ud]=a;var b=!!a.ta;a.ta|=1;b||(this.jb[this.ib++]=a);a.ed&128&&(this.bg=a)};
t.gn=function(a,b){for(var c in this.B)a.call(b||v,this.B[Number(c)])};t.ud=function(a,b){if(!(a.ta&4)){switch(b||pi){default:case pi:for(var c=a.O.length-1;0<=c;c--){var d=a.O[c];a.Qd(d);a.ma.ud(d)}if(d=a.sk())for(c=0;c<d.length;c++)a.ma.ud(d[c]);break;case qi:for(c=0;c<a.O.length;c++)Zh(a.O[c],m);if(d=a.sk())for(c=0;c<d.length;c++)Zh(d[c],m);case ri:}delete this.B[a.Ud];c=!!a.ta;a.ta|=4;c||(this.jb[this.ib++]=a);I(a)}};t.fh=function(a){a=ai(this.Ub[a]||m);a.Qc=0;return a};
t.xh=function(a,b){for(var c=0;c<b;c++){var d=a[c],e=d.Qc;0==e?this.Ta(d):(e=this.B[e]||m)&&e.Ta(d);d instanceof Th&&(d.Ih=l)}};t.Ta=A;t.fo=function(){for(var a=0;a<this.ib;a++){var b=this.jb[a];b.qd()}for(a=0;a<this.ib;a++){b=this.jb[a];this.jb[a]=m;if(b.ta&1)for(var c=0;c<this.rg.length;c++)this.rg[c].df(b);if(b.ta&4)for(c=0;c<this.rg.length;c++)this.rg[c].vh(b);b.te()}this.ib=0};t.ll=function(a){for(var b=0;b<this.ib;b++){var c=this.jb[b];c.zr(a);this.ho(a,c)}};t.ho=A;
t.qe=function(){for(var a=0;a<this.ib;a++){var b=this.jb[a];this.jb[a]=m;b.te()}this.ib=0};var pi=0,qi=1,ri=2,mi=rf(mi,"gf.sim.Simulator",{gn:"forEachEntity",xh:"executeCommands",fo:"postNetworkUpdateEntities",ll:"postTickUpdateEntities",qe:"postUpdate"});function si(){this.zj=[];this.i=0}si.prototype.compact=aa();si.prototype.Ua=s("i");si.prototype.zg=function(a){this.zj[this.i++]=a};function ti(a){for(var b=0;b<a.i;b++){var c=a.zj[b];c.factory.td(c)}a.i=0};function ui(){this.Sn=1;this.Rl=[];this.Ed=0;this.al=[];this.oe=0;this.$n=[];this.bl=0}ui.prototype.compact=aa();ui.prototype.zg=function(a){this.al[this.oe++]=a;a instanceof Th&&(a.wl=this.Sn++,a.Ih=q,this.$n[this.bl++]=a)};
ui.prototype.write=function(a){a.pc(this.Sn-1);var b=this.oe;a.pc(this.oe);for(var c=0;c<this.oe;c++){var d=this.al[c];this.al[c]=m;a.pc(d.factory.Rc);d.write(a);d instanceof Th?this.Rl[this.Ed++]=d:d.factory.td(d)}this.bl=this.oe=0;1500<this.Ed&&L("massive backup of commands, dying");return b};function W(a,b){mi.call(this,a,1);this.rb=b;b.Ja.X(30,this.un,this);this.Nh=[];this.Af=new si;this.ne=new ui;this.Ff=0}D(W,mi);W.prototype.b=function(){W.a.b.call(this)};W.prototype.Ib=function(a){return this.rb.Ab[a]||m};W.prototype.Kd=function(a){W.a.Kd.call(this,a);a.ed&(Yh|Xh)&&this.Nh.push(a)};W.prototype.ud=function(a,b){W.a.ud.call(this,a,b);a.ed&(Yh|Xh)&&E(this.Nh,a)};W.bp=20;
W.prototype.update=function(a){var b=vi(this.Kr.W);this.Ak(b-0.5);this.xh(this.Af.zj,this.Af.Ua());ti(this.Af);this.cg.update(a);this.ll(a);this.ro(a);this.qe(a);this.Se(a)};W.prototype.Ak=function(a){for(var b=0;b<this.Nh.length;b++)this.Nh[b].Mh(a);a=this.ne;this.xh(a.Rl,a.Ed);this.xh(a.$n,a.bl)};W.prototype.zi=function(a){this.ne.zg(a)};W.prototype.ro=function(a){if(this.ne.oe&&a.time-this.Ff>=1/W.bp){this.Ff=a.time;a=wg();tg(a,31);var b=this.ne.write(a);this.n.ci+=b;this.n.Rf+=a.offset;this.rb.send(a.finish())}};
W.oj=15;W.prototype.Se=function(a){a.time-this.Gk<W.oj||(this.Gk=a.time,this.Af.compact(),this.ne.compact())};
W.prototype.un=function(a,b,c){b=c.z()/1E3;var d=c.z(),e=c.z(),f=c.z(),h=c.z();a=c.z();this.n.th+=e;this.n.wh+=f;this.n.uh+=h;this.n.ee+=a;var j=this.ne,k=j.Rl,n=j.Ed;if(n)if(k[n-1].wl<=d){for(var p=0;p<n;p++){var r=k[p];r.factory.td(r)}j.Ed=0}else{for(var w=n,p=0;p<n;p++){r=k[p];if(r.wl>d){w=p;break}r.factory.td(r)}k.splice(0,w);j.Ed-=w}for(d=0;d<this.ib;d++)j=this.jb[d],this.jb[d]=m,j.te();this.ib=0;k=m;for(d=j=0;d<e;d++){var j=c.offset,p=c.z()<<1,u=c.z(),r=c.z(),w=c.z(),n=c.z(),u=this.dk[u]||m;
if(!u)return q;(w=w?this.rb.cj[w]||m:m)&&(w!=wi(this.rb)&&r&Yh)&&(r&=~Yh);p=u.Rj(this,p,r);p.dl=w;p.read(c);this.n.ef+=c.offset-j;$h(p,b);this.Kd(p);n&&(k||(k=[]),k.push([p,n]))}for(d=0;d<f;d++){j=c.offset;p=c.z()<<1;p=this.B[p]||m;if(!p)return q;p.pl(c);this.n.gf+=c.offset-j;$h(p,b)}for(d=0;d<h;d++){j=c.offset;p=c.z()<<1;this.n.ff+=c.offset-j;p=this.B[p]||m;if(!p)return q;this.ud(p,ri)}if(k)for(d=0;d<k.length;d++){p=k[d][0];b=this.B[k[d][1]]||m;if(!b)return q;Zh(p,b)}this.fo();for(d=0;d<a;d++){j=
c.offset;b=c.z();b=this.Ub[b]||m;if(!b)return q;b=ai(b);b.read(c);this.n.md+=c.offset-j;this.Af.zg(b)}return l};W=rf(W,"gf.sim.ClientSimulator",{update:"update",Ak:"interpolateEntities",ro:"sendPendingCommands_",Se:"compact_",un:"handleSyncSimulation_"});function xi(a){switch(a){case 0:return"user closed the connection";case 1:return"socket killed or timed out";case 2:return"network protocol mismatch";case 3:return"unexpected data sent/received";case 4:return"access denied";case 5:return"kicked by console";case 6:return"banned";case 7:return"server full";default:return"unknown"}};function yi(){this.Kp=this.Jp=this.ot=this.Os=this.Vs=this.Ws=this.mm=0}yi.prototype.s=function(){return new yi};yi.prototype.toString=ca("[stats]");var zi=function(){var a;return ub?(a=/Windows NT ([0-9.]+)/,(a=a.exec(vb()))?a[1]:"0"):tb?(a=/10[_.][0-9_.]+/,(a=a.exec(vb()))?a[0].replace(/_/g,"."):"10"):""}();function Ai(){this.Vl="";this.type=Bi;this.platform=Ci;this.pe="";this.Sd=Di}Ai.prototype.s=function(){var a=new Ai;a.Vl=this.Vl;a.type=this.type;a.platform=this.platform;a.pe=this.pe;a.Sd=this.Sd;return a};Ai.prototype.toString=function(){return[this.type,this.platform+this.pe,this.Sd].join("/")};var Bi="unknown",Ci="other",Di="desktop";function Ei(){this.Fg="none";this.Eg="0";this.Q="User"}Ei.prototype.s=function(){var a=new Ei;a.Fg=this.Fg;a.Eg=this.Eg;a.Q=this.Q;return a};Ei.prototype.toString=ca("[user]");function Fi(a){a=wa(va(xa(a)));return!a.length?"User":a};function Gi(a,b,c,d,e){this.j=a||"";this.oc=b||0;this.q=c||0;this.info=d||new Ei;this.Ag=e||new Ai;this.Td=0;this.n=new yi;this.data=this.Ka=m}Gi.prototype.toString=function(){return this.info.Q+" ("+this.j+"/"+this.oc+")"};function Hi(a){return new Gi(a.j,a.oc,a.q,a.info.s(),a.Ag.s())};function Ii(a,b,c){mi.call(this,a,2);this.rb=b;this.rb.Aa.push(this);this.rb.Ja.X(31,this.rn,this);this.sr=c;this.v=[];this.Fe={};this.Nj=new si}D(Ii,mi);t=Ii.prototype;t.b=function(){qc(this.v);Ii.a.b.call(this)};t.Ib=function(a){return this.rb.Ab[a]||m};t.xj=function(a){this.v.push(a);var b=a.Ib();b&&(this.Fe[b.j]=a);this.gn(function(b){a.rr(b)},this)};t.sl=function(a){var b=a.Ib();b&&delete this.Fe[b.j];E(this.v,a);I(a)};
t.update=function(a){for(var b=0;b<this.v.length;b++)this.v[b].Ps();this.cg.update(a);this.ll(a);this.qe(a);this.Se(a)};t.Ta=aa();t.zi=function(a,b){var c=this.Fe[b.j];c&&c.$s(a);this.Nj.zg(a)};t.ho=function(a,b){if(!(b.ed&1))for(var c=0;c<this.v.length;c++)this.v[c].rr(b)};t.qe=function(a){for(var b=0;b<this.v.length;b++)this.v[b].flush(a.time);ti(this.Nj);Ii.a.qe.call(this,a)};Ii.oj=15;t=Ii.prototype;t.Se=function(a){if(!(a.time-this.Gk<Ii.oj)){this.Gk=a.time;this.Nj.compact();for(a=0;a<this.v.length;a++)this.v[a].compact()}};
t.Oj=A;t.Xj=A;t.Xl=function(a){var b=this.Fe[a.j]||m;b||(b=new this.sr(this,this.rb,a),this.xj(b))};t.Yl=function(a){(a=this.Fe[a.j]||m)&&this.sl(a)};t.Zl=A;t.rn=function(a,b,c){if(!a.zb)return q;b=this.Fe[a.zb.j]||m;if(!b)return q;var d=c.z(),e=c.z();this.n.ee+=e;this.n.md+=a.data.byteLength;for(var f=0;f<e;f++){var h=c.z(),h=this.Ub[h]||m;if(!h)return q;h=ai(h);h.read(c);var j=0==h.Qc;j||(j=this.B[h.Qc]||m,j=!j||j.dl!=a.zb);if(j)return h.td(),q;b.Zs(h)}b.et(d);return l};
Ii=rf(Ii,"gf.sim.ServerSimulator",{update:"update",qe:"postUpdate",Se:"compact_",rn:"handleExecCommands_"});function Ji(a){a=U(a.ma.bg);a.ij===i&&(a.ij=a.sg?a.fa.ob().B[a.sg]||m:m);return a.ij};function Ki(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],h=2*c,j=2*d,k=2*e,n=h*f,p=j*f,f=k*f,h=h*c,r=j*c,c=k*c,j=j*d,d=k*d,e=k*e;b[0]=1-(j+e);b[1]=r+f;b[2]=c-p;b[3]=0;b[4]=r-f;b[5]=1-(h+e);b[6]=d+n;b[7]=0;b[8]=c+p;b[9]=d-n;b[10]=1-(h+j);b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1}
function Li(a,b,c,d){var e=a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3];if(1<e||-1>e)return se(d,b),d;var f=1;0>e&&(f=-1,e=-e);var h=Math.acos(e);if(1E-6>=h)return se(d,b),d;var j=1/Math.sin(h),e=Math.sin((1-c)*h)*j;c=f*Math.sin(c*h)*j;d[0]=a[0]*e+b[0]*c;d[1]=a[1]*e+b[1]*c;d[2]=a[2]*e+b[2]*c;d[3]=a[3]*e+b[3]*c;return d};function Mi(a,b,c,d){Vh.call(this,a,b,c,d);this.Qb=l;this.Pd=N();this.Jl=bf();U(this).wo(Ue(1,1,1))}D(Mi,Vh);Mi.prototype.qd=function(){Mi.a.qd.call(this);this.Qb=l};
function Ni(a){if(a.Qb){a.Qb=q;var b=U(a),c=b.dc,d=b.ue,e=b.wi;a.Pd[0]=c[0];a.Pd[1]=c[1];a.Pd[2]=c[2];a.Pd[3]=b.Ug*Math.max(e[0],Math.max(e[1],e[2]));b=a.Jl;Ki(d,b);var d=e[0],f=e[1],e=e[2],h=b[1],j=b[2],k=b[3],n=b[4],p=b[5],r=b[6],w=b[7],u=b[8],z=b[9],x=b[10],M=b[11],K=b[12],V=b[13],ia=b[14],Ga=b[15];b[0]*=d;b[1]=h*d;b[2]=j*d;b[3]=k*d;b[4]=n*f;b[5]=p*f;b[6]=r*f;b[7]=w*f;b[8]=u*e;b[9]=z*e;b[10]=x*e;b[11]=M*e;b[12]=K;b[13]=V;b[14]=ia;b[15]=Ga;d=c[0];f=c[1];c=c[2];e=b[1];h=b[2];j=b[3];k=b[4];n=b[5];
p=b[6];r=b[7];w=b[8];u=b[9];z=b[10];x=b[11];M=b[12];K=b[13];V=b[14];ia=b[15];b[0]+=d*j;b[1]=e+f*j;b[2]=h+c*j;b[3]=j;b[4]=k+d*r;b[5]=n+f*r;b[6]=p+c*r;b[7]=r;b[8]=w+d*x;b[9]=u+f*x;b[10]=z+c*x;b[11]=x;b[12]=M+d*ia;b[13]=K+f*ia;b[14]=V+c*ia;b[15]=ia;a.getParent()}}
Mi.prototype.Ne=function(a){var b=U(this),c=a.ej,d=b.dc;Ki(b.ue,c);if(c==c){var b=c[1],e=c[2],f=c[3],h=c[6],j=c[7],k=c[11];c[1]=c[4];c[2]=c[8];c[3]=c[12];c[4]=b;c[6]=c[9];c[7]=c[13];c[8]=e;c[9]=h;c[11]=c[14];c[12]=f;c[13]=j;c[14]=k}else c[0]=c[0],c[1]=c[4],c[2]=c[8],c[3]=c[12],c[4]=c[1],c[5]=c[5],c[6]=c[9],c[7]=c[13],c[8]=c[2],c[9]=c[6],c[10]=c[10],c[11]=c[14],c[12]=c[3],c[13]=c[7],c[14]=c[11],c[15]=c[15];b=-d[0];e=-d[1];d=-d[2];f=c[1]*b+c[5]*e+c[9]*d+c[13];h=c[2]*b+c[6]*e+c[10]*d+c[14];j=c[3]*b+
c[7]*e+c[11]*d+c[15];c[12]=c[0]*b+c[4]*e+c[8]*d+c[12];c[13]=f;c[14]=h;c[15]=j;Oi(a)};function Pi(a,b,c,d){Mi.call(this,a,b,c,d);this.Mb=m;this.oi=q}D(Pi,Mi);t=Pi.prototype;t.b=function(){I(this.Mb);this.Mb=m;Pi.a.b.call(this)};t.Gr=function(){var a=U(this).rf();if(this.oi){this.Mb&&(I(this.Mb),this.Mb=m);if(a){a:{var b=this.ma.bg.Eh.On,c=b.Mf[a];if(!c){c=b.Pn[a];c=!c?m:c.Xp(b.fb,b.ba);if(!c){a=m;break a}b.Mf[a]=c}a=c.Ve()}this.Mb=a}this.oi=q}};t.rf=function(){return U(this).rf()};
t.qd=function(){Pi.a.qd.call(this);var a=U(this).rf(),a=a.length?a:m;if(a!=(this.Mb?this.Mb.Uk.id:m)&&!this.oi)this.oi=l,ci(this.ma.cg,ii,0,this.Gr,this)};t.A=function(a,b,c,d){if(this.Mb){b=this.Mb;a=cf();d.ga.push({ar:b,transform:a});this.Qb&&Ni(this);d=this.Jl;a[0]=d[0];a[1]=d[1];a[2]=d[2];a[3]=d[3];a[4]=d[4];a[5]=d[5];a[6]=d[6];a[7]=d[7];a[8]=d[8];a[9]=d[9];a[10]=d[10];a[11]=d[11];a[12]=d[12];a[13]=d[13];a[14]=d[14];a[15]=d[15];for(d=this.getParent();d!=m;)d instanceof Mi&&ef(d.Jl,a,a),d=d.getParent()}};function Qi(a,b,c,d){Pi.call(this,a,b,c,d)}D(Qi,Pi);function Ri(a){a=U(a);a.Jh===i&&(a.Jh=a.yf?a.fa.ob().B[a.yf]||m:m);return a.Jh};O();O();function Si(){this.height=this.width=1;this.Rb=i;this.pr=0.1;this.Ah=100;this.Tf=l;this.Qf=cf();this.nl=cf();this.ej=cf();this.Ek=cf();this.Wc=cf();this.fe=cf();this.position=O();this.direction=O();this.nk=[N(),N(),N(),N(),N(),N()]}function Ti(a,b){var c,d;b instanceof Md?(c=b.width,d=b.height):(c=b,d=i);if(a.width!=c||a.height!=d)a.width=c,a.height=d,a.Tf=l}function Ui(a,b){a.Ah!=b&&(a.Ah=b,a.Tf=l)}
function Oi(a){if(a.Tf){a.Tf=q;var b=2/a.width,c=2/-a.height;df(a.Qf,b,c,1,0,-1,1,0,1);var b=a.Rb===i?a.width/a.height:a.Rb,c=a.pr,d=a.Ah,e=Math.PI/4/2,f=d-c,h=Math.sin(e);0==f||(0==h||0==b)||(e=Math.cos(e)/h,df(a.nl,e/b,e,-(d+c)/f,-1,0,0,-(2*c*d)/f,0));ef(a.nl,a.ej,a.Wc);ff(a.Wc,a.fe)}ef(a.nl,a.ej,a.Wc);ff(a.ej,a.Ek);ff(a.Wc,a.fe);c=a.Wc;b=a.nk;re(b[0],c[3]+c[0],c[7]+c[4],c[11]+c[8],c[15]+c[12]);re(b[1],c[3]-c[0],c[7]-c[4],c[11]-c[8],c[15]-c[12]);re(b[2],c[3]-c[1],c[7]-c[5],c[11]-c[9],c[15]-c[13]);
re(b[3],c[3]+c[1],c[7]+c[5],c[11]+c[9],c[15]+c[13]);re(b[4],c[3]+c[2],c[7]+c[6],c[11]+c[10],c[15]+c[14]);re(b[5],c[3]-c[2],c[7]-c[6],c[11]-c[10],c[15]-c[14]);for(c=0;c<b.length;c++)d=b[c],f=1/Math.sqrt(d[0]*d[0]+d[1]*d[1]+d[2]*d[2]),d[0]*=f,d[1]*=f,d[2]*=f,d[3]*=f;Q(a.position,0,0,0);gf(a.Ek,a.position,a.position);b=2*(0.5/a.width)-1;c=1-2*(0.5/a.height);d=Vi[0];f=Vi[1];Q(d,b,c,-1);Q(f,b,c,1);jf(a.fe,d,d);jf(a.fe,f,f);$e(d,f,a.direction);a=b=a.direction;a[0]=-b[0];a[1]=-b[1];a[2]=-b[2]}
var Vi=[O(),O(),O(),O(),O(),O(),O(),O()];function X(a,b){G.call(this);this.map=a;this.aa=Math.min(Math.max(Math.floor(b),X.qj),X.pj);this.sb=2*this.aa+1;this.gb=Array(this.sb*X.im*this.sb);this.rc=O();this.$=new Int32Array(3);this.qc=Hg(this.rc[0]-16*this.aa,0,this.rc[2]-16*this.aa,this.rc[0]+16*this.aa,128,this.rc[2]+16*this.aa);this.v=[];this.Xq=q}D(X,G);X.em=8;X.jp=16;X.qj=1;X.pj=16;X.im=1;t=X.prototype;t.b=function(){qc(this.v);X.a.b.call(this)};t.xj=function(a){this.v.push(a)};t.sl=function(a){E(this.v,a)};
t.An=function(a){Ve(this.rc,a);this.ql();this.Xq=l};t.update=function(a){Ve(this.rc,a);var b=a[0]>>4,c=a[2]>>4;a=b-this.$[0];var d=c-this.$[2];if(a||d){var b=b<<4,c=c<<4,e=this.qc,f=b+16*this.aa,h=c+16*this.aa;Q(e.min,b-16*this.aa,0,c-16*this.aa);Q(e.max,f,0,h);this.qc.max[0]+=16;this.qc.max[1]+=128;this.qc.max[2]+=16;this.$[0]+=a;this.$[1]+=0;this.$[2]+=d;this.ql()}};
t.ql=function(){this.$[0]=this.rc[0]>>4;this.$[1]=0;this.$[2]=this.rc[2]>>4;this.jo(this.$[0]-this.aa,0,this.$[2]-this.aa,this.sb,X.im,this.sb)};function Wi(a,b,c){b%=a.sb;c%=a.sb;0>b&&(b=a.sb+b);0>c&&(c=a.sb+c);return b+c*a.sb}
t.jo=function(a,b,c,d,e,f){for(b=a;b<a+d;b++)for(e=c;e<c+f;e++){var h=b,j=e,k=Wi(this,h,j);if(!(0>k||k>this.gb.length))if(h=this.map.Ga(h<<4,0,j<<4),h!=this.gb[k]){if(j=this.gb[k]){for(var n=0;n<this.v.length;n++)this.v[n].Jm(j);j.re--;j.re||j.map.Qk(j)}j=h;j.re||j.map.Rk(j);j.re++;this.gb[k]=h;for(n=0;n<this.v.length;n++)this.v[n].Im(h)}}};t.$k=function(a){for(var b=0;b<this.v.length;b++)this.v[b].Km(a),this.v[b].Ph(a.x,a.y,a.u,a.x+16-1,a.y+128-1,a.u+16-1,3)};
t.Ga=function(a,b,c){if(0>b||128<=b)return m;a>>=4;c>>=4;var d=Math.abs(c-this.$[2]);if(Math.abs(a-this.$[0])>this.aa||0!=b>>7||d>this.aa)return m;b=Wi(this,a,c);return 0>b||b>this.gb.length?m:this.gb[b]};t.hq=function(a,b){Ia(this.gb,a,b)};t.Bh=function(a,b,c){Xi(this,a,this.$[0]-this.aa,this.$[2]-this.aa,this.sb,b,c)};
function Xi(a,b,c,d,e,f,h){var j=X.js,k=16*(c+e),n=16*(d+e);Q(j.min,16*c,0,16*d);Q(j.max,k,128,n);a:{k=j.min;n=j.max;Ve(Vi[0],k);Q(Vi[1],k[0],k[1],n[2]);Q(Vi[2],k[0],n[1],k[2]);Q(Vi[3],k[0],n[1],n[2]);Q(Vi[4],n[0],k[1],k[2]);Q(Vi[5],n[0],k[1],n[2]);Q(Vi[6],n[0],n[1],k[2]);Ve(Vi[7],n);for(var k=0,n=b.nk,p=0;p<n.length;p++){for(var r=n[p],w=8,u=1,z=0;8>z;z++){var x=Vi[z];0>r[0]*x[0]+r[1]*x[1]+r[2]*x[2]+r[3]&&(u=0,w--)}if(!w){k=-1;break a}k+=u}k=6==k?1:0}if(1==k){b=j.min[0]>>4;c=j.max[0]>>4;d=j.max[2]>>
4;for(j=j.min[2]>>4;j<d;j++)for(e=b;e<c;e++)(k=a.Ga(e<<4,0,j<<4))&&f.call(h,k)}else if(0==k)if(1>=e)(a=a.Ga(c<<4,0,d<<4))&&f.call(h,a);else{j=e/2|0;for(e=0;1>=e;e++)for(k=0;1>=k;k++)Xi(a,b,c+k*j,d+e*j,j,f,h)}}
t.Bk=function(a,b){var c=m,d=Math.floor(a[0]),e=Math.floor(a[1]),f=Math.floor(a[2]),h=0==a[3]?0:0>a[3]?-1:1,j=0==a[4]?0:0>a[4]?-1:1,k=0==a[5]?0:0>a[5]?-1:1,n=(d+(0<h?1:0)-a[0])/a[3],p=(e+(0<j?1:0)-a[1])/a[4],r=(f+(0<k?1:0)-a[2])/a[5];isNaN(n)&&(n=Number.POSITIVE_INFINITY);isNaN(p)&&(p=Number.POSITIVE_INFINITY);isNaN(r)&&(r=Number.POSITIVE_INFINITY);var w=h/a[3],u=j/a[4],z=k/a[5];isNaN(w)&&(w=Number.POSITIVE_INFINITY);isNaN(u)&&(u=Number.POSITIVE_INFINITY);isNaN(z)&&(z=Number.POSITIVE_INFINITY);for(var x=
Math.min(b,16*this.sb),M=0;M<x;M++){var K=this.Ga(d,e,f);if(K&&(c=K.Bk(a)))break;n<p&&n<r?(n+=w,d+=h):p<r?(p+=u,e+=j):(r+=z,f+=k)}return c&&c.ak>b?m:c};t.Cc=function(a,b,c){var d=this.Ga(a,b,c);return d?d.Cc(a,b,c):0};t.hc=function(a,b,c,d){var e=this.Ga(a,b,c);if(!e||!e.hc(a,b,c,d))return q;for(d=0;d<this.v.length;d++)this.v[d].Oh(a,b,c,0);return l};X.jt=[O(),O()];X.js=new Gg;X=rf(X,"blk.env.ChunkView",{An:"initialize",update:"update",ql:"rebuildCube_",jo:"pullChunks_",hq:"forEachChunk",Bh:"forEachInViewport"});function Yi(a,b){G.call(this);this.rb=a;this.Oo=b;this.ve=[];this.Hk=-Yi.gm;this.Ff=0}D(Yi,G);Yi.gm=3;Yi.np=20;Yi.ap=100;t=Yi.prototype;t.dd=function(a){0<=Ha(this.ve,a)||(this.ve.push(a),this.Hk=0)};
t.Br=function(a,b){var c=Math.min(Yi.np,this.ve.length);pf("count",this.ve.length);if(a-this.Hk>Yi.gm){this.Hk=a;var d=Mg[0];Oa(this.ve,function(a,c){Q(d,a.x+8,b[1],a.u+8);var e=Ze(b,d);Q(d,c.x+8,b[1],c.u+8);return e-Ze(b,d)})}a-this.Ff>1/Yi.ap?this.Ff=a:c=0;if(c)for(var e=wg(),f=Rh.ln(),h=0;h<c;h++){var j=this.ve.shift();zg.x=j.x;zg.y=j.y;zg.u=j.u;var k=e,n=zg;tg(k,73);sg(k,n.x);sg(k,n.y);sg(k,n.u);if(!j.Ci){k=j;var n=f,p=j,r=wg();n.so(p,r)?n=r.finish():(r.offset=0,n=m);k.Ci=n}k=e;j=j.Ci;j instanceof
Uint8Array||(j=new Uint8Array(j));k.ea(j.length);for(n=0;n<j.length;n++)k.buffer[k.offset++]=j[n];this.rb.send(e.finish(),this.Oo);e.offset=0}};t.Km=function(a){this.dd(a)};t.Im=function(a){2==a.state&&this.dd(a)};t.Jm=A;t.Oh=A;t.Ph=A;Yi=rf(Yi,"blk.env.server.ChunkSendQueue",{Br:"process"});function Zi(a){Sh.call(this,a);this.Cg=0}D(Zi,Sh);Zi.prototype.read=function(a){Zi.a.read.call(this,a);this.Cg=a.ko()};Zi.prototype.write=function(a){Zi.a.write.call(this,a);a.Vo(this.Cg)};function $i(a,b,c,d){Mi.call(this,a,b,c,d);this.Rb=i;this.Db=this.r=m}D($i,Mi);$i.prototype.b=function(){this.r&&this.Db&&(E(this.r.Jd,this.Db),I(this.Db));$i.a.b.call(this)};$i.prototype.Al=function(a){this.r=a;this.Db=new X(a,X.jp);a.Jd.push(this.Db);this.Db.An(O());bi(this,1,0)};$i.prototype.update=function(){var a=aj,b=this.getParent();b instanceof Mi?(b.Qb&&Ni(b),se(a,b.Pd)):(this.Qb&&Ni(this),se(a,this.Pd));this.Db.update(a);bi(this,1,0)};
$i.prototype.Ne=function(a){if(this.Rb){var b=this.Rb;a.Rb!==b&&(a.Rb=b,a.Tf=l)}b=this.getParent();b instanceof Mi?b.Ne(a):$i.a.Ne.call(this,a)};var aj=N();function bj(a){Th.call(this,a);this.Ui=0}D(bj,Th);bj.prototype.read=function(a){bj.a.read.call(this,a);this.Ui=a.ca()};bj.prototype.write=function(a){bj.a.write.call(this,a);a.bb(this.Ui)};function cj(a,b,c,d){Vh.call(this,a,b,c,d)}D(cj,Vh);t=cj.prototype;t.ae=function(){return this.getParent()};t.Zg=function(a){cj.a.Zg.call(this,a)};t.Qd=function(a){cj.a.Qd.call(this,a)};t.Ta=function(a){cj.a.Ta.call(this,a);if(a instanceof bj){var b=this.ae();a:{for(var c=0;c<this.O.length;c++)if(this.O[c].Ud==a.Ui){a=this.O[c];break a}a=m}a&&U(b).to(a?a.Ud:0)}};
t.Ob=function(a,b){var c=b.V,d=b.K,e=Ri(this.ae()),f=this.O.length,h=e?Ha(this.O,e):0,e=h;d.xc&&(e=(h+(0<d.xc?1:-1))%f,0>e&&(e=f-1));49 in c.H?e=0:50 in c.H?e=1:51 in c.H?e=2:52 in c.H?e=3:53 in c.H?e=4:54 in c.H?e=5:55 in c.H?e=6:56 in c.H?e=7:57 in c.H?e=8:48 in c.H&&(e=9);e=Math.min(Math.max(e,0),f-1);e!=h&&(c=this.fh(67),c.Ui=(this.O[e]||m).Ud,this.ma.zi(c),this.ma.bg.Eh.ia());return l};function dj(a){Th.call(this,a);this.fc=this.za=this.cb=this.yi=this.xi=this.Eb=this.Wi=0}D(dj,Th);var ej=360*(1/32767)*Math.PI/180;dj.prototype.read=function(a){dj.a.read.call(this,a);this.Wi=Nh(a);this.Eb=Nh(a);this.Eb&1&&(this.xi=Oh(a),this.yi=Oh(a));this.cb=Lh(a);this.za=Lh(a)};dj.prototype.write=function(a){dj.a.write.call(this,a);tg(a,this.Wi);tg(a,this.Eb);this.Eb&1&&(ug(a,this.xi),ug(a,this.yi));rg(a,this.cb);rg(a,this.za)};function fj(){this.mk=l}
fj.prototype.Ta=function(a,b){var c=a.Si,d=a.cb*ej,e=a.za*ej,f=a.fc*ej,h=gj,j=Math.sin(d/2),d=Math.cos(d/2),k=Math.sin(e/2),e=Math.cos(e/2),n=Math.sin(f/2),f=Math.cos(f/2);h[0]=d*k*f+j*e*n;h[1]=j*e*f-d*k*n;h[2]=d*e*n-j*k*f;h[3]=d*e*f+j*k*n;b.vo(gj);if(this.mk){h=b.dc;j=hj[4];k=b.ue;d=b.dj;f=hj[5];e=Ye(d);1E-4<e?(n=Math.max(0,e-40*c),Xe(d,n/e,f)):Q(f,0,0,0);d=a.Wi;e=hj[0];e[0]=0;e[0]+=18*!!(d&1);e[0]-=18*!!(d&2);e[1]=0;e[1]+=18*!!(d&4);e[1]-=18*!!(d&8);e[2]=0;e[2]+=18*!!(d&16);e[2]-=18*!!(d&32);var d=
hj[1],n=k[0]*(k[0]+k[0]),p=k[3]*(k[0]+k[0]),r=k[0]*(k[1]+k[1]),w=k[1]*(k[1]+k[1]),u=k[3]*(k[1]+k[1]),z=k[0]*(k[2]+k[2]),x=k[1]*(k[2]+k[2]),M=k[2]*(k[2]+k[2]),k=k[3]*(k[2]+k[2]),K=e[0],V=e[1],e=e[2];d[0]=K*(1-w-M)+V*(r-k)+e*(z+u);d[1]=K*(r+k)+V*(1-n-M)+e*(x-p);d[2]=K*(z-u)+V*(x+p)+e*(1-n-w);k=hj[2];(e=Ye(d))?Xe(d,1/e,k):Q(k,0,0,0);e=Ye(d);18<e&&(Xe(d,18/e,d),e=18);d=e-(f[0]*k[0]+f[1]*k[1]+f[2]*k[2]);0<d&&(e=20*e*c,e>d&&(e=d),Xe(k,e,k),We(k,f,f));d=hj[3];Xe(f,c,d);We(h,d,j);b.setPosition(j);b.setVelocity(f)}};
var hj=[O(),O(),O(),O(),O(),O()];N();N();N();bf();new Float32Array(6);var gj=N();function ij(a){Pc.call(this);this.Ha=a;this.enabled=l}D(ij,Pc);ij.prototype.Xa=A;ij.prototype.ja=ba("enabled");function jj(a){ij.call(this,a)}D(jj,ij);function kj(){this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=q;this.h={};this.H={};this.ie={};this.Gc=this.he=0}kj.prototype.s=function(){var a=new kj;a.ctrlKey=this.ctrlKey;a.altKey=this.altKey;a.shiftKey=this.shiftKey;a.metaKey=this.metaKey;a.h=Va(this.h);a.H=Va(this.H);a.ie=Va(this.ie);a.he=this.he;a.Gc=this.Gc;return a};kj.prototype.reset=function(){this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=q;this.he&&(Ta(this.h),this.he=0);this.Gc&&(Ta(this.H),Ta(this.ie),this.Gc=0)};
kj.prototype.Xa=function(){this.Gc&&(Ta(this.H),Ta(this.ie),this.Gc=0)};kj.prototype.update=function(a,b){var c=a.zc.keyIdentifier,d=a.keyCode;d?(25==d&&a.shiftKey&&(d=9),zb&&d in lj&&(d=lj[d])):c&&c in mj&&(d=mj[c]);b?this.h[d]||(this.h[d]=l,this.H[d]=l,this.he++,this.Gc++):this.h[d]&&(delete this.h[d],this.ie[d]=l,this.he--,this.Gc++);switch(d){case 17:this.ctrlKey=b;break;case 18:this.altKey=b;break;case 16:this.shiftKey=b;break;case 91:case 92:this.metaKey=b}};
var mj={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},lj={61:187,59:186,224:91};function nj(a){ij.call(this,a);this.ok=m;this.c=new kj;this.enabled=q;this.ja(l)}D(nj,ij);function oj(a){if(a.ctrlKey||a.metaKey){switch(a.keyCode){case 82:return l;case 73:return l}if(a.shiftKey)switch(a.keyCode){case 74:return l}}else switch(a.keyCode){case 27:case 116:return l}return q}t=nj.prototype;t.uk=function(a){oj(a)||(a.preventDefault(),this.c.update(a,l),13 in this.c.H&&(this.c.altKey||this.c.metaKey)&&this.ok&&this.ok())};t.Jq=function(a){oj(a)||(a.preventDefault(),this.c.update(a,q))};
t.Iq=function(){this.c.reset()};t.Nb=s("c");t.reset=function(){this.c.reset()};t.Xa=function(){this.c.Xa()};t.ja=function(a){this.enabled!=a&&(nj.a.ja.call(this,a),a?(a=Rd(this.Ha),this.listen(a,"keydown",this.uk),this.listen(a,"keyup",this.Jq),this.listen(a?a.parentWindow||a.defaultView:window,["focus","blur"],this.Iq)):Sc(this))};function pj(){this.sa=this.Pa=this.p=this.xc=this.wc=this.vc=this.clientY=this.clientX=this.screenY=this.screenX=0;this.U=q}pj.prototype.s=function(){var a=new pj;a.screenX=this.screenX;a.screenY=this.screenY;a.vc=this.vc;a.wc=this.wc;a.xc=this.xc;a.p=this.p;a.Pa=this.Pa;a.sa=this.sa;a.U=this.U;return a};pj.prototype.reset=function(){this.sa=this.Pa=this.p=this.xc=this.wc=this.vc=this.screenY=this.screenX=0;this.U=q};pj.prototype.Xa=function(){this.sa=this.Pa=this.xc=this.wc=this.vc=0};
pj.prototype.update=function(a,b){var c=a.zc,d=a.screenX,e=a.screenY,f=0,h=0;c.webkitMovementX!==i?(f=c.webkitMovementX,h=c.webkitMovementY):c.mozMovementX!==i?"mousemove"==a.type?(f=c.mozMovementX,h=c.mozMovementY):f=h=0:c.movementX!==i?(f=c.movementX,h=c.movementY):(f=d-this.screenX,h=e-this.screenY);this.screenX=d;this.screenY=e;this.clientX=a.clientX;this.clientY=a.clientY;this.vc+=f*b;this.wc+=h*b};function qj(a){ij.call(this,a);this.c=new pj;this.Ni=!(!a.requestPointerLock&&!a.mozRequestPointerLock&&!a.webkitRequestPointerLock);this.Ai=1;this.ph=this.gj=this.U=this.Mn=q;this.listen(a,"mousedown",this.Kq);this.listen(a,"mousemove",this.vf);this.listen(a,"mouseover",this.Mq);this.listen(a,"mouseout",this.Lq);this.listen(a,zb?"DOMMouseScroll":"mousewheel",this.Nq);this.listen(a,["selectstart","contextmenu"],function(a){a.preventDefault()});this.Ni&&(this.listen(document,["pointerlockchange","mozpointerlockchange",
"webkitpointerlockchange"],function(){this.U=document.pointerLockElement===a||document.mozPointerLockElement===a||document.webkitPointerLockElement===a}),this.listen(document,["pointerlockerror","mozpointerlockerror","webkitpointerlockerror"],function(){this.U=q}))}D(qj,ij);function rj(a){if(!a.Ni||a.U||!sj(a))return q;(a.Ha.requestPointerLock||a.Ha.mozRequestPointerLock||a.Ha.webkitRequestPointerLock).call(a.Ha);a.c.reset();return l}
function sj(a){return!a.enabled?q:a.Mn&&a.Ni?zb&&!document.mozFullscreenElement&&!document.mozFullScreenElement?q:l:q}function tj(a){a.gj=q;a.U&&((document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock).call(document),a.c.reset())}t=qj.prototype;
t.Kq=function(a){if(this.enabled&&(a.preventDefault(),!sj(this)||!rj(this))){this.c.update(a,this.Ai);switch(a.button){case 0:this.c.p|=1;this.c.Pa|=1;break;case 1:this.c.p|=2;this.c.Pa|=2;break;case 2:this.c.p|=4,this.c.Pa|=4}!this.U&&(this.c.p&&!this.ph)&&(this.ph=l,this.listen(Rd(this.Ha),"mousemove",this.vf),this.listen(Rd(this.Ha),"mouseup",this.sn),Rc(this,this.Ha,"mousemove",this.vf))}};
t.sn=function(a){if(this.enabled&&(!sj(this)||this.U)){a.preventDefault();this.c.update(a,this.Ai);switch(a.button){case 0:this.c.p&=-2;this.c.sa|=1;break;case 1:this.c.p&=-3;this.c.sa|=2;break;case 2:this.c.p&=-5,this.c.sa|=4}!this.U&&(!this.c.p&&this.ph)&&(this.ph=q,Rc(this,Rd(this.Ha),"mousemove",this.vf),Rc(this,Rd(this.Ha),"mouseup",this.sn),this.listen(this.Ha,"mousemove",this.vf))}};t.vf=function(a){if(this.enabled&&(!sj(this)||this.U))a.preventDefault(),this.c.update(a,this.Ai)};
t.Mq=function(a){this.enabled&&a.preventDefault()};t.Lq=function(a){this.enabled&&a.preventDefault()};t.Nq=function(a){if(this.enabled){a.preventDefault();var b=0;a=a.zc;y(a.wheelDelta)?(b=a.wheelDelta/120,yb&&(b=-b)):y(a.detail)&&(b=-a.detail/3);this.c.xc+=b}};t.Nb=function(){this.c.U=this.U;return this.c};t.Xa=function(){this.c.Xa()};t.ja=function(a){a!=this.enabled&&(qj.a.ja.call(this,a),a?this.gj&&(rj(this),this.gj=q):this.U&&(tj(this),this.gj=l))};function uj(a){ij.call(this,a)}D(uj,ij);function vj(a,b){ei.call(this,a);this.Ha=b;this.Yd=this.Ce=this.K=this.V=m;this.V=new nj(b);H(this,this.V);this.K=new qj(b);H(this,this.K);this.Ce=new uj(b);H(this,this.Ce);this.Yd=new jj(b);H(this,this.Yd)}D(vj,ei);vj.prototype.Xa=function(){this.V&&this.V.Xa();this.K&&this.K.Xa();this.Ce&&this.Ce.Xa();this.Yd&&this.Yd.Xa()};vj.prototype.ja=function(a){this.V&&this.V.ja(a);this.K&&this.K.ja(a);this.Ce&&this.Ce.ja(a);this.Yd&&this.Yd.ja(a)};function wj(a,b,c,d){Vh.call(this,a,b,c,d)}D(wj,Vh);wj.prototype.ae=function(){return this.getParent()};function xj(a,b,c,d){Pi.call(this,a,b,c,d)}D(xj,Pi);xj.prototype.el=function(a,b){xj.a.el.call(this,a,b)};xj.prototype.gl=A;function yj(a,b,c,d){Vh.call(this,a,b,c,d);this.rs=new Si;this.mr=new fj}D(yj,wj);
yj.prototype.Ta=function(a){yj.a.Ta.call(this,a);var b=this.ae();if(b&&a instanceof dj){this.mr.Ta(a,U(b));var c,d=U(this);d.gi===i&&(d.gi=d.Uf?d.fa.ob().B[d.Uf]||m:m);c=d.gi;var d=zj(U(c)),e=d.Db,f=this.rs;Ui(f,16*d.Db.aa+16);d.Ne(f);if(a.Eb&&(d=Ri(b))){var h=Aj;h.time=a.getTime();h.viewport=f;h.Lm=e;h.il=c;h.wp=b;h.screenX=0.5;h.screenY=0.5;a.Eb&1&&(h.screenX=a.xi/65535,h.screenY=a.yi/65535);var b=h.ol,j=2*(h.screenX/f.width)-1,k=1-2*(h.screenY/f.height);c=Vi[0];e=Vi[1];Q(c,j,k,-1);Q(e,j,k,1);jf(f.fe,
c,c);jf(f.fe,e,e);$e(c,e,e);var f=c[1],j=c[2],k=e[0],n=e[1],e=e[2];b[0]=c[0];b[1]=f;b[2]=j;b[3]=k;b[4]=n;b[5]=e;a.Ih||(a=a.Eb,a&4&&d.gl(h,0),a&32&&d.gl(h,1))}}};var Aj=new function(){this.time=0;this.wp=this.il=this.Lm=this.viewport=m;this.screenY=this.screenX=0;this.ol=new Float32Array(6)};function Bj(a,b,c,d){Pi.call(this,a,b,c,d)}D(Bj,xj);Bj.prototype.qf=function(){var a=U(this).qf();return Ji(this).r.Ca.ga[a]};Bj.prototype.xl=function(a){U(this).xl(a.id)};
Bj.prototype.gl=function(a,b){var c=a.Lm.Bk(a.ol,100);if(c&&100>=c.ak)if(0==b){var d=c.um,e=c.vm,f=c.wm,h=0,j=0,k=0,c=c.eo;c[0]==d?h--:c[0]==d+1&&h++;c[1]==e?j--:c[1]==e+1&&j++;c[2]==f?k--:c[2]==f+1&&k++;c=d+h;e+=j;f+=k;j=this.qf();k=a.il;j=j?j.id<<8:0;Ji(this).hc(c,e,f,j,k)}else 1==b&&(f=c.um,k=c.vm,c=c.wm,e=a.il,Ji(this).hc(f,k,c,0,e))};function Cj(a,b,c,d){Vh.call(this,a,b,c,d)}D(Cj,Vh);Cj.prototype.Ib=function(){var a=U(this);a.aj===i&&(a.aj=a.Ee?a.fa.ob().Ib(a.Ee):m);return a.aj};Cj.prototype.sk=function(){var a=U(this);a.yg===i&&(a.yg=a.He?a.fa.ob().B[a.He]||m:m);return[a.yg,Dj(U(this)),zj(U(this)),Ej(U(this))]};Cj.prototype.qd=function(){Cj.a.qd.call(this);this.ta&1&&(this.Oo=this.ob().Ib(U(this).Ee))};function Fj(a,b,c,d){Vh.call(this,a,b,c,d);this.le=this.Eh=m}D(Fj,Vh);function Gj(a){Sh.call(this,a);this.data=this.u=this.y=this.x=0}D(Gj,Sh);Gj.prototype.read=function(a){Gj.a.read.call(this,a);this.x=a.ni();this.y=a.ni();this.u=a.ni();this.data=Oh(a)};Gj.prototype.write=function(a){Gj.a.write.call(this,a);a.lj(this.x);a.lj(this.y);a.lj(this.u);ug(a,this.data)};function Hj(a,b,c){var d=a>>24&255,e=a>>16&255,f=a>>8&255;a&=255;return(d+c*((b>>24&255)-d)&255)<<24|(e+c*((b>>16&255)-e)&255)<<16|(f+c*((b>>8&255)-f)&255)<<8|a+c*((b&255)-a)&255};function Ij(a,b){this.mc=a;this.Pf=0;this.q=b}Ij.prototype.kn=function(a){var b=Y(a,this.l);return"target."+Y(a,this.m)+"(source."+b+"());"};Ij.prototype.$d=function(a){var b=Y(a,this.l);return"result."+Y(a,this.m)+"(target."+b+"());"};var Jj=0;function Kj(a,b){return(b.q&Lj)-(a.q&Lj)||a.Pf-b.Pf}function Y(a,b){for(var c in a)if(a[c]===b)return c;return m}var Lj=1;function Mj(a,b,c,d){Ij.call(this,a,b);this.l=c;this.m=d}D(Mj,Ij);t=Mj.prototype;t.s=function(){return new Mj(this.mc,this.q,this.l,this.m)};
t.$b=function(a){a=Y(a,this.m);var b=Qh(),b=Y(b,b.ni);return"target."+a+"(reader."+b+"());"};t.ac=function(a){a=Y(a,this.l);var b=wg();return"writer."+Y(b,b.lj)+"(target."+a+"() | 0);"};t.kn=function(a){var b=Y(a,this.l);return"target."+Y(a,this.m)+"(source."+b+"() | 0);"};t.$d=function(a){var b=Y(a,this.l);a=Y(a,this.m);return"var _s = source."+b+"();var _t = target."+b+"();target."+a+"((_s + t * (_t - _s)) | 0);"};function Nj(a,b,c,d){Ij.call(this,a,b);this.l=c;this.m=d}D(Nj,Ij);
Nj.prototype.s=function(){return new Nj(this.mc,this.q,this.l,this.m)};Nj.prototype.$b=function(a){a=Y(a,this.m);var b=Qh(),b=Y(b,b.ko);return"target."+a+"(reader."+b+"());"};Nj.prototype.ac=function(a){a=Y(a,this.l);var b=wg();return"writer."+Y(b,b.Vo)+"(target."+a+"());"};Nj.prototype.$d=function(a){var b=Y(a,this.l);a=Y(a,this.m);return"var _s = source."+b+"();var _t = target."+b+"();result."+a+"((_s + t * (_t - _s)));"};function Oj(a,b,c,d){Ij.call(this,a,b);this.l=c;this.m=d}D(Oj,Ij);
Oj.prototype.s=function(){return new Oj(this.mc,this.q,this.l,this.m)};Oj.prototype.$b=function(a){a=Y(a,this.m);var b=Qh(),b=Y(b,b.Er);return"target."+a+"(reader."+b+"());"};Oj.prototype.ac=function(a){a=Y(a,this.l);var b=wg();return"writer."+Y(b,b.As)+"(target."+a+"());"};
Oj.prototype.$d=function(a){var b=Y(a,this.l),c=Y(a,this.m);a=Y(a,Pj);return"var _sv3 = source."+b+"();var _tv3 = target."+b+"();var _rv3 = source."+a+";_rv3[0] = (_tv3[0] - _sv3[0]) * t + _sv3[0];_rv3[1] = (_tv3[1] - _sv3[1]) * t + _sv3[1];_rv3[2] = (_tv3[2] - _sv3[2]) * t + _sv3[2];result."+c+"(_rv3);"};function Qj(a,b,c,d,e){Ij.call(this,a,b);this.l=c;this.m=d;this.qr=e}D(Qj,Ij);Qj.prototype.s=function(){return new Qj(this.mc,this.q,this.l,this.m,this.qr)};
Qj.prototype.$b=function(a){a=Y(a,this.m);var b=Qh(),b=Y(b,b.Fr);return"target."+a+"(reader."+b+"());"};Qj.prototype.ac=function(a){a=Y(a,this.l);var b=wg();return"writer."+Y(b,b.Bs)+"(target."+a+"());"};Qj.prototype.$d=function(a){var b=Y(a,this.l),c=Y(a,this.m),d=Y(a,Rj);a=Y(a,Li);return"var _rq = source."+d+";source."+a+"(source."+b+"(), target."+b+"(), t, _rq);result."+c+"(_rq);"};function Sj(a,b,c,d){Ij.call(this,a,b);this.l=c;this.m=d}D(Sj,Ij);
Sj.prototype.s=function(){return new Sj(this.mc,this.q,this.l,this.m)};Sj.prototype.$b=function(a){a=Y(a,this.m);var b=Qh(),b=Y(b,b.ca);return"target."+a+"(reader."+b+"());"};Sj.prototype.ac=function(a){a=Y(a,this.l);var b=wg();return"writer."+Y(b,b.bb)+"(target."+a+"());"};Sj.prototype.$d=function(a){var b=Y(a,this.l),c=Y(a,this.m);a=Y(a,Hj);return"result."+c+"(source."+a+"(source."+b+"(), target."+b+"(), t));"};function Tj(a,b,c,d){Ij.call(this,a,b);this.l=c;this.m=d}D(Tj,Ij);
Tj.prototype.s=function(){return new Tj(this.mc,this.q,this.l,this.m)};Tj.prototype.$b=function(a){a=Y(a,this.m);var b=Qh(),b=Y(b,b.t);return"target."+a+"(reader."+b+"());"};Tj.prototype.ac=function(a){a=Y(a,this.l);var b=wg();return"writer."+Y(b,b.da)+"(target."+a+"());"};function Uj(a,b,c,d){Ij.call(this,a,b);this.l=c;this.m=d}D(Uj,Ij);Uj.prototype.s=function(){return new Uj(this.mc,this.q,this.l,this.m)};
Uj.prototype.$b=function(a){a=Y(a,this.m);var b=Qh(),b=Y(b,b.t);return"target."+a+"(reader."+b+"());"};Uj.prototype.ac=function(a){a=Y(a,this.l);var b=wg();return"writer."+Y(b,b.da)+"(target."+a+"());"};function Vj(a,b,c,d){Ij.call(this,a,b);this.l=c;this.m=d}D(Vj,Ij);Vj.prototype.s=function(){return new Vj(this.mc,this.q,this.l,this.m)};Vj.prototype.$b=function(a){a=Y(a,this.m);var b=Qh(),b=Y(b,b.z);return"target."+a+"(reader."+b+"());"};
Vj.prototype.ac=function(a){a=Y(a,this.l);var b=wg();return"writer."+Y(b,b.pc)+"(target."+a+"());"};var Pj=O(),Rj=N();function Wj(a,b){for(var c=0;c<a.length;c++)a[c].Pf=c;a.sort(Kj);this.Yn={};this.lo=Array(a.length);this.zs=Array(a.length);var d="",e="",f="",h="",j="",k="",n="",p="";this.Po=Array(a.length);for(c=0;c<a.length;c++){var r=a[c].s();this.Po[c]=r;this.Yn[r.mc]=r;r.Pf=c;this.lo[c]=new Function("target","reader",r.$b(b));this.zs[c]=new Function("target","writer",r.ac(b));var d=d+r.$b(b),e=e+r.ac(b),w=r.kn(b),f=f+w;r.q&6||(h+=w);r.q&2&&(k+=w);if(r.q&4){var u=r.$d(b),n=n+u,j=j+w;r.q&2||(p+=u)}}this.Dr=new Function("target",
"reader",d);this.ys=new Function("target","writer",e);this.Ls=new Function("source","target",f);this.eh=new Function("source","target",h);this.Pj=new Function("source","target",j);this.Qj=new Function("source","target",k);this.cr=new Function("source","target","t","result",n);this.br=new Function("source","target","t","result",p)}Wj.prototype.Ua=function(){return this.Po.length};function Xj(a,b){return a.Yn[b].Pf}function Yj(a,b,c,d,e){for(a=a.lo;c;){if(c&1&&a[b])a[b](d,e);c>>=1;b++}};function Z(a,b){this.fa=a;this.time=0;this.ab=b;this.Ze=this.Ye=0}t=Z.prototype;t.reset=function(a){this.fa=a;this.Ze=this.Ye=this.time=0};function Zj(a,b){if(!a.ab){var c=[];a(c);a.ab=new Wj(c,b)}return a.ab}function $j(a,b){var c=a.Ye||a.Ze;31>=b?a.Ye|=1<<b:a.Ze|=1<<b-32;c||a.fa.Ck()}t.te=function(){this.Ye=this.Ze=0};t.read=function(a){this.ab.Dr(this,a)};t.pl=function(a){var b=a.z();Yj(this.ab,0,b,this,a);31<this.ab.Ua()&&(b=a.z(),Yj(this.ab,32,b,this,a))};
t.write=function(a){this.ab.ys(this,a)};t.eh=function(a){this.ab.eh(this,a)};t.Qj=function(a){this.ab.Qj(this,a)};t.Pj=function(a){this.ab.Pj(this,a)};t.Mh=function(a,b,c){var d=this.ab;this.fa.ed&Yh?d.br(a,b,c,this):d.cr(a,b,c,this)};t.Fo=Pj;t.Il=Rj;t.Cr=Li;t.Pp=Hj;Z.prototype.Fo[0]=Z.prototype.Fo[1];Z.prototype.Cr(Z.prototype.Il,Z.prototype.Il,0,Z.prototype.Il);Z.prototype.Pp(0,0,0);function ak(a,b){var c=b||Zj(bk,this);Z.call(this,a,c);this.dc=O();this.yr=Xj(c,ck);this.ue=N();this.Jr=Xj(c,dk);this.wi=O();this.Mr=Xj(c,ek);this.Ug=0;this.Gp=Xj(c,fk);this.dj=O();this.qs=Xj(c,gk)}D(ak,Z);var ck=Jj++,dk=Jj++,ek=Jj++,fk=Jj++,gk=Jj++;t=ak.prototype;t.uq=s("dc");t.setPosition=function(a){af(this.dc,a)||(Ve(this.dc,a),$j(this,this.yr),this.fa.Qb=l)};t.vq=s("ue");t.vo=function(a){ue(this.ue,a)||(se(this.ue,a),$j(this,this.Jr),this.fa.Qb=l)};t.wq=s("wi");
t.wo=function(a){af(this.wi,a)||(Ve(this.wi,a),$j(this,this.Mr),this.fa.Qb=l)};t.mq=s("Ug");t.Rr=function(a){this.Ug!=a&&(this.Ug=a,$j(this,this.Gp),this.fa.Qb=l)};t.zq=s("dj");t.setVelocity=function(a){af(this.dj,a)||(Ve(this.dj,a),$j(this,this.qs))};
function bk(a){a.push(new Oj(ck,Lj|6,ak.prototype.uq,ak.prototype.setPosition));a.push(new Qj(dk,Lj|6,ak.prototype.vq,ak.prototype.vo,l));a.push(new Oj(ek,Lj|6,ak.prototype.wq,ak.prototype.wo));a.push(new Nj(fk,Lj|4,ak.prototype.mq,ak.prototype.Rr));a.push(new Oj(gk,Lj|2,ak.prototype.zq,ak.prototype.setVelocity))};function hk(a,b){var c=b||Zj(ik,this);ak.call(this,a,c);this.Wk="";this.kr=Xj(c,jk);this.Vk=0;this.jr=Xj(c,kk);this.Bj=0;this.Ap=Xj(c,lk)}D(hk,ak);var jk=Jj++,kk=Jj++,lk=Jj++;t=hk.prototype;t.rf=s("Wk");t.Wr=function(a){this.Wk!=a&&(this.Wk=a,$j(this,this.kr))};t.sq=s("Vk");t.Vr=function(a){this.Vk!=a&&(this.Vk=a,$j(this,this.jr))};t.lq=s("Bj");t.Qr=function(a){this.Bj!=a&&(this.Bj=a,$j(this,this.Ap))};
function ik(a){bk(a);a.push(new Tj(jk,0,hk.prototype.rf,hk.prototype.Wr));a.push(new Sj(kk,Lj|4,hk.prototype.sq,hk.prototype.Vr));a.push(new Mj(lk,0,hk.prototype.lq,hk.prototype.Qr))};function mk(a,b){var c=b||Zj(nk,this);hk.call(this,a,c);this.yf=0;this.Jh=i;this.Zq=Xj(c,ok)}D(mk,hk);var ok=Jj++;mk.prototype.pq=s("yf");mk.prototype.to=function(a){this.yf!=a&&(this.yf=a,$j(this,this.Zq),this.Jh=i)};function nk(a){ik(a);a.push(new Vj(ok,0,mk.prototype.pq,mk.prototype.to))};function pk(a,b){var c=b||Zj(qk,this);ak.call(this,a,c)}D(pk,ak);function qk(a){bk(a)};function rk(a,b){var c=b||Zj(sk,this);Z.call(this,a,c)}D(rk,Z);function sk(){};function tk(a,b){var c=b||Zj(uk,this);Z.call(this,a,c);this.Ee="";this.aj=i;this.os=Xj(c,vk);this.He=0;this.yg=i;this.xp=Xj(c,wk);this.Ue=0;this.dh=i;this.Wp=Xj(c,xk);this.Oe=0;this.Wg=i;this.Mp=Xj(c,yk);this.Cf=0;this.Qh=i;this.dr=Xj(c,zk)}D(tk,Z);var vk=Jj++,wk=Jj++,xk=Jj++,yk=Jj++,zk=Jj++;t=tk.prototype;t.yq=s("Ee");t.Zr=function(a){this.Ee!=a&&(this.Ee=a,$j(this,this.os),this.aj=i)};t.kq=s("He");t.Pr=function(a){this.He!=a&&(this.He=a,$j(this,this.xp),this.yg=i)};t.oq=s("Ue");
function Dj(a){a.dh===i&&(a.dh=a.Ue?a.fa.ob().B[a.Ue]||m:m);return a.dh}t.Tr=function(a){this.Ue!=a&&(this.Ue=a,$j(this,this.Wp),this.dh=i)};t.nq=s("Oe");function zj(a){a.Wg===i&&(a.Wg=a.Oe?a.fa.ob().B[a.Oe]||m:m);return a.Wg}t.Sr=function(a){this.Oe!=a&&(this.Oe=a,$j(this,this.Mp),this.Wg=i)};t.qq=s("Cf");function Ej(a){a.Qh===i&&(a.Qh=a.Cf?a.fa.ob().B[a.Cf]||m:m);return a.Qh}t.Ur=function(a){this.Cf!=a&&(this.Cf=a,$j(this,this.dr),this.Qh=i)};
function uk(a){a.push(new Uj(vk,0,tk.prototype.yq,tk.prototype.Zr));a.push(new Vj(wk,0,tk.prototype.kq,tk.prototype.Pr));a.push(new Vj(xk,0,tk.prototype.oq,tk.prototype.Tr));a.push(new Vj(yk,0,tk.prototype.nq,tk.prototype.Sr));a.push(new Vj(zk,0,tk.prototype.qq,tk.prototype.Ur))};function Ak(a,b){var c=b||Zj(Bk,this);Z.call(this,a,c);this.sg=0;this.ij=i;this.vs=Xj(c,Ck)}D(Ak,Z);var Ck=Jj++;Ak.prototype.Aq=s("sg");Ak.prototype.$r=function(a){this.sg!=a&&(this.sg=a,$j(this,this.vs),this.ij=i)};function Bk(a){a.push(new Vj(Ck,0,Ak.prototype.Aq,Ak.prototype.$r))};function Dk(a,b,c,d,e){Vh.call(this,a,b,c,d);this.El=e}D(Dk,Vh);Dk.prototype.Zg=function(a){a instanceof Mi&&this.El.Kd(a)};Dk.prototype.Qd=function(a){a instanceof Mi&&this.El.ud(a)};function Ek(a){this.lt=a||Fk;this.nt=[]}function Fk(){this.ol=new Float32Array(6);this.end=this.start=this.at=0;this.fa=this.mt=m;this.eo=O();this.ak=0};function Gk(){Ek.call(this);this.B=[]}D(Gk,Ek);Gk.prototype.Kd=function(a){this.B.push(a)};Gk.prototype.ud=function(a){E(this.B,a)};Gk.prototype.forEach=function(a,b){for(var c=0;c<this.B.length&&a.call(b||v,this.B[c])!==q;c++);};Gk.prototype.Bh=function(a,b,c){for(a=0;a<this.B.length&&b.call(c||v,this.B[a],0)!==q;a++);};N();function Hk(a,b,c,d){Dk.call(this,a,b,c,d,new Gk);this.r=m}D(Hk,Dk);t=Hk.prototype;t.Al=ba("r");t.Ta=function(a){Hk.a.Ta.call(this,a);a instanceof Gj&&this.hc(a.x,a.y,a.u,a.data)};t.update=function(a){L("client var = "+U(this).Pi);bi(this,2,a+1)};t.A=function(a,b,c){this.El.Bh(b,function(d,e){d.A(a,b,e,c)})};
t.hc=function(a,b,c,d){var e=this.r;if(d&&!e.Ca.ga[d>>8])L("unknown block type",d);else{var f=e.hc(a,b,c,d);if(f!=d&&(d=(d?d:f)>>8))if(d=(e=e.Ca.ga[d])?e.$h.vp:m)if(e=Ik,e[0]=a,e[1]=b,e[2]=c,a=this.ma.bg.Eh,!a.e.Ya.Za&&(b=a.Ii.blocks)&&100>Math.sqrt(Ze(a.e.ra.listener.dc,e)))(a=$d(b,d,Id))&&a.setPosition(e)}};var Ik=O();function Jk(a,b){var c=b||Zj(Kk,this);Z.call(this,a,c)}D(Jk,Z);function Kk(){};function Lk(a,b){var c=b||Zj(Mk,this);Jk.call(this,a,c);this.Pi=0;this.fs=Xj(c,Nk)}D(Lk,Jk);var Nk=Jj++;Lk.prototype.xq=s("Pi");Lk.prototype.Yr=function(a){this.Pi!=a&&(this.Pi=a,$j(this,this.fs))};function Mk(a){a.push(new Nj(Nk,0,Lk.prototype.xq,Lk.prototype.Yr))};function Ok(a){this.C=a;this.K=this.V=m}Ok.prototype.Nb=function(){this.V=this.C.V?this.C.V.Nb():m;this.K=this.C.K?this.C.K.Nb():m};Ok.prototype.reset=function(){this.C.Xa();this.K=this.V=m};function Pk(a,b,c,d){yj.call(this,a,b,c,d);this.ka=1;this.lr=l;this.Nd=this.Md=0;this.cb=1E-4;this.oh=this.fc=this.za=0;this.mk=l}D(Pk,yj);var Qk=1/140*Math.PI,Rk=85*Math.PI/180;
Pk.prototype.Ob=function(a,b,c){if(!this.ae())return l;var d=b.K;if(!(0>=a.time)){var e;e=b.V;var f=0;87 in e.h&&(f|=32);83 in e.h&&(f|=16);65 in e.h&&(f|=2);68 in e.h&&(f|=1);81 in e.h&&(f|=4);90 in e.h&&(f|=8);32 in e.h&&(f|=128);e=f;var h=b.V,f=b.K;37 in h.h&&(this.cb+=Qk);39 in h.h&&(this.cb-=Qk);38 in h.h&&(this.za+=Qk);40 in h.h&&(this.za-=Qk);219 in h.h&&(this.fc+=Qk);221 in h.h&&(this.fc-=Qk);if(f.U||f.p&1){var j=f.U?0.2:0.25,h=f.vc*j,f=f.wc*j;this.lr?(this.Md=(this.Md+h)/2,this.Nd=(this.Nd+
f)/2,0.01>Math.abs(this.Md)&&(this.Md=0),0.01>Math.abs(this.Nd)&&(this.Nd=0)):(this.Md=h,this.Nd=f);f=this.Nd*this.ka;this.cb-=this.Md*this.ka*Qk;this.za-=f*Qk}f=b.V;b=b.K;h=0;69 in f.H?h|=6:69 in f.h?h|=2:69 in f.ie&&(h|=8);var j=2,k=4,n=8;f.ctrlKey&&(j=16,k=32,n=64);b.U?(b.Pa&1?(h|=k,h|=j):b.p&1?h|=j:b.sa&1&&(h|=n),b.Pa&4?(h|=32,h|=16):b.p&4?h|=16:b.sa&4&&(h|=64)):(b.sa&1&&(f.ctrlKey?(this.oh=Number.MAX_VALUE,h|=k,h|=j,h|=n):4>this.oh&&(h|=k,h|=j,h|=n)),b.sa&4&&(h|=32,h|=16,h|=64),this.oh=b.p?this.oh+
(Math.abs(b.vc)+Math.abs(b.wc)):0);f=h;this.mk||(this.za=Math.max(-Rk,Math.min(Rk,this.za)),this.fc=0);b=this.fh(65);b.setTime(a.time);b.Si=(1E3*a.Ri|0)/1E3;b.Wi=e;b.Eb=f;a=this.za;e=this.fc;b.cb=32767*(180*this.cb/Math.PI%360/360)|0;b.za=32767*(180*a/Math.PI%360/360)|0;b.fc=32767*(180*e/Math.PI%360/360)|0;f&&!d.U&&(a=d.clientX/c.width,c=d.clientY/c.height,b.Eb|=1,b.xi=65535*a|0,b.yi=65535*c|0);this.ma.zi(b)}return l};function Sk(a,b){var c=b||Zj(Tk,this);Z.call(this,a,c)}D(Sk,Z);function Tk(){};function Uk(a,b){var c=b||Zj(Vk,this);Sk.call(this,a,c);this.Uf=0;this.gi=i;this.wr=Xj(c,Wk)}D(Uk,Sk);var Wk=Jj++;Uk.prototype.tq=s("Uf");Uk.prototype.Xr=function(a){this.Uf!=a&&(this.Uf=a,$j(this,this.wr),this.gi=i)};function Vk(a){a.push(new Vj(Wk,0,Uk.prototype.tq,Uk.prototype.Xr))};function Xk(a,b){var c=b||Zj(Yk,this);hk.call(this,a,c)}D(Xk,hk);function Yk(a){ik(a)};function Zk(a,b){var c=b||Zj($k,this);Xk.call(this,a,c);this.Gj=0;this.Dp=Xj(c,al)}D(Zk,Xk);var al=Jj++;Zk.prototype.qf=s("Gj");Zk.prototype.xl=function(a){this.Gj!=a&&(this.Gj=a,$j(this,this.Dp))};function $k(a){ik(a);a.push(new Mj(al,0,Zk.prototype.qf,Zk.prototype.xl))};function bl(a,b,c,d){Pi.call(this,a,b,c,d)}D(bl,xj);function cl(a,b){var c=b||Zj(dl,this);Xk.call(this,a,c)}D(cl,Xk);function dl(a){ik(a)};function el(a,b,c){this.Rc=a;this.bq=b;this.cs=c;this.zd=[]}el.prototype.Rj=function(a,b,c){return new this.bq(a,this,b,c)};function Wh(a,b){if(a.zd.length){var c=a.zd.pop();c.reset(b);return c}return new a.cs(b)};function fl(a,b){B(b)?gl(a,i,b):Qa(b,sa(gl,a))}function gl(a,b,c){var d;a:if(d=String(c).replace(/\-([a-z])/g,function(a,b){return b.toUpperCase()}),a.style[d]===i){var e=Ab?"Webkit":zb?"Moz":F?"ms":yb?"O":m,f=B(i)?"undefined".replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"):"\\s";c=c.replace(RegExp("(^"+(f?"|["+f+"]+":"")+")([a-z])","g"),function(a,b,c){return b+c.toUpperCase()});e+=c;if(a.style[e]!==i){d=e;break a}}d&&(a.style[d]=b)}
function hl(a){var b=a.offsetWidth,c=a.offsetHeight,d=Ab&&!b&&!c;return(!y(b)||d)&&a.getBoundingClientRect?(b=a.getBoundingClientRect(),F&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop),new Md(b.right-b.left,b.bottom-b.top)):new Md(b,c)}var il=zb?"MozUserSelect":Ab?"WebkitUserSelect":m;
function jl(a){var b=a.getElementsByTagName("*");if(il){var c="none";a.style[il]=c;if(b){a=0;for(var d;d=b[a];a++)d.style[il]=c}}else if(F||yb)if(c="on",a.setAttribute("unselectable",c),b)for(a=0;d=b[a];a++)d.setAttribute("unselectable",c)};function kl(a,b){G.call(this);this.Pe=b;this.C=a.C;this.ba=a.ba;this.M=a.M;this.Hl=new Vf(this.M.g,this.M.Mi);H(this,this.Hl);this.Hl.restore();this.hasFocus=q;this.Sa=[];var c=a.d,d=c.createElement("DIV");fl(d,{position:"absolute",left:"10px",bottom:"10px",width:"50%",display:"none"});c=c.createElement("INPUT");c.type="text";fl(c,{"font-family":"monospace-8bit","font-size":"1em",border:"1px solid black","background-color":"#EEE",color:"#000",width:"100%",padding:"3px"});d.appendChild(c);a.F.Ia.parentNode.appendChild(d);
this.Bn=d;this.Qi=c;this.T=new Pc(this);H(this,this.T);this.T.listen(c,"keydown",this.uk)}D(kl,G);t=kl.prototype;t.uk=function(a){switch(a.keyCode){case 27:ll(this);a.preventDefault();a.stopPropagation();break;case 13:var b=wa(va(xa(this.Qi.value)));b.length&&this.Pe.postMessage("main",b);ll(this);a.preventDefault();a.stopPropagation()}};function ll(a){a.Qi.value="";a.Qi.blur();fl(a.Bn,{display:"none"});a.C.ja(l);a.C.Ha.focus()}
t.Ob=function(a,b){return 84 in b.V.H?(fl(this.Bn,{display:""}),this.C.ja(q),v.setTimeout(C(function(){this.Qi.focus()},this),10),this.C.V&&this.C.V.reset(),l):q};t.update=function(){var a=this.Pe.Nb();if(a)for(var b=0;b<a.length;b++){var c=a[b];switch(c.type){case 2:this.log(c.userName+": "+c.value)}}};
t.A=function(a,b,c){var d=this.M.font;if(!(2>=arguments.length)||this.Sa.length){var e=this.Hl;e.clear();for(var f=lc(),h=0;h<this.Sa.length;h++){var j=this.Sa[h];0==j.timestamp?j.timestamp=f:15E3<f-j.timestamp&&(this.Sa.splice(h,1),h--)}f=0;for(h=2;h<arguments.length;h++)arguments[h]&&(j=Fe(d,e,arguments[h],4294967295,f),f+=j[1]+2);for(var k=this.Sa.length,h=0;h<k;h++)j=this.Sa[h],j=Fe(d,e,j.value,j.color,f),f+=j[1]+2;h=ml;df(h,2,2,1,0,10,40,0,1);this.M.Jg(d.Aj,q);h[12]+=2;h[13]+=2;e.uc(b.Qf,h,nl);
h[12]-=2;h[13]-=2;e.uc(b.Qf,h)}};t.log=function(a){var b=new Date,c=String(b.getHours());2>c.length&&(c="0"+c);var d=String(b.getMinutes());2>d.length&&(d="0"+d);b=String(b.getSeconds());2>b.length&&(b="0"+b);c="["+[c,d,b].join(":")+"] ";for(d=0;d<arguments.length;d++)c+=arguments[d],d<arguments.length-1&&(c+=" ");this.add(c);L(c)};t.add=function(a,b){this.Sa.push(new ol(a,b||4294967295))};var ml=bf(),nl=qe(0.5,0.5,0.5,1);function ol(a,b){this.timestamp=0;this.value=a;this.color=b};function pl(a,b){G.call(this);this.N=m;this.Yq=a;this.q=b;this.gq=this.eb=l}D(pl,G);t=pl.prototype;t.b=function(){this.Yb();pl.a.b.call(this)};t.Dn=s("eb");t.setActive=ba("eb");t.close=function(){ql(this.N)};t.ua=A;t.Yb=A;t.update=A;t.A=A;var rl={},sl={},tl={};function ul(a,b,c){c=c||Jd||(Jd=new Sd);a=a(b||vl,i,i);a=ma(a)?q&&(a.bh===rl||a.bh===sl)?a.content:"zSoyz":String(a);b=c.R;c=b.createElement("div");F?(c.innerHTML="<br>"+a,c.removeChild(c.firstChild)):c.innerHTML=a;if(1==c.childNodes.length)c=c.removeChild(c.firstChild);else{for(a=b.createDocumentFragment();c.firstChild;)a.appendChild(c.firstChild);c=a}return c}var vl={};function wl(a,b,c,d,e){pl.call(this,a,8);this.d=b;this.parentElement=c;this.S=new Pc(this);H(this,this.S);this.zk=this.d.createElement("DIV");this.zk.className="a";this.root=ul(d,e,this.d);this.Wb=new yf(this.close,this)}D(wl,pl);
wl.prototype.ua=function(){wl.a.ua.call(this);this.d.appendChild(this.parentElement,this.zk);this.d.appendChild(this.parentElement,this.root);var a=Nd("s",this.root||this.d.R);Ia(a,function(a){var c=a.getAttribute("data-id"),d;d=a.className;d=B(d)&&d.match(/\S+/g)||[];0<=Ha(d,"u")&&a.focus();this.S.listen(a,"click",function(){this.nm(c);this.close();this.Wb.D(c)})},this)};wl.prototype.Yb=function(){Sc(this.S);this.d.removeNode(this.root);this.d.removeNode(this.zk);this.root=m;wl.a.Yb.call(this)};
wl.prototype.nm=A;F&&Nb(8);function $(a,b){a!=m&&this.append.apply(this,arguments)}t=$.prototype;t.Oa="";t.set=function(a){this.Oa=""+a};t.append=function(a,b,c){this.Oa+=a;if(b!=m)for(var d=1;d<arguments.length;d++)this.Oa+=arguments[d];return this};t.clear=function(){this.Oa=""};t.toString=s("Oa");function xl(a,b){function c(){}c.prototype=a;var d=new c,e;for(e in b)d[e]=b[e];return d}function yl(a){return a&&a.bh&&a.bh===rl?a.content:String(a).replace(zl,Al)}function Bl(a){return a&&a.bh===tl?"zSoyz":String(a)}var Cl={"\x00":"&#0;",'"':"&quot;","&":"&amp;","'":"&#39;","<":"&lt;",">":"&gt;","\t":"&#9;","\n":"&#10;","\x0B":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;","-":"&#45;","/":"&#47;","=":"&#61;","`":"&#96;","\u0085":"&#133;","\u00a0":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};
function Al(a){return Cl[a]}var zl=/[\x00\x22\x26\x27\x3c\x3e]/g;function Dl(a,b){var c=b||new $,d=new $;(d||new $).append('<div class="',"o",'">',yl(a.ce),"</div>");(d||new $).append('<div class="',"q",'">',Bl(a.body),"</div>");(d||new $).append('<div class="',"r",'">',a.p?Bl(a.p):"","</div>");d=xl(a,{Vp:d.toString()});(c||new $).append('<div class="',"m",'"><div class="',"n",'">',Bl(d.Vp),"</div></div>")}function El(a,b){(b||new $).append('<div class="',"s",a.Bc?" u":"",'" data-id="',yl(a.id),'"><a class="',"t",'">',yl(a.label),"</a></div>")}
function Fl(a,b){var c=b||new $;El(xl(a,{id:"close",label:"Close"}),c)}function Gl(a){a=a||new $;El(xl({Bc:l},{id:"reload",label:"Reload"}),a)};function Hl(a,b){var c=b||new $,d="Error in "+yl(a.location),e=new $;Gl(e);Fl({Bc:q},e);Dl(xl(a,{ce:d,body:yl(a.message)+"<br/>"+yl(a.zp),p:e.toString()}),c);return b?"":c.toString()}function Il(a,b){var c=b||new $,d="Trying to connect to "+yl(a.Or);Dl(xl(a,{ce:"Connecting...",body:d}),c);return b?"":c.toString()}
function Jl(a,b){var c=b||new $,d=new $;switch(a.reason){case 2:d.append("Version mismatch - reload and try again.");break;case 3:d.append("Invalid/broken packet.");break;case 4:d.append("Access denied.");break;case 6:d.append("Banned by an administrator! Go away!");break;case 7:d.append("Server is full. Try again later.");break;default:d.append("Unable to contact the server or a timeout occurred while connecting. Check your network settings and try again, or contact the server admin.")}var e=new $;
Gl(e);Fl({Bc:q},e);Dl(xl(a,{ce:"Connection Failed",body:d.toString(),p:e.toString()}),c);return b?"":c.toString()}
function Kl(a,b){var c=b||new $,d=new $;switch(a.reason){case 1:d.append("Timeout while communicating with the server. Check your connection and try again.");break;case 2:d.append("Version mismatch - reload and try again.");break;case 3:d.append("Invalid/broken packet.");break;case 4:d.append("Access denied.");break;case 5:d.append("Kicked by an administrator!");break;case 6:d.append("Banned by an administrator!");break;case 7:d.append("Server is full. Try again later.");break;default:d.append("Whoops.")}var e=
new $;switch(a.reason){case 4:case 5:case 6:Fl({Bc:l},e);break;default:Gl(e),Fl({Bc:q},e)}Dl(xl(a,{ce:"Connection Lost",body:d.toString(),p:e.toString()}),c);return b?"":c.toString()};function Ll(a,b,c,d){wl.call(this,"",a,b,c,d)}D(Ll,wl);function Ml(a,b,c,d,e){b=new Ll(a.d,b,Hl,{location:c,message:d,zp:e});Nl(a,b);return b.Wb};function Ol(a,b,c,d,e,f){this.Is=a;this.type=b;this.pt=c;this.userName=d;this.timestamp=e;this.value=f||m};function Pl(a){G.call(this);this.Da=a;this.Ma=[];this.hk=[]}D(Pl,G);Pl.prototype.Ie=function(a){if(0<=Ha(this.Ma,a))return m;this.Ma.push(a);a=new Ol(this,0,a.j,a.info.Q,ta());this.hk.push(a);return a};Pl.prototype.pi=function(a){return E(this.Ma,a)?(a=new Ol(this,1,a.j,a.info.Q,ta()),this.hk.push(a),a):m};Pl.prototype.postMessage=function(a,b){if(!(0<=Ha(this.Ma,a)))return m;var c=new Ol(this,2,a.j,a.info.Q,ta(),b);this.hk.push(c);return c};function Ql(a){G.call(this);this.Z=a;this.$c={};this.me=[];this.Ei(a.Ja)}D(Ql,G);t=Ql.prototype;t.b=function(){Qa(this.$c,I);this.$c={};Ql.a.b.call(this)};t.Ei=A;function Rl(a,b,c){var d=a.$c[b];!d&&c&&(d=new Pl(b),a.$c[b]=d);return d}t.Nb=function(){if(this.me.length){var a=this.me;this.me=[];return a}return m};t.Oj=A;t.Xj=A;t.Xl=A;t.Yl=function(a){Qa(this.$c,function(b){b.pi(a)})};t.Zl=A;function Sl(){this.sh="";this.name="Server";this.location="us";this.pk="unknown";this.qk="0";this.Sk=32;this.li={}}Sl.prototype.s=function(){var a=new Sl;a.sh=this.sh;a.name=this.name;a.location=this.location;a.pk=this.pk;a.qk=this.qk;a.Sk=this.Sk;a.li=Va(this.li);return a};Sl.prototype.toString=ca("[server]");function Tl(){this.xa=this.oc=0}var Ul=new Tl;function Vl(a,b){var c=b||new Ei;c.Fg=a.t();c.Eg=a.t();c.Q=a.t();return c}function Wl(a,b){a.da(b.Fg);a.da(b.Eg);a.da(b.Q);return l}function Xl(a,b){var c=b||new Gi;c.j=a.t();c.oc=Nh(a);c.q=a.ca();var d;if(!(d=!Vl(a,c.info)))d=c.Ag||new Ai,d.type=a.t(),d.platform=a.t(),d.pe=a.t(),d.Sd=a.t(),d=!d;return d?m:c}var Yl=new function(){this.xa=this.Qe=this.eg=0};
function Zl(a,b,c){var d=wg();Yl.eg=a;Yl.Qe=b;Yl.xa=c;tg(d,1);d.bb(Yl.eg);d.bb(Yl.Qe);d.bb(Yl.xa);return d.finish()}var $l=new function(){this.Qe=this.eg=0;this.og=[]},am=new function(){this.info=new Sl;this.Ma=[]};function bm(){this.yj=this.Gl=0;this.zb=new Gi}var cm=new bm,dm=new bm;
function em(a,b){var c=wg();dm.Gl=3;dm.yj=a;dm.zb=b;tg(c,4);ug(c,dm.Gl);ug(c,dm.yj);var d=dm.zb;c.da(d.j);tg(c,d.oc);c.bb(d.q);var e;if(!(e=!Wl(c,d.info)))d=d.Ag,c.da(d.type),c.da(d.platform),c.da(d.pe),c.da(d.Sd),e=q;return e?(c.offset=0,m):c.finish()}function fm(){this.reason=0}var gm=new fm,hm=new fm;function im(){var a=wg();hm.reason=0;tg(a,5);a.bb(hm.reason);return a.finish()}var jm=new function(){this.zb=new Gi},km=new function(){this.j="";this.reason=0};
function lm(){this.j="";this.info=new Ei}var mm=new lm,nm=new lm;function om(a,b){var c=wg();nm.j=a;nm.info=b;tg(c,8);c.da(nm.j);return!Wl(c,nm.info)?(c.offset=0,m):c.finish()}function pm(){this.Da=this.j="";this.timestamp=0;this.Uc=[]}var qm=new pm,rm=new pm;function sm(a,b){var c=ta(),d=wg();rm.j=a;rm.Da=b;rm.timestamp=c;rm.Uc=[];tg(d,20);d.da(rm.j);d.da(rm.Da);d.bb(rm.timestamp);d.bb(rm.Uc.length);for(c=0;c<rm.Uc.length;c++)d.da(rm.Uc[c]);return d.finish()}
var tm=new function(){this.Da=this.j="";this.timestamp=0};function um(){this.Da=this.j="";this.timestamp=0;this.message=""}var vm=new um,wm=new um;function xm(a,b,c,d){var e=wg();wm.j=a;wm.Da=b;wm.timestamp=c;wm.message=d;tg(e,22);e.da(wm.j);e.da(wm.Da);e.bb(wm.timestamp);e.da(wm.message);return e.finish()};function ym(a){Ql.call(this,a);this.sc=a}D(ym,Ql);t=ym.prototype;t.join=function(a){this.sc.send(sm(this.sc.id,a))};t.postMessage=function(a,b){this.sc.send(xm(this.sc.id,a,ta(),b))};t.Ei=function(a){a.X(20,this.Cq,this);a.X(21,this.Dq,this);a.X(22,this.Eq,this)};
t.Cq=function(a,b,c){qm.j=c.t();qm.Da=c.t();qm.timestamp=c.ca();a=c.ca();qm.Uc.length=a;for(b=0;b<a;b++)qm.Uc[b]=c.t();if(!qm)return q;c=this.sc.Ab[qm.j]||m;if(!c)return l;a=Rl(this,qm.Da,l);if(!a)return l;for(b=0;b<qm.Uc.length;b++){var d=this.sc.Ab[qm.Uc[b]]||m;d&&a.Ie(d)}(c=a.Ie(c))&&this.me.push(c);return l};t.Dq=function(a,b,c){tm.j=c.t();tm.Da=c.t();tm.timestamp=c.ca();if(!tm)return q;a=this.sc.Ab[tm.j]||m;if(!a)return l;b=Rl(this,tm.Da,q);if(!b)return l;(a=b.pi(a))&&this.me.push(a);return l};
t.Eq=function(a,b,c){vm.j=c.t();vm.Da=c.t();vm.timestamp=c.ca();vm.message=c.t();if(!vm)return q;a=this.sc.Ab[vm.j]||m;if(!a)return l;b=Rl(this,vm.Da,q);if(!b)return l;(a=b.postMessage(a,vm.message))&&this.me.push(a);return l};function zm(a,b){G.call(this);a.W=b.W;this.e=a;this.Z=b;this.Z.Aa.push(this);this.Ei(b.Ja);this.Pe=new ym(this.Z);this.Z.Aa.push(this.Pe);this.r=new Jh;H(this,this.r);this.yd=new W(a,this.Z);H(this,this.yd);var c=this.yd,d=new li(64,Zi,0);c.Ub[d.Rc]=d;d=new li(65,dj,2);c.Ub[d.Rc]=d;d=new li(66,Gj,0);c.Ub[d.Rc]=d;d=new li(67,bj,2);c.Ub[d.Rc]=d;c=this.yd;ni(c,new el(64,Fj,Ak));ni(c,new el(65,Hk,Lk));ni(c,new el(66,$i,pk));ni(c,new el(67,Cj,tk));ni(c,new el(68,Pk,Uk));ni(c,new el(69,Qi,mk));ni(c,new el(70,
cj,rk));ni(c,new el(71,bl,cl));ni(c,new el(72,Bj,Zk));this.yd.rg.push(this);this.Bf=new Ok(this.e.C);this.dg=new Si;this.To=[];this.Ra=new kl(this.e,this.Pe);H(this,this.Ra);this.Ii={};this.Lc=m;this.kl=[];this.le=m;this.On=new mh(this.e.fb,this.e.ba);H(this,this.On);c=this.e.If;this.Z.Ka.jc=c.jc;c.Zp||(this.Ra.log("wsad to move"),this.Ra.log("left click to place blocks, right click to remove"),this.Z.ge()||this.Ra.log("t to chat"))}D(zm,G);t=zm.prototype;
t.b=function(){var a=this.e.ra,b;for(b in this.Ii){var c=this.Ii[b];E(a.Gg,c);I(c)}zm.a.b.call(this)};t.ob=s("yd");t.wf=A;t.load=function(){var a=new yf;this.Yh("blocks",new Xg(this.e.fb,this.e.ra.context));a.D(m);return a};t.handleError=function(a,b){L("Error: "+a,b);this.Ra.log("Error: "+a,b);this.Z.disconnect();Am(this.e);Bm(this.e);var c=Ml(this.e.N,this.e.F.Ia,"game",a,b);Zd(c,function(a){"reload"==a?window.location.reload(q):window.location.href="http://google.com"},m,i)};
t.rl=function(){var a=this.e.Ya,b=wi(this.Z).info.s();b.Q=a.userName;a=this.Z;a.send(om(a.id,b))};zm.op=2;t=zm.prototype;t.update=function(a){if(2!=this.Z.state)if(this.Z.Nb(zm.op),2==this.Z.state){var b=this.Z.Td;this.Ra.log("Disconnected: "+xi(b));Am(this.e);Bm(this.e);a=this.e.N;b=new Ll(a.d,this.e.F.Ia,Kl,{reason:b});Nl(a,b);Zd(b.Wb,function(a){"reload"==a?window.location.reload(q):window.location.href="http://google.com"},m,i)}else this.r.update(a),this.yd.update(a),this.Ra.update(a)};
t.A=function(a){if(2!=this.Z.state){Ti(this.dg,this.e.F.Dc());Oi(this.dg);this.Bf.Nb();this.Ra.Ob(a,this.Bf)||this.Ob(a,this.Bf);var b=a.time;a.time-=0.5;this.yd.Ak(a.time);this.qi(a);a.time=b;this.Bf.reset()}};t.qi=function(a){var b=this.e.ba;b.Ej()&&(this.Ig(a),this.qh(a),this.af(a,this.Bf),b.end())};t.Ob=ca(q);t.Ig=aa();t.qh=aa();t.af=function(a){var b=[a,this.dg];(a=this.Gh(a))&&Na(b,a);this.Ra.A.apply(this.Ra,b)};t.Gh=ca(m);t.Yh=function(a,b){this.Ii[a]=b;this.e.ra.Yh(b)};t.ia=function(){this.e.ia()};
t.df=function(a){if(a instanceof Fj)this.Lc=a,this.Lc.Eh=this;else if(a instanceof Cj){var b=a.Ib();b.data=a;this.kl.push(a);b==wi(this.Z)&&(this.le=a,this.Lc.le=a);this.wf()}};t.vh=function(a){a instanceof Cj&&(E(this.kl,a),this.wf())};t.Ei=function(a){a.X(73,this.qn,this);a.X(74,this.tn,this)};t.Xl=function(a){var b=this.e;b.Ya.Za||$d(b.Hg,"player_join",Hd);this.Ra.log(a.info.Q+" ("+a.j+") connected on "+a.Ag.toString())};
t.Yl=function(a){Am(this.e);this.Ra.log(a.info.Q+" ("+a.j+") disconnected:",xi(a.Td))};t.Zl=function(){this.wf()};t.qn=function(a,b,c){yg.x=Mh(c);yg.y=Mh(c);yg.u=Mh(c);if(!yg)return q;b=this.r;a=Rh.ln();b=b.Ga(yg.x,yg.y,yg.u);return!a.Wm(b,c)?q:l};t.tn=function(){return!Ag?q:l};t.Oj=A;t.Xj=A;zm=rf(zm,"blk.game.client.ClientController",{update:"update",A:"render",qi:"renderFrame_",af:"drawOverlays",df:"entityAdded",vh:"entityRemoved",qn:"handleChunkData_",tn:"handleReadyPlayer_"});function Cm(a,b,c){G.call(this);this.e=a;this.d=a.d;a=a.F.Ia;Ld?a=a.parentElement:(a=a.parentNode,a=ma(a)&&1==a.nodeType?a:m);this.parentElement=a;this.S=new Pc(this);H(this,this.S);this.root=ul(b,c,this.d)}D(Cm,G);Cm.prototype.b=function(){this.Yb();Cm.a.b.call(this)};Cm.prototype.ua=function(){this.d.appendChild(this.parentElement,this.root)};Cm.prototype.Yb=function(){Sc(this.S);this.d.removeNode(this.root)};Cm.prototype.fg=function(a){this.root.style.display=a?"":"none"};function Dm(a,b){var c=b||new $;c.append('<div class="',"v",'">');Em({id:"fullscreen",label:"Fullscreen"},c);Em({id:"settings",label:"Settings"},c);Em({id:"help",label:"Help"},c);c.append("</div>");return b?"":c.toString()}function Em(a,b){(b||new $).append('<div class="',"w",'" data-id="',yl(a.id),'"><a class="',"blkMenubarButtonLabel",'">',yl(a.label),"</a></div>")};function Fm(a){Cm.call(this,a,Dm,{});jl(this.root)}D(Fm,Cm);Fm.prototype.ua=function(){Fm.a.ua.call(this);var a=Nd("w",this.root||this.d.R);Ia(a,function(a){var c=a.getAttribute("data-id");this.S.listen(a,"click",function(){switch(c){case "fullscreen":this.e.Go();break;case "settings":this.e.ia();Gm(this.e);break;case "help":this.e.ia(),Hm(this.e)}})},this)};function Im(a,b){var c=b||new $;c.append('<div class="',"x",'"><div class="',"blkPlayerListingHeader",'"></div><div class="',"blkPlayerListingBody",'"></div><div class="',"blkPlayerListingFooter",'"></div></div>');return b?"":c.toString()}
function Jm(a,b){var c=b||new $;c.append('<div class="',"y",'"><div class="',"z"," ",30>a.xa?"h":60>a.xa?"g":100>a.xa?"f":150>a.xa?"e":"d",'"></div><div class="',"A",'">',yl(a.Q),' <span class="',"B",'">\x3c!-- (',yl(a.j),")--\x3e</span></div></div>");return b?"":c.toString()};function Km(a){Cm.call(this,a.e,Im,{});jl(this.root);this.ad=a;this.xm=Td(this.d,"blkPlayerListingBody",this.root);this.Fc=v.setInterval(C(function(){this.refresh()},this),Km.sp);this.refresh()}D(Km,Cm);Km.sp=3E3;Km.prototype.b=function(){v.clearInterval(this.Fc);Km.a.b.call(this)};
Km.prototype.refresh=function(){Qd(this.xm);for(var a=this.ad.kl,b=0;b<a.length;b++)a[b]={index:b,value:a[b]};var c=function(a,b){var c=a.Ib().info.Q,d=b.Ib().info.Q,c=String(c).toLowerCase(),d=String(d).toLowerCase();return c<d?-1:c==d?0:1}||Pa;Oa(a,function(a,b){return c(a.value,b.value)||a.index-b.index});for(b=0;b<a.length;b++)a[b]=a[b].value;for(b=0;b<a.length;b++){var d=a[b].Ib(),d=ul(Jm,{j:d.j,Q:d.info.Q,xa:d.n.mm},this.d);this.xm.appendChild(d)}};Km=rf(Km,"blk.ui.PlayerListing",{refresh:"refresh"});function Lm(a,b){zm.call(this,a,b);this.Ki=new Vf(this.e.M.g,this.e.M.Mi);H(this,this.Ki);this.Ki.restore();var c=this.hi=new Km(this);this.To.push(c);H(this,c);c.ua();this.Z.ge()&&this.hi.fg(q);c=this.ir=new Fm(this.e);this.To.push(c);H(this,c);c.ua();this.Qn=new Eg(this.e.fb,this.e.ra.context);H(this,this.Qn);this.e.ai.Di(this.Qn);this.jj=m;this.jl=new Si;this.nc=m;this.xe=0}D(Lm,zm);t=Lm.prototype;
t.df=function(a){Lm.a.df.call(this,a);a instanceof Hk?(this.jj=a,this.jj.Al(this.r)):a instanceof $i&&a.dl==wi(this.Z)&&(a.Al(this.r),this.nc=new Vg(this.e.M,this.r,a.Db),H(this,this.nc),this.nc.ic(2<=this.xe))};t.vh=function(a){Lm.a.vh.call(this,a)};t.wf=function(){Lm.a.wf.call(this);this.hi.refresh()};t.update=function(a){Lm.a.update.call(this,a);this.e.ra.listener.update(this.jl.Ek)};
t.Ob=function(a,b){if(Lm.a.Ob.call(this,a,b))return l;var c=b.V;if(79 in c.H)return this.e.ia(),Gm(this.e),l;if(191 in c.H)return this.e.ia(),Hm(this.e),l;if(9 in c.H)return this.e.ia(),c=this.hi,c.root.style.display="none"==c.root.style.display?"":"none",l;if(86 in c.H)return this.xe++,2<this.xe&&(this.xe=0),this.nc&&this.nc.ic(2<=this.xe),l;77 in c.H&&(this.e.ia(),c=this.e.ai,c.Fk?c.stop():c.co());var c=this.jl,d=this.le;if(d){var e=zj(U(d)),f=c.width/c.height;if(f!=e.Rb){e.Rb=f;var h=e.fh(64);
h.Cg=f;e.ma.zi(h)}Ej(U(d)).Ob(a,b);if(!Dj(U(d)).Ob(a,b,c))return this.handleError("Input backup"),l}return q};t.Ig=function(a){Lm.a.Ig.call(this,a);this.e.M.reset(this.r.fd.yo,l)};t.qh=function(a){Lm.a.qh.call(this,a);var b=this.e.M.mo,c=this.jl,d=this.e.F,e=this.le;e?(e=zj(U(e)),Ui(c,16*e.Db.aa+16),Ti(c,d.Dc()),e.Ne(c)):(Ui(c,100),Ti(c,d.Dc()));this.nc&&this.nc.A(a,c);this.jj&&this.jj.A(a,c,b);b.flush(c)};t.af=function(a,b){Lm.a.af.call(this,a,b);this.an(a,b);this.Ym(a)};
t.Gh=function(a){if(!this.xe)return m;var b=this.ob(),c="Sim: "+b.n.Gh();b.n.update(a.time);a=this.r.tk();b=this.nc?this.nc.tk():m;return[c,a,b]};t.an=function(a,b){var c=this.e.M,d=this.dg,e=c.Pl,f=this.Ki;f.clear();var h=Lm.mg;if(b.K.U){var j=d.width/2/2-8,k=d.height/2/2-8;ye(e,11,h);f.add(h[0],h[1],h[2]-h[0],h[3]-h[1],4294967295,j,k,16,16)}h=Lm.Ti;df(h,2,2,1,0,0,0,0,1);c.Jg(e,q);f.uc(d.Qf,h)};
t.Ym=function(){var a=this.le;if(a){var b=Ej(U(a)),c=Ri(b.ae()),a=this.e.M,d=this.dg,e=a.Na,f=this.Ki;f.clear();for(var h=0,j=17*b.O.length,k=Lm.mg,n=function(a){var b=a.qf();ye(e,b.km,k);f.add(k[0],k[1],k[2]-k[0],k[3]-k[1],a==c?4294967295:4286019447,h,0,16,16);h+=17},p=0;p<b.O.length;p++)n.call(v,b.O[p]);b=Lm.Ti;df(b,2,2,1,0,d.width/2-j,d.height-32-2,0,1);a.Jg(e,q);f.uc(d.Qf,b)}};Lm.Ti=bf();Lm.mg=N();
Lm=rf(Lm,"blk.game.fps.FpsClientController",{df:"entityAdded",update:"update",Ob:"processInput",Ig:"beginDrawing",qh:"drawWorld",af:"drawOverlays",an:"drawInputUI_",Ym:"drawBlockTypes_"});function Mm(a,b){pl.call(this,"game-url",14);var c=Lm;this.nb=a;this.F=a.F;this.ad=new c(a,b);H(this,this.ad)}D(Mm,pl);t=Mm.prototype;t.ua=function(){Mm.a.ua.call(this);Zd(this.ad.load(),function(){this.F.fg(l);Nm(this.nb)},aa(),this)};t.Yb=function(){this.F.fg(q);Bm(this.nb);Mm.a.Yb.call(this)};t.rl=function(){this.ad.rl()};t.update=function(a){Mm.a.update.call(this,a);this.ad.update(a)};t.A=function(a){Mm.a.A.call(this,a);this.ad.A(a)};function Om(a,b){var c=b||new $,d=new $;Fl({Bc:l},d);Dl(xl(a,{ce:"Help",body:'Conceptualized and coded by <a href="http://twitter.com/benvanik" target="_blank">@benvanik</a> as a 20% project at Google.<br/>Copyright Google, Inc 2012.<br/><br/><a href="http://benvanik.github.com/blk-game/" target="_blank">More information</a>, <a href="https://www.github.com/benvanik/blk-game" target="_blank">source code</a>.<br/><br/><span class="O">Controls:</span><table class="P"><tr><td>Movement</td><td>WSAD</td></tr><tr><td>Place block</td><td>Left click</td></tr><tr><td>Remove block</td><td>Right-click, ctrl-click</td></tr><tr><td>Change block type</td><td>Number keys, mouse wheel</td></tr><tr><td>Chat</td><td>T</td></tr><tr><td>Start/stop music</td><td>M</td></tr><tr><td>Show player list</td><td>TAB</td></tr><tr><td>Toggle fullscreen</td><td>Alt-enter</td></tr><tr><td>Settings</td><td>O</td></tr><tr><td>Help</td><td>?</td></tr></table><br/>Use Chrome (or go fullscreen in Firefox) to get awesome FPS control goodness!',
p:d.toString()}),c);return b?"":c.toString()};function Pm(a,b){wl.call(this,"help",a,b,Om,{})}D(Pm,wl);function Qm(a,b){var c=b||new $;c.append('<div class="',"Q",'"><div class="',"R",'"><div class="',"S",'">BLK, by <a href="http://twitter.com/benvanik" target="_blank">@benvanik</a></div><div class="',"T",'">TODO: some awesome logo or something<br/>',"Welcome to my 20% project hacky game tech demo thingie!",'<br/><a href="." target="_blank">',"More Information",'</a><br/><table class="',"U",'"><tr><td class="',"blkMainMenuSinglePlayerButton",'">',"Single-player",'</td><td class="',"blkMainMenuMultiPlayerButton",
'">',"Multi-player",'</td></tr></table></div><table class="',"V",'"><tr><td class="',"blkMainMenuSettingsButton",'">',"Settings",'</td><td class="',"blkMainMenuHelpButton",'">',"Help","</td></tr></table></div></div>");return b?"":c.toString()};function Rm(a,b){pl.call(this,"",8);this.nb=a;this.kb=a.d;this.ur=b;this.T=new Pc(this);H(this,this.T);this.Lc=ul(Qm,{},this.kb);this.be=this.kb.createElement("A");this.be.className="c";var c=this.be;if("textContent"in c)c.textContent="View on GitHub";else if(c.firstChild&&3==c.firstChild.nodeType){for(;c.lastChild!=c.firstChild;)c.removeChild(c.lastChild);c.firstChild.data="View on GitHub"}else Qd(c),c.appendChild(Rd(c).createTextNode("View on GitHub"));this.be.href="http://github.com/benvanik/blk-game";
this.be.target="_blank"}D(Rm,pl);function Sm(a,b,c){b=Td(a.kb,b,a.Lc);a.T.listen(b,"click",c,q,a)}
Rm.prototype.ua=function(){Rm.a.ua.call(this);this.kb.R.body.appendChild(this.be);this.kb.appendChild(this.ur,this.Lc);Sm(this,"blkMainMenuSinglePlayerButton",function(){this.nb.ia();this.nb.ah("local://blk-0")});Sm(this,"blkMainMenuMultiPlayerButton",function(){this.nb.ia();this.nb.ah("ws://localhost:1337")});Sm(this,"blkMainMenuSettingsButton",function(){this.nb.ia();Gm(this.nb)});Sm(this,"blkMainMenuHelpButton",function(){this.nb.ia();Hm(this.nb)})};
Rm.prototype.Yb=function(){this.kb.removeNode(this.be);Sc(this.T);this.kb.removeNode(this.Lc);this.Lc=m;Rm.a.Yb.call(this)};function Tm(a,b){var c=b||new $,d=new $,e=d||new $;El(xl({Bc:l},{id:"save",label:"Save"}),e);Fl({Bc:q},d);Dl(xl(a,{ce:"Settings",body:'<div class="C"><div class="blkSettingsLabel">Name:</div><div class="D"><input class="F blkSettingsNameValue" type="text"/></div></div><div class="C blkSettingsSensitivitySlider"><div class="blkSettingsLabel">Mouse:</div><div class="D"><div class="J L"><input type="checkbox" class="K"/>Mouse Lock</div><span class="E">Sensitivity: </span><input class="G" type="range" min="1" max="100" /><div class="H"></div> <div class="I">reset</div></div></div>\x3c!--<div class="C blkSettingsDistanceSlider"><div class="blkSettingsLabel">View Distance:</div><div class="D"><input class="G" type="range" min="1" max="100" /><div class="H"></div> <div class="I">reset</div></div></div>--\x3e<div class="C blkSettingsAudio"><div class="blkSettingsLabel">Audio:</div><div class="D"><div class="J blkSettingsSoundFx"><input type="checkbox" class="K"/>Sound FX</div><div class="J blkSettingsMusic"><input type="checkbox" class="K"/>Music</div></div></div>',
p:d.toString()}),c);return b?"":c.toString()};function Um(a,b,c){wl.call(this,"settings",a,b,Tm,{});this.xo=c}D(Um,wl);Um.prototype.ua=function(){Um.a.ua.call(this);var a=this.xo;Td(this.d,"blkSettingsNameValue",this.root).value=a.userName;Vm(this,"blkSettingsSensitivitySlider",1,100,50,50*a.ka,function(a){return Ea(a/50,2)});Wm(this,"L",a.pb);Vm(this,"blkSettingsDistanceSlider",X.qj,X.pj,X.em,a.Cb,function(a){return Ea(a)});Wm(this,"blkSettingsSoundFx",!a.Za);Wm(this,"blkSettingsMusic",!a.bc)};
function Vm(a,b,c,d,e,f,h){function j(){n.innerHTML=h(Number(k.value))}if(b=Td(a.d,b)){var k=Td(a.d,"G",b);if(k){k.min=String(c);k.max=String(d);k.value=String(f);var n=Td(a.d,"H",b);j();a.S.listen(k,"change",j);c=Td(a.d,"I",b);a.S.listen(c,"click",function(){k.value=String(e);j()})}}}function Xm(a,b){var c=Td(a.d,b);if(c)return c=Td(a.d,"G",c),!c?i:Number(c.value)}
function Wm(a,b,c){if(b=Td(a.d,b)){var d=Td(a.d,"K",b);d&&(jl(b),d.checked=c,a.S.listen(b,"click",function(a){a.target!=d&&(d.checked=!d.checked)}))}}function Ym(a,b){var c=Td(a.d,b);if(c)return c=Td(a.d,"K",c),!c?i:c.checked}
Um.prototype.nm=function(a){if("save"==a){a=this.xo;var b=Td(this.d,"blkSettingsNameValue",this.root).value,b=Fi(b);a.userName=b;b=Xm(this,"blkSettingsSensitivitySlider");y(b)&&(a.ka=b/50);b=Ym(this,"L");y(b)&&(a.pb=b);b=Xm(this,"blkSettingsDistanceSlider");y(b)&&(a.Cb=b);b=Ym(this,"blkSettingsSoundFx");y(b)&&(a.Za=!b);b=Ym(this,"blkSettingsMusic");y(b)&&(a.bc=!b);a.save()}};function Zm(a,b){var c=b||new $;c.append('<div class="',"M",'"><div class="',"N",'">Loading...</div></div>');return b?"":c.toString()};function $m(a,b){wl.call(this,"",a,b,Zm,{})}D($m,wl);function an(){this.gs=this.Ri=this.time=this.of=0}an.prototype.Ec=function(a,b,c,d){this.of=a;this.time=b;this.Ri=c;this.gs=d};function bn(){this.hs=lc();this.Re=this.xa=this.mb=0;this.wn=q}function cn(a){return(lc()-a.hs)/1E3}function vi(a){return!a.wn?0:cn(a)+a.Re};function dn(a,b){G.call(this);this.If=a;this.W=b||new bn;this.Te=[];this.Gs=m}D(dn,G);dn.prototype.b=function(){qc(this.Te);this.Te.length=0;dn.a.b.call(this)};dn.prototype.getTime=function(){return vi(this.W)};function en(){this.Ri=this.time=this.of=0;this.hasFocus=q}en.prototype.Ec=function(a,b,c,d){this.of=a;this.time=b;this.Ri=c;this.hasFocus=d};function fn(a,b,c,d){G.call(this);this.T=new Pc(this);H(this,this.T);this.Wl=a;this.Lj=this.se=this.Yj=m;if(!b){if(a=v.requestAnimationFrame||v.webkitRequestAnimationFrame||v.mozRequestAnimationFrame||v.oRequestAnimationFrame||v.msRequestAnimationFrame)this.se=a;if(a=v.cancelAnimationFrame||v.webkitCancelAnimationFrame||v.mozCancelAnimationFrame||v.oCancelAnimationFrame||v.msCancelAnimationFrame)this.Lj=a}this.xd=0;this.Fc=m;this.Ik=0;this.Ae=l;this.lk=d||0;this.Fi=m;c&&(this.T.listen(v,"blur",function(){this.Ae=
q}),this.T.listen(v,"focus",function(){this.Ae||(this.Ae=l,this.xd&&this.start(l))}))}D(fn,G);fn.prototype.b=function(){this.stop(l);this.Yj=m;fn.a.b.call(this)};fn.prototype.hasFocus=s("Ae");
fn.prototype.start=function(a){if(!a&&(this.xd++,1<this.xd))return;if(this.Ae){var b=this;this.Fc=this.se?this.se.call(v,function(){gn(b)},this.Yj):v.setTimeout(function(){gn(b)},62.5)}this.Wl(lc());this.lk&&(b=this,this.Fi=v.setInterval(qf(function(){var a=b;if(lc()-a.Ik>=a.lk&&a.xd){var d=lc();a.Ik=d;a.Wl(d)}},"gf.timing.RenderTimer#simulateTick"),this.lk))};
fn.prototype.stop=function(a){if(a||this.xd)a||this.xd--,this.xd||(a=this.Fc,this.Lj?this.Lj.call(v,a):this.se||v.clearTimeout(a),this.Fc=m,this.Fi!==m&&(v.clearInterval(this.Fi),this.Fi=m))};function gn(a){if(a.Fc!==m){a.Fc=m;a.Ae&&(a.Fc=a.se?a.se.call(v,function(){gn(a)},a.Yj):v.setTimeout(function(){gn(a)},16));var b=lc();a.Ik=b;a.Wl(b)}};function hn(a,b){dn.call(this,a,b);this.S=new Pc(this);H(this,this.S);this.Gf=cn(this.W);this.fn=l;this.eq=hn.dp;this.Be=0;this.ns=new en;this.ms=0;this.qi=new an;this.Hr=0;var c=this;this.$f=new fn(function(a){c.no(a)},i,i,500);H(this,this.$f);this.jg=q}D(hn,dn);hn.dp=0.016777;hn.fm=0.25;function Nm(a){a.jg||(a.jg=l,a.$f.start())}function Bm(a){a.jg&&(a.jg=q,a.$f.stop())}t=hn.prototype;
t.no=function(){var a=cn(this.W),b=a-this.Gf;this.Gf=a;b>hn.fm&&(b=hn.fm);this.Be+=b;a=1;if(this.fn){for(a=this.eq;this.Be>=a;){this.Ul(this.W.mb,a);var c=this.W;c.mb+=a;this.Be-=a;if(!this.jg)break}a=this.Be/a}else this.Ul(this.W.mb,b),c=this.W,c.mb+=b;this.$f.hasFocus()&&this.oo(vi(this.W),b,a)};t.Ul=function(a,b){if(!(0>=b)){var c=this.ns;c.Ec(this.ms++,a,b,this.$f.hasFocus());this.update(c)}};t.oo=function(a,b,c){var d=this.qi;d.Ec(this.Hr++,a,b,c);this.A(d)};t.update=A;t.A=A;
hn=rf(hn,"gf.Game",{no:"renderTick_",Ul:"update_",oo:"render_"});function jn(a,b){ei.call(this,a);this.d=b||m}D(jn,ei);jn.prototype.load=function(a){var b=new yf(function(){a.cancel()},this);a.load(b);return b};function kn(a){G.call(this);this.context=a;this.dc=O()}D(kn,G);kn.prototype.update=function(a){if(this.context){var b=this.context.listener;if(a){var c=ln[0],d=ln[1];Q(c,0,0,0);gf(a,c,c);b.setPosition(c[0],c[1],c[2]);Ve(this.dc,c);Q(c,0,0,1);hf(a,c,c);Q(d,0,1,0);hf(a,d,d);b.setOrientation(-c[0],-c[1],-c[2],d[0],d[1],d[2])}else b.setPosition(0,0,0),b.setOrientation(0,0,1,0,1,0);b.setVelocity(0,0,0)}};var ln=[O(),O()];function mn(a,b){ei.call(this,a);this.d=b;this.context=m;v.webkitAudioContext?this.context=new window.webkitAudioContext:v.AudioContext&&(this.context=new window.AudioContext);this.listener=new kn(this.context);H(this,this.listener);this.Gg=[];this.Vi=[]}D(mn,ei);mn.prototype.b=function(){Ia(this.Gg,I);this.Gg.length=0;Ia(this.Vi,I);this.Vi.length=0;mn.a.b.call(this)};mn.prototype.Yh=function(a){this.Gg.push(a);a.load()};function nn(a,b){G.call(this);this.fb=a;this.ra=b;this.Fk=this.Sh=q;this.ub=this.Nf=m}D(nn,G);nn.prototype.b=function(){this.Di(m);nn.a.b.call(this)};nn.prototype.Di=function(a){if(a!=this.ub){if(this.ub){this.stop();var b=this.ub;E(this.ra.Vi,b);I(b)}if(this.ub=a)a=this.ub,this.ra.Vi.push(a),a.load(),this.Sh||on(this,0)}};function on(a,b){var c=10+60*Math.random(),c=b+1E3*c;Vc.clearTimeout(a.Nf);a.Nf=Wc(a.co,c,a)}
nn.prototype.co=function(){if(!this.Sh&&this.ub){this.stop();var a=m,b=this.ub,c=[],d;for(d in b.ng)c.push(b.ng[d]);c.length&&(a=c[0]);a&&(this.ub.play(a),this.Fk=l,on(this,a.duration))}};nn.prototype.stop=function(){this.ub&&(this.Nf!==m&&(Vc.clearTimeout(this.Nf),this.Nf=m),Dg(this.ub),this.Fk=q)};var pn="fullscreen_changed_"+Oc++,qn="orientation_changed_"+Oc++;function rn(a){G.call(this);this.Hd=a||window;this.Xh=Gc(this.Hd,"resize",this.Qq,q,this);this.kc=Pd(this.Hd||window);if(Ab&&ub||yb&&this.Hd.self!=this.Hd.top)this.hj=window.setInterval(C(this.Hm,this),sn)}D(rn,Uc);var tn={},sn=500;t=rn.prototype;t.Xh=m;t.Hd=m;t.kc=m;t.hj=m;t.Dc=function(){return this.kc?this.kc.s():m};t.b=function(){rn.a.b.call(this);this.Xh&&(Kc(this.Xh),this.Xh=m);this.hj&&(window.clearInterval(this.hj),this.hj=m);this.kc=this.Hd=m};t.Qq=function(){this.Hm()};
t.Hm=function(){var a=Pd(this.Hd||window);if(!(a==this.kc||(!a||!this.kc?0:a.width==this.kc.width&&a.height==this.kc.height)))this.kc=a,this.dispatchEvent("resize")};function un(a,b){G.call(this);this.d=a;var c=a.R,d=c.body;this.parentElement=b||d;this.T=new Pc(this);H(this,this.T);d=a.createElement("DIV");fl(d,{position:"absolute",left:0,top:0,right:0,bottom:0});a.appendChild(this.parentElement,d);var e=a.createElement("DIV");fl(e,{position:"absolute",left:0,top:0,right:0,bottom:0});a.appendChild(d,e);this.Ia=d;this.canvas=new vn(a,e);H(this,this.canvas);this.Fn=l;this.Rh=this.Xd=q;this.orientation=wn;this.Xs=v.devicePixelRatio||1;var e=a.R.parentWindow||a.R.defaultView||
window,f=na(e),e=tn[f]=tn[f]||new rn(e);this.T.listen(e,"resize",function(){this.je()});this.T.listen(a.R.body,"orientationchange",C(function(){this.orientation=window.orientation;this.je();this.dispatchEvent(qn)},this));this.je();if((this.Xd=!(!d.requestFullScreen&&!d.mozRequestFullScreen&&!d.webkitRequestFullScreen))&&(c.fullScreenEnabled!==i||c.mozFullScreenEnabled!==i))this.Xd=c.fullScreenEnabled||c.mozFullScreenEnabled;this.Xd&&this.T.listen(c,["fullscreenchange","mozfullscreenchange","webkitfullscreenchange"],
function(){this.Rh=!!c.fullScreenElement||c.mozFullScreen||c.webkitIsFullScreen;this.je();this.dispatchEvent(pn)})}D(un,Uc);var wn=0;un.prototype.Dc=function(){return this.canvas.size};un.prototype.fg=function(a){a!=this.Fn&&(this.Fn=a,this.canvas.yc.style.display=a?"":"none")};un.prototype.je=function(){this.canvas.je()};
function vn(a,b){G.call(this);this.parentElement=b;this.yc=a.createElement("CANVAS");jl(this.yc);fl(this.yc,{position:"absolute",left:0,top:0,right:0,bottom:0,cursor:"crosshair","-webkit-tap-highlight-color":"rgba(0,0,0,0)","-webkit-touch-callout":"none"});a.appendChild(b,this.yc);this.size=new Md(1,1)}D(vn,G);
vn.prototype.je=function(){var a;a=this.parentElement;var b;b:{b=Rd(a);if(b.defaultView&&b.defaultView.getComputedStyle&&(b=b.defaultView.getComputedStyle(a,m))){b=b.display||b.getPropertyValue("display")||"";break b}b=""}if("none"!=(b||(a.currentStyle?a.currentStyle.display:m)||a.style&&a.style.display))a=hl(a);else{b=a.style;var c=b.display,d=b.visibility,e=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";a=hl(a);b.display=c;b.position=e;b.visibility=d}b=window.devicePixelRatio||
1;this.yc.width=a.width*b;this.yc.height=a.height*b;fl(this.yc,{width:a.width+"px",height:a.height+"px"});this.size.width=a.width;this.size.height=a.height};var xn="context_lost_"+Oc++,yn="context_restored_"+Oc++;function zn(){this.wk=q;this.lh=this.Vj=m;this.Gd=[]};function An(a){zn.call(this);this.ba=a;this.Co=this.Fl=q}D(An,zn);function Bn(a){var b=a.ba.d.createElement("IMG");if(!b)return a.Fl=q,Ff();var c=new yf;a=C(function(){this.Fl=2==b.height;b.onload=m;b.onerror=m;c.D(m)},a);b.addEventListener("load",a,q);b.addEventListener("error",a,q);b.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA";return c};function Cn(a,b){G.call(this);this.d=a||(b?new Sd(Rd(b)):Jd||(Jd=new Sd));this.canvas=b;this.Ld={};this.Nk=0;this.ml=this.Vc=this.ds=this.kh=this.Rg=this.mi=m;this.vj=0;this.Cd=[];this.Ir=m;this.bt=[m];this.T=new Pc(this);H(this,this.T);this.Yg=q;this.T.listen(b,"webglcontextcreationerror",function(a){L("error creating gl context: ",a.statusMessage||"?")});this.T.listen(b,"webglcontextlost",function(a){a.preventDefault();this.w();this.dispatchEvent(xn)});this.T.listen(b,"webglcontextrestored",function(){this.restore();
this.dispatchEvent(yn)});this.f=m;this.yh=new ce;this.kk=new An(this)}D(Cn,Uc);t=Cn.prototype;t.b=function(){this.Nk&&Qa(this.Ld,I);this.Ld={};this.w();Cn.a.b.call(this)};t.w=function(){this.Yg=q;Qa(this.Ld,function(a){a.w()});this.ds=this.kh=this.Rg=this.mi=m;this.Vc&&(this.Vc.reset(),this.Vc=m);this.ml=m;for(var a=this.vj=0;a<this.Cd.length;a++)this.Cd[a]=m;this.Ir=m};
t.restore=function(){this.Cd=Array(this.f.getParameter(34930));for(var a=0;a<this.Cd.length;a++)this.Cd[a]=m;Qa(this.Ld,function(a){a.restore()});this.Yg=l};
t.we=function(a){if(this.f)return Ff();var b=new yf;if(v.WebGLRenderingContext){for(var c=m,d=["webgl","experimental-webgl"],e=0;e<d.length;e++){try{c=this.canvas.getContext(d[e],a)}catch(f){continue}if(c)break}a=c}else a=m;a?(this.f=a,this.yh.we(a),a=this.kk,c=new yf,a.wk?a.lh?c.G(a.lh):c.D(m):(a.Gd.push(c),a.Vj||(d=[],d.push(Bn(a)),a.Co=a.ba.yh.isSupported(8),d=new Yf(d),a.Vj=d,Zd(a.Vj,function(){this.wk=l;this.lh=m;for(var a=0;a<this.Gd.length;a++)this.Gd[a].D(m);this.Gd.length=0},function(a){this.wk=
l;this.lh=a;for(var b=0;b<this.Gd.length;b++)this.Gd[b].G(a);this.Gd.length=0},a))),Zd(c,function(){this.restore();b.D(m)},function(a){b.G(a)},this)):(this.Yg=q,b.G("Unable to create the WebGL context"));return b};t.flush=function(){this.f.flush()};function mg(a,b){a.Rg!=b&&(b&&a.f&&b.od(a.f,a.Rg),a.Rg=b)}function ng(a,b){a.kh!=b&&(b&&a.f&&b.od(a.f,a.kh),a.kh=b)}function uf(a,b){a.Vc!=b&&(b?b.od(a.Vc):a.Vc&&a.Vc.reset(),a.Vc=b)}
function og(a,b){var c=b instanceof Ie?b.handle:b;a.ml!=c&&(a.f.useProgram(c),a.ml=c)}function Be(a,b){var c=a.f;a.Cd[0]!=b&&(0!=a.vj&&(c.activeTexture(33984),a.vj=0),(a.Cd[0]=b)?b.bind():a.f.bindTexture(c.TEXTURE_2D,m))}t.Ej=function(){return!this.Yg?q:l};t.end=aa();function Dn(a,b){G.call(this);this.Nn=b;this.pf=[];a>this.Nn&&g(Error("[goog.structs.SimplePool] Initial cannot be greater than max"));for(var c=0;c<a;c++)this.pf.push(this.gh())}D(Dn,G);t=Dn.prototype;t.Sm=m;t.Xm=m;function En(a,b){a.pf.length<a.Nn?a.pf.push(b):a.Zj(b)}t.gh=function(){return this.Sm?this.Sm():{}};t.Zj=function(a){if(this.Xm)this.Xm(a);else if(ma(a))if(la(a.$e))a.$e();else for(var b in a)delete a[b]};t.b=function(){Dn.a.b.call(this);for(var a=this.pf;a.length;)this.Zj(a.pop());delete this.pf};function Fn(){G.call(this);this.type="none"}D(Fn,G);function Gn(){this.xf=Array(256)}Gn.prototype.X=function(a,b,c){b=c?C(b,c):b;this.xf[a]=b};function Hn(a,b){var c=Qh();c.Ej(b.data,0);if(c.offset+1<=c.buffer.length){var d=Nh(c),e=a.xf[d];e&&e(b,d,c)}};function In(a,b,c){G.call(this);this.Ja=new Gn;this.W=new bn;this.id=a;this.type=b;this.Ys=c;this.info=new Sl;this.Es=new Fn;this.state=0;this.Ma=[];this.Ab={};this.cj=Array(256);this.Aa=[]}D(In,G);In.prototype.b=function(){this.Aa.length=0;In.a.b.call(this)};In.prototype.Ie=function(a){this.Ma.push(a);this.Ab[a.j]=a;this.cj[a.oc]=a;for(var b=0;b<this.Aa.length;b++)this.Aa[b].Xl(a)};In.prototype.pi=function(a){if(Ua(this.Ab,a.j)){this.cj[a.oc]=m;E(this.Ma,a);for(var b=0;b<this.Aa.length;b++)this.Aa[b].Yl(a)}};function Jn(a){this.timestamp=ta();this.zb=m;this.data=a};function Kn(a){G.call(this);this.sh=a;this.ge=q;this.state=Ln;this.Xg=q;this.jc=0;this.Oc=m;this.Zf=[];this.kj=[]}D(Kn,G);Kn.prototype.b=function(){this.close();Kn.a.b.call(this)};var Ln=0;Kn.prototype.read=function(){if(!this.Zf.length)return m;var a=this.Zf[0];a.timestamp<=ta()?this.Zf.shift():a=m;this.Zf.length||(this.Xg=q);return a};
Kn.prototype.write=function(a){a=new Jn(a);this.jc?(a.timestamp+=this.jc+(Math.random()-0.5)*this.jc/2,this.Oc===m&&(this.Oc=v.setInterval(C(function(){1==this.state&&this.flush()},this),5))):this.Oc!==m&&(v.clearInterval(this.Oc),this.Oc=m);this.kj.push(a);1==this.state&&this.flush()};function Mn(a,b){a.jc&&(b.timestamp+=a.jc+(Math.random()-0.5)*a.jc/2);a.Zf.push(b);a.Xg=l}Kn.prototype.flush=function(a){for(var b=ta();this.kj.length;){var c=this.kj[0];if(c.timestamp>b&&!a)break;this.kj.shift();this.Wo(c.data)}};
Kn.prototype.close=function(){2!=this.state&&(this.Oc!==m&&(v.clearInterval(this.Oc),this.Oc=m),this.state=2)};function Nn(a,b,c,d){In.call(this,"none",a.ge?0:1,b);this.Ja.X(2,this.Pq,this);this.Ja.X(3,this.Rq,this);this.Ja.X(6,this.Uq,this);this.Ja.X(7,this.Vq,this);this.Ja.X(8,this.Tq,this);this.Ja.X(4,this.Gq,this);this.Ja.X(5,this.Hq,this);this.Ka=a;H(this,this.Ka);this.Td=0;this.$g=new yf;a=new Ai;a.Vl=vb()||"";a.type=yb?"opera":F?"ie":zb?"gecko":Ab?"webkit":Bi;a.platform=tb?"mac":ub?"windows":Eb?"linux":Ci;a.pe=zi;a.Sd=Of?"chrome":Lf?"iphone":Mf?"ipad":Nf?"android":Bb?"mobile":Di;this.send(em(b,new Gi("none",
0,0,d,a)));this.Ok=m}D(Nn,In);t=Nn.prototype;t.ge=function(){return this.Ka.ge};function wi(a){a.Ok||(a.Ok=a.Ab[a.id]||m);return a.Ok}t.Nb=function(a){if(0==this.state)for(;this.Ka.Xg;){var b=this.Ka.read();if(!b)return;Hn(this.Ja,b);return}else for(var c=lc();this.Ka.Xg;){b=this.Ka.read();if(!b)break;wi(this).n.Jp+=b.data.byteLength;Hn(this.Ja,b);if(a&&lc()-c>=a)break}2==this.Ka.state&&On(this,1)};
t.Pq=function(a,b,c){a:{$l.eg=c.ca();$l.Qe=c.ca();a=c.ca();$l.og.length=a;for(b=0;b<a;b++){$l.og[b]=new Tl;var d=c,e=$l.og[b]||Ul;e.oc=Nh(d);e.xa=Oh(d);if(!e){c=m;break a}}c=$l}if(!c)return q;d=cn(this.W)-c.Qe/1E3;a=this.W;b=c.eg/1E3;d=Math.abs(d)/2;a.xa=d;b+=d;b<a.mb&&(b=a.mb);a.mb=b;b=cn(a);b=a.mb-b;d=b-a.Re;a.Re=0.3<Math.abs(d)?b:0<d?a.Re+0.001:a.Re-0.001;a.wn=l;for(a=0;a<c.og.length;a++)if(b=c.og[a],d=this.cj[b.oc]||m)d.n.mm=b.xa;return l};
t.Rq=function(a,b,c){a:{a=am.info||new Sl;a.sh=c.t();a.name=c.t();a.location=c.t();a.pk=c.t();a.qk=c.t();a.Sk=c.ca();a.li={};b=c.ca();for(var d=0;d<b;d++){var e,f;e=c.t();f=c.t();a.li[e]=f}if(a){a=c.ca();am.Ma.length=a;for(b=0;b<a;b++)if(am.Ma[b]=new Gi,!Xl(c,am.Ma[b])){c=m;break a}c=am}else c=m}if(!c)return q;this.info=c.info.s();for(a=0;a<c.Ma.length;a++)this.Ie(Hi(c.Ma[a]));this.state=1;this.$g.D(this);c=qf(C(function(){if(2!=this.state){var a=vi(this.W)+this.W.xa,b=cn(this.W),c=Math.min(65535,
1E3*this.W.xa|0);this.send(Zl(1E3*a|0,1E3*b|0,c))}2==this.state&&v.clearInterval(h)},this),"gf.net.ClientSession#sendPing");var h=v.setInterval(c,500);c();for(c=0;c<this.Aa.length;c++)this.Aa[c].Oj();return l};t.Uq=function(a,b,c){a=!Xl(c,jm.zb)?m:jm;if(!a)return q;this.Ie(Hi(a.zb));return l};t.Vq=function(a,b,c){km.j=c.t();km.reason=c.ca();if(!km)return q;a=this.Ab[km.j]||m;if(!a)return l;a.Td=km.reason;this.pi(a);return l};
t.Tq=function(a,b,c){mm.j=c.t();b=!Vl(c,mm.info)?m:mm;if(!b)return q;a=this.Ab[b.j]||m;if(!a)return l;b=b.info.Q;b=Fi(b);a.info.Q=b;for(b=0;b<this.Aa.length;b++)this.Aa[b].Zl(a);return l};t.Gq=function(a,b,c){cm.Gl=Oh(c);cm.yj=Oh(c);a=!Xl(c,cm.zb)?m:cm;if(!a)return q;this.id=a.zb.j;return l};t.Hq=function(a,b,c){gm.reason=c.ca();if(!gm)return q;L("disconnected by server",gm.reason);On(this,gm.reason);return l};
function On(a,b){a.state=2;a.Td=b;I(a.Ka);for(var c=0;c<a.Aa.length;c++)a.Aa[c].Xj();a.$g.Hb||a.$g.G(a.Td)}t.disconnect=function(){this.send(im());this.Ka.flush(l);On(this,0)};t.send=function(a){a&&(2==this.Ka.state?On(this,1):2!=this.state&&(1==this.state&&(wi(this).n.Kp+=a.byteLength),this.Ka.write(a)))};function Pn(a){for(var b=new Uint8Array(2*a.length),c=0,d=0;d<a.length;d++){for(var e=a.charCodeAt(d);255<e;)b[c++]=e,e>>=8;b[c++]=e}return b.subarray(0,c).buffer}function Qn(a){a=new Uint8Array(a);for(var b=Array(a.length),c=0;c<b.length;c++)b[c]=a[c];return String.fromCharCode.apply(m,b)};function Rn(a){Kn.call(this,a);this.I=new WebSocket(a);this.I.binaryType="arraybuffer";this.Bm=C(this.Oq,this);this.zm=C(this.uf,this);this.ym=C(this.Fq,this);this.Am=C(this.vk,this);this.I.addEventListener("open",this.Bm,q);this.I.addEventListener("error",this.zm,q);this.I.addEventListener("close",this.ym,q);this.I.addEventListener("message",this.Am,q)}D(Rn,Kn);t=Rn.prototype;t.Oq=function(){this.state=1;this.flush()};t.uf=function(a){L("error",a)};t.Fq=function(a){L("close",a);this.close()};
t.vk=function(a){a=a.data;var b=m;a instanceof ArrayBuffer?b=new Jn(a):B(a)&&(b=new Jn(Pn(a)));b&&Mn(this,b)};t.Wo=function(a){1!=this.I.readyState?this.close():this.I.send(a)};t.close=function(){this.I.removeEventListener("open",this.Bm,q);this.I.removeEventListener("error",this.zm,q);this.I.removeEventListener("close",this.ym,q);this.I.removeEventListener("message",this.Am,q);this.I.close();Rn.a.close.call(this)};function Sn(a,b){Kn.call(this,a);this.ge=l;this.state=1;this.I=b;this.es=!!b.webkitPostMessage&&!(v.Cs&&b instanceof MessagePort);this.Np=!yb;var c=this;this.I.onmessage=function(a){c.vk(a)};this.I.onerror=function(a){L("port error",a)};this.Cm=C(this.Sq,this);v.addEventListener("unload",this.Cm,q)}D(Sn,Kn);Sn.prototype.vk=function(a){a=a.data;var b=m;a instanceof ArrayBuffer?b=new Jn(a):B(a)?b=new Jn(Pn(a)):a&&a.close&&this.close();b&&Mn(this,b)};Sn.prototype.Sq=function(){this.close()};
Sn.prototype.Wo=function(a){this.es?this.I.webkitPostMessage(a,[a]):this.Np?this.I.postMessage(a):this.I.postMessage(Qn(a))};Sn.prototype.close=function(){this.I.onmessage=m;v.removeEventListener("unload",this.Cm,q);try{this.I.postMessage({close:l}),this.I.close&&this.I.close()}catch(a){}Sn.a.close.call(this)};function Tn(a,b){var c=m;if(v.Worker&&a instanceof Worker||v.SharedWorker&&a instanceof SharedWorker||v.MessagePort&&a instanceof MessagePort)c=new Sn(a,a);else if(B(a))c=new Rn(a);else return c=new yf,c.G(m),c;var d=new Nn(c,7,0,b),c=d.$g,e=v.setInterval(function(){0==d.state&&d.Nb();0!=d.state&&v.clearInterval(e)},16);return c};function Un(){};function Vn(a){G.call(this);this.d=a;this.na=[];this.de=m}D(Vn,G);Vn.prototype.b=function(){this.de&&(Ic(this.de,"navigate",this.$q,q,this),I(this.de),this.de=m);for(;this.na.length;){var a=this.na.pop();a.N=m;I(a)}Vn.a.b.call(this)};Vn.prototype.$q=function(a){L("navigate: ",a.kt,a.Rs)};function Wn(a){if(a.de){for(var b=[],c=0;c<a.na.length;c++)b.push(a.na[c].Yq);b=b.join("/");a.de.ct(b)}}function Xn(a,b){Yn(a,l);Nl(a,b,l);Wn(a)}function Nl(a,b,c){b.N=a;a.na.push(b);Zn(a);b.ua();c||Wn(a)}
function ql(a,b){var c=a.na.pop();c.N=m;I(c);Zn(a);b||Wn(a)}function Yn(a,b){for(;a.na.length;)ql(a,l);b||Wn(a)}function Zn(a){for(var b=l,c=l,d=a.na.length-1;0<=d;d--){var e=a.na[d];e.setActive(b);e.gq=c;e.q&6&&(c=b=q);e.q&8&&(c=q)}}Vn.prototype.update=function(a){for(var b=0;b<this.na.length;b++)this.na[b].update(a)};Vn.prototype.A=function(a){for(var b=0;b<this.na.length;b++){var c=this.na[b];c.Dn()&&c.A(a)}};function $n(a,b,c){hn.call(this,b);this.fn=q;this.d=a;this.Ya=c;this.fb=new jn(this,this.d);H(this,this.fb);this.Te.push(this.fb);this.F=new un(this.d);H(this,this.F);this.F.fg(q);this.C=new vj(this,this.F.Ia);H(this,this.C);this.Te.push(this.C);a=C(this.Go,this);this.C.V.ok=a;this.ba=new Cn(this.d,this.F.canvas.yc);H(this,this.ba);this.M=new S(this,this.fb,this.ba);H(this,this.M);this.ra=new mn(this,this.d);H(this,this.ra);this.Te.push(this.ra);this.ai=new nn(this.fb,this.ra);H(this,this.ai);this.Hg=
new ae(this.fb,this.ra.context);this.ra.Yh(this.Hg);this.N=new Vn(this.d);H(this,this.N);this.Kb=q}D($n,hn);t=$n.prototype;t.b=function(){$n.a.b.call(this)};function ao(a){var b=a.C,c=b.K,d=a.Ya.ka,d=Math.min(Math.max(d,0.1),10);c.Ai=d;b.K.Mn=a.Ya.pb;a.Kb&&a.Ya.pb?rj(b.K):tj(b.K);b=a.ai;c=a.Ya.bc;b.Sh!=c&&(c&&b.stop(),b.Sh=c);if(a.Kb){var e=m;a=a.N;b=function(a){if(a instanceof Mm)return e=a,q};for(c=0;c<a.na.length&&b.call(v,a.na[c])!==q;c++);a=e}else a=m;a&&a.rl()}
t.start=function(){ao(this);var a=new $m(this.d,this.F.Ia);Xn(this.N,a);Zd(this.ba.we({alpha:q,antialias:q}),function(){Zd(this.M.we(),function(){Yn(this.N);Nm(this);_gaq.push(["_trackEvent","game","setup_succeeded"]);if(this.If.host)_gaq.push(["_trackEvent","game","connect_to_host",this.If.host]),this.ah(this.If.host);else{this.Kb&&(this.Kb=q);var a=new Rm(this,this.F.Ia);Xn(this.N,a)}},function(a){bo(this,"Unable to setup graphics resources",a)},this)},function(a){bo(this,"Unable to create the graphics context",
a)},this)};function bo(a,b,c){_gaq.push(["_trackEvent","game","setup_fail",b]);Yn(a.N);a=Ml(a.N,a.F.Ia,"setup",b,c||m);Zd(a,function(a){"reload"==a&&window.location.reload()},m,i)}t.update=function(a){this.N.update(a)};t.A=function(a){this.N.A(a)};t.ia=function(){this.Ya.Za||$d(this.Hg,"click",Hd)};function Am(a){a.Ya.Za||$d(a.Hg,"player_leave",Hd)}
t.Go=function(){this.ia();var a=!this.F.Rh,b=this.F;if(b.Rh){if(b.Xd){var c=b.d.R;(c.cancelFullScreen||c.mozCancelFullScreen||c.webkitCancelFullScreen).call(c);b.Rh=q}}else b.Xd&&(b=b.Ia,(b.requestFullScreen||b.mozRequestFullScreen||b.webkitRequestFullScreen).call(b,Element.ALLOW_KEYBOARD_INPUT));this.Kb&&(a&&this.C.K.Ni&&this.Ya.pb)&&rj(this.C.K)};function Gm(a){a.Kb&&a.C.ja(q);var b=new Um(a.d,a.F.Ia,a.Ya);Nl(a.N,b);Zd(b.Wb,function(a){this.ia();"save"==a&&ao(this);this.Kb&&this.C.ja(l)},m,a)}
function Hm(a){function b(){this.ia();this.Kb&&this.C.ja(l)}a.Kb&&a.C.ja(q);var c=new Pm(a.d,a.F.Ia);Nl(a.N,c);Zd(c.Wb,b,b,a)}
t.ah=function(a){var b,c=this.N,d=new Ll(c.d,this.F.Ia,Il,{Or:a});Nl(c,d);b=d.Wb;c=new yf;d=new Rb(a);""!=d.gc&&""!=d.cd&&""!=d.Vf||c.G('Invalid address format: "'+a+'"');var e=new Un,f=new Ei;f.Q=Fi(this.Ya.userName);if(!c.Hb)switch(d.gc){case "ws":this.Pm(d,e,f,c);break;case "local":this.Om(d,e,f,c);break;default:c.G('Unsupported scheme "'+d.gc+'"')}Zd(c,function(c){L("Connection established to "+a);b.cancel();this.Kb=l;c=new Mm(this,c);Xn(this.N,c)},function(c){L("Error connecting to "+a,c);b.cancel();
var d=this.N;c=new Ll(d.d,this.F.Ia,Jl,{reason:c});Nl(d,c);Zd(c.Wb,function(a){"reload"==a&&window.location.reload()},m,i)},this)};$n.ip=q;$n.prototype.Om=function(a,b,c,d){if(Of){var e=new yf;v.webkitStorageInfo?v.webkitStorageInfo.requestQuota(1,4294967296,function(a){e.D(a)},function(a){e.G(a)}):e.G(m);Zd(e,function(e){4294967296>e?d.G(m):this.Uh(a,b,c,d)},function(){L("unable to get quota - no saving!");this.Uh(a,b,c,d)},this)}else this.Uh(a,b,c,d)};
$n.prototype.Uh=function(a,b,c,d){if(v.Worker){a="server-"+a.cd+"";var e;$n.ip&&this.If.as&&Of&&v.SharedWorker?(a=new SharedWorker("worker-server.js",a),e=a.port):e=a=new Worker("worker-server.js");a.onerror=function(a){L("Error in worker: "+a.message+"("+a.filename+":"+a.Ts+")")};Zd(Tn(e,c),function(a){e.addEventListener("message",function(a){if(a.data instanceof Object&&"gf_log"==a.data.type){var b=a.data.args;b.unshift("{server}");window.console.log.apply(window.console,b);a.stopPropagation()}},
l);d.D(a)},function(a){d.G(a)})}else d.G("Workers not supported")};$n.prototype.Pm=function(a,b,c,d){a=Tn(a.toString(),c);Zd(a,d.D,d.G,d)};$n=rf($n,"blk.game.client.ClientGame",{ah:"connectToHost",Om:"connectToLocalHost_",Uh:"launchLocalServer_",Pm:"connectToRemoteHost_"});function co(a){this.R=a}var eo=/\s*;\s*/;t=co.prototype;t.set=function(a,b,c,d,e,f){/[;=\s]/.test(a)&&g(Error('Invalid cookie name "'+a+'"'));/[;\r\n]/.test(b)&&g(Error('Invalid cookie value "'+b+'"'));y(c)||(c=-1);e=e?";domain="+e:"";d=d?";path="+d:"";f=f?";secure":"";c=0>c?"":0==c?";expires="+(new Date(1970,1,1)).toUTCString():";expires="+(new Date(ta()+1E3*c)).toUTCString();this.R.cookie=a+"="+b+e+d+c+f};
t.get=function(a,b){for(var c=a+"=",d=(this.R.cookie||"").split(eo),e=0,f;f=d[e];e++){if(0==f.lastIndexOf(c,0))return f.substr(c.length);if(f==a)return""}return b};t.remove=function(a,b,c){var d=this.tc(a);this.set(a,"",0,b,c);return d};t.Zb=function(){return fo(this).keys};t.Jb=function(){return fo(this).ps};t.Ua=function(){return!this.R.cookie?0:(this.R.cookie||"").split(eo).length};t.tc=function(a){return y(this.get(a))};t.clear=function(){for(var a=fo(this).keys,b=a.length-1;0<=b;b--)this.remove(a[b])};
function fo(a){a=(a.R.cookie||"").split(eo);for(var b=[],c=[],d,e,f=0;e=a[f];f++)d=e.indexOf("="),-1==d?(b.push(""),c.push(e)):(b.push(e.substring(0,d)),c.push(e.substring(d+1)));return{keys:b,ps:c}};function go(a){this.kb=a;this.userName="User";this.ka=1;this.pb=l;this.Cb=ho;this.bc=this.Za=q}var ho=X.em;go.prototype.s=function(){var a=new go(this.kb);a.userName=this.userName;a.ka=this.ka;a.pb=this.pb;a.Cb=this.Cb;a.Za=this.Za;a.bc=this.bc;return a};go.prototype.reset=function(){this.userName="User";this.ka=1;this.pb=l;this.Cb=ho;this.bc=this.Za=q};
go.prototype.load=function(){var a=new co(this.kb.R);this.userName=a.get("s_un",this.userName);this.userName=decodeURIComponent(this.userName.replace(/\+/g," "));1>this.userName.length&&(this.userName="User");this.ka=Number(a.get("s_ms",String(this.ka)));if(0>=this.ka||10<this.ka)this.ka=1;this.pb="true"==a.get("s_ml",String(this.pb));this.Cb=Number(a.get("s_vd",String(this.Cb)))|0;if(this.Cb<=X.qj||this.Cb>X.pj)this.Cb=ho;this.Za="true"==a.get("s_sm",String(this.Za));this.bc="true"==a.get("s_mm",
String(this.bc))};go.prototype.save=function(){var a=new co(this.kb.R);a.set("s_un",encodeURIComponent(String(this.userName)),31104E3,"/");a.set("s_ms",String(this.ka),31104E3,"/");a.set("s_ml",String(this.pb),31104E3,"/");a.set("s_vd",String(this.Cb),31104E3,"/");a.set("s_sm",String(this.Za),31104E3,"/");a.set("s_mm",String(this.bc),31104E3,"/")};function io(){this.hf=[];this.cl=new lb;this.Io=this.Jo=this.Ko=this.Ao=0;this.gg=new lb;this.Mm=this.Ho=0;this.Zk=1;this.fk=new Dn(0,4E3);this.fk.gh=function(){return new jo};this.Bo=new Dn(0,50);this.Bo.gh=function(){return new ko};var a=this;this.xk=new Dn(0,2E3);this.xk.gh=function(){return String(a.Zk++)};this.xk.Zj=aa();this.Yp=3}io.prototype.ha=nd("goog.debug.Trace");function ko(){this.$l=this.time=this.count=0}
ko.prototype.toString=function(){var a=[];a.push(this.type," ",this.count," (",Math.round(10*this.time)/10," ms)");this.$l&&a.push(" [VarAlloc = ",this.$l,"]");return a.join("")};function jo(){}function lo(a,b,c,d){var e=[];-1==c?e.push("    "):e.push(mo(a.bn-c));e.push(" ",no(a.bn-b));0==a.gk?e.push(" Start        "):1==a.gk?(e.push(" Done "),e.push(mo(a.gt-a.startTime)," ms ")):e.push(" Comment      ");e.push(d,a);0<a.ks&&e.push("[VarAlloc ",a.ks,"] ");return e.join("")}
jo.prototype.toString=function(){return this.type==m?this.Rp:"["+this.type+"] "+this.Rp};io.prototype.reset=function(a){this.Yp=a;for(a=0;a<this.hf.length;a++){var b=this.fk.id;b&&En(this.xk,b);En(this.fk,this.hf[a])}this.hf.length=0;this.cl.clear();this.Ao=ta();this.Mm=this.Ho=this.Io=this.Jo=this.Ko=0;b=this.gg.Zb();for(a=0;a<b.length;a++){var c=this.gg.get(b[a]);c.count=0;c.time=0;c.$l=0;En(this.Bo,c)}this.gg.clear()};
io.prototype.toString=function(){for(var a=[],b=-1,c=[],d=0;d<this.hf.length;d++){var e=this.hf[d];1==e.gk&&c.pop();a.push(" ",lo(e,this.Ao,b,c.join("")));b=e.bn;a.push("\n");0==e.gk&&c.push("|  ")}if(0!=this.cl.Ua()){var f=ta();a.push(" Unstopped timers:\n");d=this.cl;b=function(b){a.push("  ",b," (",f-b.startTime," ms, started at ",no(b.startTime),")\n")};if(ka(d))try{Ia(d,b,i)}catch(h){h!==$a&&g(h)}else{d=kb(d);try{for(;;)b.call(i,d.next())}catch(j){j!==$a&&g(j)}}}b=this.gg.Zb();for(d=0;d<b.length;d++)c=
this.gg.get(b[d]),1<c.count&&a.push(" TOTAL ",c,"\n");a.push("Total tracers created ",this.Ho,"\n","Total comments created ",this.Mm,"\n","Overhead start: ",this.Ko," ms\n","Overhead end: ",this.Jo," ms\n","Overhead comment: ",this.Io," ms\n");return a.join("")};function mo(a){a=Math.round(a);var b="";1E3>a&&(b=" ");100>a&&(b="  ");10>a&&(b="   ");return b+a}function no(a){a=Math.round(a);return String(100+a/1E3%60).substring(1,3)+"."+String(1E3+a%1E3).substring(1,4)}new io;ea("blk.client.start",function(a,b,c,d){a=new Sd(a);c=new ic(c,d);d=new go(a);d.load();(new $n(a,c,d)).start()});
