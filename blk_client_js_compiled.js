function ba(a){throw a;}var g=void 0,i=!0,l=null,n=!1;function ca(){return function(){}}function da(a){return function(b){this[a]=b}}function q(a){return function(){return this[a]}}function ea(a){return function(){return a}}var t,fa=fa||{},u=this;function ga(a,b){var c=a.split("."),d=u;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&x(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function ha(a){a=a.split(".");for(var b=u,c;c=a.shift();)if(b[c]!=l)b=b[c];else return l;return b}function z(){}
function ia(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function x(a){return a!==g}function ja(a){var b=ia(a);return"array"==b||"object"==b&&"number"==typeof a.length}function A(a){return"string"==typeof a}function ka(a){return"function"==ia(a)}function la(a){var b=typeof a;return"object"==b&&a!=l||"function"==b}function ma(a){return a[na]||(a[na]=++oa)}var na="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),oa=0;
function pa(a,b,c){return a.call.apply(a.bind,arguments)}function qa(a,b,c){a||ba(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function B(a,b,c){B=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?pa:qa;return B.apply(l,arguments)}
function ra(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var sa=Date.now||function(){return+new Date};function C(a,b){function c(){}c.prototype=b.prototype;a.a=b.prototype;a.prototype=new c;a.prototype.constructor=a};function ta(a){Error.captureStackTrace?Error.captureStackTrace(this,ta):this.stack=Error().stack||"";a&&(this.message=String(a))}C(ta,Error);ta.prototype.name="CustomError";function ua(a){return a.replace(/\xa0|\s/g," ")}function va(a){return a.replace(/\xa0|[ \t]+/g," ")}function xa(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function ya(a){if(!za.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Aa,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Ba,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Ca,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Da,"&quot;"));return a}var Aa=/&/g,Ba=/</g,Ca=/>/g,Da=/\"/g,za=/[&<>\"]/;
function Ea(a,b){var c=x(b)?a.toFixed(b):String(a),d=c.indexOf(".");-1==d&&(d=c.length);d=Math.max(0,1-d);return Array(d+1).join("0")+c};var Fa=Array.prototype,Ga=Fa.indexOf?function(a,b,c){return Fa.indexOf.call(a,b,c)}:function(a,b,c){c=c==l?0:0>c?Math.max(0,a.length+c):c;if(A(a))return!A(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Ha=Fa.forEach?function(a,b,c){Fa.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=A(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Ia=Fa.filter?function(a,b,c){return Fa.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,
h=A(a)?a.split(""):a,j=0;j<d;j++)if(j in h){var k=h[j];b.call(c,k,j,a)&&(e[f++]=k)}return e},Ja=Fa.some?function(a,b,c){return Fa.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=A(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return i;return n};function D(a,b){var c=Ga(a,b),d;(d=0<=c)&&Fa.splice.call(a,c,1);return d}function Ka(a){return Fa.concat.apply(Fa,arguments)}function La(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}
function Ma(a,b){Fa.sort.call(a,b||Wa)}function Wa(a,b){return a>b?1:a<b?-1:0};function Xa(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function Ya(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function Za(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function $a(a){for(var b in a)delete a[b]}function ab(a,b){var c;(c=b in a)&&delete a[b];return c}function bb(a){var b={},c;for(c in a)b[c]=a[c];return b}var cb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function db(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<cb.length;f++)c=cb[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function eb(a){if("function"==typeof a.Ab)return a.Ab();if(A(a))return a.split("");if(ja(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Ya(a)}function fb(a,b,c){if("function"==typeof a.forEach)a.forEach(b,c);else if(ja(a)||A(a))Ha(a,b,c);else{var d;if("function"==typeof a.Yc)d=a.Yc();else if("function"!=typeof a.Ab)if(ja(a)||A(a)){d=[];for(var e=a.length,f=0;f<e;f++)d.push(f)}else d=Za(a);else d=g;for(var e=eb(a),f=e.length,h=0;h<f;h++)b.call(c,e[h],d&&d[h],a)}};function gb(a,b){this.r={};this.h=[];var c=arguments.length;if(1<c){c%2&&ba(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){a instanceof gb?(c=a.Yc(),d=a.Ab()):(c=Za(a),d=Ya(a));for(var e=0;e<c.length;e++)this.set(c[e],d[e])}}t=gb.prototype;t.i=0;t.Rk=0;t.ib=q("i");t.Ab=function(){hb(this);for(var a=[],b=0;b<this.h.length;b++)a.push(this.r[this.h[b]]);return a};t.Yc=function(){hb(this);return this.h.concat()};
t.kc=function(a){return ib(this.r,a)};t.clear=function(){this.r={};this.Rk=this.i=this.h.length=0};t.remove=function(a){return ib(this.r,a)?(delete this.r[a],this.i--,this.Rk++,this.h.length>2*this.i&&hb(this),i):n};function hb(a){if(a.i!=a.h.length){for(var b=0,c=0;b<a.h.length;){var d=a.h[b];ib(a.r,d)&&(a.h[c++]=d);b++}a.h.length=c}if(a.i!=a.h.length){for(var e={},c=b=0;b<a.h.length;)d=a.h[b],ib(e,d)||(a.h[c++]=d,e[d]=1),b++;a.h.length=c}}t.get=function(a,b){return ib(this.r,a)?this.r[a]:b};
t.set=function(a,b){ib(this.r,a)||(this.i++,this.h.push(a),this.Rk++);this.r[a]=b};t.q=function(){return new gb(this)};function ib(a,b){return Object.prototype.hasOwnProperty.call(a,b)};var jb,kb,lb,mb,nb,ob,pb;function qb(){return u.navigator?u.navigator.userAgent:l}nb=mb=lb=kb=jb=n;var rb;if(rb=qb()){var sb=u.navigator;jb=0==rb.indexOf("Opera");kb=!jb&&-1!=rb.indexOf("MSIE");mb=(lb=!jb&&-1!=rb.indexOf("WebKit"))&&-1!=rb.indexOf("Mobile");nb=!jb&&!lb&&"Gecko"==sb.product}var tb=jb,F=kb,ub=nb,vb=lb,wb=mb,xb,yb=u.navigator;xb=yb&&yb.platform||"";ob=-1!=xb.indexOf("Mac");pb=-1!=xb.indexOf("Win");var zb=-1!=xb.indexOf("Linux");
function Ab(){var a=u.document;return a?a.documentMode:g}var Bb;a:{var Cb="",Db;if(tb&&u.opera)var Eb=u.opera.version,Cb="function"==typeof Eb?Eb():Eb;else if(ub?Db=/rv\:([^\);]+)(\)|;)/:F?Db=/MSIE\s+([^\);]+)(\)|;)/:vb&&(Db=/WebKit\/(\S+)/),Db)var Fb=Db.exec(qb()),Cb=Fb?Fb[1]:"";if(F){var Gb=Ab();if(Gb>parseFloat(Cb)){Bb=String(Gb);break a}}Bb=Cb}var Hb={};
function Ib(a){var b;if(!(b=Hb[a])){b=0;for(var c=xa(String(Bb)).split("."),d=xa(String(a)).split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var h=c[f]||"",j=d[f]||"",k=RegExp("(\\d*)(\\D*)","g"),m=RegExp("(\\d*)(\\D*)","g");do{var p=k.exec(h)||["","",""],r=m.exec(j)||["","",""];if(0==p[0].length&&0==r[0].length)break;b=((0==p[1].length?0:parseInt(p[1],10))<(0==r[1].length?0:parseInt(r[1],10))?-1:(0==p[1].length?0:parseInt(p[1],10))>(0==r[1].length?0:parseInt(r[1],10))?1:0)||((0==p[2].length)<
(0==r[2].length)?-1:(0==p[2].length)>(0==r[2].length)?1:0)||(p[2]<r[2]?-1:p[2]>r[2]?1:0)}while(0==b)}b=Hb[a]=0<=b}return b}var Jb=u.document,Kb=!Jb||!F?g:Ab()||("CSS1Compat"==Jb.compatMode?parseInt(Bb,10):5);var Lb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function Mb(a,b){var c;if(a instanceof Mb)this.Na=x(b)?b:a.Na,Nb(this,a.Xb),c=a.mi,Ob(this),this.mi=c,c=a.Sc,Ob(this),this.Sc=c,Pb(this,a.Bf),c=a.sh,Ob(this),this.sh=c,Qb(this,a.zc.q()),c=a.Qg,Ob(this),this.Qg=c;else if(a&&(c=String(a).match(Lb))){this.Na=!!b;Nb(this,c[1]||"",i);var d=c[2]||"";Ob(this);this.mi=d?decodeURIComponent(d):"";d=c[3]||"";Ob(this);this.Sc=d?decodeURIComponent(d):"";Pb(this,c[4]);d=c[5]||"";Ob(this);this.sh=d?decodeURIComponent(d):"";Qb(this,c[6]||"",i);c=c[7]||"";Ob(this);
this.Qg=c?decodeURIComponent(c):""}else this.Na=!!b,this.zc=new Rb(l,0,this.Na)}t=Mb.prototype;t.Xb="";t.mi="";t.Sc="";t.Bf=l;t.sh="";t.Qg="";t.Eo=n;t.Na=n;
t.toString=function(){var a=[],b=this.Xb;b&&a.push(Sb(b,Tb),":");if(b=this.Sc){a.push("//");var c=this.mi;c&&a.push(Sb(c,Tb),"@");a.push(encodeURIComponent(String(b)));b=this.Bf;b!=l&&a.push(":",String(b))}if(b=this.sh)this.Sc&&"/"!=b.charAt(0)&&a.push("/"),a.push(Sb(b,"/"==b.charAt(0)?Ub:Vb));(b=this.zc.toString())&&a.push("?",b);(b=this.Qg)&&a.push("#",Sb(b,Wb));return a.join("")};t.q=function(){return new Mb(this)};
function Nb(a,b,c){Ob(a);a.Xb=c?b?decodeURIComponent(b):"":b;a.Xb&&(a.Xb=a.Xb.replace(/:$/,""))}function Pb(a,b){Ob(a);b?(b=Number(b),(isNaN(b)||0>b)&&ba(Error("Bad port number "+b)),a.Bf=b):a.Bf=l}function Qb(a,b,c){Ob(a);b instanceof Rb?(a.zc=b,a.zc.wk(a.Na)):(c||(b=Sb(b,Xb)),a.zc=new Rb(b,0,a.Na))}function Ob(a){a.Eo&&ba(Error("Tried to modify a read-only Uri"))}t.wk=function(a){this.Na=a;this.zc&&this.zc.wk(a);return this};function Sb(a,b){return A(a)?encodeURI(a).replace(b,Yb):l}
function Yb(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Tb=/[#\/\?@]/g,Vb=/[\#\?:]/g,Ub=/[\#\?]/g,Xb=/[\#\?@]/g,Wb=/#/g;function Rb(a,b,c){this.xa=a||l;this.Na=!!c}function Zb(a){if(!a.D&&(a.D=new gb,a.i=0,a.xa))for(var b=a.xa.split("&"),c=0;c<b.length;c++){var d=b[c].indexOf("="),e=l,f=l;0<=d?(e=b[c].substring(0,d),f=b[c].substring(d+1)):e=b[c];e=decodeURIComponent(e.replace(/\+/g," "));e=$b(a,e);a.add(e,f?decodeURIComponent(f.replace(/\+/g," ")):"")}}t=Rb.prototype;
t.D=l;t.i=l;t.ib=function(){Zb(this);return this.i};t.add=function(a,b){Zb(this);this.xa=l;a=$b(this,a);var c=this.D.get(a);c||this.D.set(a,c=[]);c.push(b);this.i++;return this};t.remove=function(a){Zb(this);a=$b(this,a);return this.D.kc(a)?(this.xa=l,this.i-=this.D.get(a).length,this.D.remove(a)):n};t.clear=function(){this.D=this.xa=l;this.i=0};t.kc=function(a){Zb(this);a=$b(this,a);return this.D.kc(a)};
t.Yc=function(){Zb(this);for(var a=this.D.Ab(),b=this.D.Yc(),c=[],d=0;d<b.length;d++)for(var e=a[d],f=0;f<e.length;f++)c.push(b[d]);return c};t.Ab=function(a){Zb(this);var b=[];if(a)this.kc(a)&&(b=Ka(b,this.D.get($b(this,a))));else{a=this.D.Ab();for(var c=0;c<a.length;c++)b=Ka(b,a[c])}return b};t.set=function(a,b){Zb(this);this.xa=l;a=$b(this,a);this.kc(a)&&(this.i-=this.D.get(a).length);this.D.set(a,[b]);this.i++;return this};
t.get=function(a,b){var c=a?this.Ab(a):[];return 0<c.length?String(c[0]):b};t.toString=function(){if(this.xa)return this.xa;if(!this.D)return"";for(var a=[],b=this.D.Yc(),c=0;c<b.length;c++)for(var d=b[c],e=encodeURIComponent(String(d)),d=this.Ab(d),f=0;f<d.length;f++){var h=e;""!==d[f]&&(h+="="+encodeURIComponent(String(d[f])));a.push(h)}return this.xa=a.join("&")};t.q=function(){var a=new Rb;a.xa=this.xa;this.D&&(a.D=this.D.q(),a.i=this.i);return a};
function $b(a,b){var c=String(b);a.Na&&(c=c.toLowerCase());return c}t.wk=function(a){a&&!this.Na&&(Zb(this),this.xa=l,fb(this.D,function(a,c){var d=c.toLowerCase();c!=d&&(this.remove(c),this.remove(d),0<a.length&&(this.xa=l,this.D.set($b(this,d),La(a)),this.i+=a.length))},this));this.Na=a};t.extend=function(a){for(var b=0;b<arguments.length;b++)fb(arguments[b],function(a,b){this.add(b,a)},this)};function ac(a,b,c){this.Ei=a;db(this.Ei,{buildServer:{help:"Build server daemon address.",type:String,defaultValue:l}});this.uri=new Mb(b);this.zh=new Rb(g,0,i);(a=this.uri.zc)&&this.zh.extend(a);this.zh.extend(c);this.bq=bc(this,"buildServer")}function bc(a,b){var c=a.Ei[b].defaultValue,d=a.zh.get(b,c);return!x(d)||!d||!d.length||/^[\s\xa0]*$/.test(String(d))?c:String(d)};function cc(a,b){ac.call(this,{simulatedLatency:{help:"Extra latency, in ms, to add to send/recv.",type:Number,defaultValue:0},userName:{help:"User name for multiplayer.",type:String,defaultValue:l},host:{help:"Host endpoint for connections.",type:String,defaultValue:l}},a,b);var c=this.Ei.simulatedLatency.defaultValue,d=this.zh.get("simulatedLatency",c);this.Zb=!x(d)||!d||!d.length?c:Number(d);this.host=bc(this,"host")}C(cc,ac);var dc=u.performance&&u.performance.webkitNow?function(){return u.performance.webkitNow()}:sa;function ec(a,b,c){this.type=a;this.path=b;this.size=c}function fc(a,b){return a.size-b.size};function G(){0!=gc&&(this.hq=Error().stack,hc[ma(this)]=this)}var gc=0,hc={};G.prototype.ul=n;G.prototype.bj=function(){if(!this.ul&&(this.ul=i,this.b(),0!=gc)){var a=ma(this);delete hc[a]}};function H(a,b){a.zg||(a.zg=[]);a.zg.push(b)}G.prototype.b=function(){this.zg&&ic.apply(l,this.zg);if(this.em)for(;this.em.length;)this.em.shift()()};function K(a){a&&"function"==typeof a.bj&&a.bj()}function ic(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];ja(d)?ic.apply(l,d):K(d)}};function jc(a,b,c){G.call(this);this.name=a;this.Uo=b;this.ik=this.Tk=0;this.Mj=l;this.kb=c;for(a=0;a<this.kb.length;a++)this.Tk+=this.kb[a].Sk;Ma(this.kb,kc)}C(jc,G);function lc(a){if(a.kb.length){if(1==a.kb.length)return a.kb[0]}else return l;switch(a.Uo){case 0:return mc(a,i);case 1:return mc(a,n);case 2:var b=a.kb[a.ik];a.ik=(a.ik+1)%a.kb.length;return b;default:return mc(a,i)}}
function mc(a,b){for(var c=0;5>c;c++){for(var d=l,e=Math.random()*a.Tk,f=0;f<a.kb.length;f++){d=a.kb[f];if(e<d.Sk)break;e-=d.Sk}if(b||d!=a.Mj)return a.Mj=d}return a.Mj||a.kb[0]}function L(a,b){this.start=a;this.duration=b;this.Sk=x(g)?g:1;this.gm=0}function kc(a,b){return a.gm-b.gm};var nc=!F||F&&9<=Kb,oc=F&&!Ib("9");!vb||Ib("528");ub&&Ib("1.9b")||F&&Ib("8")||tb&&Ib("9.5")||vb&&Ib("528");ub&&!Ib("8")||F&&Ib("9");function pc(a,b){this.type=a;this.currentTarget=this.target=b}t=pc.prototype;t.b=ca();t.bj=ca();t.kd=n;t.defaultPrevented=n;t.Eh=i;t.stopPropagation=function(){this.kd=i};t.preventDefault=function(){this.defaultPrevented=i;this.Eh=n};function qc(a){qc[" "](a);return a}qc[" "]=z;function rc(a,b){a&&this.uc(a,b)}C(rc,pc);t=rc.prototype;t.target=l;t.relatedTarget=l;t.offsetX=0;t.offsetY=0;t.clientX=0;t.clientY=0;t.screenX=0;t.screenY=0;t.button=0;t.keyCode=0;t.charCode=0;t.ctrlKey=n;t.altKey=n;t.shiftKey=n;t.metaKey=n;t.So=n;t.pc=l;
t.uc=function(a,b){var c=this.type=a.type;pc.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(ub){var e;a:{try{qc(d.nodeName);e=i;break a}catch(f){}e=n}e||(d=l)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=vb||a.offsetX!==g?a.offsetX:a.layerX;this.offsetY=vb||a.offsetY!==g?a.offsetY:a.layerY;this.clientX=a.clientX!==g?a.clientX:a.pageX;this.clientY=a.clientY!==g?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.So=ob?a.metaKey:a.ctrlKey;this.state=a.state;this.pc=a;a.defaultPrevented&&this.preventDefault();delete this.kd};t.stopPropagation=function(){rc.a.stopPropagation.call(this);this.pc.stopPropagation?this.pc.stopPropagation():this.pc.cancelBubble=i};
t.preventDefault=function(){rc.a.preventDefault.call(this);var a=this.pc;if(a.preventDefault)a.preventDefault();else if(a.returnValue=n,oc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};t.b=ca();function sc(){}var tc=0;t=sc.prototype;t.key=0;t.md=n;t.pg=n;t.uc=function(a,b,c,d,e,f){ka(a)?this.Ol=i:a&&a.handleEvent&&ka(a.handleEvent)?this.Ol=n:ba(Error("Invalid listener argument"));this.listener=a;this.qm=b;this.src=c;this.type=d;this.capture=!!e;this.Vg=f;this.pg=n;this.key=++tc;this.md=n};t.handleEvent=function(a){return this.Ol?this.listener.call(this.Vg||this.src,a):this.listener.handleEvent.call(this.listener,a)};var uc={},vc={},wc={},xc={};
function yc(a,b,c,d,e){if("array"==ia(b)){for(var f=0;f<b.length;f++)yc(a,b[f],c,d,e);return l}a:{b||ba(Error("Invalid event type"));d=!!d;var h=vc;b in h||(h[b]={i:0,Qa:0});h=h[b];d in h||(h[d]={i:0,Qa:0},h.i++);var h=h[d],f=ma(a),j;h.Qa++;if(h[f]){j=h[f];for(var k=0;k<j.length;k++)if(h=j[k],h.listener==c&&h.Vg==e){if(h.md)break;j[k].pg=n;a=j[k].key;break a}}else j=h[f]=[],h.i++;var m=zc,p=nc?function(a){return m.call(p.src,p.key,a)}:function(a){a=m.call(p.src,p.key,a);if(!a)return a},k=p;k.src=
a;h=new sc;h.uc(c,k,a,b,d,e);h.pg=n;c=h.key;k.key=c;j.push(h);uc[c]=h;wc[f]||(wc[f]=[]);wc[f].push(h);a.addEventListener?(a==u||!a.rl)&&a.addEventListener(b,k,d):a.attachEvent(b in xc?xc[b]:xc[b]="on"+b,k);a=c}return a}function Ac(a,b,c,d,e){if("array"==ia(b))for(var f=0;f<b.length;f++)Ac(a,b[f],c,d,e);else if(d=!!d,a=Bc(a,b,d))for(f=0;f<a.length;f++)if(a[f].listener==c&&a[f].capture==d&&a[f].Vg==e){Cc(a[f].key);break}}
function Cc(a){if(!uc[a])return n;var b=uc[a];if(b.md)return n;var c=b.src,d=b.type,e=b.qm,f=b.capture;c.removeEventListener?(c==u||!c.rl)&&c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(d in xc?xc[d]:xc[d]="on"+d,e);c=ma(c);wc[c]&&(e=wc[c],D(e,b),0==e.length&&delete wc[c]);b.md=i;if(b=vc[d][f][c])b.am=i,Dc(d,f,c,b);delete uc[a];return i}
function Dc(a,b,c,d){if(!d.lh&&d.am){for(var e=0,f=0;e<d.length;e++)d[e].md?d[e].qm.src=l:(e!=f&&(d[f]=d[e]),f++);d.length=f;d.am=n;0==f&&(delete vc[a][b][c],vc[a][b].i--,0==vc[a][b].i&&(delete vc[a][b],vc[a].i--),0==vc[a].i&&delete vc[a])}}function Bc(a,b,c){var d=vc;return b in d&&(d=d[b],c in d&&(d=d[c],a=ma(a),d[a]))?d[a]:l}
function Ec(a,b,c,d,e){var f=1;b=ma(b);if(a[b]){a.Qa--;a=a[b];a.lh?a.lh++:a.lh=1;try{for(var h=a.length,j=0;j<h;j++){var k=a[j];k&&!k.md&&(f&=Fc(k,e)!==n)}}finally{a.lh--,Dc(c,d,b,a)}}return Boolean(f)}function Fc(a,b){a.pg&&Cc(a.key);return a.handleEvent(b)}
function zc(a,b){if(!uc[a])return i;var c=uc[a],d=c.type,e=vc;if(!(d in e))return i;var e=e[d],f,h;if(!nc){f=b||ha("window.event");var j=i in e,k=n in e;if(j){if(0>f.keyCode||f.returnValue!=g)return i;a:{var m=n;if(0==f.keyCode)try{f.keyCode=-1;break a}catch(p){m=i}if(m||f.returnValue==g)f.returnValue=i}}m=new rc;m.uc(f,this);f=i;try{if(j){for(var r=[],v=m.currentTarget;v;v=v.parentNode)r.push(v);h=e[i];h.Qa=h.i;for(var s=r.length-1;!m.kd&&0<=s&&h.Qa;s--)m.currentTarget=r[s],f&=Ec(h,r[s],d,i,m);if(k){h=
e[n];h.Qa=h.i;for(s=0;!m.kd&&s<r.length&&h.Qa;s++)m.currentTarget=r[s],f&=Ec(h,r[s],d,n,m)}}else f=Fc(c,m)}finally{r&&(r.length=0)}return f}d=new rc(b,this);return f=Fc(c,d)}var Gc=0;function Hc(a){G.call(this);this.Fl=a;this.h=[]}C(Hc,G);var Ic=[];Hc.prototype.listen=function(a,b,c,d,e){"array"!=ia(b)&&(Ic[0]=b,b=Ic);for(var f=0;f<b.length;f++){var h=yc(a,b[f],c||this,d||n,e||this.Fl||this);this.h.push(h)}return this};
function Jc(a,b,c,d,e,f){if("array"==ia(c))for(var h=0;h<c.length;h++)Jc(a,b,c[h],d,e,f);else{a:{d=d||a;f=f||a.Fl||a;e=!!e;if(b=Bc(b,c,e))for(c=0;c<b.length;c++)if(!b[c].md&&b[c].listener==d&&b[c].capture==e&&b[c].Vg==f){b=b[c];break a}b=l}b&&(b=b.key,Cc(b),D(a.h,b))}}function Kc(a){Ha(a.h,Cc);a.h.length=0}Hc.prototype.b=function(){Hc.a.b.call(this);Kc(this)};Hc.prototype.handleEvent=function(){ba(Error("EventHandler.handleEvent not implemented"))};function Lc(){G.call(this);this.O=new Hc(this);H(this,this.O)}C(Lc,G);Lc.prototype.load=function(a){a.w(l)};Lc.prototype.cancel=z;function Mc(){G.call(this)}C(Mc,G);t=Mc.prototype;t.rl=i;t.gk=l;t.addEventListener=function(a,b,c,d){yc(this,a,b,c,d)};t.removeEventListener=function(a,b,c,d){Ac(this,a,b,c,d)};
t.dispatchEvent=function(a){var b=a.type||a,c=vc;if(b in c){if(A(a))a=new pc(a,this);else if(a instanceof pc)a.target=a.target||this;else{var d=a;a=new pc(b,this);db(a,d)}var d=1,e,c=c[b],b=i in c,f;if(b){e=[];for(f=this;f;f=f.gk)e.push(f);f=c[i];f.Qa=f.i;for(var h=e.length-1;!a.kd&&0<=h&&f.Qa;h--)a.currentTarget=e[h],d&=Ec(f,e[h],a.type,i,a)&&a.Eh!=n}if(n in c)if(f=c[n],f.Qa=f.i,b)for(h=0;!a.kd&&h<e.length&&f.Qa;h++)a.currentTarget=e[h],d&=Ec(f,e[h],a.type,n,a)&&a.Eh!=n;else for(e=this;!a.kd&&e&&
f.Qa;e=e.gk)a.currentTarget=e,d&=Ec(f,e,a.type,n,a)&&a.Eh!=n;a=Boolean(d)}else a=i;return a};t.b=function(){Mc.a.b.call(this);var a=0;if(this!=l){var b=ma(this);if(wc[b])for(var b=wc[b],c=b.length-1;0<=c;c--)Cc(b[c].key),a++}else Xa(uc,function(b,c){Cc(c);a++});this.gk=l};var Nc=u.window;function Oc(a,b,c){ka(a)?c&&(a=B(a,c)):a&&"function"==typeof a.handleEvent?a=B(a.handleEvent,a):ba(Error("Invalid listener argument"));return 2147483647<b?-1:Nc.setTimeout(a,b||0)};function Pc(a){return Qc(a||arguments.callee.caller,[])}
function Qc(a,b){var c=[];if(0<=Ga(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(Rc(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){0<e&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=String(f);break;case "boolean":f=f?"true":"false";break;case "function":f=(f=Rc(f))?f:"[fn]";break;default:f=typeof f}40<f.length&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(Qc(a.caller,b))}catch(h){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function Rc(a){if(Sc[a])return Sc[a];a=String(a);if(!Sc[a]){var b=/function ([^\(]+)/.exec(a);Sc[a]=b?b[1]:"[Anonymous]"}return Sc[a]}var Sc={};function Tc(a,b,c,d,e){this.reset(a,b,c,d,e)}Tc.prototype.kp=0;Tc.prototype.wl=l;Tc.prototype.vl=l;var Uc=0;Tc.prototype.reset=function(a,b,c,d,e){this.kp="number"==typeof e?e:Uc++;this.Nf=d||sa();this.pf=a;this.Mo=b;this.oq=c;delete this.wl;delete this.vl};Tc.prototype.wm=da("pf");function Vc(a){this.No=a}Vc.prototype.fa=l;Vc.prototype.pf=l;Vc.prototype.Ya=l;Vc.prototype.df=l;function Wc(a,b){this.name=a;this.value=b}Wc.prototype.toString=q("name");var Xc=new Wc("SEVERE",1E3),Yc=new Wc("WARNING",900),Zc=new Wc("INFO",800),$c=new Wc("CONFIG",700),ad=new Wc("FINE",500);t=Vc.prototype;t.getParent=q("fa");t.zl=function(){this.Ya||(this.Ya={});return this.Ya};t.wm=da("pf");function bd(a){return a.pf?a.pf:a.fa?bd(a.fa):l}
t.log=function(a,b,c){if(a.value>=bd(this).value){a=this.Ln(a,b,c);b="log:"+a.Mo;u.console&&(u.console.timeStamp?u.console.timeStamp(b):u.console.markTimeline&&u.console.markTimeline(b));u.msWriteProfilerMark&&u.msWriteProfilerMark(b);for(b=this;b;){c=b;var d=a;if(c.df)for(var e=0,f=g;f=c.df[e];e++)f(d);b=b.getParent()}}};
t.Ln=function(a,b,c){var d=new Tc(a,String(b),this.No);if(c){d.wl=c;var e;var f=arguments.callee.caller;try{var h;var j=ha("window.location.href");if(A(c))h={message:c,name:"Unknown error",lineNumber:"Not available",fileName:j,stack:"Not available"};else{var k,m,p=n;try{k=c.lineNumber||c.mq||"Not available"}catch(r){k="Not available",p=i}try{m=c.fileName||c.filename||c.sourceURL||j}catch(v){m="Not available",p=i}h=p||!c.lineNumber||!c.fileName||!c.stack?{message:c.message,name:c.name,lineNumber:k,
fileName:m,stack:c.stack||"Not available"}:c}e="Message: "+ya(h.message)+'\nUrl: <a href="view-source:'+h.fileName+'" target="_new">'+h.fileName+"</a>\nLine: "+h.lineNumber+"\n\nBrowser stack:\n"+ya(h.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+ya(Pc(f)+"-> ")}catch(s){e="Exception trying to expose exception! You win, we lose. "+s}d.vl=e}return d};t.info=function(a,b){this.log(Zc,a,b)};function cd(a,b){a.log(ad,b,g)}t.Ci=function(a,b){this.zl()[a]=b};var dd={},ed=l;
function fd(a){ed||(ed=new Vc(""),dd[""]=ed,ed.wm($c));var b;if(!(b=dd[a])){b=new Vc(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=fd(a.substr(0,c));c.Ci(d,b);b.fa=c;dd[a]=b}return b};function gd(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}ba(Error("Invalid JSON string: "+a))};function hd(){}hd.prototype.ll=l;function id(a){var b;if(!(b=a.ll))b={},jd(a)&&(b[0]=i,b[1]=i),b=a.ll=b;return b};var kd;function ld(){}C(ld,hd);ld.prototype.Ie=function(){var a=jd(this);return a?new ActiveXObject(a):new XMLHttpRequest};
function jd(a){if(!a.Hl&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.Hl=d}catch(e){}}ba(Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed"))}return a.Hl}kd=new ld;function md(a){G.call(this);this.headers=new gb;this.yi=a||l}C(md,Mc);md.prototype.da=fd("goog.net.XhrIo");var nd=/^https?$/i;t=md.prototype;t.Wa=n;t.k=l;t.xi=l;t.gh="";t.Sl="";t.lf=0;t.mf="";t.lj=n;t.Zg=n;t.Fj=n;t.ad=n;t.Of=0;t.ud=l;t.nd="";t.Pp=n;
t.send=function(a,b,c,d){this.k&&ba(Error("[goog.net.XhrIo] Object is active with another request="+this.gh+"; newUri="+a));b=b?b.toUpperCase():"GET";this.gh=a;this.mf="";this.lf=0;this.Sl=b;this.lj=n;this.Wa=i;this.k=this.yi?this.yi.Ie():kd.Ie();this.xi=this.yi?id(this.yi):id(kd);this.k.onreadystatechange=B(this.fm,this);try{cd(this.da,od(this,"Opening Xhr")),this.Fj=i,this.k.open(b,a,i),this.Fj=n}catch(e){cd(this.da,od(this,"Error opening Xhr: "+e.message));pd(this,e);return}a=c||"";var f=this.headers.q();
d&&fb(d,function(a,b){f.set(b,a)});d=u.FormData&&a instanceof u.FormData;"POST"==b&&(!f.kc("Content-Type")&&!d)&&f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");fb(f,function(a,b){this.k.setRequestHeader(b,a)},this);this.nd&&(this.k.responseType=this.nd);"withCredentials"in this.k&&(this.k.withCredentials=this.Pp);try{this.ud&&(Nc.clearTimeout(this.ud),this.ud=l),0<this.Of&&(cd(this.da,od(this,"Will abort after "+this.Of+"ms if incomplete")),this.ud=Nc.setTimeout(B(this.Gp,
this),this.Of)),cd(this.da,od(this,"Sending request")),this.Zg=i,this.k.send(a),this.Zg=n}catch(h){cd(this.da,od(this,"Send error: "+h.message)),pd(this,h)}};t.Gp=function(){"undefined"!=typeof fa&&this.k&&(this.mf="Timed out after "+this.Of+"ms, aborting",this.lf=8,cd(this.da,od(this,this.mf)),this.dispatchEvent("timeout"),this.abort(8))};function pd(a,b){a.Wa=n;a.k&&(a.ad=i,a.k.abort(),a.ad=n);a.mf=b;a.lf=5;qd(a);rd(a)}
function qd(a){a.lj||(a.lj=i,a.dispatchEvent("complete"),a.dispatchEvent("error"))}t.abort=function(a){this.k&&this.Wa&&(cd(this.da,od(this,"Aborting")),this.Wa=n,this.ad=i,this.k.abort(),this.ad=n,this.lf=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),rd(this))};t.b=function(){this.k&&(this.Wa&&(this.Wa=n,this.ad=i,this.k.abort(),this.ad=n),rd(this,i));md.a.b.call(this)};t.fm=function(){!this.Fj&&!this.Zg&&!this.ad?this.Qo():sd(this)};t.Qo=function(){sd(this)};
function sd(a){if(a.Wa&&"undefined"!=typeof fa)if(a.xi[1]&&4==a.Ze()&&2==td(a))cd(a.da,od(a,"Local request error detected and ignored"));else if(a.Zg&&4==a.Ze())Nc.setTimeout(B(a.fm,a),0);else if(a.dispatchEvent("readystatechange"),4==a.Ze()){cd(a.da,od(a,"Request complete"));a.Wa=n;try{var b=td(a),c,d;a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:d=i;break a;default:d=n}if(!(c=d)){var e;if(e=0===b){var f=String(a.gh).match(Lb)[1]||l;if(!f&&self.location)var h=self.location.protocol,
f=h.substr(0,h.length-1);e=!nd.test(f?f.toLowerCase():"")}c=e}if(c)a.dispatchEvent("complete"),a.dispatchEvent("success");else{a.lf=6;var j;try{j=2<a.Ze()?a.k.statusText:""}catch(k){cd(a.da,"Can not get status: "+k.message),j=""}a.mf=j+" ["+td(a)+"]";qd(a)}}finally{rd(a)}}}
function rd(a,b){if(a.k){var c=a.k,d=a.xi[0]?z:l;a.k=l;a.xi=l;a.ud&&(Nc.clearTimeout(a.ud),a.ud=l);b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){a.da.log(Xc,"Problem encountered resetting onreadystatechange: "+e.message,g)}}}t.Nl=function(){return!!this.k};t.Ze=function(){return this.k?this.k.readyState:0};function td(a){try{return 2<a.Ze()?a.k.status:-1}catch(b){return a.da.log(Yc,"Can not get status: "+b.message,g),-1}}
function ud(a){try{if(!a.k)return l;if("response"in a.k)return a.k.response;switch(a.nd){case "":case "text":return a.k.responseText;case "arraybuffer":if("mozResponseArrayBuffer"in a.k)return a.k.mozResponseArrayBuffer}a.da.log(Xc,"Response type "+a.nd+" is not supported on this browser",g);return l}catch(b){return cd(a.da,"Can not get response: "+b.message),l}}function od(a,b){return b+" ["+a.Sl+" "+a.gh+" "+td(a)+"]"};function vd(a,b,c){Lc.call(this);this.url=a;this.contentType=b;this.timeout=c||0;this.n=this.ua=l}C(vd,Lc);vd.prototype.load=function(a){this.n=a;this.ua=new md;H(this,this.ua);this.ua.Of=Math.max(0,this.timeout);switch(this.contentType){default:case 0:case 1:this.ua.nd="";break;case 2:this.ua.nd="arraybuffer";break;case 3:this.ua.nd="blob"}this.O.listen(this.ua,"success",this.$c);this.O.listen(this.ua,["abort","error","timeout"],this.af);this.ua.send(this.url)};
vd.prototype.cancel=function(){this.ua&&this.ua.abort()};vd.prototype.$c=function(){var a;switch(this.contentType){default:case 0:var b=this.ua;try{a=b.k?b.k.responseText:""}catch(c){cd(b.da,"Can not get responseText: "+c.message),a=""}break;case 1:a=this.ua;a=a.k?gd(a.k.responseText):g;break;case 2:case 3:a=ud(this.ua)}this.n.w(a);this.n=l};vd.prototype.af=function(){this.n.A(l);this.n=l};var wd=u.postMessage?[u]:[];function M(a){for(var b=0;b<wd.length;b++){for(var c=Array(arguments.length),d=0;d<c.length;d++)c[d]=arguments[d];try{wd[b].postMessage({type:"gf_log",args:c},l)}catch(e){}}}if(u.console)var xd=u.console,M=B(xd.log,xd);function yd(a,b,c,d){G.call(this);this.context=a;this.cue=c;this.Mm=d;this.yc=this.Ec=l;a&&(a=a.createBufferSource(),a.buffer=b,this.yc=this.Ec=a)}C(yd,G);yd.prototype.b=function(){this.yc&&(this.yc.disconnect(),this.Ec=this.yc=l);yd.a.b.call(this)};yd.prototype.play=function(a){this.Ec&&this.Ec.noteGrainOn(a||0,this.Mm.start/1E3,this.Mm.duration/1E3)};function zd(a,b,c,d){yd.call(this,a,b,c,d);this.Ec&&(this.yc=this.Ec,this.yc.connect(a.destination))}C(zd,yd);
function Ad(a,b,c,d){yd.call(this,a,b,c,d);this.yf=l;this.Ec&&(b=a.createPanner(),b.panningModel=0,b.distanceModel=2,b.refDistance=5,b.maxDistance=1E3,b.rolloffFactor=1.4,b.setPosition(0,0,0),b.setOrientation(0,0,0,0,0,0),b.setVelocity(0,0,0),this.yf=b,this.Ec.connect(b),this.yc=b,this.yc.connect(a.destination))}C(Ad,yd);Ad.prototype.b=function(){this.yf&&(this.yf.disconnect(),this.yf=l);Ad.a.b.call(this)};Ad.prototype.setPosition=function(a){var b=this.yf;b&&b.setPosition(a[0],a[1],a[2])};var Bd,Cd=!ub&&!F||F&&F&&9<=Kb||ub&&Ib("1.9.1");F&&Ib("9");var Dd=F||tb||vb;function Ed(a,b){this.width=a;this.height=b}t=Ed.prototype;t.q=function(){return new Ed(this.width,this.height)};t.Zf=function(){return this.width/this.height};t.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};t.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};t.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function Fd(a,b){var c=b||document;return c.querySelectorAll&&c.querySelector?c.querySelectorAll("."+a):c.getElementsByClassName?c.getElementsByClassName(a):Gd(a,b)}
function Gd(a,b){var c,d,e,f;c=document;c=b||c;if(c.querySelectorAll&&c.querySelector&&a)return c.querySelectorAll(""+(a?"."+a:""));if(a&&c.getElementsByClassName){var h=c.getElementsByClassName(a);return h}h=c.getElementsByTagName("*");if(a){f={};for(d=e=0;c=h[d];d++){var j=c.className;"function"==typeof j.split&&0<=Ga(j.split(/\s+/),a)&&(f[e++]=c)}f.length=e;return f}return h}
function Hd(a){a=a.document;a="CSS1Compat"==a.compatMode?a.documentElement:a.body;return new Ed(a.clientWidth,a.clientHeight)}function Id(a){for(var b;b=a.firstChild;)a.removeChild(b)}function Jd(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function Kd(a){this.N=a||u.document||document}function Ld(a,b,c){c=(a=c||a.N)||document;var d=l;return(d=c.querySelectorAll&&c.querySelector?c.querySelector("."+b):Fd(b,a)[0])||l}t=Kd.prototype;t.createElement=function(a){return this.N.createElement(a)};
t.createTextNode=function(a){return this.N.createTextNode(a)};t.appendChild=function(a,b){a.appendChild(b)};t.append=function(a,b){function c(a){a&&e.appendChild(A(a)?d.createTextNode(a):a)}for(var d=Jd(a),e=a,f=arguments,h=1;h<f.length;h++){var j=f[h];if(ja(j)&&!(la(j)&&0<j.nodeType)){var k=Ha,m;a:{if((m=j)&&"number"==typeof m.length){if(la(m)){m="function"==typeof m.item||"string"==typeof m.item;break a}if(ka(m)){m="function"==typeof m.item;break a}}m=n}k(m?La(j):j,c)}else c(j)}};
t.removeNode=function(a){return a&&a.parentNode?a.parentNode.removeChild(a):l};t.zl=function(a){return Cd&&a.children!=g?a.children:Ia(a.childNodes,function(a){return 1==a.nodeType})};var Md=["audio/mpeg","audio/ogg","audio/wav","audio/mp4"],Nd=l;function Od(a){for(var b=0;b<a.length;b++){var c=a[b],d=c.type;if(!Nd){var e={},f=document.createElement("AUDIO");if(f&&f.canPlayType)for(var h=0;h<Md.length;h++){var j=Md[h];e[j]=!!f.canPlayType(j)}Nd=e}if(Nd[d])return c}return l};function Pd(a){for(var b=arguments[0],c=1;c<arguments.length;c++){var d=arguments[c];if(0==d.lastIndexOf("/",0))b=d;else{var e;if(!(e=""==b))e=d.length-1,e=0<=e&&d.indexOf("/",e)==e;b=e?b+d:b+("/"+d)}}return b};function Qd(a,b,c,d,e,f){G.call(this);this.xe=a;this.context=b;this.path=c;this.name=d||"Unknown";this.Kd=e||[];e&&(this.Kd=e,Ma(this.Kd,fc));this.ql={};if(f)for(a=0;a<f.length;a++)b=f[a],this.ql[b.name]=b;this.n=this.Ii=l}C(Qd,G);t=Qd.prototype;t.b=function(){this.n&&(this.n.cancel(),this.n=l);Qd.a.b.call(this)};t.load=function(){this.Mi()};t.Mi=function(){if(this.context){var a=Od(this.Kd);a&&(a=new vd(Pd(this.path,a.path),2),this.n=this.xe.load(a),N(this.n,this.$c,this.handleError,this))}};
t.$c=function(a){this.n=l;var b=this.context;b&&b.decodeAudioData(a,B(da("Ii"),this),B(function(){M("failed to load audio buffer data")},this))};t.handleError=function(){this.n=l};function Rd(a,b,c){if(!a.Ii)return l;var d;d=A(b)?a.ql[b]:b;if(!d)return M("WARNING: cue "+b+" not found in bank "+a.name),l;b=lc(d);if(!b)return l;a=new c(a.context,a.Ii,d,b);a.play();return a};function Sd(a,b){Qd.call(this,a,b,"../assets/audio/base","BaseSounds",[new ec("audio/wav","base_optimized.wav",137870),new ec("audio/ogg","base_optimized.ogg",16480),new ec("audio/mpeg","base_optimized.mp3",12955)],[new jc("player_leave",0,[new L(820,641)]),new jc("click",0,[new L(0,105)]),new jc("player_join",0,[new L(205,515)])])}C(Sd,Qd);function Td(a){switch(a){case 1:return"OES_texture_float";case 2:return"OES_texture_half_float";case 3:return"WEBGL_lose_context";case 4:return"OES_standard_derivatives";case 5:return"OES_vertex_array_object";case 6:return"WEBGL_debug_renderer_info";case 7:return"WEBGL_debug_shaders";case 8:return"WEBGL_compressed_texture_s3tc";case 9:return"OES_depth_texture";case 10:return"OES_element_index_uint";case 11:return"EXT_texture_filter_anisotropic";default:return l}}
function Ud(){this.Bl=l;this.Lf=Array(11);this.nj=Array(11)}Ud.prototype.le=function(a){this.Bl=a;a=a.getSupportedExtensions();for(var b=0;b<this.Lf.length;b++){this.Lf[b]=n;this.nj[b]=l;var c=Td(b);if(c)for(var d=0;d<a.length;d++){var e=a[d],f=e.indexOf(c);if(-1!=f&&c.length==e.length-f){this.Lf[b]=i;break}}}};Ud.prototype.isSupported=function(a){return!!this.Lf[a]};Ud.prototype.enable=function(a){return!!this.get(a)};
Ud.prototype.get=function(a){var b=this.nj[a];if(!b&&this.Lf[a]){b=Td(a);if(!b)return l;b=this.Bl.getExtension(b);this.nj[a]=b}return b};function Vd(a,b,c){this.width=a;this.height=b;this.Oc=15;this.hh=c}
function Wd(a,b){var c=xa(b.type),d,e,f=c.indexOf(";");-1!=f?(d=c.substr(0,f),e=xa(c.substr(f+1))):(d=c,e="");switch(a.Oc){case Xd:c="a";break;case Yd:c="ra";break;case Zd:c="rgb";break;case $d:c="rgba";break;default:return l}switch(d){case "image/gif":f="gif";break;case "image/jpeg":f="jpeg";break;case "image/png":f="png";break;case "image/webp":f="webp";break;case "application/octet-stream":f=l;break;default:return l}e=e.split(",");for(var h=0;h<e.length;h++){var j=e[h].split("=");if(!(2>j.length)){var k=
xa(j[0]).toLowerCase(),j=xa(j[1]).toLowerCase();"codec"==k?f=j:"format"==k&&(c=j)}}if(!f)return l;e=6408;h=l;switch(f){case "s3tc.dxt1":h=8;switch(c){case "rgb":e=33776;break;case "rgba":e=33777;break;default:return l}break;case "s3tc.dxt3":h=8;e=33778;if("rgba"!=c)return l;break;case "s3tc.dxt5":h=8;e=33779;if("rgba"!=c)return l;break;default:switch(c){case "a":e=6406;break;case "ra":e=6410;break;case "rgb":e=6407;break;case "rgba":e=6408;break;default:return l}}return new ae(d,f,c,e,h)}
var Xd=8,Yd=9,Zd=7,$d=15;function ae(a,b,c,d,e){this.qn=a;this.eq=b;this.Cn=c;this.Lc=d;this.xq=e};function be(a,b){Lc.call(this);this.d=a;this.url=b;this.n=this.qa=this.crossOrigin=l}C(be,Lc);t=be.prototype;t.b=function(){Kc(this.O);this.qa&&(this.qa.src="",this.qa=l);be.a.b.call(this)};t.load=function(a){this.n=a;this.qa=this.d.createElement("IMG");this.crossOrigin&&(this.qa.crossOrigin=this.crossOrigin);this.O.listen(this.qa,"load",this.$c);this.O.listen(this.qa,["abort","error"],this.af);this.qa.src=this.url};
t.cancel=function(){this.qa&&(Kc(this.O),this.qa.src="",this.qa=l,this.n.A(l),this.n=l)};t.$c=function(){var a=this.qa;this.qa=l;this.n.w(a);this.n=l};t.af=function(){this.qa=l;this.n.A(l);this.n=l};function P(a){G.call(this);this.g=a;this.vm=String(ce++);a=this.g;a.Ed[this.vm]=this;a.Rj++}C(P,G);P.prototype.b=function(){var a=this.g;ab(a.Ed,this.vm);a.Rj--;this.u();P.a.b.call(this)};var ce=0;P.prototype.u=z;P.prototype.restore=z;function de(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}de.prototype.BYTES_PER_ELEMENT=4;de.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};de.prototype.toString=Array.prototype.join;"undefined"==typeof Float32Array&&(de.BYTES_PER_ELEMENT=4,de.prototype.BYTES_PER_ELEMENT=de.prototype.BYTES_PER_ELEMENT,de.prototype.set=de.prototype.set,de.prototype.toString=de.prototype.toString,ga("Float32Array",de));function ee(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}ee.prototype.BYTES_PER_ELEMENT=8;ee.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};ee.prototype.toString=Array.prototype.join;if("undefined"==typeof Float64Array){try{ee.BYTES_PER_ELEMENT=8}catch(fe){}ee.prototype.BYTES_PER_ELEMENT=ee.prototype.BYTES_PER_ELEMENT;ee.prototype.set=ee.prototype.set;ee.prototype.toString=ee.prototype.toString;ga("Float64Array",ee)};function Q(){return new Float32Array(4)}function ge(a,b,c,d){var e=Q();he(e,a,b,c,d);return e}function he(a,b,c,d,e){a[0]=b;a[1]=c;a[2]=d;a[3]=e}function ie(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3]}function je(a,b){var c=1/256;b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c;b[3]=a[3]*c}function ke(a,b){return a.length==b.length&&a[0]==b[0]&&a[1]==b[1]&&a[2]==b[2]&&a[3]==b[3]};function le(a,b,c,d){P.call(this,a);this.width=b;this.height=c;this.Cn=d;this.Rc=0;this.Xj=9986;this.Tj=9729;this.Sp=this.Rp=10497;this.Go=1;this.handle=this.Uh=l}C(le,P);le.prototype.u=function(){this.g.f.deleteTexture(this.handle);this.handle=l;le.a.u.call(this)};le.prototype.restore=function(){var a=this.g.f;le.a.restore.call(this);this.handle&&a.deleteTexture(this.handle);this.handle=a.createTexture();this.Rc=4294967295};
le.prototype.bind=function(){var a=this.g.f;a.bindTexture(3553,this.handle);var b=this.Rc;this.Rc=0;b&1&&a.texParameteri(3553,10241,this.Xj);b&2&&a.texParameteri(3553,10240,this.Tj);b&4&&a.texParameteri(3553,10242,this.Rp);b&8&&a.texParameteri(3553,10243,this.Sp);b&16&&this.g.Ng.isSupported(11)&&a.texParameteri(3553,34046,this.Go)};function me(a){9728!=a.Xj&&(a.Rc|=1,a.Xj=9728);9728!=a.Tj&&(a.Rc|=2,a.Tj=9728)}
function ne(a,b,c){a.Uh=[];b=a.width/b;c=a.height/c;for(var d=0,e=0;d<c;d++)for(var f=d/c,h=0;h<b;h++,e++){var j=h/b;a.Uh[e]=ge(j,f,j+1/b,f+1/c)}}function oe(a,b,c){a.Uh&&(a=a.Uh[b])&&ie(c,a);return c};function pe(a,b,c,d,e){le.call(this,b,e?e.width:1,e?e.height:1,6408);this.xe=a;this.path=c;this.name=d;this.Il=this.ff=l;this.Do=n;this.n=l;if(e){this.ff=e;this.width=e.width;this.height=e.height;for(a=0;a<this.ff.hh.length;a++)Ma(this.ff.hh[a],fc)}}C(pe,le);t=pe.prototype;t.b=function(){this.n&&(this.n.cancel(),this.n=l);pe.a.b.call(this)};t.restore=function(){pe.a.restore.call(this);this.n||this.load()};t.load=function(){this.Mi()};
t.Mi=function(){var a=this.xe.d,b;a:{var c=this.ff;b=this.g;var d;d=Math.min(Math.max(0,0),c.hh.length-1);d=c.hh[d];for(var e=0;e<d.length;e++){var f=d[e],h=Wd(c,f);if(h&&("image/webp"!=h.qn||b.pj.Ak)){switch(h.Lc){case 33776:case 33777:case 33778:case 33779:if(!b.pj.Bm)continue}b=f;break a}}b=l}if(b&&(c=Wd(this.ff,b))){this.Il=c;b=Pd(this.path,b.path);d=l;a:switch(c.Lc){case 33776:case 33777:case 33778:case 33779:c=i;break a;default:c=n}d=c?new vd(b,2):new be(a,b);this.n=this.xe.load(d);N(this.n,
this.$c,this.handleError,this)}};t.$c=function(a){this.n=l;qe(this,a)};t.handleError=function(){this.n=l;var a=this.g.d.createElement("CANVAS");a.width=16;a.height=16;var b=a.getContext("2d");b.fillStyle="rgb(255,0,0)";b.fillRect(0,0,a.width,a.height);qe(this,a)};
function qe(a,b){var c=a.g.f;re(a.g,a);a.handle.M=a.name;var d=a.width,e=a.height,f=a.Il;if(b instanceof HTMLCanvasElement||b instanceof HTMLImageElement)c.texImage2D(3553,0,f.Lc,f.Lc,5121,b);else if(b instanceof ArrayBuffer)switch(f.Lc){default:c.texImage2D(3553,0,f.Lc,d,e,0,f.Lc,5121,b);break;case 33776:case 33777:case 33778:case 33779:c.compressedTexImage2D(3553,0,f.Lc,d,e,0,b)}a.Do=i};function se(a,b){pe.call(this,a,b,"../assets/blocksets","simple",new Vd(256,256,[[new ec("image/png","simple.png",23720)]]));ne(this,16,16)}C(se,pe);function te(a,b,c,d){P.call(this,a);this.Gi=b;this.lineHeight=c;this.Wl=2;this.ln=0;this.Cl=[];for(a=0;a<d.length;a+=4){c=d[a];var e=0;c.length?e=c.charCodeAt(0):(e=c,c=String.fromCharCode(e));var f=d[a+1],h=d[a+2],j=d[a+3],k=oe(b,a/4,Q());this.Cl[e]=new ue(c,f,h,j,k)}}C(te,P);
function ve(a,b,c,d,e){b.La(c.length);for(var f=1/a.Gi.width,h=1/a.Gi.height,j=0,k=0,m=0,p=0,r=i,v=0,s=0;s<c.length;s++){var y=c[s];if("\r"!=y)if("\n"==y)k=Math.max(j+v,k),v=j=0,m+=a.lineHeight+a.Wl,p+=a.Wl,r=i;else if(y=a.Cl[y.charCodeAt(0)])r?p=Math.max(p,a.lineHeight):j+=a.ln+v,v=y.hn,j+=y.Tm,b.add(y.Cm[0],y.Cm[1],y.Ji*f,a.lineHeight*h,d,0+j,e+m,y.Ji,a.lineHeight),j+=y.Ji,r=n}k=Math.max(j+v,k);return[k,p]}function ue(a,b,c,d,e){this.dq=a;this.Tm=b;this.Ji=c;this.hn=d;this.Cm=e};function we(a,b,c){a=new pe(b,c,"../assets/fonts","monospace",new Vd(128,128,[[new ec("image/png","monospace.png",1256)]]));ne(a,8,8);me(a);te.call(this,c,a,8,xe);H(this,a)}C(we,te);
var xe=[0,0,8,0,1,0,8,0,2,0,8,0,3,0,8,0,4,0,8,0,5,0,8,0,6,0,8,0,7,0,8,0,8,0,8,0,9,0,8,0,10,0,8,0,11,0,8,0,12,0,8,0,13,0,8,0,14,0,8,0,15,0,8,0,16,0,8,0,17,0,8,0,18,0,8,0,19,0,8,0,20,0,8,0,21,0,8,0,22,0,8,0,23,0,8,0,24,0,8,0,25,0,8,0,26,0,8,0,27,0,8,0,28,0,8,0,29,0,8,0,30,0,8,0,31,0,8,0," ",0,8,0,"!",0,8,0,'"',0,8,0,"#",0,8,0,"$",0,8,0,"%",0,8,0,"&",0,8,0,"'",0,8,0,"(",0,8,0,")",0,8,0,"*",0,8,0,"+",0,8,0,",",0,8,0,"-",0,8,0,".",0,8,0,"/",0,8,0,"0",0,8,0,"1",0,8,0,"2",0,8,0,"3",0,8,0,"4",0,8,0,"5",0,
8,0,"6",0,8,0,"7",0,8,0,"8",0,8,0,"9",0,8,0,":",0,8,0,";",0,8,0,"<",0,8,0,"=",0,8,0,">",0,8,0,"?",0,8,0,"@",0,8,0,"A",0,8,0,"B",0,8,0,"C",0,8,0,"D",0,8,0,"E",0,8,0,"F",0,8,0,"G",0,8,0,"H",0,8,0,"I",0,8,0,"J",0,8,0,"K",0,8,0,"L",0,8,0,"M",0,8,0,"N",0,8,0,"O",0,8,0,"P",0,8,0,"Q",0,8,0,"R",0,8,0,"S",0,8,0,"T",0,8,0,"U",0,8,0,"V",0,8,0,"W",0,8,0,"X",0,8,0,"Y",0,8,0,"Z",0,8,0,"[",0,8,0,"\\",0,8,0,"]",0,8,0,"^",0,8,0,"_",0,8,0,"`",0,8,0,"a",0,8,0,"b",0,8,0,"c",0,8,0,"d",0,8,0,"e",0,8,0,"f",0,8,0,"g",0,
8,0,"h",0,8,0,"i",0,8,0,"j",0,8,0,"k",0,8,0,"l",0,8,0,"m",0,8,0,"n",0,8,0,"o",0,8,0,"p",0,8,0,"q",0,8,0,"r",0,8,0,"s",0,8,0,"t",0,8,0,"u",0,8,0,"v",0,8,0,"w",0,8,0,"x",0,8,0,"y",0,8,0,"z",0,8,0,"{",0,8,0,"|",0,8,0,"}",0,8,0,"~",0,8,0,"\u2302",0,8,0,"\u00c7",0,8,0,"\u00fc",0,8,0,"\u00e9",0,8,0,"\u00e2",0,8,0,"\u00e4",0,8,0,"\u00e0",0,8,0,"\u00e5",0,8,0,"\u00e7",0,8,0,"\u00ea",0,8,0,"\u00eb",0,8,0,"\u00e8",0,8,0,"\u00ef",0,8,0,"\u00ee",0,8,0,"\u00ec",0,8,0,"\u00c4",0,8,0,"\u00c5",0,8,0,"\u00c9",0,8,
0,"\u00e6",0,8,0,"\u00c6",0,8,0,"\u00f4",0,8,0,"\u00f6",0,8,0,"\u00f2",0,8,0,"\u00fb",0,8,0,"\u00f9",0,8,0,"\u00ff",0,8,0,"\u00d6",0,8,0,"\u00dc",0,8,0,"\u00f8",0,8,0,"\u00a3",0,8,0,"\u00d8",0,8,0,"\u00d7",0,8,0,"\u0192",0,8,0,"\u00e1",0,8,0,"\u00ed",0,8,0,"\u00f3",0,8,0,"\u00fa",0,8,0,"\u00f1",0,8,0,"\u00d1",0,8,0,"\u00aa",0,8,0,"\u00ba",0,8,0,"\u00bf",0,8,0,"\u00ae",0,8,0,"\u00ac",0,8,0,"\u00bd",0,8,0,"\u00bc",0,8,0,"\u00a1",0,8,0,"\u00ab",0,8,0,"\u00bb",0,5,0];function ye(a,b,c,d){P.call(this,a);this.name=b;this.Nm=c||l;this.yl=d||l;this.bd=this.handle=this.Xc=this.xd=l}C(ye,P);t=ye.prototype;t.load=function(){this.restore()};t.u=function(){var a=this.g.f;this.xd&&(a.deleteShader(this.xd),this.xd=l);this.Xc&&(a.deleteShader(this.Xc),this.Xc=l);this.handle&&(a.deleteProgram(this.handle),this.handle=l);ye.a.u.call(this)};t.restore=function(){ze(this);this.xb()};
function ze(a){a.Nm&&a.yl&&(a.bd=l,a.xd=a.createShader(35633,a.Nm),a.Xc=a.createShader(35632,a.yl),a.xd&&a.Xc&&(a.handle=a.createProgram(a.xd,a.Xc)))}t.xb=function(){var a;if(!(a=!Ae(this,35633,this.xd)))if(!(a=!Ae(this,35632,this.Xc))){a=this.handle;var b=this.g.f,c=xa(b.getProgramInfoLog(a));if(c&&c.length){this.bd=this.bd||[];for(var d=c.split("\n"),e=0;e<d.length;e++){var f=d[e];f.length&&this.bd.push(f)}M("program "+this.name+":"+c)}a=!b.getProgramParameter(a,35714)}return a?(this.u(),n):i};
t.createShader=function(a,b){var c=this.g.f,d=c.createShader(a);if(!d)return l;c.shaderSource(d,b);c.compileShader(d);return d};function Ae(a,b,c){var d=a.g.f,e=xa(d.getShaderInfoLog(c));if(e&&e.length){a.bd=a.bd||[];for(var f=e.split("\n"),h=0;h<f.length;h++){var j=f[h];j.length&&a.bd.push(j)}M("shader "+a.name+"/"+b+":"+e)}return!!d.getShaderParameter(c,35713)}
t.createProgram=function(a,b){var c=this.g.f,d=c.createProgram();if(!d)return l;c.attachShader(d,a);c.attachShader(d,b);this.an(d);c.linkProgram(d);return d};t.an=z;function Be(a,b,c){ye.call(this,a,"FaceProgram",b,c);this.Ai=this.ia=this.Bd=-1;this.ji=this.Fc=this.Gk=this.Hk=this.Fk=this.Gm=this.ob=this.pb=this.ha=l}C(Be,ye);Be.prototype.u=function(){this.Ai=this.ia=this.Bd=-1;this.ji=this.Fc=this.Gk=this.Hk=this.Fk=this.Gm=this.ob=this.pb=this.ha=l;Be.a.u.call(this)};
function Ce(a){Be.call(this,a,"precision highp float;uniform mat4 a,d;uniform vec2 b;uniform vec3 c,e,f,g;attribute vec3 j,k;varying vec3 h;void n(){float m=max(dot(j,f),0.);h=e+g*m;}varying vec4 i;attribute vec4 l;void main(){gl_Position=a*vec4(k,1);i=l;n();}","precision mediump float;uniform mat4 a,d;uniform vec2 b,k;uniform vec3 c,e,f,g;vec4 o(vec4 l){float m,n;m=gl_FragCoord.z/gl_FragCoord.w;n=1.-smoothstep(b.x,b.y,m);return vec4(mix(c.rgb,l.rgb,n).rgb,l.a);}varying vec3 h;vec4 p(vec4 l){return vec4(l.rgb*h,l.a);}varying vec4 i;uniform sampler2D j;void main(){vec2 l=(i.xy+1.)/k;vec4 m,n;m=texture2D(j,l);if(m.a==0.)discard;n=m+i.z;gl_FragColor=o(p(n));}")}
C(Ce,Be);
Ce.prototype.xb=function(){var a=this.g.f;if(!Ce.a.xb.call(this)||!this.handle)return n;this.Bd=a.getAttribLocation(this.handle,"j");this.ia=a.getAttribLocation(this.handle,"k");this.Ai=a.getAttribLocation(this.handle,"l");this.ha=a.getUniformLocation(this.handle,"a");this.pb=a.getUniformLocation(this.handle,"b");this.ob=a.getUniformLocation(this.handle,"c");this.Gm=a.getUniformLocation(this.handle,"d");this.Fk=a.getUniformLocation(this.handle,"e");this.Hk=a.getUniformLocation(this.handle,"f");this.Gk=
a.getUniformLocation(this.handle,"g");this.Fc=a.getUniformLocation(this.handle,"j");this.ji=a.getUniformLocation(this.handle,"k");return i};function De(a,b,c){ye.call(this,a,"LineProgram",b,c);this.Mc=this.ia=-1;this.ob=this.pb=this.ha=l}C(De,ye);De.prototype.u=function(){this.Mc=this.ia=-1;this.ob=this.pb=this.ha=l;De.a.u.call(this)};
function Ee(a){De.call(this,a,"precision highp float;uniform mat4 a;uniform vec2 b;uniform vec3 c;varying vec4 d;attribute vec3 e;attribute vec4 f;void main(){gl_Position=a*vec4(e,1);d=f;}","precision mediump float;uniform mat4 a;uniform vec2 b;uniform vec3 c;vec4 h(vec4 e){float f,g;f=gl_FragCoord.z/gl_FragCoord.w;g=1.-smoothstep(b.x,b.y,f);return vec4(mix(c.rgb,e.rgb,g).rgb,e.a);}varying vec4 d;void main(){gl_FragColor=h(d);}")}C(Ee,De);
Ee.prototype.xb=function(){var a=this.g.f;if(!Ee.a.xb.call(this)||!this.handle)return n;this.ia=a.getAttribLocation(this.handle,"e");this.Mc=a.getAttribLocation(this.handle,"f");this.ha=a.getUniformLocation(this.handle,"a");this.pb=a.getUniformLocation(this.handle,"b");this.ob=a.getUniformLocation(this.handle,"c");return i};function Fe(a,b,c){ye.call(this,a,"ModelProgram",b,c);this.Uk=this.Bd=this.ia=-1;this.Fc=this.Fm=this.Jk=this.Ik=this.ob=this.pb=this.ha=l}C(Fe,ye);Fe.prototype.u=function(){this.Uk=this.Bd=this.ia=-1;this.Fc=this.Fm=this.Jk=this.Ik=this.ob=this.pb=this.ha=l;Fe.a.u.call(this)};
function Ge(a){Fe.call(this,a,"precision highp float;uniform mat4 a,d,e,f[20];uniform vec2 b;uniform vec3 c;vec4 l(vec3 k){return d*e*vec4(k,1);}varying vec2 g;attribute vec3 h,i;attribute vec2 j;void main(){gl_Position=l(h);g=j;}","precision mediump float;uniform mat4 a,d,e,f[20];uniform vec2 b;uniform vec3 c;vec4 l(vec4 i){float j,k;j=gl_FragCoord.z/gl_FragCoord.w;k=1.-smoothstep(b.x,b.y,j);return vec4(mix(c.rgb,i.rgb,k).rgb,i.a);}varying vec2 g;uniform sampler2D h;void main(){vec4 i=texture2D(h,g);if(i.a==0.)discard;gl_FragColor=l(i);}")}
C(Ge,Fe);
Ge.prototype.xb=function(){var a=this.g.f;if(!Ge.a.xb.call(this)||!this.handle)return n;this.ia=a.getAttribLocation(this.handle,"h");this.Bd=a.getAttribLocation(this.handle,"i");this.Uk=a.getAttribLocation(this.handle,"j");this.ha=a.getUniformLocation(this.handle,"a");this.pb=a.getUniformLocation(this.handle,"b");this.ob=a.getUniformLocation(this.handle,"c");this.Ik=a.getUniformLocation(this.handle,"d");this.Jk=a.getUniformLocation(this.handle,"e");this.Fm=a.getUniformLocation(this.handle,"f");this.Fc=
a.getUniformLocation(this.handle,"h");return i};function He(a,b,c){ye.call(this,a,"SpriteProgram",b,c);this.Mc=this.zi=this.ia=-1;this.ii=this.Fc=this.ha=l}C(He,ye);He.prototype.u=function(){this.Mc=this.zi=this.ia=-1;this.ii=this.Fc=this.ha=l;He.a.u.call(this)};
function Ie(a){He.call(this,a,"precision highp float;uniform mat4 a;varying vec2 b;varying vec4 c;attribute vec3 d;attribute vec2 e;attribute vec4 f;void main(){gl_Position=a*vec4(d,1);b=e;c=f;}","precision mediump float;uniform mat4 a;varying vec2 b;varying vec4 c;uniform sampler2D d;uniform vec4 e;void main(){vec4 f,g;f=texture2D(d,b);g=f*c*e;if(g.a==0.)discard;gl_FragColor=g;}")}C(Ie,He);
Ie.prototype.xb=function(){var a=this.g.f;if(!Ie.a.xb.call(this)||!this.handle)return n;this.ia=a.getAttribLocation(this.handle,"d");this.zi=a.getAttribLocation(this.handle,"e");this.Mc=a.getAttribLocation(this.handle,"f");this.ha=a.getUniformLocation(this.handle,"a");this.Fc=a.getUniformLocation(this.handle,"d");this.ii=a.getUniformLocation(this.handle,"e");return i};function Je(a,b){pe.call(this,a,b,"../assets/textures","ui",new Vd(256,256,[[new ec("image/png","ui.png",949)]]));ne(this,16,16)}C(Je,pe);function R(){return new Float32Array(3)}function Ke(a,b,c){var d=R();S(d,a,b,c);return d}function S(a,b,c,d){a[0]=b;a[1]=c;a[2]=d}function Le(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2]}function Me(a,b,c){c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2]}function Ne(a,b,c){c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b}function Oe(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)}function Pe(a,b){var c=a[0]-b[0],d=a[1]-b[1],e=a[2]-b[2];return c*c+d*d+e*e}
function Qe(a,b,c){var d=b[0]-a[0],e=b[1]-a[1];a=b[2]-a[2];(b=Math.sqrt(d*d+e*e+a*a))?(b=1/b,c[0]=d*b,c[1]=e*b,c[2]=a*b):c[0]=c[1]=c[2]=0}function Re(a,b){return a.length==b.length&&a[0]==b[0]&&a[1]==b[1]&&a[2]==b[2]};function Se(){return new Float32Array(16)}function Te(){var a=Se();a[0]=a[5]=a[10]=a[15]=1;return a}function Ue(a,b,c,d,e,f,h,j,k){a[0]=b;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=d;a[11]=e;a[12]=f;a[13]=h;a[14]=j;a[15]=k}
function Xe(a,b,c){var d=a[0],e=a[1],f=a[2],h=a[3],j=a[4],k=a[5],m=a[6],p=a[7],r=a[8],v=a[9],s=a[10],y=a[11],w=a[12],E=a[13],I=a[14];a=a[15];var O=b[0],aa=b[1],wa=b[2],Na=b[3],Oa=b[4],Pa=b[5],Qa=b[6],Ra=b[7],Sa=b[8],Ta=b[9],Ua=b[10],Va=b[11],J=b[12],Ve=b[13],We=b[14];b=b[15];c[0]=d*O+j*aa+r*wa+w*Na;c[1]=e*O+k*aa+v*wa+E*Na;c[2]=f*O+m*aa+s*wa+I*Na;c[3]=h*O+p*aa+y*wa+a*Na;c[4]=d*Oa+j*Pa+r*Qa+w*Ra;c[5]=e*Oa+k*Pa+v*Qa+E*Ra;c[6]=f*Oa+m*Pa+s*Qa+I*Ra;c[7]=h*Oa+p*Pa+y*Qa+a*Ra;c[8]=d*Sa+j*Ta+r*Ua+w*Va;c[9]=
e*Sa+k*Ta+v*Ua+E*Va;c[10]=f*Sa+m*Ta+s*Ua+I*Va;c[11]=h*Sa+p*Ta+y*Ua+a*Va;c[12]=d*J+j*Ve+r*We+w*b;c[13]=e*J+k*Ve+v*We+E*b;c[14]=f*J+m*Ve+s*We+I*b;c[15]=h*J+p*Ve+y*We+a*b}
function Ye(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],h=a[4],j=a[5],k=a[6],m=a[7],p=a[8],r=a[9],v=a[10],s=a[11],y=a[12],w=a[13],E=a[14],I=a[15],O=c*j-d*h,aa=c*k-e*h,wa=c*m-f*h,Na=d*k-e*j,Oa=d*m-f*j,Pa=e*m-f*k,Qa=p*w-r*y,Ra=p*E-v*y,Sa=p*I-s*y,Ta=r*E-v*w,Ua=r*I-s*w,Va=v*I-s*E,J=O*Va-aa*Ua+wa*Ta+Na*Sa-Oa*Ra+Pa*Qa;0!=J&&(J=1/J,b[0]=(j*Va-k*Ua+m*Ta)*J,b[1]=(-d*Va+e*Ua-f*Ta)*J,b[2]=(w*Pa-E*Oa+I*Na)*J,b[3]=(-r*Pa+v*Oa-s*Na)*J,b[4]=(-h*Va+k*Sa-m*Ra)*J,b[5]=(c*Va-e*Sa+f*Ra)*J,b[6]=(-y*Pa+E*wa-I*aa)*J,b[7]=(p*Pa-
v*wa+s*aa)*J,b[8]=(h*Ua-j*Sa+m*Qa)*J,b[9]=(-c*Ua+d*Sa-f*Qa)*J,b[10]=(y*Oa-w*wa+I*O)*J,b[11]=(-p*Oa+r*wa-s*O)*J,b[12]=(-h*Ta+j*Ra-k*Qa)*J,b[13]=(c*Ta-d*Ra+e*Qa)*J,b[14]=(-y*Na+w*aa-E*O)*J,b[15]=(p*Na-r*aa+v*O)*J)}function Ze(a,b,c){var d=b[0],e=b[1];b=b[2];c[0]=d*a[0]+e*a[4]+b*a[8]+a[12];c[1]=d*a[1]+e*a[5]+b*a[9]+a[13];c[2]=d*a[2]+e*a[6]+b*a[10]+a[14]}function $e(a,b,c){var d=b[0],e=b[1];b=b[2];c[0]=d*a[0]+e*a[4]+b*a[8];c[1]=d*a[1]+e*a[5]+b*a[9];c[2]=d*a[2]+e*a[6]+b*a[10]}
function af(a,b,c){var d=b[0],e=b[1];b=b[2];var f=1/(d*a[3]+e*a[7]+b*a[11]+a[15]);c[0]=(d*a[0]+e*a[4]+b*a[8]+a[12])*f;c[1]=(d*a[1]+e*a[5]+b*a[9]+a[13])*f;c[2]=(d*a[2]+e*a[6]+b*a[10]+a[14])*f}new Float64Array(3);new Float64Array(3);new Float64Array(4);new Float64Array(4);new Float64Array(4);new Float64Array(16);function bf(a){G.call(this);this.Vb=a;this.g=a.g;this.Pd=24576;this.c=new ArrayBuffer(40*this.Pd);this.Ll=new Int8Array(this.c);this.Lk=new Uint8Array(this.c);this.Ue=0}C(bf,G);
var cf=new Int8Array([0,0,1,0,0,1,1,1,0,0,1,0,1,0,0,1,0,1,0,0,1,1,1,0,0,1,0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,-1,0,1,0,0,0,1,0,0,0,-1,0,0,0,0,1,1,0,0,0,-1,1,0,0,0,1,0,0,0,0,-1,1,1,0,0,0,1,0,0,1,0,1,0,0,0,0,1,1,0,1,0,1,1,0,0,1,1,1,0,1,0,0,1,0,0,1,1,0,0,1,0,0,0,0,0,0,0,0,0,-1,0,0,0,0,0,1,0,0,0,-1,0,1,0,0,0,1,0,1,0,-1,0,1,1,0,0,0,0,1,0,-1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,1,0,1,0,0,0,0,0,0,1,1,1,1,0,0,1,0,0,0,1,0,1,1,0,0,1,1,0,0,0,0,0,-1,0,0,1,1,0,0,0,0,1,-1,0,0,0,1,0,0,0,1,1,-1,0,0,0,0,0,0,0,1,0,-1,
0,0,1,0,0,0]);bf.prototype.La=function(a){a=Math.max(this.Pd,this.Ue+a);return a>this.Pd?this.Se(a):i};bf.prototype.Se=function(a){a=Math.ceil(a||2*this.Pd);if(10922.5<=a)return n;var b=new ArrayBuffer(40*a);(new Uint8Array(b)).set(new Uint8Array(this.c));this.Pd=a;this.c=b;this.Ll=new Int8Array(this.c);this.Lk=new Uint8Array(this.c);return i};
function df(a,b,c,d,e,f){for(var h=a.Ue++;h>=a.Pd;)if(!a.Se())return;b*=40;var j=a.Ll;a=a.Lk;for(var h=40*h,k=0,m=0;4>k;k++,m+=10)j[h+m+0]=cf[b+m+0]+c,j[h+m+1]=cf[b+m+1]+d,j[h+m+2]=cf[b+m+2]+e,j[h+m+3]=cf[b+m+3],j[h+m+4]=cf[b+m+4],j[h+m+5]=cf[b+m+5],a[h+m+6]=cf[b+m+6]?255*f[2]:255*f[0],a[h+m+7]=cf[b+m+7]?255*f[3]:255*f[1],a[h+m+8]=cf[b+m+8],a[h+m+9]=cf[b+m+9]}
bf.prototype.finish=function(a){var b=this.g.f,c=40*this.Ue,d=6*this.Ue;if(!c)return a&&b.deleteBuffer(a),{buffer:l,Oe:0,jl:0};a=a||b.createBuffer();b.bindBuffer(34962,a);b.bufferData(34962,this.Lk.subarray(0,c),35048);b={buffer:a,Oe:d,jl:c};this.Ue=0;return b};
bf.prototype.mc=function(a,b,c,d){var e=this.g.f,f=this.Vb.qc;if(d){var h=ef;Xe(a.Kc,b,h);e.uniformMatrix4fv(f.ha,n,h);e.bindBuffer(34962,c);e.vertexAttribPointer(f.ia,3,5120,n,10,0);e.vertexAttribPointer(f.Bd,3,5120,n,10,3);e.vertexAttribPointer(f.Ai,4,5121,n,10,6);e.drawElements(4,d,5123,0)}};var ef=Se();function ff(a){G.call(this);this.I=a;this.R=[]}C(ff,G);ff.prototype.flush=function(a){var b=this.I;if(6!=b.mode){b.mode=6;var c=b.g,d=c.f;gf(c,hf);jf(c,kf);lf(c,b.rf);var e=b.qf,f=b.rf;e.ak&&(e.ak=n,d.uniform2f(f.pb,e.Xe,e.We),d.uniform3f(f.ob,e.oa[0],e.oa[1],e.oa[2]));re(c,b.Ha)}b=this.I.g.f;b.uniformMatrix4fv(this.I.rf.Ik,n,a.Kc);a=this.I.rf.Jk;for(c=0;c<this.R.length;c++)e=this.R[c],d=e.zo,e=e.transform,b.uniformMatrix4fv(a,n,e),d.B(e);this.R.length=0;mf(this.I.g,l)};function nf(){this.eg=n;this.fg=this.gg=32774;this.kg=1;this.ig=0;this.jg=1;this.hg=0;this.blendColor=Q();this.colorMask=of}var of=15;nf.prototype.dd=function(a,b){this!=b&&(b?this.ed(a,b):this.xc(a))};
nf.prototype.xc=function(a){this.eg?a.enable(3042):a.disable(3042);a.blendEquationSeparate(this.gg,this.fg);a.blendFuncSeparate(this.kg,this.ig,this.jg,this.hg);a.blendColor(this.blendColor[0],this.blendColor[1],this.blendColor[2],this.blendColor[3]);a.colorMask(!!(this.colorMask&1),!!(this.colorMask&2),!!(this.colorMask&4),!!(this.colorMask&8))};
nf.prototype.ed=function(a,b){this.eg!=b.eg&&(this.eg?a.enable(3042):a.disable(3042));(this.gg!=b.gg||this.fg!=b.fg)&&a.blendEquationSeparate(this.gg,this.fg);(this.kg!=b.kg||this.ig!=b.ig||this.jg!=b.jg||this.hg!=b.hg)&&a.blendFuncSeparate(this.kg,this.ig,this.jg,this.hg);ke(this.blendColor,b.blendColor)||a.blendColor(this.blendColor[0],this.blendColor[1],this.blendColor[2],this.blendColor[3]);this.colorMask!=b.colorMask&&a.colorMask(!!(this.colorMask&1),!!(this.colorMask&2),!!(this.colorMask&4),
!!(this.colorMask&8))};new nf;new nf;function pf(){this.lc=n;this.depthFunc=513;this.Bg=0;this.Ag=1;this.depthMask=i;this.vh=n;this.xh=this.wh=0}pf.prototype.dd=function(a,b){this!=b&&(b?this.ed(a,b):this.xc(a))};pf.prototype.xc=function(a){this.lc?a.enable(2929):a.disable(2929);a.depthFunc(this.depthFunc);a.depthRange(this.Bg,this.Ag);a.depthMask(this.depthMask);this.vh?a.enable(32823):a.disable(32823);a.polygonOffset(this.wh,this.xh)};
pf.prototype.ed=function(a,b){this.lc!=b.lc&&(this.lc?a.enable(2929):a.disable(2929));this.depthFunc!=b.depthFunc&&a.depthFunc(this.depthFunc);(this.Bg!=b.Bg||this.Ag!=b.Ag)&&a.depthRange(this.Bg,this.Ag);this.depthMask!=b.depthMask&&a.depthMask(this.depthMask);this.vh!=b.vh&&(this.vh?a.enable(32823):a.disable(32823));(this.wh!=b.wh||this.xh!=b.xh)&&a.polygonOffset(this.wh,this.xh)};/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
function qf(a,b){this.Ph=[];this.dm=a;this.sl=b||l}t=qf.prototype;t.yb=n;t.$e=n;t.Oi=n;t.cn=n;t.yk=n;t.Pi=0;t.cancel=function(a){if(this.yb)this.Gf instanceof qf&&this.Gf.cancel();else{if(this.fa){var b=this.fa;delete this.fa;a?b.cancel(a):(b.Pi--,0>=b.Pi&&b.cancel())}this.dm?this.dm.call(this.sl,this):this.yk=i;this.yb||this.A(new rf(this))}};t.pl=function(a,b){this.Oi=n;sf(this,a,b)};function sf(a,b,c){a.yb=i;a.Gf=c;a.$e=!b;tf(a)}function uf(a){a.yb&&(a.yk||ba(new vf(a)),a.yk=n)}
t.w=function(a){uf(this);sf(this,i,a)};t.A=function(a){uf(this);sf(this,n,a)};function N(a,b,c,d){a.Ph.push([b,c,d]);a.yb&&tf(a)}function wf(a){return Ja(a.Ph,function(a){return ka(a[1])})}
function tf(a){a.Nk&&(a.yb&&wf(a))&&(u.clearTimeout(a.Nk),delete a.Nk);a.fa&&(a.fa.Pi--,delete a.fa);for(var b=a.Gf,c=n,d=n;a.Ph.length&&!a.Oi;){var e=a.Ph.shift(),f=e[0],h=e[1],e=e[2];if(f=a.$e?h:f)try{var j=f.call(e||a.sl,b);x(j)&&(a.$e=a.$e&&(j==b||j instanceof Error),a.Gf=b=j);b instanceof qf&&(d=i,a.Oi=i)}catch(k){b=k,a.$e=i,wf(a)||(c=i)}}a.Gf=b;d&&(N(b,B(a.pl,a,i),B(a.pl,a,n)),b.cn=i);c&&(a.Nk=u.setTimeout(function(){ba(b)},0))}function xf(){var a=new qf;a.w(l);return a}
function vf(a){ta.call(this);this.Ob=a}C(vf,ta);vf.prototype.message="Deferred has already fired";vf.prototype.name="AlreadyCalledError";function rf(a){ta.call(this);this.Ob=a}C(rf,ta);rf.prototype.message="Deferred was cancelled";rf.prototype.name="CancelledError";var yf,zf,Af,Bf;Bf=Af=zf=yf=n;var Cf=qb();Cf&&(-1!=Cf.indexOf("Firefox")||-1!=Cf.indexOf("Camino")||(-1!=Cf.indexOf("iPhone")||-1!=Cf.indexOf("iPod")?yf=i:-1!=Cf.indexOf("iPad")?zf=i:-1!=Cf.indexOf("Android")?Af=i:-1!=Cf.indexOf("Chrome")&&(Bf=i)));var Df=yf,Ef=zf,Ff=Af,Gf=Bf;function Hf(a){G.call(this);this.g=a;this.jd=[]}C(Hf,G);Hf.prototype.b=function(){Ha(this.jd,K);this.jd.length=0;Hf.a.b.call(this)};Hf.prototype.V=function(a){this.jd.push(a)};Hf.prototype.le=function(a){for(var b=new qf,c=0;c<this.jd.length;c++)ze(this.jd[c]);Gf&&!a?Oc(function(){If(this,b)},5,this):If(this,b);return b};function If(a,b){for(var c=0;c<a.jd.length;c++){var d=a.jd[c];try{if(!d.xb()){b.A(n);break}}catch(e){b.A(e);break}}b.yb||b.w(l)};function Jf(){this.Fg=i;this.Je=n;this.cullFace=1029;this.Rg=2305;this.Hh=n;this.Jh=1;this.Gh=this.Ih=n}Jf.prototype.dd=function(a,b){this!=b&&(b?this.ed(a,b):this.xc(a))};Jf.prototype.xc=function(a){this.Fg?a.enable(3024):a.disable(3024);this.Je?a.enable(2884):a.disable(2884);a.cullFace(this.cullFace);a.frontFace(this.Rg);this.Hh?a.enable(32928):a.disable(32928);a.sampleCoverage(this.Jh,this.Ih);this.Gh?a.enable(32926):a.disable(32926)};
Jf.prototype.ed=function(a,b){this.Fg!=b.Fg&&(this.Fg?a.enable(3024):a.disable(3024));this.Je!=b.Je&&(this.Je?a.enable(2884):a.disable(2884));this.cullFace!=b.cullFace&&a.cullFace(this.cullFace);this.Rg!=b.Rg&&a.frontFace(this.Rg);this.Hh!=b.Hh&&(this.Hh?a.enable(32928):a.disable(32928));(this.Jh!=b.Jh||this.Ih!=b.Ih)&&a.sampleCoverage(this.Jh,this.Ih);this.Gh!=b.Gh&&(this.Gh?a.enable(32926):a.disable(32926))};function Kf(a,b,c,d){P.call(this,a);this.ne=b;this.me=x(c)?c:16;this.Vn=x(d)?d:32;this.mb=new ArrayBuffer(this.me*this.ne);this.Ia=l;this.bc=0;this.ki=[];this.Tb=n;this.rb=Number.MAX_VALUE;this.qb=Number.MIN_VALUE}C(Kf,P);t=Kf.prototype;t.u=function(){this.g.f.deleteBuffer(this.Ia);this.Ia=l;this.Tb=i;this.rb=Number.MIN_VALUE;this.qb=Number.MAX_VALUE;Kf.a.u.call(this)};
t.restore=function(){var a=this.g.f;Kf.a.restore.call(this);this.Ia=a.createBuffer();this.Tb=i;this.rb=Number.MIN_VALUE;this.qb=Number.MAX_VALUE;Lf(this)};t.La=function(a){a=Math.max(this.me,this.bc+a);return a>this.me?this.Se(a):i};t.Se=function(a){a=a||this.me+this.Vn;if(65535<=a)return n;var b=new ArrayBuffer(a*this.ne);(new Uint8Array(b)).set(new Uint8Array(this.mb));this.me=a;this.mb=b;this.Tb=i;this.rb=Number.MIN_VALUE;this.qb=Number.MAX_VALUE;this.Wi();return i};
function Mf(a){for(var b=0,b=a.ki.length?a.ki.pop():a.bc++;b>=a.me;)if(!a.Se())return 65535;a.Tb=i;a.rb=Math.min(a.rb,b);a.qb=Math.max(a.qb,b);return b}t.clear=function(){this.bc=0;this.ki.length=0;this.Tb=n;this.rb=Number.MAX_VALUE;this.qb=Number.MIN_VALUE};function Lf(a){var b=a.g.f;b.bindBuffer(34962,a.Ia);a.Tb&&(b.bufferData(34962,a.mb,35048),a.Tb=n,a.rb=Number.MAX_VALUE,a.qb=Number.MIN_VALUE)}t.Wi=z;function Nf(a,b){Kf.call(this,a,96);this.zp=b;this.Wc=new Float32Array(this.mb);this.se=new Uint32Array(this.mb)}C(Nf,Kf);Nf.prototype.Wi=function(){this.Wc=new Float32Array(this.mb);this.se=new Uint32Array(this.mb)};var Of=new Float32Array([0,0,0,0,0,0,0,1,0,0,1,0,1,0,0,1,0,0,1,1,0,1,1,0]);
Nf.prototype.add=function(a,b,c,d,e,f,h,j,k,m){var p=Mf(this);if(65535==p)return p;m=m||0;for(var r=this.Wc,v=this.se,s=p*this.ne/4,y=0,w=0;4>y;y++,w+=6)r[s+w+0]=Of[w+0]*j+f,r[s+w+1]=Of[w+1]*k+h,r[s+w+2]=Of[w+2]+m,r[s+w+3]=Of[w+3]?a+c:a,r[s+w+4]=Of[w+4]?b+d:b,v[s+w+5]=e;return p};
Nf.prototype.update=function(a,b,c,d,e,f,h,j,k,m,p){p=p||0;for(var r=this.Wc,v=this.se,s=a*this.ne/4,y=0,w=0;4>y;y++,w+=6)r[s+w+0]=Of[w+0]*k+h,r[s+w+1]=Of[w+1]*m+j,r[s+w+2]=Of[w+2]+p,r[s+w+3]=Of[w+3]?b+d:b,r[s+w+4]=Of[w+4]?c+e:c,v[s+w+5]=f;this.Tb=i;this.rb=Math.min(this.rb,a);this.qb=Math.max(this.qb,a)};
Nf.prototype.remove=function(a){for(var b=this.Wc,c=a*this.ne,d=0;4>d;d++)b[c+0]=0,b[c+1]=0,b[c+2]=0,c+=96;a==this.bc?this.bc--:(this.ki.push(a),this.Tb=i,this.rb=Math.min(this.rb,a),this.qb=Math.max(this.qb,a))};
Nf.prototype.mc=function(a,b,c){var d=this.g.f,e=this.zp;if(this.bc){if(b){var f=Pf;Xe(a,b,f);d.uniformMatrix4fv(e.ha,n,f)}else d.uniformMatrix4fv(e.ha,n,a);x(c)?d.uniform4fv(e.ii,c):d.uniform4f(e.ii,1,1,1,1);Lf(this);d.vertexAttribPointer(e.ia,3,5126,n,24,0);d.vertexAttribPointer(e.zi,2,5126,n,24,12);d.vertexAttribPointer(e.Mc,4,5121,i,24,20);d.drawElements(4,6*this.bc,5123,0)}};var Pf=Se();function Qf(a,b,c,d,e,f){qf.call(this,e,f);this.R=a;this.Yi=[];this.xl=!!b;this.xn=!!c;this.pn=!!d;for(b=0;b<a.length;b++)N(a[b],B(this.Dl,this,b,i),B(this.Dl,this,b,n));0==a.length&&!this.xl&&this.w(this.Yi)}C(Qf,qf);Qf.prototype.cm=0;Qf.prototype.Dl=function(a,b,c){this.cm++;this.Yi[a]=[b,c];this.yb||(this.xl&&b?this.w([a,c]):this.xn&&!b?this.A(c):this.cm==this.R.length&&this.w(this.Yi));this.pn&&!b&&(c=l);return c};Qf.prototype.A=function(a){Qf.a.A.call(this,a);Ha(this.R,function(a){a.cancel()})};function Rf(a,b,c){P.call(this,c);this.mode=Sf;this.qf=new Tf;this.Cf=new Hf(c);H(this,this.Cf);this.ih=new Ee(c);this.Cf.V(this.ih);this.$h=new Ie(c);this.Cf.V(this.$h);this.qc=new Ce(c);this.Cf.V(this.qc);this.rf=new Ge(c);this.Cf.V(this.rf);this.font=new we(0,b,c);H(this,this.font);this.Ha=new se(b,c);H(this,this.Ha);me(this.Ha);this.Kk=new Je(b,c);me(this.Kk);H(this,this.Kk);this.ze=this.Zh=l;this.Zk=new bf(this);H(this,this.Zk);this.tm=new ff(this);H(this,this.tm)}C(Rf,P);Rf.prototype.le=function(){return new Qf([])};
var Uf=new Jf;Uf.Je=i;var Sf=0,hf=new nf,kf,Vf=new pf;Vf.lc=i;Vf.depthFunc=515;kf=Vf;var Wf=new nf,Xf=new pf;Xf.lc=i;Xf.depthFunc=515;var Yf=new nf,Zf=new pf;Zf.lc=i;Zf.depthFunc=515;var $f=new nf,ag=new pf;ag.lc=n;ag.depthFunc=515;Rf.prototype.u=function(){var a=this.g.f;a.deleteBuffer(this.Zh);this.Zh=l;a.deleteBuffer(this.ze);this.ze=l};
Rf.prototype.restore=function(){for(var a=this.g.f,b=a.createBuffer(),c=Math.floor(10922.5),d=6*c,e=new Uint16Array([0,1,2,2,1,3]),d=new Uint16Array(d),f=0,h=0,j=0;f<c;f++){for(var k=0;k<e.length;k++)d[h+k]=e[k]+j;h+=e.length;j+=4}a.bindBuffer(34963,b);a.bufferData(34963,d,35044);a.bindBuffer(34963,l);this.Zh=b;b=a.createBuffer();c=Math.floor(10922.5);d=6*c;e=new Uint16Array([0,1,2,0,2,3]);d=new Uint16Array(d);for(j=h=f=0;f<c;f++){for(k=0;k<e.length;k++)d[h+k]=e[k]+j;h+=e.length;j+=4}a.bindBuffer(34963,
b);a.bufferData(34963,d,35044);a.bindBuffer(34963,l);this.ze=b};Rf.prototype.reset=function(a,b){var c=this.g,d=c.f;c.Ah!=Uf&&(Uf&&c.f&&Uf.dd(c.f,c.Ah),c.Ah=Uf);d.viewport(0,0,d.canvas.width,d.canvas.height);d.clearColor(a[0],a[1],a[2],a[3]);d.clearDepth(1);d.clear((b?16384:0)|256);this.mode=Sf};function bg(a,b){a.mode=5;var c=a.g,d=c.f;gf(c,$f);jf(c,ag);lf(c,a.$h);re(c,b);d.bindBuffer(34963,a.Zh);d.enableVertexAttribArray(0);d.enableVertexAttribArray(1);d.enableVertexAttribArray(2)}
function Tf(){this.Nc=R();this.sd=R();this.rd=R();this.We=this.Xe=0;this.oa=R();this.ak=this.oj=this.Qj=i}Tf.prototype.update=function(a,b,c,d,e,f){var h=n;Re(this.Nc,a)||(Le(this.Nc,a),h=i);if(!Re(this.sd,b)||!Re(this.rd,c))Le(this.sd,b),Le(this.rd,c),h=i;if(this.Xe!=d||this.We!=e||!Re(this.oa,f))this.Xe=d,this.We=e,Le(this.oa,f),h=i;h&&(this.ak=this.oj=this.Qj=i)};
function cg(a,b,c){a.oj&&(a.oj=n,b.uniform3f(c.Fk,a.Nc[0],a.Nc[1],a.Nc[2]),b.uniform3f(c.Hk,a.sd[0],a.sd[1],a.sd[2]),b.uniform3f(c.Gk,a.rd[0],a.rd[1],a.rd[2]),b.uniform2f(c.pb,a.Xe,a.We),b.uniform3f(c.ob,a.oa[0],a.oa[1],a.oa[2]))};function dg(){this.buffer=new Uint8Array(512);this.offset=0;this.na=new Float32Array(16);this.ya=new Uint8Array(this.na.buffer);this.An=(this.Ve=u.Float64Array?new Float64Array(1):l)?new Uint8Array(this.Ve.buffer):l}t=dg.prototype;t.finish=function(){for(var a=new Uint8Array(this.offset),b=0;b<this.offset;b++)a[b]=this.buffer[b];this.offset=0;return a.buffer};
t.La=function(a){if(this.offset+a>this.buffer.length){a=this.offset+a;var b=this.buffer.length;do b+=1024;while(b<a);a=new Uint8Array(b);for(b=0;b<this.offset;b++)a[b]=this.buffer[b];this.buffer=a}};function eg(a,b){a.La(2);a.buffer[a.offset++]=b>>8;a.buffer[a.offset++]=b}function fg(a,b){a.La(1);a.buffer[a.offset++]=b}function gg(a,b){a.La(2);a.buffer[a.offset++]=b>>8;a.buffer[a.offset++]=b}
t.ec=function(a){this.La(4);this.buffer[this.offset++]=a>>24;this.buffer[this.offset++]=a>>16;this.buffer[this.offset++]=a>>8;this.buffer[this.offset++]=a};t.fc=function(a){this.La(5);for(a&=4294967295;a&4294967168;)this.buffer[this.offset++]=a&127|128,a>>>=7;this.buffer[this.offset++]=a&127};t.wi=function(a){this.fc(a<<1^a>>31)};
t.Rm=function(a){this.La(4);this.na[0]=a;this.buffer[this.offset++]=this.ya[0];this.buffer[this.offset++]=this.ya[1];this.buffer[this.offset++]=this.ya[2];this.buffer[this.offset++]=this.ya[3]};t.Wp=function(a){this.La(12);this.na[0]=a[0];this.na[1]=a[1];this.na[2]=a[2];for(a=0;12>a;a++)this.buffer[this.offset++]=this.ya[a]};t.Xp=function(a){this.La(16);this.na[0]=a[0];this.na[1]=a[1];this.na[2]=a[2];this.na[3]=a[3];for(a=0;16>a;a++)this.buffer[this.offset++]=this.ya[a]};
t.$=function(a){65535<=a.length&&(a=a.substr(0,65535));this.La(4+3*a.length);gg(this,a.length);var b=this.offset;this.offset+=2;for(var c=0,d=0;d<a.length;d++){var e=a.charCodeAt(d);128>e?(this.buffer[this.offset++]=e,c++):2048>e?(this.buffer[this.offset++]=e>>6|192,this.buffer[this.offset++]=e&63|128,c+=2):(this.buffer[this.offset++]=e>>12|224,this.buffer[this.offset++]=e>>6&63|128,this.buffer[this.offset++]=e&63|128,c+=3)}a=this.offset;this.offset=b;gg(this,c);this.offset=a};var hg=l;
function ig(){hg||(hg=new dg);return hg};var jg=new function(){this.K=this.y=this.x=0},kg=new (ca());function lg(a,b,c,d,e){G.call(this);this.context=a;this.path=b;this.name=c;this.duration=d;this.Kd=e;Ma(this.Kd,fc);this.ja=this.qh=this.Xh=l}C(lg,G);lg.prototype.b=function(){this.qh&&(this.qh.disconnect(),this.qh=l);this.Xh&&(this.Xh.disconnect(),this.Xh=l);this.ja&&(this.ja.pause(),this.ja=l);lg.a.b.call(this)};
lg.prototype.play=function(a){if(this.context&&!this.ja){var b=Od(this.Kd);b&&(b=Pd(this.path,b.path),this.ja=document.createElement("AUDIO"),this.ja.autoplay=n,this.ja.src=b,b=this.context.createMediaElementSource(this.ja),b.connect(this.context.destination),this.qh=this.Xh=b)}this.ja&&(this.ja.loop=a||n,this.ja.play())};lg.prototype.stop=function(){this.ja&&(this.ja.currentTime=0,this.ja.pause())};function mg(a,b,c,d,e){G.call(this);this.xe=a;this.context=b;this.path=c;this.name=d||"Unknown";this.Pf={};e&&this.Rh(e)}C(mg,G);mg.prototype.b=function(){mg.a.b.call(this)};mg.prototype.Rh=function(a){for(var b=0;b<a.length;b++){var c=a[b];this.Pf[c.name]=c}};mg.prototype.load=function(){ng(this)};mg.prototype.play=function(a,b,c){var d;d=A(a)?this.Pf[a]:a;if(!d)return M("WARNING: track "+a+" not found in list"),l;ng(this,c);d.play(b);return d};
function ng(a,b){Xa(a.Pf,function(a){a.stop(b)},a)};function og(a,b){mg.call(this,a,b,"../assets/audio/music","Music",[new lg(b,"../assets/audio/music","track1",383380,[new ec("audio/ogg","track1.ogg",4861360)])])}C(og,mg);function pg(a,b,c,d,e,f,h){this.L=a;this.al=b;this.bl=c;this.cl=d;this.gc=e;this.cj=f;this.pm=h};function qg(){var a=R(),b=R();this.min=a;this.max=b}function rg(a,b,c,d,e,f){var h=new qg;h.min[0]=a<d?a:d;h.min[1]=b<e?b:e;h.min[2]=c<f?c:f;h.max[0]=a<d?d:a;h.max[1]=b<e?e:b;h.max[2]=c<f?f:c;return h}
function sg(a,b,c){var d=a.min;a=a.max;var e=tg[0];e[0]=Math.abs(b[3]);e[1]=Math.abs(b[4]);e[2]=Math.abs(b[5]);var f=0,h=1,j=2;e[0]<e[2]&&(f=2,j=0);e[1]<e[j]?(h=j,j=1):e[1]>e[f]&&(h=f,f=1);var k=0,m=Number.MAX_VALUE,p=b[3+f],r=(d[f]-b[f])/p,f=(a[f]-b[f])/p;r>f&&(p=r,r=f,f=p);if(!(r>m||f<k)){r>k&&(k=r);f<m&&(m=f);if(1E-6>e[h]){if(b[h]<d[h]||b[h]>a[h]||b[j]<d[j]||b[j]>a[j])return}else{p=b[3+h];r=(d[h]-b[h])/p;f=(a[h]-b[h])/p;r>f&&(p=r,r=f,f=p);if(r>m||f<k)return;r>k&&(k=r);f<m&&(m=f);if(1E-6>e[j]){if(b[j]<
d[j]||b[j]>a[j])return}else{p=b[3+j];r=(d[j]-b[j])/p;f=(a[j]-b[j])/p;r>f&&(p=r,r=f,f=p);if(r>m||f<k)return;r>k&&(k=r)}}c&&(c[0]=b[0]+b[3]*k,c[1]=b[1]+b[4]*k,c[2]=b[2]+b[5]*k)}}var tg=[R(),R(),R()];function ug(a,b,c,d){this.map=a;this.x=b;this.y=c;this.K=d;this.Lb=rg(b,c,d,b+16,c+128,d+16);this.state=vg;this.Eg=i;this.version=this.ge=0;this.gc=new Uint16Array(32768);this.qk=l}var vg=0;ug.prototype.sc=function(a,b,c){return 2==this.state?this.gc[(a&15)+16*(c&15)+256*(b&127)]:0};ug.prototype.Yb=function(a,b,c,d){b=(a&15)+16*(c&15)+256*(b&127);a=this.gc[b];this.gc[b]=d;a!=d&&!this.Eg&&(d=this.Eg,this.Eg=i,d||this.map.Xm(this));return a};
ug.prototype.Ij=function(a){var b=wg[0];sg(this.Lb,a,b);var c=Math.floor(b[0]),d=Math.floor(b[1]),e=Math.floor(b[2]),f=0==a[3]?0:0>a[3]?-1:1,h=0==a[4]?0:0>a[4]?-1:1,j=0==a[5]?0:0>a[5]?-1:1,k=(c+(0<f?1:0)-b[0])/a[3],m=(d+(0<h?1:0)-b[1])/a[4],p=(e+(0<j?1:0)-b[2])/a[5];isNaN(k)&&(k=Number.POSITIVE_INFINITY);isNaN(m)&&(m=Number.POSITIVE_INFINITY);isNaN(p)&&(p=Number.POSITIVE_INFINITY);var r=f/a[3],v=h/a[4],s=j/a[5];isNaN(r)&&(r=Number.POSITIVE_INFINITY);isNaN(v)&&(v=Number.POSITIVE_INFINITY);isNaN(s)&&
(s=Number.POSITIVE_INFINITY);for(var y=this.gc,w=b=0;256>w;w++){var E=c-this.x,I=d-this.y,O=e-this.K;if(0<=E&&(16>E&&0<=I&&128>I&&0<=O&&16>O)&&(b=y[E+16*O+256*I],b>>8))break;k<m&&k<p?(k+=r,c+=f):m<p?(m+=v,d+=h):(p+=s,e+=j)}return b?(f=xg,h=c+1,j=d+1,k=e+1,S(f.min,c,d,e),S(f.max,h,j,k),f=R(),sg(xg,a,f),new pg(this,c,d,e,b,Math.sqrt(Pe(a,f)),f)):l};var wg=[R(),R()],xg=new qg;function yg(){G.call(this);this.mm=n;this.Vh=i;this.Vf=[];this.yd=[];this.Qf=[];this.cd=[];this.ta=0}C(yg,G);yg.prototype.pause=function(){this.mm=i};yg.prototype.ib=q("ta");function zg(a,b,c){if(b.Fb)switch(b.Df){case 0:D(a.Vf,b);break;case 1:D(a.yd,b);break;case 2:D(a.Qf,b);break;default:D(a.cd,b)}else b.Fb=i,a.ta++;b.Df=c;switch(c){case 0:a.Vf.push(b);break;case 1:a.yd.push(b);a.Vh=i;break;case 2:a.Qf.push(b);break;default:a.cd.push(b),a.Vh=i}}
yg.prototype.cancel=function(a){if(a.Fb){switch(a.Df){case 0:D(this.Vf,a);break;case 1:D(this.yd,a);break;case 2:D(this.Qf,a);break;default:D(this.cd,a)}this.ta--}};function Ag(a,b){return(a.Gj?0:1E3)+a.dj-((b.Gj?0:1E3)+b.dj)}
yg.prototype.update=function(a,b){if(this.mm||!this.ta)return 0;var c=20,d=dc(),e=a.Qd,f=0,h=this.Vf;if(h.length){for(var j=0;j<h.length;j++)f+=Bg(h[j]),h[j].Fb=n;this.ta-=h.length;c-=h.length;h.length=0}if(0>=c)return f;if(this.Vh||!(e%32))this.yd.length&&Cg(a,b,this.yd),this.cd.length&&Cg(a,b,this.cd),this.Vh=n;for(;c&&this.yd.length;){if(6<dc()-d)return f;e=this.yd.shift();f+=Bg(e);e.Fb=n;this.ta--;c--}for(;c&&this.Qf.length;){if(6<dc()-d)return f;e=this.Qf.shift();f+=Bg(e);e.Fb=n;this.ta--;c--}for(;c&&
this.cd.length&&!(6<dc()-d);)e=this.cd.shift(),f+=Bg(e),e.Fb=n,this.ta--,c--;return f};function Cg(a,b,c){a=a.Qd;for(var d=0;d<c.length;d++){var e=c[d];e.dj=Math.sqrt(Pe(b.position,e.tg));e.Gj=e.Ql==a}Ma(c,Ag)};function Dg(){G.call(this);this.Ma={};this.Fa=this.i=0}C(Dg,G);t=Dg.prototype;t.ib=q("i");t.tc=q("Fa");t.add=function(a){this.i++;this.Ma[a.id]=a;this.Fa+=a.Vc};t.remove=function(a){this.i--;delete this.Ma[a.id];this.Fa-=a.Vc};t.forEach=function(a,b){for(var c in this.Ma)a.call(b||u,this.Ma[c])};function Eg(a,b){var c=ge(0,0,0,0);this.p=a;this.Um=b||l;this.yq=l;this.color=c||Q()};function Fg(a){Kf.call(this,a,32);this.Wc=new Float32Array(this.mb);this.se=new Uint32Array(this.mb);this.restore()}C(Fg,Kf);Fg.prototype.Wi=function(){this.Wc=new Float32Array(this.mb);this.se=new Uint32Array(this.mb)};function Gg(a,b,c,d,e,f,h){var j=Mf(a);if(65535!=j){var k=a.Wc,m=a.se;a=j*a.ne/4;k[a+0]=b;k[a+1]=c;k[a+2]=d;m[a+3]=4294967295;k[a+4]=e;k[a+5]=f;k[a+6]=h;m[a+7]=4294967295}}
Fg.prototype.mc=function(a,b,c){var d=this.g.f;a=a.ih;if(this.bc){var e=Hg;Xe(b.Kc,c,e);d.uniformMatrix4fv(a.ha,n,e);Lf(this);d.vertexAttribPointer(a.ia,3,5126,n,16,0);d.vertexAttribPointer(a.Mc,4,5121,i,16,12);d.drawArrays(1,0,2*this.bc)}};var Hg=Se();function Ig(a,b,c,d){P.call(this,b.g);this.id=Jg++;this.Sf=a;this.Vb=b;this.L=c;this.Ae=d;a=c.x;var e=c.y+d,f=c.K,h=Se();Ue(h,1,1,1,0,a,e,f,1);this.Qm=h;this.tg=Ke(c.x+8,c.y+d+8,c.K+8);this.Lb=new qg;this.Hd=ge(this.tg[0],this.tg[1],this.tg[2],16);this.mg=b.Zk;this.$k=c.map.Kb;this.$i=i;this.Te=l;this.Vc=this.Og=0;this.Gj=n;this.Ql=0;this.dj=Number.MAX_VALUE;this.Fb=n;this.Df=3;this.Xi=n;this.Nb=l}C(Ig,P);Ig.prototype.b=function(){this.pd(n);Ig.a.b.call(this)};var Jg=0;t=Ig.prototype;
t.u=function(){this.g.f.deleteBuffer(this.Te);this.Te=l;this.Vc=this.Og=0;this.Nb&&(K(this.Nb),this.Nb=l);Ig.a.u.call(this)};t.restore=function(){Ig.a.restore.call(this);this.Xi&&(this.pd(n),this.pd(i));Kg(this.Sf,this.L.x,this.L.y+this.Ae,this.L.K,3)};t.Jj=function(){this.$i=i};
function Bg(a){a.$i=n;for(var b=a.$k,c=a.Vb.Ha,d=a.L.gc,e=Lg,f=Mg,h=a.Ae,j=a.Ae+16-1,k=h;k<=j;k++)for(var m=1;15>m;m++)for(var p=1;15>p;p++){var r=p+16*m+256*k,v=d[r];if(v>>8){f[0]=d[r+16]>>8;f[1]=d[r-16]>>8;f[2]=127<=k?0:d[r+256]>>8;f[3]=(0>=k?v:d[r-256])>>8;f[4]=d[r+1]>>8;f[5]=d[r-1]>>8;for(var r=b.R[v>>8],s=0;6>s;s++)if(!f[s]||f[s]!=v>>8&&b.R[f[s]].mh.p&64)oe(c,r.yj(p,k,m,s,v>>16&255,v&65535),e),df(a.mg,s,p,k-a.Ae,m,e)}}b=Array(4);b[0]=a.Sf.view.za(a.L.x-16,a.L.y,a.L.K);b[1]=a.Sf.view.za(a.L.x+
16,a.L.y,a.L.K);b[2]=a.Sf.view.za(a.L.x,a.L.y,a.L.K-16);b[3]=a.Sf.view.za(a.L.x,a.L.y,a.L.K+16);for(m=p=0;15>m;m++)Ng(a,p,h,j,m,b);m=15;for(p=0;15>p;p++)Ng(a,p,h,j,m,b);p=15;for(m=1;16>m;m++)Ng(a,p,h,j,m,b);m=0;for(p=1;16>p;p++)Ng(a,p,h,j,m,b);h=a.mg.finish(a.Te);a.Te=h.buffer;a.Og=h.Oe;j=a.Vc;a.Vc=h.jl;return a.Vc-j}
function Ng(a,b,c,d,e,f){for(var h=a.$k,j=a.Vb.Ha,k=a.L.gc,m=Lg,p=Mg,r=a.L.x,v=a.L.K;c<=d;c++){var s=b+16*e+256*c,y=k[s];if(y>>8){p[0]=15==e?f[3]?f[3].sc(r+b,c,v+e+1)>>8:0:k[s+16]>>8;p[1]=e?k[s-16]>>8:f[2]?f[2].sc(r+b,c,v+e-1)>>8:0;p[2]=127<=c?0:k[s+256]>>8;p[3]=(0>=c?y:k[s-256])>>8;p[4]=15==b?f[1]?f[1].sc(r+b+1,c,v+e)>>8:0:k[s+1]>>8;p[5]=b?k[s-1]>>8:f[0]?f[0].sc(r+b-1,c,v+e)>>8:0;for(var s=h.R[y>>8],w=0;6>w;w++)if(!p[w]||p[w]!=y>>8&&h.R[p[w]].mh.p&64)oe(j,s.yj(b,c,e,w,y>>16&255,y&65535),m),df(a.mg,
w,b,c-a.Ae,e,m)}}}
t.pd=function(a){if(this.Xi!=a)if(this.Xi=a){a=this.Nb=new Fg(this.g);var b=Ke(0,0,0),c=Ke(16,16,16);Gg(a,b[0],b[1],b[2],c[0],b[1],b[2]);Gg(a,b[0],b[1],b[2],b[0],c[1],b[2]);Gg(a,b[0],b[1],b[2],b[0],b[1],c[2]);Gg(a,c[0],b[1],c[2],b[0],b[1],c[2]);Gg(a,c[0],b[1],c[2],c[0],b[1],b[2]);Gg(a,c[0],b[1],c[2],c[0],c[1],c[2]);Gg(a,c[0],b[1],b[2],c[0],c[1],b[2]);Gg(a,b[0],b[1],c[2],b[0],c[1],c[2]);Gg(a,b[0],c[1],b[2],c[0],c[1],b[2]);Gg(a,b[0],c[1],b[2],b[0],c[1],c[2]);Gg(a,c[0],c[1],c[2],c[0],c[1],b[2]);Gg(a,
c[0],c[1],c[2],b[0],c[1],c[2])}else K(this.Nb),this.Nb=l};t.B=function(a,b){this.Og&&this.mg.mc(b,this.Qm,this.Te,this.Og)};var Lg=Q(),Mg=new Uint16Array(6);function Og(a,b,c){G.call(this);this.g=a.g;this.Vb=a;this.map=b;this.view=c;this.Ke=n;this.Bc=new Dg;H(this,this.Bc);this.Mb=new yg;H(this,this.Mb);this.Yg=[];this.Nj=this.Vl=0;this.Ul=l;this.Op=Array(512);this.qi=Array(1024);this.of=0;this.Om=Array(1024);this.Rl=this.Oj=0;this.view.ra.push(this)}C(Og,G);t=Og.prototype;t.b=function(){D(this.view.ra,this);Og.a.b.call(this)};t.pd=function(a){this.Ke!=a&&(this.Ke=a,this.Bc.forEach(function(b){b.pd(a)}))};
t.Aj=function(){var a;a="Render: "+(this.Bc.ib()+" cached (");a+=Math.floor(this.Bc.tc()/1E3)+"K), ";a+=this.Nj+" visible, ";return a+=this.Mb.ib()+" req"};function Pg(a,b){var c=a.qk;!c&&!b&&(c={Cc:Array(8)},a.qk=c);return c}function Qg(a,b){if(2==b.state)for(var c=Pg(b),d=0;d<c.Cc.length;d++){var e=c.Cc[d];e||(e=new Ig(a,a.Vb,b,16*d),e.pd(a.Ke),c.Cc[d]=e,a.Bc.add(e),zg(a.Mb,e,3))}}
function Rg(a,b,c,d,e,f,h,j){b--;c--;d--;e++;f++;h++;d>>=4;e>>=4;h>>=4;c>>=4;f>>=4;for(b>>=4;b<=e;b++)for(var k=d;k<=h;k++)for(var m=c;m<=f;m++)Kg(a,b<<4,m<<4,k<<4,j)}function Kg(a,b,c,d,e){if(b=a.view.za(b,c,d)){d=Pg(b);c>>=4;var f=d.Cc[c];f||(f=new Ig(a,a.Vb,b,16*c),f.pd(a.Ke),d.Cc[c]=f,a.Bc.add(f),zg(a.Mb,f,e));if(!f.$i||f.Df!=e)f.Jj(),zg(a.Mb,f,e)}}
t.B=function(a,b){var c=this.Vb,d=this.map;this.Ul=b;this.Oj=this.of=this.Nj=this.Vl=0;this.Rl=a.Qd;this.view.qj(b,this.uo,this);var e=this.Mb.update(a,b),f=this.Bc;f.Fa+=e;if(!this.Mb.ib()&&this.Yg.length){for(e=0;e<this.Yg.length;e++)this.Yg[e].w(l);this.Yg.length=0}e=b.Pg-16;c.qf.update(d.Uc.Nc,d.Uc.sd,d.Uc.rd,0.5*e,0.85*e,d.Uc.oa);if(this.Ke){4!=c.mode&&(c.mode=4,e=c.g,d=e.f,gf(e,Yf),jf(e,Zf),lf(e,c.ih),e=c.qf,f=c.ih,e.Qj&&(e.Qj=n,d.uniform2f(f.pb,e.Xe,e.We),d.uniform3f(f.ob,e.oa[0],e.oa[1],e.oa[2])),
d.enableVertexAttribArray(0),d.enableVertexAttribArray(1),d.disableVertexAttribArray(2));for(e=0;e<this.of;e++)d=this.qi[e],d.Nb&&d.Nb.mc(d.Vb,b,d.Qm)}if(this.of){2!=c.mode&&(c.mode=2,d=c.g,e=d.f,gf(d,hf),jf(d,kf),lf(d,c.qc),cg(c.qf,e,c.qc),re(d,c.Ha),e.uniform2f(c.qc.ji,c.Ha.width,c.Ha.height),e.bindBuffer(34963,c.ze),e.enableVertexAttribArray(0),e.enableVertexAttribArray(1),e.enableVertexAttribArray(2));for(e=0;e<this.of;e++)d=this.qi[e],d.B(a,b),this.qi[e]=l}if(this.Oj){3!=c.mode&&(c.mode=3,d=
c.g,e=d.f,gf(d,Wf),jf(d,Xf),lf(d,c.qc),cg(c.qf,e,c.qc),re(d,c.Ha),e.uniform2f(c.qc.ji,c.Ha.width,c.Ha.height),e.bindBuffer(34963,c.ze),e.enableVertexAttribArray(0),e.enableVertexAttribArray(1),e.enableVertexAttribArray(2));for(e=0;e<this.Oj;e++)d=this.Om[e],d.B(a,b),this.Om[e]=l}};
t.uo=function(a){this.Op[this.Vl++]=a;a=Pg(a);for(var b=0;8>b;b++){var c=a.Cc[b],d;if(d=c){a:{d=c.Hd;for(var e=this.Ul.tj,f=0;f<e.length;f++){var h=e[f],h=h[0]*d[0]+h[1]*d[1]+h[2]*d[2]+h[3];if(h<-d[3]){d=-1;break a}if(Math.abs(h)<d[3]){d=0;break a}}d=1}d=-1!=d}if(d&&(c.Fb||0<c.Vc))c.Fb&&1<c.Df&&zg(this.Mb,c,1),c.Ql=this.Rl,this.Nj++,this.qi[this.of++]=c}};function Sg(a,b){Qd.call(this,a,b,"../assets/audio/blocks","BlockSounds",[new ec("audio/wav","blocks_optimized.wav",593072),new ec("audio/ogg","blocks_optimized.ogg",53526),new ec("audio/mpeg","blocks_optimized.mp3",54333)],[new jc("block_grass",0,[new L(0,328),new L(428,368),new L(896,318),new L(1314,373)]),new jc("block_wood",0,[new L(5262,272),new L(5634,282),new L(6016,262),new L(6378,237)]),new jc("block_gravel",0,[new L(1787,389),new L(2276,338),new L(2714,313),new L(3127,363)]),new jc("block_stone",
0,[new L(3590,338),new L(4028,338),new L(4466,293),new L(4859,303)])])}C(Sg,Qd);function Tg(a,b){this.attributes=[new Ug(3,0),new Ug(2,24)];this.$m=a;this.un=b}function Ug(a,b){this.size=a;this.type=5126;this.uf=n;this.Kf=32;this.offset=b};function Vg(){};function Wg(){this.name=l;this.index=0;this.parent=l;this.children=[];this.transform=Te();this.Lb=new qg;this.Hd=Q()};function Xg(a){this.Yj=a;a=a.ng;this.dn=new Float32Array(16*a.length);this.Yp=new Float32Array(16*a.length);this.Hp=i;this.reset()}Xg.prototype.reset=function(){this.Hp=i;for(var a=this.Yj.ng,b=0,c=0;b<a.length;b++,c+=16)for(var d=a[b],e=0;16>e;e++)this.dn[c+e]=d.transform[e]};function Yg(a){G.call(this);this.id=a;this.Lb=new qg;this.Hd=Q();this.Dn=l;this.lm=[];this.ng=[];this.$p={}}C(Yg,G);Yg.prototype.vk=da("Dn");Yg.prototype.Ie=function(){return new Xg(this)};function Zg(){this.mh=new Vg;this.primitiveType=4;this.vn=this.Oe=0};function $g(a,b,c){G.call(this);this.f=a.f;this.$f=b;this.Wk=Array(32);for(var d=this.gj=0;d<b.length;d++){var e=b[d];this.Wk[e.index]=e;this.gj|=1<<e.index}this.Ig=c;this.fb=a.Ng.get(5);this.sb=l;this.fb&&(this.sb=this.fb.createVertexArrayOES(),this.fb.bindVertexArrayOES(this.sb),this.xc(),this.fb.bindVertexArrayOES(l))}C($g,G);t=$g.prototype;t.b=function(){this.fb&&(this.fb.deleteVertexArrayOES(this.sb),this.sb=l);this.fb=l;$g.a.b.call(this)};
t.dd=function(a){this!=a&&(this.fb?this.fb.bindVertexArrayOES(this.sb):a?this.ed(a):this.xc())};t.reset=function(){this.fb&&this.fb.bindVertexArrayOES(l)};t.xc=function(){var a=this.f;a.bindBuffer(34963,this.Ig);for(var b=l,c=0;c<this.$f.length;c++){var d=this.$f[c];a.enableVertexAttribArray(d.index);b!=d.buffer&&(b=d.buffer,a.bindBuffer(34962,d.buffer));a.vertexAttribPointer(d.index,d.size,d.type,d.uf,d.Kf,d.offset)}};
t.ed=function(a){var b=this.f;this.Ig!=a.Ig&&b.bindBuffer(34963,this.Ig);for(var c=l,d=0;d<this.$f.length;d++){var e=this.$f[d];a.gj&1<<e.index||b.enableVertexAttribArray(e.index);var f=a.Wk[e.index];f&&f.kl==e.kl||(c!=e.buffer&&(c=e.buffer,b.bindBuffer(34962,e.buffer)),b.vertexAttribPointer(e.index,e.size,e.type,e.uf,e.Kf,e.offset))}};
function ah(a,b,c,d,e,f,h){this.index=a;this.buffer=b;this.size=c;this.type=d;this.uf=e;this.Kf=f;this.offset=h;this.kl=[this.index,ma(this.buffer),this.size,this.type,this.uf,this.Kf,this.offset].join(":")};function bh(a,b,c){P.call(this,a);this.Sg=b;this.sb=this.Ne=this.ye=l;this.iq=c||l}C(bh,P);bh.prototype.u=function(){var a=this.g.f;K(this.sb);this.sb=l;a.deleteBuffer(this.ye);this.ye=l;a.deleteBuffer(this.Ne);this.Ne=l;bh.a.u.call(this)};
bh.prototype.restore=function(){bh.a.restore.call(this);var a=this.g.f;this.ye=a.createBuffer();this.Ne=a.createBuffer();a.bindBuffer(34962,this.ye);a.bufferData(34962,this.Sg.$m,35044);a.bindBuffer(34963,this.Ne);a.bufferData(34963,this.Sg.un,35044);for(var a=[],b=0;b<this.Sg.attributes.length;b++){var c=this.Sg.attributes[b];a.push(new ah(b,this.ye,c.size,c.type,c.uf,c.Kf,c.offset))}this.sb=new $g(this.g,a,this.Ne)};bh.prototype.bind=function(){this.sb&&mf(this.g,this.sb)};function ch(a){Xg.call(this,a);this.Z=a.Z;this.Td=a.Td}C(ch,Xg);ch.prototype.B=function(){var a=this.Z.f;this.Td.bind();for(var b=this.Yj.lm,c=0;c<b.length;c++){var d=b[c];a.drawElements(d.primitiveType,d.Oe,5123,d.vn)}};function dh(a,b){Yg.call(this,a);this.Z=b;this.Td=l}C(dh,Yg);dh.prototype.vk=function(a){dh.a.vk.call(this,a);this.Td=new bh(this.Z,a,this.id);H(this,this.Td);this.Td.restore()};dh.prototype.Ie=function(){return new ch(this)};function eh(a,b){var c=new dh("pumpkin",b),d=c.Lb,e=[-0.5,-1,0,0.5,1,0.5],f=d.min,d=d.max;if(e.length){var h=0;S(f,e[h],e[h+1],e[h+2]);S(d,e[h],e[h+1],e[h+2]);h++;for(var j=1;j<e.length/3;j++,h++)e[h]<f[0]?f[0]=e[h]:e[h]>d[0]&&(d[0]=e[h]),e[h+1]<f[1]?f[1]=e[h+1]:e[h+1]>d[1]&&(d[1]=e[h+1]),e[h+2]<f[2]?f[2]=e[h+2]:e[h+2]>d[2]&&(d[2]=e[h+2])}else S(f,0,0,0),S(d,0,0,0);he(c.Hd,0,0,0,1);e=ge(96,112,112,128);f=ge(112,112,128,128);d=ge(96,96,112,112);je(e,e);je(f,f);je(d,d);e=new Float32Array([-0.5,-1,0.5,
0,0,1,e[2],e[3],0.5,-1,0.5,0,0,1,e[0],e[3],0.5,1,0.5,0,0,1,e[0],e[1],-0.5,1,0.5,0,0,1,e[2],e[1],-0.5,-1,-0.5,0,0,-1,f[0],f[3],-0.5,1,-0.5,0,0,-1,f[0],f[1],0.5,1,-0.5,0,0,-1,f[2],f[1],0.5,-1,-0.5,0,0,-1,f[2],f[3],-0.5,1,-0.5,0,1,0,d[2],d[1],-0.5,1,0.5,0,1,0,d[2],d[3],0.5,1,0.5,0,1,0,d[0],d[3],0.5,1,-0.5,0,1,0,d[0],d[1],-0.5,-1,-0.5,0,-1,0,e[0],e[1],0.5,-1,-0.5,0,-1,0,e[2],e[1],0.5,-1,0.5,0,-1,0,e[2],e[3],-0.5,-1,0.5,0,-1,0,e[0],e[3],0.5,-1,-0.5,1,0,0,e[0],e[3],0.5,1,-0.5,1,0,0,e[0],e[1],0.5,1,0.5,
1,0,0,e[2],e[1],0.5,-1,0.5,1,0,0,e[2],e[3],-0.5,-1,-0.5,-1,0,0,e[2],e[3],-0.5,-1,0.5,-1,0,0,e[0],e[3],-0.5,1,0.5,-1,0,0,e[0],e[1],-0.5,1,-0.5,-1,0,0,e[2],e[1]]);f=new Uint16Array(36);for(j=h=d=0;6>d;d++,h+=6,j+=4)f[h+0]=0+j,f[h+1]=1+j,f[h+2]=2+j,f[h+3]=0+j,f[h+4]=2+j,f[h+5]=3+j;c.vk(new Tg(e.buffer,f));e=new Zg;c.lm.push(e);e.primitiveType=4;e.Oe=36;e=new Wg;e.index=c.ng.length;e.name=l;e.parent=l;c.ng.push(e);f=e.Lb;d=c.Lb;Le(f.min,d.min);Le(f.max,d.max);ie(e.Hd,c.Hd);return c};function fh(){G.call(this);this.sf={}}C(fh,G);fh.prototype.b=function(){for(var a in this.sf)K(this.sf[a]);this.sf={};fh.a.b.call(this)};fh.prototype.update=ca();function gh(a,b){fh.call(this);this.Xa=a;this.Z=b;this.Zl={}}C(gh,fh);function hh(a,b){gh.call(this,a,b);this.Zl.pumpkin={id:"pumpkin",tn:eh}}C(hh,gh);function ih(){this.R=Array(256)};function jh(){G.call(this);this.wb={};this.Gc=[];this.Fa=this.ta=0}C(jh,G);t=jh.prototype;t.b=function(){this.Gc.length=0;jh.a.b.call(this)};t.update=function(){for(;this.Gc.length;){var a=this.Gc.shift();kh(this,a)}};t.tc=q("Fa");t.get=function(a,b,c){return 0!=b>>7?l:this.wb[(a>>4&65535)<<16|c>>4&65535]||l};t.add=function(a){this.wb[(a.x>>4&65535)<<16|a.K>>4&65535]=a;0<a.ge||this.Gc.push(a);this.ta++;this.Fa+=65792};t.remove=function(a){kh(this,a);0<a.ge||D(this.Gc,a)};
function kh(a,b){delete a.wb[(b.x>>4&65535)<<16|b.K>>4&65535];a.Fa-=65792;a.ta--}t.Uj=function(a){this.Gc.push(a)};t.Vj=function(a){D(this.Gc,a)};function lh(){G.call(this);this.Am=Ke(0,191/255,1);this.Nc=Ke(110/255,110/255,110/255);this.sd=Ke(1,1,-0.5);this.rd=Ke(130/255,130/255,130/255);this.oa=Ke(1,1,1);Le(this.oa,this.Am)}C(lh,G);lh.prototype.update=ca();function mh(a,b,c,d,e){this.id=a;this.name=b;this.mh=c;this.p=d;this.zq=0;this.kq=1;this.Aq=0;this.Vk=e}mh.prototype.yj=q("Vk");function nh(a,b,c,d,e){mh.call(this,a,b,c,d,e)}C(nh,mh);var oh=new Eg(17,"block_gravel"),ph=new Eg(17,"block_stone"),qh=new Eg(17,"block_wood"),rh=new Eg(97,"block_stone");function sh(){mh.call(this,3,"Brick",ph,17,7)}C(sh,nh);function th(){mh.call(this,1,"Dirt",oh,17,2)}C(th,nh);th.prototype.yj=function(a,b,c,d,e,f){if(f&1)switch(d){case 0:case 1:case 4:case 5:return 3;case 2:return 0;default:case 3:return 2}else return 2};function uh(){mh.call(this,5,"Glass",rh,17,49)}C(uh,nh);function vh(){mh.call(this,2,"Stone",ph,17,1)}C(vh,nh);function wh(){mh.call(this,4,"Wood",qh,17,4)}C(wh,nh);function xh(){G.call(this);this.Kb=new ih;var a=new th;this.Kb.R[a.id]=a;a=new vh;this.Kb.R[a.id]=a;a=new sh;this.Kb.R[a.id]=a;a=new wh;this.Kb.R[a.id]=a;a=new uh;this.Kb.R[a.id]=a;this.Uc=new lh;H(this,this.Uc);this.Cd=[];this.Ka=new jh;H(this,this.Ka)}C(xh,G);t=xh.prototype;t.b=function(){xh.a.b.call(this)};t.Aj=function(){var a;a="Chunks: "+(this.Ka.ta+" cached (");a+=Math.floor(this.Ka.tc()/1E3)+"K), ";return a+=this.Ka.ta-this.Ka.Gc.length+" used"};t.update=function(a){this.Uc.update(a);this.Ka.update(a)};
t.za=function(a,b,c){var d=this.Ka.get(a,b,c);if(d)return d;d=new ug(this,a&-16,b&-128,c&-16);this.Ka.add(d);this.um(d);return d};t.ck=function(a){for(var b=0;b<this.Cd.length;b++){var c=this.Cd[b],d=c.hc,e=a.Lb,f=d.min,d=d.max,h=e.min,e=e.max;-1!=(d[0]<h[0]||f[0]>e[0]||d[1]<h[1]||f[1]>e[1]||d[2]<h[2]||f[2]>e[2]?-1:f[0]>h[0]||e[0]>d[0]||f[1]>h[1]||e[1]>d[1]||f[2]>h[2]||e[2]>d[2]?0:1)&&c.ck(a)}};t.Xm=z;t.Uj=function(a){this.Ka.Uj(a)};t.Vj=function(a){this.Ka.Vj(a)};t.um=z;
t.sc=function(a,b,c){var d=this.Ka.get(a,b,c);return d?d.sc(a,b,c):0};t.Yb=function(a,b,c,d){var e=this.Ka.get(a,b,c);if(e){if(2!=e.state)return M("setBlock before chunk fully loaded - inconsistent state!"),0}else return 0;e=e.Yb(a,b,c,d);if(e!=d)for(d=0;d<this.Cd.length;d++)for(var f=this.Cd[d],h=a,j=b,k=c,m=0;m<f.ra.length;m++)Rg(f.ra[m],h,j,k,h,j,k,0);return e};function yh(){xh.call(this)}C(yh,xh);yh.prototype.um=ca();function zh(){this.buffer=new Uint8Array(0);this.offset=0;this.na=new Float32Array(16);this.ya=new Uint8Array(this.na.buffer);this.An=(this.Ve=u.Float64Array?new Float64Array(1):l)?new Uint8Array(this.Ve.buffer):l}t=zh.prototype;t.Ki=function(a,b){this.buffer=a instanceof Uint8Array?a:new Uint8Array(a);this.offset=b};function Ah(a){var b=a.buffer[a.offset++];a=a.buffer[a.offset++];b=b<<8|a;return 32767<b?b-65536:b}
function Bh(a){var b=a.buffer[a.offset++],c=a.buffer[a.offset++],d=a.buffer[a.offset++];a=a.buffer[a.offset++];b=b<<24|c<<16|d<<8|a;return 2147483647<b?b-4294967296:b}function Ch(a){return a.buffer[a.offset++]}function Dh(a){var b=a.buffer[a.offset++];a=a.buffer[a.offset++];return b<<8|a}t.ba=function(){var a=this.buffer[this.offset++],b=this.buffer[this.offset++],c=this.buffer[this.offset++],d=this.buffer[this.offset++];return a<<24|b<<16|c<<8|d};
t.F=function(){for(var a=0,b=0,c;(c=this.buffer[this.offset++]&255)&128;)a|=(c&127)<<b,b+=7;return a|c<<b};t.Bh=function(){var a=this.F();return(a<<31>>31^a)>>1^a&-2147483648};t.rm=function(){this.ya[0]=this.buffer[this.offset++];this.ya[1]=this.buffer[this.offset++];this.ya[2]=this.buffer[this.offset++];this.ya[3]=this.buffer[this.offset++];return this.na[0]};t.ap=function(){for(var a=0;12>a;a++)this.ya[a]=this.buffer[this.offset++];return this.na};
t.bp=function(){for(var a=0;16>a;a++)this.ya[a]=this.buffer[this.offset++];return this.na};t.s=function(){var a=Dh(this);Dh(this);for(var b=Array(a),c=0;c<a;){var d=this.buffer[this.offset++];if(128>d)b[c++]=String.fromCharCode(d);else if(191<d&&224>d){var e=this.buffer[this.offset++];b[c++]=String.fromCharCode((d&31)<<6|e&63)}else{var e=this.buffer[this.offset++],f=this.buffer[this.offset++];b[c++]=String.fromCharCode((d&15)<<12|(e&63)<<6|f&63)}}return b.join("")};var Eh=l;
function Fh(){Eh||(Eh=new zh);return Eh};function Gh(){this.fq=1}var Hh=l;function Ih(a){this.factory=a;this.pe=this.Nf=0}t=Ih.prototype;t.getTime=q("Nf");t.setTime=function(a){this.Nf=(1E3*a|0)/1E3};t.read=function(a){var b=this.factory.p;b&2&&(this.Nf=a.F()/1E3);b&4||(this.pe=a.F())};t.write=function(a){var b=this.factory.p;b&2&&a.fc(1E3*this.Nf|0);b&4||a.fc(this.pe)};t.he=function(){this.factory.he(this)};function Jh(a){Ih.call(this,a);this.tk=this.fi=0;this.Wg=n}C(Jh,Ih);Jh.prototype.read=function(a){Jh.a.read.call(this,a);this.fi=a.F()/1E3;this.Wg=n};
Jh.prototype.write=function(a){Jh.a.write.call(this,a);a.fc(1E3*this.fi|0)};function Kh(a){Ih.call(this,a);this.rh=0}C(Kh,Ih);Kh.prototype.read=function(a){Kh.a.read.call(this,a);this.rh=a.F()};Kh.prototype.write=function(a){Kh.a.write.call(this,a);a.fc(this.rh)};function Lh(a,b,c,d){G.call(this);this.Da=a;this.factory=b;this.km=l;this.jj=c;this.Od=d;this.fa=l;this.Ya=[];this.la=0;this.Gb=Mh(b,this);this.Za=d&(Nh|Oh)?Mh(b,this):l;this.U=[]}C(Lh,G);t=Lh.prototype;t.b=function(){var a=this.getParent();a&&(D(a.Ya,this),a.Jd(this));this.factory.qd.push(this.Gb);this.Za&&this.factory.qd.push(this.Za);for(a=0;a<this.U.length;a++)this.factory.qd.push(this.U[a]);Lh.a.b.call(this)};t.zb=q("Da");t.getParent=q("fa");
function Ph(a,b){if(a.fa!=b){var c=a.fa;a.fa=b;a.fk(c,b);c&&(D(c.Ya,a),c.Jd(a));b&&b.Ci(a)}}t.Ci=function(a){this.Ya.push(a);this.ug(a)};t.fk=z;t.ug=z;t.Jd=z;t.zj=ea(l);function T(a){return a.Za||a.Gb}t.read=function(a){this.Gb.read(a)};t.ok=function(a){this.Gb.ok(a)};t.write=function(a){this.Gb.write(a)};function Qh(a,b){if(a.Od&Nh){1==a.U.length&&(a.U[0].time=b);var c=Mh(a.factory,a);c.time=b;a.Gb.Si(c);a.U.push(c)}}
t.ah=function(a){var b=this.Od;if(this.Za){this.Gb.yg(this.Za);if(b&Nh){var c=this.Za;if(this.U.length&&!(this.U[0].time>a)){for(var d=l,e=1;e<this.U.length&&!(d=this.U[e],d.time>=a);e++);if(e>=this.U.length){d=this.U[this.U.length-1];c.ah(d,d,0);for(c=0;c<this.U.length-1;c++)this.factory.qd.push(this.U[c]);this.U.splice(0,this.U.length-1)}else{var f=this.U[e-1];a=(a-f.time)/(d.time-f.time);a=Math.min(Math.max(a,0),1);c.ah(f,d,a);d=1<=a?e:e-1;if(0<d){for(c=0;c<d;c++)this.factory.qd.push(this.U[c]);
this.U.splice(0,d)}}}}b&Oh&&this.Gb.Ti(this.Za)}};t.Ui=function(a){a=Rh(this.Da.Pc[a]||l);a.pe=this.jj;return a};t.eb=function(a){a instanceof Kh&&(0==a.rh?Ph(this,l):Ph(this,this.Da.G[a.rh]||l))};function Sh(a,b,c){Th(a.Da.Lh,b,c===g?0:c,a.update,a)}t.gd=function(){this.Za&&this.Gb.yg(this.Za)};t.Wo=z;t.Jj=function(){var a=!!this.la;this.la|=Uh;a||(a=this.Da,a.bb[a.ab++]=this)};t.je=function(){this.la=0;this.Gb.je();this.Za&&this.Za.je()};var Oh=4,Nh=8,Uh=2;function Vh(a){G.call(this);this.hp=a}C(Vh,G);function Wh(a){G.call(this);this.ip=a;this.sk=[[],[],[],[],[]];this.Hm=[]}C(Wh,G);function Th(a,b,c,d,e){var f=a.Hm.pop()||new Xh;f.Yo=b;f.rk=a.ip.S.gb;f.bi=-1==c?0:0==c?f.rk+0.0010:c;f.w=d;f.Qi=e||u;a=a.sk[b];b=0;for(c=a.length;b<c;)d=b+c>>1,0<a[d].bi-f.bi?b=d+1:c=d;a.splice(b,0,f)}var Yh=Number.MAX_VALUE;
Wh.prototype.update=function(a){a=a.time;for(var b=dc(),c=this.sk.length-1;0<=c;c--){for(var d=this.sk[c];d.length;){var e=d[0];if(e.bi>a)break;d.shift();var f=a-e.rk,h=e.w,j=e.Qi;e.w=e.Qi=l;this.Hm.push(e);h.call(j,a,f)}if(dc()-b>=Yh)break}};function Xh(){this.Yo=Zh;this.bi=this.rk=0;this.Qi=this.w=l}var Zh=0;function $h(){this.nf=this.oh=this.Cb=this.im=this.Jl=this.xf=this.ph=this.hf=this.$g=this.Qe=this.Lg=this.Re=this.Mg=this.Pe=this.Kg=0}$h.prototype.update=function(a){this.Cb+=this.Pe;this.Cb+=this.Re;this.Cb+=this.Qe;this.Cb+=this.hf;this.oh+=this.xf;1<=a-this.nf&&(this.nf=a,this.Jl=this.Cb,this.im=this.oh,this.oh=this.Cb=0);this.ph=this.xf=this.$g=this.hf=this.Lg=this.Qe=this.Mg=this.Re=this.Kg=this.Pe=0};function ai(a,b){for(var c=String(a);c.length<b;)c=" "+c;return c}
$h.prototype.Ug=function(){return["i/s:",ai(Math.round(this.Jl),4)," o/s:",ai(Math.round(this.im),4)," ec:",ai(this.Kg,2),"/",ai(this.Pe,4)," eu:",ai(this.Mg,2),"/",ai(this.Re,4)," ed:",ai(this.Lg,2),"/",ai(this.Qe,4)," ic:",ai(this.$g,2),"/",ai(this.hf,4)," oc:",ai(this.ph,2),"/",ai(this.xf,4)].join("")};function bi(a,b,c){this.vd=a;this.nn=b;this.p=c;this.Ok=[]}function Rh(a){return a.Ok.length?(a=a.Ok.pop(),a.pe=0,a):new a.nn(a)}bi.prototype.he=function(a){this.Ok.push(a)};function ci(a,b){Vh.call(this,a);this.t=new $h;this.Lh=new Wh(a);H(this,this.Lh);this.Tf=[];this.Pc={};this.ij={};this.bk=b;this.G={};this.Fh=l;this.bb=Array(256);this.ab=0;var c=new bi(0,Kh,0);this.Pc[c.vd]=c}C(ci,Vh);function di(a,b){a.ij[b.vd]=b}function ei(a){var b=a.bk;a.bk+=2;return b}t=ci.prototype;t.Vi=function(a,b){var c=this.ij[a].Vi(this,ei(this),b);this.Dd(c);return c};t.Dd=function(a){this.G[a.jj]=a;var b=!!a.la;a.la|=1;b||(this.bb[this.ab++]=a);a.Od&128&&(this.Fh=a)};
t.ld=function(a,b){if(!(a.la&4)){switch(b||fi){default:case fi:for(var c=a.Ya.length-1;0<=c;c--){var d=a.Ya[c];a.Jd(d);a.Da.ld(d)}if(d=a.zj())for(c=0;c<d.length;c++)a.Da.ld(d[c]);break;case gi:for(c=0;c<a.Ya.length;c++)Ph(a.Ya[c],l);if(d=a.zj())for(c=0;c<d.length;c++)Ph(d[c],l);case hi:}delete this.G[a.jj];c=!!a.la;a.la|=4;c||(this.bb[this.ab++]=a);K(a)}};t.Ui=function(a){a=Rh(this.Pc[a]||l);a.pe=0;return a};
function ii(a,b,c){for(var d=0;d<c;d++){var e=b[d],f=e.pe;0==f?a.eb(e):(f=a.G[f]||l)&&f.eb(e);e instanceof Jh&&(e.Wg=i)}}t.eb=z;t.Xo=z;var fi=0,gi=1,hi=2;function ji(){this.Fi=[];this.i=0}ji.prototype.compact=ca();ji.prototype.ib=q("i");ji.prototype.Xf=function(a){this.Fi[this.i++]=a};function ki(){this.bm=1;this.Mk=[];this.wd=0;this.dk=[];this.ee=0;this.jm=[];this.ek=0}ki.prototype.compact=ca();ki.prototype.Xf=function(a){this.dk[this.ee++]=a;a instanceof Jh&&(a.tk=this.bm++,a.Wg=n,this.jm[this.ek++]=a)};
ki.prototype.write=function(a){a.fc(this.bm-1);var b=this.ee;a.fc(this.ee);for(var c=0;c<this.ee;c++){var d=this.dk[c];this.dk[c]=l;a.fc(d.factory.vd);d.write(a);d instanceof Jh?this.Mk[this.wd++]=d:d.factory.he(d)}this.ek=this.ee=0;1500<this.wd&&M("massive backup of commands, dying");return b};function li(a,b){ci.call(this,a,1);this.Qh=b;b.Pa.V(30,this.po,this);this.bh=[];this.gf=new ji;this.fd=new ki;this.Tl=0}C(li,ci);t=li.prototype;t.b=function(){li.a.b.call(this)};t.Zc=function(a){return this.Qh.Ib[a]||l};t.Dd=function(a){li.a.Dd.call(this,a);a.Od&(Oh|Nh)&&this.bh.push(a)};t.ld=function(a,b){li.a.ld.call(this,a,b);a.Od&(Oh|Nh)&&D(this.bh,a)};
t.update=function(a){var b=mi(this.hp.S);ni(this,b-0.5);ii(this,this.gf.Fi,this.gf.ib());for(var b=this.gf,c=0;c<b.i;c++){var d=b.Fi[c];d.factory.he(d)}b.i=0;this.Lh.update(a);for(b=0;b<this.ab;b++)c=this.bb[b],c.Wo(a),this.Xo(a,c);this.fd.ee&&0.05<=a.time-this.Tl&&(this.Tl=a.time,b=ig(),fg(b,31),c=this.fd.write(b),this.t.ph+=c,this.t.xf+=b.offset,this.Qh.send(b.finish()));for(b=0;b<this.ab;b++)c=this.bb[b],this.bb[b]=l,c.je();this.ab=0;15>a.time-this.Fo||(this.Fo=a.time,this.gf.compact(),this.fd.compact())};
function ni(a,b){for(var c=0;c<a.bh.length;c++)a.bh[c].ah(b);c=a.fd;ii(a,c.Mk,c.wd);ii(a,c.jm,c.ek)}
t.po=function(a,b,c){b=c.F()/1E3;var d=c.F(),e=c.F(),f=c.F(),h=c.F();a=c.F();this.t.Kg+=e;this.t.Mg+=f;this.t.Lg+=h;this.t.$g+=a;var j=this.fd,k=j.Mk,m=j.wd;if(m)if(k[m-1].tk<=d){for(var p=0;p<m;p++){var r=k[p];r.factory.he(r)}j.wd=0}else{for(var v=m,p=0;p<m;p++){r=k[p];if(r.tk>d){v=p;break}r.factory.he(r)}k.splice(0,v);j.wd-=v}for(d=0;d<this.ab;d++)j=this.bb[d],this.bb[d]=l,j.je();this.ab=0;k=l;for(d=j=0;d<e;d++){var j=c.offset,p=c.F()<<1,s=c.F(),r=c.F(),v=c.F(),m=c.F(),s=this.ij[s]||l;if(!s)return n;
(v=v?this.Qh.ni[v]||l:l)&&(v!=oi(this.Qh)&&r&Oh)&&(r&=~Oh);p=s.Vi(this,p,r);p.km=v;p.read(c);this.t.Pe+=c.offset-j;Qh(p,b);this.Dd(p);m&&(k||(k=[]),k.push([p,m]))}for(d=0;d<f;d++){j=c.offset;p=c.F()<<1;p=this.G[p]||l;if(!p)return n;p.ok(c);this.t.Re+=c.offset-j;Qh(p,b)}for(d=0;d<h;d++){j=c.offset;p=c.F()<<1;this.t.Qe+=c.offset-j;p=this.G[p]||l;if(!p)return n;this.ld(p,hi)}if(k)for(d=0;d<k.length;d++){p=k[d][0];b=this.G[k[d][1]]||l;if(!b)return n;Ph(p,b)}for(b=0;b<this.ab;b++)e=this.bb[b],e.gd();for(b=
0;b<this.ab;b++){e=this.bb[b];this.bb[b]=l;if(e.la&1)for(f=0;f<this.Tf.length;f++)this.Tf[f].hj(e);if(e.la&4)for(f=0;f<this.Tf.length;f++)this.Tf[f].kj(e);e.je()}for(d=this.ab=0;d<a;d++){j=c.offset;b=c.F();b=this.Pc[b]||l;if(!b)return n;b=Rh(b);b.read(c);this.t.hf+=c.offset-j;this.gf.Xf(b)}return i};function pi(a){switch(a){case 0:return"user closed the connection";case 1:return"socket killed or timed out";case 2:return"network protocol mismatch";case 3:return"unexpected data sent/received";case 4:return"access denied";case 5:return"kicked by console";case 6:return"banned";case 7:return"server full";default:return"unknown"}};function qi(){this.gn=this.fn=this.Fq=this.jq=this.pq=this.qq=this.Xk=0}qi.prototype.q=function(){return new qi};qi.prototype.toString=ea("[stats]");var ri=function(){var a;return pb?(a=/Windows NT ([0-9.]+)/,(a=a.exec(qb()))?a[1]:"0"):ob?(a=/10[_.][0-9_.]+/,(a=a.exec(qb()))?a[0].replace(/_/g,"."):"10"):""}();function si(){this.Pk="";this.type=ti;this.platform=ui;this.fe="";this.Ld=vi}si.prototype.q=function(){var a=new si;a.Pk=this.Pk;a.type=this.type;a.platform=this.platform;a.fe=this.fe;a.Ld=this.Ld;return a};si.prototype.toString=function(){return[this.type,this.platform+this.fe,this.Ld].join("/")};var ti="unknown",ui="other",vi="desktop";function wi(){this.bg="none";this.ag="0";this.M="User"}wi.prototype.q=function(){var a=new wi;a.bg=this.bg;a.ag=this.ag;a.M=this.M;return a};wi.prototype.toString=ea("[user]");function xi(a){a=va(ua(xa(a)));return!a.length?"User":a};function yi(a,b,c,d,e){this.j=a||"";this.dc=b||0;this.p=c||0;this.info=d||new wi;this.Yf=e||new si;this.Md=0;this.t=new qi;this.data=this.Ea=l}yi.prototype.toString=function(){return this.info.M+" ("+this.j+"/"+this.dc+")"};function zi(a){return new yi(a.j,a.dc,a.p,a.info.q(),a.Yf.q())};function Ai(a){a=T(a.Da.Fh);a.ti===g&&(a.ti=a.Uf?a.aa.zb().G[a.Uf]||l:l);return a.ti};function Bi(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],h=2*c,j=2*d,k=2*e,m=h*f,p=j*f,f=k*f,h=h*c,r=j*c,c=k*c,j=j*d,d=k*d,e=k*e;b[0]=1-(j+e);b[1]=r+f;b[2]=c-p;b[3]=0;b[4]=r-f;b[5]=1-(h+e);b[6]=d+m;b[7]=0;b[8]=c+p;b[9]=d-m;b[10]=1-(h+j);b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1}
function Ci(a,b,c,d){var e=a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3];if(1<e||-1>e)return ie(d,b),d;var f=1;0>e&&(f=-1,e=-e);var h=Math.acos(e);if(1E-6>=h)return ie(d,b),d;var j=1/Math.sin(h),e=Math.sin((1-c)*h)*j;c=f*Math.sin(c*h)*j;d[0]=a[0]*e+b[0]*c;d[1]=a[1]*e+b[1]*c;d[2]=a[2]*e+b[2]*c;d[3]=a[3]*e+b[3]*c;return d};function Di(a,b,c,d){Lh.call(this,a,b,c,d);this.Hb=i;this.Id=Q();this.Ek=Se();T(this).ym(Ke(1,1,1))}C(Di,Lh);Di.prototype.gd=function(){Di.a.gd.call(this);this.Hb=i};
function Ei(a){if(a.Hb){a.Hb=n;var b=T(a),c=b.Ub,d=b.ke,e=b.Kh;a.Id[0]=c[0];a.Id[1]=c[1];a.Id[2]=c[2];a.Id[3]=b.og*Math.max(e[0],Math.max(e[1],e[2]));b=a.Ek;Bi(d,b);var d=e[0],f=e[1],e=e[2],h=b[1],j=b[2],k=b[3],m=b[4],p=b[5],r=b[6],v=b[7],s=b[8],y=b[9],w=b[10],E=b[11],I=b[12],O=b[13],aa=b[14],wa=b[15];b[0]*=d;b[1]=h*d;b[2]=j*d;b[3]=k*d;b[4]=m*f;b[5]=p*f;b[6]=r*f;b[7]=v*f;b[8]=s*e;b[9]=y*e;b[10]=w*e;b[11]=E*e;b[12]=I;b[13]=O;b[14]=aa;b[15]=wa;d=c[0];f=c[1];c=c[2];e=b[1];h=b[2];j=b[3];k=b[4];m=b[5];
p=b[6];r=b[7];v=b[8];s=b[9];y=b[10];w=b[11];E=b[12];I=b[13];O=b[14];aa=b[15];b[0]+=d*j;b[1]=e+f*j;b[2]=h+c*j;b[3]=j;b[4]=k+d*r;b[5]=m+f*r;b[6]=p+c*r;b[7]=r;b[8]=v+d*w;b[9]=s+f*w;b[10]=y+c*w;b[11]=w;b[12]=E+d*aa;b[13]=I+f*aa;b[14]=O+c*aa;b[15]=aa;a.getParent()}}
Di.prototype.Be=function(a){var b=T(this),c=a.pi,d=b.Ub;Bi(b.ke,c);if(c==c){var b=c[1],e=c[2],f=c[3],h=c[6],j=c[7],k=c[11];c[1]=c[4];c[2]=c[8];c[3]=c[12];c[4]=b;c[6]=c[9];c[7]=c[13];c[8]=e;c[9]=h;c[11]=c[14];c[12]=f;c[13]=j;c[14]=k}else c[0]=c[0],c[1]=c[4],c[2]=c[8],c[3]=c[12],c[4]=c[1],c[5]=c[5],c[6]=c[9],c[7]=c[13],c[8]=c[2],c[9]=c[6],c[10]=c[10],c[11]=c[14],c[12]=c[3],c[13]=c[7],c[14]=c[11],c[15]=c[15];b=-d[0];e=-d[1];d=-d[2];f=c[1]*b+c[5]*e+c[9]*d+c[13];h=c[2]*b+c[6]*e+c[10]*d+c[14];j=c[3]*b+
c[7]*e+c[11]*d+c[15];c[12]=c[0]*b+c[4]*e+c[8]*d+c[12];c[13]=f;c[14]=h;c[15]=j;Fi(a)};function Gi(a,b,c,d){Di.call(this,a,b,c,d);this.Db=l;this.Ch=n}C(Gi,Di);t=Gi.prototype;t.b=function(){K(this.Db);this.Db=l;Gi.a.b.call(this)};t.cp=function(){var a=T(this).Ye();if(this.Ch){this.Db&&(K(this.Db),this.Db=l);if(a){a:{var b=this.Da.Fh.vj.Yl,c=b.sf[a];if(!c){c=b.Zl[a];c=!c?l:c.tn(b.Xa,b.Z);if(!c){a=l;break a}b.sf[a]=c}a=c.Ie()}this.Db=a}this.Ch=n}};t.Ye=function(){return T(this).Ye()};
t.gd=function(){Gi.a.gd.call(this);var a=T(this).Ye(),a=a.length?a:l;if(a!=(this.Db?this.Db.Yj.id:l)&&!this.Ch)this.Ch=i,Th(this.Da.Lh,Zh,0,this.cp,this)};t.B=function(a,b,c,d){if(this.Db){b=this.Db;a=Te();d.R.push({zo:b,transform:a});this.Hb&&Ei(this);d=this.Ek;a[0]=d[0];a[1]=d[1];a[2]=d[2];a[3]=d[3];a[4]=d[4];a[5]=d[5];a[6]=d[6];a[7]=d[7];a[8]=d[8];a[9]=d[9];a[10]=d[10];a[11]=d[11];a[12]=d[12];a[13]=d[13];a[14]=d[14];a[15]=d[15];for(d=this.getParent();d!=l;)d instanceof Di&&Xe(d.Ek,a,a),d=d.getParent()}};function Hi(a,b,c,d){Gi.call(this,a,b,c,d)}C(Hi,Gi);R();R();function Ii(){this.height=this.width=1;this.Jb=g;this.Oo=0.1;this.Pg=100;this.zf=i;this.wf=Te();this.mk=Te();this.pi=Te();this.Ml=Te();this.Kc=Te();this.Yd=Te();this.position=R();this.direction=R();this.tj=[Q(),Q(),Q(),Q(),Q(),Q()]}function Ji(a,b){var c,d;b instanceof Ed?(c=b.width,d=b.height):(c=b,d=g);if(a.width!=c||a.height!=d)a.width=c,a.height=d,a.zf=i}function Ki(a,b){a.Pg!=b&&(a.Pg=b,a.zf=i)}
function Fi(a){if(a.zf){a.zf=n;var b=2/a.width,c=2/-a.height;Ue(a.wf,b,c,1,0,-1,1,0,1);var b=a.Jb===g?a.width/a.height:a.Jb,c=a.Oo,d=a.Pg,e=Math.PI/4/2,f=d-c,h=Math.sin(e);0==f||(0==h||0==b)||(e=Math.cos(e)/h,Ue(a.mk,e/b,e,-(d+c)/f,-1,0,0,-(2*c*d)/f,0));Xe(a.mk,a.pi,a.Kc);Ye(a.Kc,a.Yd)}Xe(a.mk,a.pi,a.Kc);Ye(a.pi,a.Ml);Ye(a.Kc,a.Yd);c=a.Kc;b=a.tj;he(b[0],c[3]+c[0],c[7]+c[4],c[11]+c[8],c[15]+c[12]);he(b[1],c[3]-c[0],c[7]-c[4],c[11]-c[8],c[15]-c[12]);he(b[2],c[3]-c[1],c[7]-c[5],c[11]-c[9],c[15]-c[13]);
he(b[3],c[3]+c[1],c[7]+c[5],c[11]+c[9],c[15]+c[13]);he(b[4],c[3]+c[2],c[7]+c[6],c[11]+c[10],c[15]+c[14]);he(b[5],c[3]-c[2],c[7]-c[6],c[11]-c[10],c[15]-c[14]);for(c=0;c<b.length;c++)d=b[c],f=1/Math.sqrt(d[0]*d[0]+d[1]*d[1]+d[2]*d[2]),d[0]*=f,d[1]*=f,d[2]*=f,d[3]*=f;S(a.position,0,0,0);Ze(a.Ml,a.position,a.position);b=2*(0.5/a.width)-1;c=1-2*(0.5/a.height);d=Li[0];f=Li[1];S(d,b,c,-1);S(f,b,c,1);af(a.Yd,d,d);af(a.Yd,f,f);Qe(d,f,a.direction);a=b=a.direction;a[0]=-b[0];a[1]=-b[1];a[2]=-b[2]}
var Li=[R(),R(),R(),R(),R(),R(),R(),R()];function Mi(a,b){G.call(this);this.map=a;this.Y=Math.min(Math.max(Math.floor(b),1),16);this.lb=2*this.Y+1;this.wb=Array(1*this.lb*this.lb);this.ic=R();this.X=new Int32Array(3);this.hc=rg(this.ic[0]-16*this.Y,0,this.ic[2]-16*this.Y,this.ic[0]+16*this.Y,128,this.ic[2]+16*this.Y);this.ra=[];this.vo=n}C(Mi,G);t=Mi.prototype;t.b=function(){ic(this.ra);Mi.a.b.call(this)};
t.update=function(a){Le(this.ic,a);var b=a[0]>>4,c=a[2]>>4;a=b-this.X[0];var d=c-this.X[2];if(a||d){var b=b<<4,c=c<<4,e=this.hc,f=b+16*this.Y,h=c+16*this.Y;S(e.min,b-16*this.Y,0,c-16*this.Y);S(e.max,f,0,h);this.hc.max[0]+=16;this.hc.max[1]+=128;this.hc.max[2]+=16;this.X[0]+=a;this.X[1]+=0;this.X[2]+=d;Ni(this)}};
function Ni(a){a.X[0]=a.ic[0]>>4;a.X[1]=0;a.X[2]=a.ic[2]>>4;for(var b=a.X[0]-a.Y,c=a.X[2]-a.Y,d=a.lb,e=a.lb,f=b;f<b+d;f++)for(var h=c;h<c+e;h++){var j=a,k=Oi(j,f,h);if(!(0>k||k>j.wb.length)){var m=j.map.za(f<<4,0,h<<4);if(m!=j.wb[k]){var p=j.wb[k];if(p){for(var r=0;r<j.ra.length;r++){var v=j.ra[r],s=p,y=Pg(s,n);if(y){for(var w=0;w<y.Cc.length;w++){var E=y.Cc[w];E&&(E.Fb&&v.Mb.cancel(E),v.Bc.remove(E),K(E))}s.qk=l}}p.ge--;p.ge||p.map.Uj(p)}m.ge||m.map.Vj(m);m.ge++;j.wb[k]=m;for(r=0;r<j.ra.length;r++)Qg(j.ra[r],
m)}}}}function Oi(a,b,c){b%=a.lb;c%=a.lb;0>b&&(b=a.lb+b);0>c&&(c=a.lb+c);return b+c*a.lb}t.ck=function(a){for(var b=0;b<this.ra.length;b++)Qg(this.ra[b],a),Rg(this.ra[b],a.x,a.y,a.K,a.x+16-1,a.y+128-1,a.K+16-1,3)};t.za=function(a,b,c){if(0>b||128<=b)return l;a>>=4;c>>=4;var d=Math.abs(c-this.X[2]);if(Math.abs(a-this.X[0])>this.Y||0!=b>>7||d>this.Y)return l;b=Oi(this,a,c);return 0>b||b>this.wb.length?l:this.wb[b]};t.qj=function(a,b,c){Pi(this,a,this.X[0]-this.Y,this.X[2]-this.Y,this.lb,b,c)};
function Pi(a,b,c,d,e,f,h){var j=Qi,k=16*(c+e),m=16*(d+e);S(j.min,16*c,0,16*d);S(j.max,k,128,m);a:{k=j.min;m=j.max;Le(Li[0],k);S(Li[1],k[0],k[1],m[2]);S(Li[2],k[0],m[1],k[2]);S(Li[3],k[0],m[1],m[2]);S(Li[4],m[0],k[1],k[2]);S(Li[5],m[0],k[1],m[2]);S(Li[6],m[0],m[1],k[2]);Le(Li[7],m);for(var k=0,m=b.tj,p=0;p<m.length;p++){for(var r=m[p],v=8,s=1,y=0;8>y;y++){var w=Li[y];0>r[0]*w[0]+r[1]*w[1]+r[2]*w[2]+r[3]&&(s=0,v--)}if(!v){k=-1;break a}k+=s}k=6==k?1:0}if(1==k){b=j.min[0]>>4;c=j.max[0]>>4;d=j.max[2]>>
4;for(j=j.min[2]>>4;j<d;j++)for(e=b;e<c;e++)(k=a.za(e<<4,0,j<<4))&&f.call(h,k)}else if(0==k)if(1>=e)(a=a.za(c<<4,0,d<<4))&&f.call(h,a);else{j=e/2|0;for(e=0;1>=e;e++)for(k=0;1>=k;k++)Pi(a,b,c+k*j,d+e*j,j,f,h)}}
t.Ij=function(a,b){var c=l,d=Math.floor(a[0]),e=Math.floor(a[1]),f=Math.floor(a[2]),h=0==a[3]?0:0>a[3]?-1:1,j=0==a[4]?0:0>a[4]?-1:1,k=0==a[5]?0:0>a[5]?-1:1,m=(d+(0<h?1:0)-a[0])/a[3],p=(e+(0<j?1:0)-a[1])/a[4],r=(f+(0<k?1:0)-a[2])/a[5];isNaN(m)&&(m=Number.POSITIVE_INFINITY);isNaN(p)&&(p=Number.POSITIVE_INFINITY);isNaN(r)&&(r=Number.POSITIVE_INFINITY);var v=h/a[3],s=j/a[4],y=k/a[5];isNaN(v)&&(v=Number.POSITIVE_INFINITY);isNaN(s)&&(s=Number.POSITIVE_INFINITY);isNaN(y)&&(y=Number.POSITIVE_INFINITY);for(var w=
Math.min(b,16*this.lb),E=0;E<w;E++){var I=this.za(d,e,f);if(I&&(c=I.Ij(a)))break;m<p&&m<r?(m+=v,d+=h):p<r?(p+=s,e+=j):(r+=y,f+=k)}return c&&c.cj>b?l:c};t.sc=function(a,b,c){var d=this.za(a,b,c);return d?d.sc(a,b,c):0};t.Yb=function(a,b,c,d){var e=this.za(a,b,c);if(!e||!e.Yb(a,b,c,d))return n;for(d=0;d<this.ra.length;d++)Rg(this.ra[d],a,b,c,a,b,c,0);return i};R();R();var Qi=new qg;function Ri(a){Ih.call(this,a);this.Zf=0}C(Ri,Ih);Ri.prototype.read=function(a){Ri.a.read.call(this,a);this.Zf=a.rm()};Ri.prototype.write=function(a){Ri.a.write.call(this,a);a.Rm(this.Zf)};function Si(a,b,c,d){Di.call(this,a,b,c,d);this.Jb=g;this.ub=this.r=l}C(Si,Di);Si.prototype.b=function(){this.r&&this.ub&&(D(this.r.Cd,this.ub),K(this.ub));Si.a.b.call(this)};Si.prototype.xk=function(a){this.r=a;this.ub=new Mi(a,16);a.Cd.push(this.ub);a=this.ub;var b=R();Le(a.ic,b);Ni(a);a.vo=i;Sh(this,1,0)};Si.prototype.update=function(){var a=Ti,b=this.getParent();b instanceof Di?(b.Hb&&Ei(b),ie(a,b.Id)):(this.Hb&&Ei(this),ie(a,this.Id));this.ub.update(a);Sh(this,1,0)};
Si.prototype.Be=function(a){if(this.Jb){var b=this.Jb;a.Jb!==b&&(a.Jb=b,a.zf=i)}b=this.getParent();b instanceof Di?b.Be(a):Si.a.Be.call(this,a)};var Ti=Q();function Ui(a,b,c,d){Lh.call(this,a,b,c,d)}C(Ui,Lh);Ui.prototype.Bj=function(){return this.getParent()};Ui.prototype.ug=function(a){Ui.a.ug.call(this,a)};Ui.prototype.Jd=function(a){Ui.a.Jd.call(this,a)};Ui.prototype.eb=function(a){Ui.a.eb.call(this,a)};function Vi(a){Jh.call(this,a);this.Wb=this.sa=this.Va=this.Nh=this.Mh=this.vb=this.hi=0}C(Vi,Jh);var Wi=360*(1/32767)*Math.PI/180;Vi.prototype.read=function(a){Vi.a.read.call(this,a);this.hi=Ch(a);this.vb=Ch(a);this.vb&1&&(this.Mh=Dh(a),this.Nh=Dh(a));this.Va=Ah(a);this.sa=Ah(a)};Vi.prototype.write=function(a){Vi.a.write.call(this,a);fg(a,this.hi);fg(a,this.vb);this.vb&1&&(gg(a,this.Mh),gg(a,this.Nh));eg(a,this.Va);eg(a,this.sa)};function Xi(){this.sj=i}
Xi.prototype.eb=function(a,b){var c=a.fi,d=a.Va*Wi,e=a.sa*Wi,f=a.Wb*Wi,h=Yi,j=Math.sin(d/2),d=Math.cos(d/2),k=Math.sin(e/2),e=Math.cos(e/2),m=Math.sin(f/2),f=Math.cos(f/2);h[0]=d*k*f+j*e*m;h[1]=j*e*f-d*k*m;h[2]=d*e*m-j*k*f;h[3]=d*e*f+j*k*m;b.xm(Yi);if(this.sj){h=b.Ub;j=Zi[4];k=b.ke;d=b.oi;f=Zi[5];e=Oe(d);1E-4<e?(m=Math.max(0,e-40*c),Ne(d,m/e,f)):S(f,0,0,0);d=a.hi;e=Zi[0];e[0]=0;e[0]+=18*!!(d&1);e[0]-=18*!!(d&2);e[1]=0;e[1]+=18*!!(d&4);e[1]-=18*!!(d&8);e[2]=0;e[2]+=18*!!(d&16);e[2]-=18*!!(d&32);var d=
Zi[1],m=k[0]*(k[0]+k[0]),p=k[3]*(k[0]+k[0]),r=k[0]*(k[1]+k[1]),v=k[1]*(k[1]+k[1]),s=k[3]*(k[1]+k[1]),y=k[0]*(k[2]+k[2]),w=k[1]*(k[2]+k[2]),E=k[2]*(k[2]+k[2]),k=k[3]*(k[2]+k[2]),I=e[0],O=e[1],e=e[2];d[0]=I*(1-v-E)+O*(r-k)+e*(y+s);d[1]=I*(r+k)+O*(1-m-E)+e*(w-p);d[2]=I*(y-s)+O*(w+p)+e*(1-m-v);k=Zi[2];(e=Oe(d))?Ne(d,1/e,k):S(k,0,0,0);e=Oe(d);18<e&&(Ne(d,18/e,d),e=18);d=e-(f[0]*k[0]+f[1]*k[1]+f[2]*k[2]);0<d&&(e=20*e*c,e>d&&(e=d),Ne(k,e,k),Me(k,f,f));d=Zi[3];Ne(f,c,d);Me(h,d,j);b.setPosition(j);b.setVelocity(f)}};
var Zi=[R(),R(),R(),R(),R(),R()];Q();Q();Q();Se();new Float32Array(6);var Yi=Q();function $i(a,b,c,d){Lh.call(this,a,b,c,d)}C($i,Lh);$i.prototype.Bj=function(){return this.getParent()};function aj(a,b,c,d){Gi.call(this,a,b,c,d)}C(aj,Gi);aj.prototype.fk=function(a,b){aj.a.fk.call(this,a,b)};aj.prototype.hk=z;function bj(a,b,c,d){Lh.call(this,a,b,c,d);this.Np=new Ii;this.Lo=new Xi}C(bj,$i);
bj.prototype.eb=function(a){bj.a.eb.call(this,a);var b=this.Bj();if(b&&a instanceof Vi){this.Lo.eb(a,T(b));var c,d=T(this);d.th===g&&(d.th=d.Af?d.aa.zb().G[d.Af]||l:l);c=d.th;var d=cj(T(c)),e=d.ub,f=this.Np;Ki(f,16*d.ub.Y+16);d.Be(f);if(a.vb&&(d=T(b),d.Xg===g&&(d.Xg=d.ef?d.aa.zb().G[d.ef]||l:l),d=d.Xg)){var h=dj;h.time=a.getTime();h.viewport=f;h.nl=e;h.jk=c;h.Vm=b;h.screenX=0.5;h.screenY=0.5;a.vb&1&&(h.screenX=a.Mh/65535,h.screenY=a.Nh/65535);var b=h.nk,j=2*(h.screenX/f.width)-1,k=1-2*(h.screenY/
f.height);c=Li[0];e=Li[1];S(c,j,k,-1);S(e,j,k,1);af(f.Yd,c,c);af(f.Yd,e,e);Qe(c,e,e);var f=c[1],j=c[2],k=e[0],m=e[1],e=e[2];b[0]=c[0];b[1]=f;b[2]=j;b[3]=k;b[4]=m;b[5]=e;a.Wg||(a=a.vb,a&4&&d.hk(h,0),a&32&&d.hk(h,1))}}};var dj=new function(){this.time=0;this.Vm=this.jk=this.nl=this.viewport=l;this.screenY=this.screenX=0;this.nk=new Float32Array(6)};function ej(a,b,c,d){Gi.call(this,a,b,c,d)}C(ej,aj);ej.prototype.Tg=function(){var a=T(this).Tg();return Ai(this).r.Kb.R[a]};ej.prototype.uk=function(a){T(this).uk(a.id)};
ej.prototype.hk=function(a,b){var c=a.nl.Ij(a.nk,100);if(c&&100>=c.cj)if(0==b){var d=c.al,e=c.bl,f=c.cl,h=0,j=0,k=0,c=c.pm;c[0]==d?h--:c[0]==d+1&&h++;c[1]==e?j--:c[1]==e+1&&j++;c[2]==f?k--:c[2]==f+1&&k++;c=d+h;e+=j;f+=k;j=this.Tg();k=a.jk;j=j?j.id<<8:0;Ai(this).Yb(c,e,f,j,k)}else 1==b&&(f=c.al,k=c.bl,c=c.cl,e=a.jk,Ai(this).Yb(f,k,c,0,e))};function fj(a,b,c,d){Gi.call(this,a,b,c,d)}C(fj,aj);function gj(a,b,c,d){Lh.call(this,a,b,c,d)}C(gj,Lh);gj.prototype.Zc=function(){var a=T(this);a.li===g&&(a.li=a.te?a.aa.zb().Zc(a.te):l);return a.li};function hj(a){a=T(a);a.dh===g&&(a.dh=a.kf?a.aa.zb().G[a.kf]||l:l);return a.dh}gj.prototype.zj=function(){var a=T(this);a.Wf===g&&(a.Wf=a.ve?a.aa.zb().G[a.ve]||l:l);return[a.Wf,ij(T(this)),cj(T(this)),hj(this)]};gj.prototype.gd=function(){gj.a.gd.call(this);this.la&1&&(this.Hq=this.zb().Zc(T(this).te))};function jj(a,b,c,d){Lh.call(this,a,b,c,d);this.ce=this.vj=l}C(jj,Lh);function kj(a){Ih.call(this,a);this.data=this.K=this.y=this.x=0}C(kj,Ih);kj.prototype.read=function(a){kj.a.read.call(this,a);this.x=a.Bh();this.y=a.Bh();this.K=a.Bh();this.data=Dh(a)};kj.prototype.write=function(a){kj.a.write.call(this,a);a.wi(this.x);a.wi(this.y);a.wi(this.K);gg(a,this.data)};function lj(a,b,c){var d=a>>24&255,e=a>>16&255,f=a>>8&255;a&=255;return(d+c*((b>>24&255)-d)&255)<<24|(e+c*((b>>16&255)-e)&255)<<16|(f+c*((b>>8&255)-f)&255)<<8|a+c*((b&255)-a)&255};function U(a,b){this.cc=a;this.vf=0;this.p=b}U.prototype.Al=function(a){var b=V(a,this.l);return"target."+V(a,this.m)+"(source."+b+"());"};U.prototype.Ud=function(a){var b=V(a,this.l);return"result."+V(a,this.m)+"(target."+b+"());"};var W=0;function mj(a,b){return(b.p&nj)-(a.p&nj)||a.vf-b.vf}function V(a,b){for(var c in a)if(a[c]===b)return c;return l}var nj=1;function oj(a,b,c,d){U.call(this,a,b);this.l=c;this.m=d}C(oj,U);t=oj.prototype;t.q=function(){return new oj(this.cc,this.p,this.l,this.m)};
t.Qb=function(a){a=V(a,this.m);var b=Fh(),b=V(b,b.Bh);return"target."+a+"(reader."+b+"());"};t.Rb=function(a){a=V(a,this.l);var b=ig();return"writer."+V(b,b.wi)+"(target."+a+"() | 0);"};t.Al=function(a){var b=V(a,this.l);return"target."+V(a,this.m)+"(source."+b+"() | 0);"};t.Ud=function(a){var b=V(a,this.l);a=V(a,this.m);return"var _s = source."+b+"();var _t = target."+b+"();target."+a+"((_s + t * (_t - _s)) | 0);"};function pj(a,b,c,d){U.call(this,a,b);this.l=c;this.m=d}C(pj,U);
pj.prototype.q=function(){return new pj(this.cc,this.p,this.l,this.m)};pj.prototype.Qb=function(a){a=V(a,this.m);var b=Fh(),b=V(b,b.rm);return"target."+a+"(reader."+b+"());"};pj.prototype.Rb=function(a){a=V(a,this.l);var b=ig();return"writer."+V(b,b.Rm)+"(target."+a+"());"};pj.prototype.Ud=function(a){var b=V(a,this.l);a=V(a,this.m);return"var _s = source."+b+"();var _t = target."+b+"();result."+a+"((_s + t * (_t - _s)));"};function qj(a,b,c,d){U.call(this,a,b);this.l=c;this.m=d}C(qj,U);
qj.prototype.q=function(){return new qj(this.cc,this.p,this.l,this.m)};qj.prototype.Qb=function(a){a=V(a,this.m);var b=Fh(),b=V(b,b.ap);return"target."+a+"(reader."+b+"());"};qj.prototype.Rb=function(a){a=V(a,this.l);var b=ig();return"writer."+V(b,b.Wp)+"(target."+a+"());"};
qj.prototype.Ud=function(a){var b=V(a,this.l),c=V(a,this.m);a=V(a,rj);return"var _sv3 = source."+b+"();var _tv3 = target."+b+"();var _rv3 = source."+a+";_rv3[0] = (_tv3[0] - _sv3[0]) * t + _sv3[0];_rv3[1] = (_tv3[1] - _sv3[1]) * t + _sv3[1];_rv3[2] = (_tv3[2] - _sv3[2]) * t + _sv3[2];result."+c+"(_rv3);"};function sj(a,b,c,d,e){U.call(this,a,b);this.l=c;this.m=d;this.Po=e}C(sj,U);sj.prototype.q=function(){return new sj(this.cc,this.p,this.l,this.m,this.Po)};
sj.prototype.Qb=function(a){a=V(a,this.m);var b=Fh(),b=V(b,b.bp);return"target."+a+"(reader."+b+"());"};sj.prototype.Rb=function(a){a=V(a,this.l);var b=ig();return"writer."+V(b,b.Xp)+"(target."+a+"());"};sj.prototype.Ud=function(a){var b=V(a,this.l),c=V(a,this.m),d=V(a,tj);a=V(a,Ci);return"var _rq = source."+d+";source."+a+"(source."+b+"(), target."+b+"(), t, _rq);result."+c+"(_rq);"};function uj(a,b,c,d){U.call(this,a,b);this.l=c;this.m=d}C(uj,U);
uj.prototype.q=function(){return new uj(this.cc,this.p,this.l,this.m)};uj.prototype.Qb=function(a){a=V(a,this.m);var b=Fh(),b=V(b,b.ba);return"target."+a+"(reader."+b+"());"};uj.prototype.Rb=function(a){a=V(a,this.l);var b=ig();return"writer."+V(b,b.ec)+"(target."+a+"());"};uj.prototype.Ud=function(a){var b=V(a,this.l),c=V(a,this.m);a=V(a,lj);return"result."+c+"(source."+a+"(source."+b+"(), target."+b+"(), t));"};function vj(a,b,c,d){U.call(this,a,b);this.l=c;this.m=d}C(vj,U);
vj.prototype.q=function(){return new vj(this.cc,this.p,this.l,this.m)};vj.prototype.Qb=function(a){a=V(a,this.m);var b=Fh(),b=V(b,b.s);return"target."+a+"(reader."+b+"());"};vj.prototype.Rb=function(a){a=V(a,this.l);var b=ig();return"writer."+V(b,b.$)+"(target."+a+"());"};function wj(a,b,c,d){U.call(this,a,b);this.l=c;this.m=d}C(wj,U);wj.prototype.q=function(){return new wj(this.cc,this.p,this.l,this.m)};
wj.prototype.Qb=function(a){a=V(a,this.m);var b=Fh(),b=V(b,b.s);return"target."+a+"(reader."+b+"());"};wj.prototype.Rb=function(a){a=V(a,this.l);var b=ig();return"writer."+V(b,b.$)+"(target."+a+"());"};function xj(a,b,c,d){U.call(this,a,b);this.l=c;this.m=d}C(xj,U);xj.prototype.q=function(){return new xj(this.cc,this.p,this.l,this.m)};xj.prototype.Qb=function(a){a=V(a,this.m);var b=Fh(),b=V(b,b.F);return"target."+a+"(reader."+b+"());"};
xj.prototype.Rb=function(a){a=V(a,this.l);var b=ig();return"writer."+V(b,b.fc)+"(target."+a+"());"};var rj=R(),tj=Q();function yj(a,b){for(var c=0;c<a.length;c++)a[c].vf=c;a.sort(mj);this.hm={};this.sm=Array(a.length);this.Vp=Array(a.length);var d="",e="",f="",h="",j="",k="",m="",p="";this.Lm=Array(a.length);for(c=0;c<a.length;c++){var r=a[c].q();this.Lm[c]=r;this.hm[r.cc]=r;r.vf=c;this.sm[c]=new Function("target","reader",r.Qb(b));this.Vp[c]=new Function("target","writer",r.Rb(b));var d=d+r.Qb(b),e=e+r.Rb(b),v=r.Al(b),f=f+v;r.p&6||(h+=v);r.p&2&&(k+=v);if(r.p&4){var s=r.Ud(b),m=m+s,j=j+v;r.p&2||(p+=s)}}this.$o=new Function("target",
"reader",d);this.Tp=new Function("target","writer",e);this.gq=new Function("source","target",f);this.yg=new Function("source","target",h);this.Si=new Function("source","target",j);this.Ti=new Function("source","target",k);this.Bo=new Function("source","target","t","result",m);this.Ao=new Function("source","target","t","result",p)}yj.prototype.ib=function(){return this.Lm.length};function X(a,b){return a.hm[b].vf}function zj(a,b,c,d,e){for(a=a.sm;c;){if(c&1&&a[b])a[b](d,e);c>>=1;b++}};function Y(a,b){this.aa=a;this.time=0;this.Ua=b;this.Me=this.Le=0}t=Y.prototype;t.reset=function(a){this.aa=a;this.Me=this.Le=this.time=0};function Aj(a,b){if(!a.Ua){var c=[];a(c);a.Ua=new yj(c,b)}return a.Ua}function Z(a,b){var c=a.Le||a.Me;31>=b?a.Le|=1<<b:a.Me|=1<<b-32;c||a.aa.Jj()}t.je=function(){this.Le=this.Me=0};t.read=function(a){this.Ua.$o(this,a)};t.ok=function(a){var b=a.F();zj(this.Ua,0,b,this,a);31<this.Ua.ib()&&(b=a.F(),zj(this.Ua,32,b,this,a))};t.write=function(a){this.Ua.Tp(this,a)};
t.yg=function(a){this.Ua.yg(this,a)};t.Ti=function(a){this.Ua.Ti(this,a)};t.Si=function(a){this.Ua.Si(this,a)};t.ah=function(a,b,c){var d=this.Ua;this.aa.Od&Oh?d.Ao(a,b,c,this):d.Bo(a,b,c,this)};t.Dm=rj;t.Dk=tj;t.Zo=Ci;t.mn=lj;Y.prototype.Dm[0]=Y.prototype.Dm[1];Y.prototype.Zo(Y.prototype.Dk,Y.prototype.Dk,0,Y.prototype.Dk);Y.prototype.mn(0,0,0);function Bj(a,b){var c=b||Aj(Cj,this);Y.call(this,a,c);this.Ub=R();this.Vo=X(c,Dj);this.ke=Q();this.gp=X(c,Ej);this.Kh=R();this.jp=X(c,Fj);this.og=0;this.en=X(c,Gj);this.oi=R();this.Mp=X(c,Hj)}C(Bj,Y);var Dj=W++,Ej=W++,Fj=W++,Gj=W++,Hj=W++;t=Bj.prototype;t.On=q("Ub");t.setPosition=function(a){Re(this.Ub,a)||(Le(this.Ub,a),Z(this,this.Vo),this.aa.Hb=i)};t.Pn=q("ke");t.xm=function(a){ke(this.ke,a)||(ie(this.ke,a),Z(this,this.gp),this.aa.Hb=i)};t.Qn=q("Kh");
t.ym=function(a){Re(this.Kh,a)||(Le(this.Kh,a),Z(this,this.jp),this.aa.Hb=i)};t.Gn=q("og");t.op=function(a){this.og!=a&&(this.og=a,Z(this,this.en),this.aa.Hb=i)};t.Tn=q("oi");t.setVelocity=function(a){Re(this.oi,a)||(Le(this.oi,a),Z(this,this.Mp))};
function Cj(a){a.push(new qj(Dj,nj|6,Bj.prototype.On,Bj.prototype.setPosition));a.push(new sj(Ej,nj|6,Bj.prototype.Pn,Bj.prototype.xm,i));a.push(new qj(Fj,nj|6,Bj.prototype.Qn,Bj.prototype.ym));a.push(new pj(Gj,nj|4,Bj.prototype.Gn,Bj.prototype.op));a.push(new qj(Hj,nj|2,Bj.prototype.Tn,Bj.prototype.setVelocity))};function Ij(a,b){var c=b||Aj(Jj,this);Bj.call(this,a,c);this.$j="";this.Jo=X(c,Kj);this.Zj=0;this.Io=X(c,Lj);this.Hi=0;this.Zm=X(c,Mj)}C(Ij,Bj);var Kj=W++,Lj=W++,Mj=W++;t=Ij.prototype;t.Ye=q("$j");t.up=function(a){this.$j!=a&&(this.$j=a,Z(this,this.Jo))};t.Mn=q("Zj");t.tp=function(a){this.Zj!=a&&(this.Zj=a,Z(this,this.Io))};t.Fn=q("Hi");t.np=function(a){this.Hi!=a&&(this.Hi=a,Z(this,this.Zm))};
function Jj(a){Cj(a);a.push(new vj(Kj,0,Ij.prototype.Ye,Ij.prototype.up));a.push(new uj(Lj,nj|4,Ij.prototype.Mn,Ij.prototype.tp));a.push(new oj(Mj,0,Ij.prototype.Fn,Ij.prototype.np))};function Nj(a,b){var c=b||Aj(Oj,this);Ij.call(this,a,c);this.ef=0;this.Xg=g;this.xo=X(c,Pj)}C(Nj,Ij);var Pj=W++;Nj.prototype.Jn=q("ef");Nj.prototype.rp=function(a){this.ef!=a&&(this.ef=a,Z(this,this.xo),this.Xg=g)};function Oj(a){Jj(a);a.push(new xj(Pj,0,Nj.prototype.Jn,Nj.prototype.rp))};function Qj(a,b){var c=b||Aj(Rj,this);Bj.call(this,a,c)}C(Qj,Bj);function Rj(a){Cj(a)};function Sj(a,b){var c=b||Aj(Tj,this);Y.call(this,a,c)}C(Sj,Y);function Tj(){};function Uj(a,b){var c=b||Aj(Vj,this);Y.call(this,a,c);this.te="";this.li=g;this.Kp=X(c,Wj);this.ve=0;this.Wf=g;this.Wm=X(c,Xj);this.He=0;this.xg=g;this.sn=X(c,Yj);this.Ce=0;this.qg=g;this.jn=X(c,Zj);this.kf=0;this.dh=g;this.Co=X(c,$j)}C(Uj,Y);var Wj=W++,Xj=W++,Yj=W++,Zj=W++,$j=W++;t=Uj.prototype;t.Sn=q("te");t.xp=function(a){this.te!=a&&(this.te=a,Z(this,this.Kp),this.li=g)};t.En=q("ve");t.mp=function(a){this.ve!=a&&(this.ve=a,Z(this,this.Wm),this.Wf=g)};t.In=q("He");
function ij(a){a.xg===g&&(a.xg=a.He?a.aa.zb().G[a.He]||l:l);return a.xg}t.qp=function(a){this.He!=a&&(this.He=a,Z(this,this.sn),this.xg=g)};t.Hn=q("Ce");function cj(a){a.qg===g&&(a.qg=a.Ce?a.aa.zb().G[a.Ce]||l:l);return a.qg}t.pp=function(a){this.Ce!=a&&(this.Ce=a,Z(this,this.jn),this.qg=g)};t.Kn=q("kf");t.sp=function(a){this.kf!=a&&(this.kf=a,Z(this,this.Co),this.dh=g)};
function Vj(a){a.push(new wj(Wj,0,Uj.prototype.Sn,Uj.prototype.xp));a.push(new xj(Xj,0,Uj.prototype.En,Uj.prototype.mp));a.push(new xj(Yj,0,Uj.prototype.In,Uj.prototype.qp));a.push(new xj(Zj,0,Uj.prototype.Hn,Uj.prototype.pp));a.push(new xj($j,0,Uj.prototype.Kn,Uj.prototype.sp))};function ak(a,b){var c=b||Aj(bk,this);Y.call(this,a,c);this.Uf=0;this.ti=g;this.Qp=X(c,ck)}C(ak,Y);var ck=W++;ak.prototype.Un=q("Uf");ak.prototype.yp=function(a){this.Uf!=a&&(this.Uf=a,Z(this,this.Qp),this.ti=g)};function bk(a){a.push(new xj(ck,0,ak.prototype.Un,ak.prototype.yp))};function dk(a,b,c,d,e){Lh.call(this,a,b,c,d);this.zk=e}C(dk,Lh);dk.prototype.ug=function(a){a instanceof Di&&this.zk.Dd(a)};dk.prototype.Jd=function(a){a instanceof Di&&this.zk.ld(a)};function ek(a){this.Cq=a||fk;this.Eq=[]}function fk(){this.nk=new Float32Array(6);this.end=this.start=this.uq=0;this.aa=this.Dq=l;this.pm=R();this.cj=0};function gk(){ek.call(this);this.G=[]}C(gk,ek);gk.prototype.Dd=function(a){this.G.push(a)};gk.prototype.ld=function(a){D(this.G,a)};gk.prototype.forEach=function(a,b){for(var c=0;c<this.G.length&&a.call(b||u,this.G[c])!==n;c++);};gk.prototype.qj=function(a,b,c){for(a=0;a<this.G.length&&b.call(c||u,this.G[a],0)!==n;a++);};Q();function hk(a,b,c,d){dk.call(this,a,b,c,d,new gk);this.r=l}C(hk,dk);t=hk.prototype;t.xk=da("r");t.eb=function(a){hk.a.eb.call(this,a);a instanceof kj&&this.Yb(a.x,a.y,a.K,a.data)};t.update=function(a){M("client var = "+T(this).ci);Sh(this,2,a+1)};t.B=function(a,b,c){this.zk.qj(b,function(d,e){d.B(a,b,e,c)})};
t.Yb=function(a,b,c,d){var e=this.r;if(d&&!e.Kb.R[d>>8])M("unknown block type",d);else{var f=e.Yb(a,b,c,d);if(f!=d&&(d=(d?d:f)>>8))if(d=(e=e.Kb.R[d])?e.mh.Um:l)if(e=ik,e[0]=a,e[1]=b,e[2]=c,a=this.Da.Fh.vj,!a.e.Sa.Ta&&(b=a.Wh.blocks)&&100>Math.sqrt(Pe(a.e.va.listener.Ub,e)))(a=Rd(b,d,Ad))&&a.setPosition(e)}};var ik=R();function jk(a,b){var c=b||Aj(kk,this);Y.call(this,a,c)}C(jk,Y);function kk(){};function lk(a,b){var c=b||Aj(mk,this);jk.call(this,a,c);this.ci=0;this.Dp=X(c,nk)}C(lk,jk);var nk=W++;lk.prototype.Rn=q("ci");lk.prototype.wp=function(a){this.ci!=a&&(this.ci=a,Z(this,this.Dp))};function mk(a){a.push(new pj(nk,0,lk.prototype.Rn,lk.prototype.wp))};function ok(a,b,c,d){bj.call(this,a,b,c,d);this.ea=1;this.Ko=i;this.Gd=this.Fd=0;this.Va=1E-4;this.Gg=this.Wb=this.sa=0;this.sj=i}C(ok,bj);var pk=1/140*Math.PI,qk=85*Math.PI/180;
ok.prototype.hd=function(a,b,c){if(!this.Bj())return i;var d=b.H;if(!(0>=a.time)){var e;e=b.T;var f=0;87 in e.h&&(f|=32);83 in e.h&&(f|=16);65 in e.h&&(f|=2);68 in e.h&&(f|=1);81 in e.h&&(f|=4);90 in e.h&&(f|=8);32 in e.h&&(f|=128);e=f;var h=b.T,f=b.H;37 in h.h&&(this.Va+=pk);39 in h.h&&(this.Va-=pk);38 in h.h&&(this.sa+=pk);40 in h.h&&(this.sa-=pk);219 in h.h&&(this.Wb+=pk);221 in h.h&&(this.Wb-=pk);if(f.Q||f.o&1){var j=f.Q?0.2:0.25,h=f.nc*j,f=f.oc*j;this.Ko?(this.Fd=(this.Fd+h)/2,this.Gd=(this.Gd+
f)/2,0.01>Math.abs(this.Fd)&&(this.Fd=0),0.01>Math.abs(this.Gd)&&(this.Gd=0)):(this.Fd=h,this.Gd=f);f=this.Gd*this.ea;this.Va-=this.Fd*this.ea*pk;this.sa-=f*pk}f=b.T;b=b.H;h=0;69 in f.Oa?h|=6:69 in f.h?h|=2:69 in f.ae&&(h|=8);var j=2,k=4,m=8;f.ctrlKey&&(j=16,k=32,m=64);b.Q?(b.Ja&1?(h|=k,h|=j):b.o&1?h|=j:b.ka&1&&(h|=m),b.Ja&4?(h|=32,h|=16):b.o&4?h|=16:b.ka&4&&(h|=64)):(b.ka&1&&(f.ctrlKey?(this.Gg=Number.MAX_VALUE,h|=k,h|=j,h|=m):4>this.Gg&&(h|=k,h|=j,h|=m)),b.ka&4&&(h|=32,h|=16,h|=64),this.Gg=b.o?
this.Gg+(Math.abs(b.nc)+Math.abs(b.oc)):0);f=h;this.sj||(this.sa=Math.max(-qk,Math.min(qk,this.sa)),this.Wb=0);b=this.Ui(65);b.setTime(a.time);b.fi=(1E3*a.ei|0)/1E3;b.hi=e;b.vb=f;a=this.sa;e=this.Wb;b.Va=32767*(180*this.Va/Math.PI%360/360)|0;b.sa=32767*(180*a/Math.PI%360/360)|0;b.Wb=32767*(180*e/Math.PI%360/360)|0;f&&!d.Q&&(a=d.clientX/c.width,c=d.clientY/c.height,b.vb|=1,b.Mh=65535*a|0,b.Nh=65535*c|0);this.Da.fd.Xf(b)}return i};function rk(a,b){var c=b||Aj(sk,this);Y.call(this,a,c)}C(rk,Y);function sk(){};function tk(a,b){var c=b||Aj(uk,this);rk.call(this,a,c);this.Af=0;this.th=g;this.To=X(c,vk)}C(tk,rk);var vk=W++;tk.prototype.Nn=q("Af");tk.prototype.vp=function(a){this.Af!=a&&(this.Af=a,Z(this,this.To),this.th=g)};function uk(a){a.push(new xj(vk,0,tk.prototype.Nn,tk.prototype.vp))};function wk(a,b){var c=b||Aj(xk,this);Ij.call(this,a,c)}C(wk,Ij);function xk(a){Jj(a)};function yk(a,b){var c=b||Aj(zk,this);wk.call(this,a,c);this.Ni=0;this.bn=X(c,Ak)}C(yk,wk);var Ak=W++;yk.prototype.Tg=q("Ni");yk.prototype.uk=function(a){this.Ni!=a&&(this.Ni=a,Z(this,this.bn))};function zk(a){Jj(a);a.push(new oj(Ak,0,yk.prototype.Tg,yk.prototype.uk))};function Bk(a,b){var c=b||Aj(Ck,this);wk.call(this,a,c)}C(Bk,wk);function Ck(a){Jj(a)};function Dk(a,b,c){this.vd=a;this.wn=b;this.Ap=c;this.qd=[]}Dk.prototype.Vi=function(a,b,c){return new this.wn(a,this,b,c)};function Mh(a,b){if(a.qd.length){var c=a.qd.pop();c.reset(b);return c}return new a.Ap(b)};function Ek(a,b){A(b)?Fk(a,g,b):Xa(b,ra(Fk,a))}function Fk(a,b,c){var d;a:if(d=String(c).replace(/\-([a-z])/g,function(a,b){return b.toUpperCase()}),a.style[d]===g){var e=vb?"Webkit":ub?"Moz":F?"ms":tb?"O":l,f=A(g)?"undefined".replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"):"\\s";c=c.replace(RegExp("(^"+(f?"|["+f+"]+":"")+")([a-z])","g"),function(a,b,c){return b+c.toUpperCase()});e+=c;if(a.style[e]!==g){d=e;break a}}d&&(a.style[d]=b)}
function Gk(a){var b=a.offsetWidth,c=a.offsetHeight,d=vb&&!b&&!c;return(!x(b)||d)&&a.getBoundingClientRect?(b=a.getBoundingClientRect(),F&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop),new Ed(b.right-b.left,b.bottom-b.top)):new Ed(b,c)}var Hk=ub?"MozUserSelect":vb?"WebkitUserSelect":l;
function Ik(a){var b=a.getElementsByTagName("*");if(Hk){var c="none";a.style[Hk]=c;if(b){a=0;for(var d;d=b[a];a++)d.style[Hk]=c}}else if(F||tb)if(c="on",a.setAttribute("unselectable",c),b)for(a=0;d=b[a];a++)d.setAttribute("unselectable",c)};function Jk(a,b){G.call(this);this.De=b;this.v=a.v;this.Z=a.Z;this.I=a.I;this.Ck=new Nf(this.I.g,this.I.$h);H(this,this.Ck);this.Ck.restore();this.hasFocus=n;this.Ma=[];var c=a.d,d=c.createElement("DIV");Ek(d,{position:"absolute",left:"10px",bottom:"10px",width:"50%",display:"none"});c=c.createElement("INPUT");c.type="text";Ek(c,{"font-family":"monospace-8bit","font-size":"1em",border:"1px solid black","background-color":"#EEE",color:"#000",width:"100%",padding:"3px"});d.appendChild(c);a.z.Ba.parentNode.appendChild(d);
this.Kl=d;this.di=c;this.P=new Hc(this);H(this,this.P);this.P.listen(c,"keydown",this.Cj)}C(Jk,G);t=Jk.prototype;t.Cj=function(a){switch(a.keyCode){case 27:Kk(this);a.preventDefault();a.stopPropagation();break;case 13:var b=va(ua(xa(this.di.value)));b.length&&this.De.postMessage("main",b);Kk(this);a.preventDefault();a.stopPropagation()}};function Kk(a){a.di.value="";a.di.blur();Ek(a.Kl,{display:"none"});a.v.ca(i);a.v.Aa.focus()}
t.hd=function(a,b){return 84 in b.T.Oa?(Ek(this.Kl,{display:""}),this.v.ca(n),u.setTimeout(B(function(){this.di.focus()},this),10),this.v.T&&this.v.T.reset(),i):n};t.update=function(){var a=this.De.Eb();if(a)for(var b=0;b<a.length;b++){var c=a[b];switch(c.type){case 2:this.log(c.userName+": "+c.value)}}};
t.B=function(a,b,c){var d=this.I.font;if(!(2>=arguments.length)||this.Ma.length){var e=this.Ck;e.clear();for(var f=dc(),h=0;h<this.Ma.length;h++){var j=this.Ma[h];0==j.timestamp?j.timestamp=f:15E3<f-j.timestamp&&(this.Ma.splice(h,1),h--)}f=0;for(h=2;h<arguments.length;h++)arguments[h]&&(j=ve(d,e,arguments[h],4294967295,f),f+=j[1]+2);for(var k=this.Ma.length,h=0;h<k;h++)j=this.Ma[h],j=ve(d,e,j.value,j.color,f),f+=j[1]+2;h=Lk;Ue(h,2,2,1,0,10,40,0,1);bg(this.I,d.Gi);h[12]+=2;h[13]+=2;e.mc(b.wf,h,Mk);
h[12]-=2;h[13]-=2;e.mc(b.wf,h)}};t.log=function(a){var b=new Date,c=String(b.getHours());2>c.length&&(c="0"+c);var d=String(b.getMinutes());2>d.length&&(d="0"+d);b=String(b.getSeconds());2>b.length&&(b="0"+b);c="["+[c,d,b].join(":")+"] ";for(d=0;d<arguments.length;d++)c+=arguments[d],d<arguments.length-1&&(c+=" ");this.add(c);M(c)};t.add=function(a,b){this.Ma.push(new Nk(a,b||4294967295))};var Lk=Se(),Mk=ge(0.5,0.5,0.5,1);function Nk(a,b){this.timestamp=0;this.value=a;this.color=b};function Ok(a,b){G.call(this);this.J=l;this.wo=a;this.p=b;this.Bn=this.Wa=i}C(Ok,G);t=Ok.prototype;t.b=function(){this.Pb();Ok.a.b.call(this)};t.Nl=q("Wa");t.setActive=da("Wa");t.close=function(){Pk(this.J)};t.ma=z;t.Pb=z;t.update=z;t.B=z;var Qk={},Rk={},Sk={};function Tk(a,b,c){c=c||Bd||(Bd=new Kd);a=a(b||Uk,g,g);a=la(a)?n&&(a.wg===Qk||a.wg===Rk)?a.content:"zSoyz":String(a);b=c.N;c=b.createElement("div");F?(c.innerHTML="<br>"+a,c.removeChild(c.firstChild)):c.innerHTML=a;if(1==c.childNodes.length)c=c.removeChild(c.firstChild);else{for(a=b.createDocumentFragment();c.firstChild;)a.appendChild(c.firstChild);c=a}return c}var Uk={};function Vk(a,b,c,d,e){Ok.call(this,a,8);this.d=b;this.parentElement=c;this.O=new Hc(this);H(this,this.O);this.Hj=this.d.createElement("DIV");this.Hj.className="a";this.root=Tk(d,e,this.d);this.Ob=new qf(this.close,this)}C(Vk,Ok);
Vk.prototype.ma=function(){Vk.a.ma.call(this);this.d.appendChild(this.parentElement,this.Hj);this.d.appendChild(this.parentElement,this.root);var a=Fd("v",this.root||this.d.N);Ha(a,function(a){var c=a.getAttribute("data-id"),d;d=a.className;d=A(d)&&d.match(/\S+/g)||[];0<=Ga(d,"x")&&a.focus();this.O.listen(a,"click",function(){this.Yk(c);this.close();this.Ob.w(c)})},this)};Vk.prototype.Pb=function(){Kc(this.O);this.d.removeNode(this.root);this.d.removeNode(this.Hj);this.root=l;Vk.a.Pb.call(this)};
Vk.prototype.Yk=z;F&&Ib(8);function $(a,b){a!=l&&this.append.apply(this,arguments)}t=$.prototype;t.Ia="";t.set=function(a){this.Ia=""+a};t.append=function(a,b,c){this.Ia+=a;if(b!=l)for(var d=1;d<arguments.length;d++)this.Ia+=arguments[d];return this};t.clear=function(){this.Ia=""};t.toString=q("Ia");function Wk(a,b){function c(){}c.prototype=a;var d=new c,e;for(e in b)d[e]=b[e];return d}function Xk(a){return a&&a.wg&&a.wg===Qk?a.content:String(a).replace(Yk,Zk)}function $k(a){return a&&a.wg===Sk?"zSoyz":String(a)}var al={"\x00":"&#0;",'"':"&quot;","&":"&amp;","'":"&#39;","<":"&lt;",">":"&gt;","\t":"&#9;","\n":"&#10;","\x0B":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;","-":"&#45;","/":"&#47;","=":"&#61;","`":"&#96;","\u0085":"&#133;","\u00a0":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};
function Zk(a){return al[a]}var Yk=/[\x00\x22\x26\x27\x3c\x3e]/g;function bl(a,b){var c=b||new $,d=new $;(d||new $).append('<div class="',"r",'">',Xk(a.Wd),"</div>");(d||new $).append('<div class="',"t",'">',$k(a.body),"</div>");(d||new $).append('<div class="',"u",'">',a.o?$k(a.o):"","</div>");d=Wk(a,{rn:d.toString()});(c||new $).append('<div class="',"p",'"><div class="',"q",'">',$k(d.rn),"</div></div>")}function cl(a,b){(b||new $).append('<div class="',"v",a.rc?" x":"",'" data-id="',Xk(a.id),'"><a class="',"w",'">',Xk(a.label),"</a></div>")}
function dl(a,b){var c=b||new $;cl(Wk(a,{id:"close",label:"Close"}),c)}function el(a){a=a||new $;cl(Wk({rc:i},{id:"reload",label:"Reload"}),a)};function fl(a,b){var c=b||new $,d="Error in "+Xk(a.location),e=new $;el(e);dl({rc:n},e);bl(Wk(a,{Wd:d,body:Xk(a.message)+"<br/>"+Xk(a.Ym),o:e.toString()}),c);return b?"":c.toString()}function gl(a,b){var c=b||new $,d="Trying to connect to "+Xk(a.lp);bl(Wk(a,{Wd:"Connecting...",body:d}),c);return b?"":c.toString()}
function hl(a,b){var c=b||new $,d=new $;switch(a.reason){case 2:d.append("Version mismatch - reload and try again.");break;case 3:d.append("Invalid/broken packet.");break;case 4:d.append("Access denied.");break;case 6:d.append("Banned by an administrator! Go away!");break;case 7:d.append("Server is full. Try again later.");break;default:d.append("Unable to contact the server or a timeout occurred while connecting. Check your network settings and try again, or contact the server admin.")}var e=new $;
el(e);dl({rc:n},e);bl(Wk(a,{Wd:"Connection Failed",body:d.toString(),o:e.toString()}),c);return b?"":c.toString()}
function il(a,b){var c=b||new $,d=new $;switch(a.reason){case 1:d.append("Timeout while communicating with the server. Check your connection and try again.");break;case 2:d.append("Version mismatch - reload and try again.");break;case 3:d.append("Invalid/broken packet.");break;case 4:d.append("Access denied.");break;case 5:d.append("Kicked by an administrator!");break;case 6:d.append("Banned by an administrator!");break;case 7:d.append("Server is full. Try again later.");break;default:d.append("Whoops.")}var e=
new $;switch(a.reason){case 4:case 5:case 6:dl({rc:i},e);break;default:el(e),dl({rc:n},e)}bl(Wk(a,{Wd:"Connection Lost",body:d.toString(),o:e.toString()}),c);return b?"":c.toString()};function jl(a,b,c,d){Vk.call(this,"",a,b,c,d)}C(jl,Vk);function kl(a,b,c,d,e){b=new jl(a.d,b,fl,{location:c,message:d,Ym:e});ll(a,b);return b.Ob};function ml(a){this.v=a;this.H=this.T=l}ml.prototype.Eb=function(){this.T=this.v.T?this.v.T.Eb():l;this.H=this.v.H?this.v.H.Eb():l};ml.prototype.reset=function(){this.v.Ra();this.H=this.T=l};function nl(a,b,c,d,e,f){this.cq=a;this.type=b;this.Gq=c;this.userName=d;this.timestamp=e;this.value=f||l};function ol(a){G.call(this);this.wa=a;this.Ga=[];this.mj=[]}C(ol,G);ol.prototype.we=function(a){if(0<=Ga(this.Ga,a))return l;this.Ga.push(a);a=new nl(this,0,a.j,a.info.M,sa());this.mj.push(a);return a};ol.prototype.Dh=function(a){return D(this.Ga,a)?(a=new nl(this,1,a.j,a.info.M,sa()),this.mj.push(a),a):l};ol.prototype.postMessage=function(a,b){if(!(0<=Ga(this.Ga,a)))return l;var c=new nl(this,2,a.j,a.info.M,sa(),b);this.mj.push(c);return c};function pl(a){G.call(this);this.W=a;this.Oc={};this.de=[];this.Sh(a.Pa)}C(pl,G);t=pl.prototype;t.b=function(){Xa(this.Oc,K);this.Oc={};pl.a.b.call(this)};t.Sh=z;function ql(a,b,c){var d=a.Oc[b];!d&&c&&(d=new ol(b),a.Oc[b]=d);return d}t.Eb=function(){if(this.de.length){var a=this.de;this.de=[];return a}return l};t.ol=z;t.tl=z;t.Im=z;t.Jm=function(a){Xa(this.Oc,function(b){b.Dh(a)})};t.Km=z;function rl(){this.Jg="";this.name="Server";this.location="us";this.wj="unknown";this.xj="0";this.Wj=32;this.yh={}}rl.prototype.q=function(){var a=new rl;a.Jg=this.Jg;a.name=this.name;a.location=this.location;a.wj=this.wj;a.xj=this.xj;a.Wj=this.Wj;a.yh=bb(this.yh);return a};rl.prototype.toString=ea("[server]");function sl(){this.pa=this.dc=0}var tl=new sl;function ul(a,b){var c=b||new wi;c.bg=a.s();c.ag=a.s();c.M=a.s();return c}function vl(a,b){a.$(b.bg);a.$(b.ag);a.$(b.M);return i}function wl(a,b){var c=b||new yi;c.j=a.s();c.dc=Ch(a);c.p=a.ba();var d;if(!(d=!ul(a,c.info)))d=c.Yf||new si,d.type=a.s(),d.platform=a.s(),d.fe=a.s(),d.Ld=a.s(),d=!d;return d?l:c}var xl=new function(){this.pa=this.Ee=this.If=0};
function yl(a,b,c){var d=ig();xl.If=a;xl.Ee=b;xl.pa=c;fg(d,1);d.ec(xl.If);d.ec(xl.Ee);d.ec(xl.pa);return d.finish()}var zl=new function(){this.Ee=this.If=0;this.Rf=[]},Al=new function(){this.info=new rl;this.Ga=[]};function Bl(){this.Di=this.Bk=0;this.Hc=new yi}var Cl=new Bl,Dl=new Bl;
function El(a,b){var c=ig();Dl.Bk=3;Dl.Di=a;Dl.Hc=b;fg(c,4);gg(c,Dl.Bk);gg(c,Dl.Di);var d=Dl.Hc;c.$(d.j);fg(c,d.dc);c.ec(d.p);var e;if(!(e=!vl(c,d.info)))d=d.Yf,c.$(d.type),c.$(d.platform),c.$(d.fe),c.$(d.Ld),e=n;return e?(c.offset=0,l):c.finish()}function Fl(){this.reason=0}var Gl=new Fl,Hl=new Fl;function Il(){var a=ig();Hl.reason=0;fg(a,5);a.ec(Hl.reason);return a.finish()}var Jl=new function(){this.Hc=new yi},Kl=new function(){this.j="";this.reason=0};
function Ll(){this.j="";this.info=new wi}var Ml=new Ll,Nl=new Ll;function Ol(a,b){var c=ig();Nl.j=a;Nl.info=b;fg(c,8);c.$(Nl.j);return!vl(c,Nl.info)?(c.offset=0,l):c.finish()}function Pl(){this.wa=this.j="";this.timestamp=0;this.Ic=[]}var Ql=new Pl,Rl=new Pl;function Sl(a,b){var c=sa(),d=ig();Rl.j=a;Rl.wa=b;Rl.timestamp=c;Rl.Ic=[];fg(d,20);d.$(Rl.j);d.$(Rl.wa);d.ec(Rl.timestamp);d.ec(Rl.Ic.length);for(c=0;c<Rl.Ic.length;c++)d.$(Rl.Ic[c]);return d.finish()}
var Tl=new function(){this.wa=this.j="";this.timestamp=0};function Ul(){this.wa=this.j="";this.timestamp=0;this.message=""}var Vl=new Ul,Wl=new Ul;function Xl(a,b,c,d){var e=ig();Wl.j=a;Wl.wa=b;Wl.timestamp=c;Wl.message=d;fg(e,22);e.$(Wl.j);e.$(Wl.wa);e.ec(Wl.timestamp);e.$(Wl.message);return e.finish()};function Yl(a){pl.call(this,a);this.jc=a}C(Yl,pl);t=Yl.prototype;t.join=function(a){this.jc.send(Sl(this.jc.id,a))};t.postMessage=function(a,b){this.jc.send(Xl(this.jc.id,a,sa(),b))};t.Sh=function(a){a.V(20,this.Wn,this);a.V(21,this.Xn,this);a.V(22,this.Yn,this)};
t.Wn=function(a,b,c){Ql.j=c.s();Ql.wa=c.s();Ql.timestamp=c.ba();a=c.ba();Ql.Ic.length=a;for(b=0;b<a;b++)Ql.Ic[b]=c.s();if(!Ql)return n;c=this.jc.Ib[Ql.j]||l;if(!c)return i;a=ql(this,Ql.wa,i);if(!a)return i;for(b=0;b<Ql.Ic.length;b++){var d=this.jc.Ib[Ql.Ic[b]]||l;d&&a.we(d)}(c=a.we(c))&&this.de.push(c);return i};t.Xn=function(a,b,c){Tl.j=c.s();Tl.wa=c.s();Tl.timestamp=c.ba();if(!Tl)return n;a=this.jc.Ib[Tl.j]||l;if(!a)return i;b=ql(this,Tl.wa,n);if(!b)return i;(a=b.Dh(a))&&this.de.push(a);return i};
t.Yn=function(a,b,c){Vl.j=c.s();Vl.wa=c.s();Vl.timestamp=c.ba();Vl.message=c.s();if(!Vl)return n;a=this.jc.Ib[Vl.j]||l;if(!a)return i;b=ql(this,Vl.wa,n);if(!b)return i;(a=b.postMessage(a,Vl.message))&&this.de.push(a);return i};function Zl(a,b){G.call(this);a.S=b.S;this.e=a;this.W=b;this.W.Ca.push(this);this.Sh(b.Pa);this.De=new Yl(this.W);this.W.Ca.push(this.De);this.r=new yh;H(this,this.r);this.$b=new li(a,this.W);H(this,this.$b);var c=this.$b,d=new bi(64,Ri,0);c.Pc[d.vd]=d;d=new bi(65,Vi,2);c.Pc[d.vd]=d;d=new bi(66,kj,0);c.Pc[d.vd]=d;c=this.$b;di(c,new Dk(64,jj,ak));di(c,new Dk(65,hk,lk));di(c,new Dk(66,Si,Qj));di(c,new Dk(67,gj,Uj));di(c,new Dk(68,ok,tk));di(c,new Dk(69,Hi,Nj));di(c,new Dk(70,Ui,Sj));di(c,new Dk(71,
fj,Bk));di(c,new Dk(72,ej,yk));this.$b.Tf.push(this);this.jf=new ml(this.e.v);this.Hf=new Ii;this.Pm=[];this.$a=new Jk(this.e,this.De);H(this,this.$a);this.Wh={};this.Ac=l;this.kk=[];this.ce=l;this.Yl=new hh(this.e.Xa,this.e.Z);H(this,this.Yl);this.W.Ea.Zb=this.e.Pj.Zb;this.$a.log("wsad to move");this.$a.log("left click to place blocks, right click to remove");this.W.Zd()||this.$a.log("t to chat")}C(Zl,G);t=Zl.prototype;
t.b=function(){var a=this.e.va,b;for(b in this.Wh){var c=this.Wh[b];D(a.cg,c);K(c)}Zl.a.b.call(this)};t.zb=q("$b");t.cf=z;t.load=function(){var a=new qf;this.kh("blocks",new Sg(this.e.Xa,this.e.va.context));a.w(l);return a};t.handleError=function(a,b){M("Error: "+a,b);this.$a.log("Error: "+a,b);this.W.disconnect();$l(this.e);am(this.e);var c=kl(this.e.J,this.e.z.Ba,"game",a,b);N(c,function(a){"reload"==a?window.location.reload(n):window.location.href="http://google.com"},l,g)};
t.pk=function(){var a=this.e.Sa,b=oi(this.W).info.q();b.M=a.userName;a=this.W;a.send(Ol(a.id,b))};t.update=function(a){if(2!=this.W.state)if(this.W.Eb(2),2==this.W.state){var b=this.W.Md;this.$a.log("Disconnected: "+pi(b));$l(this.e);am(this.e);a=this.e.J;b=new jl(a.d,this.e.z.Ba,il,{reason:b});ll(a,b);N(b.Ob,function(a){"reload"==a?window.location.reload(n):window.location.href="http://google.com"},l,g)}else this.r.update(a),this.$b.update(a),this.$a.update(a)};
t.B=function(a){if(2!=this.W.state){Ji(this.Hf,this.e.z.tc());Fi(this.Hf);this.jf.Eb();this.$a.hd(a,this.jf)||this.hd(a,this.jf);var b=a.time;a.time-=0.5;ni(this.$b,a.time);var c=this.e.Z;c.Ki()&&(this.Li(a),this.fj(a),this.ej(a,this.jf),c.end());a.time=b;this.jf.reset()}};t.hd=ea(n);t.Li=ca();t.fj=ca();t.ej=function(a){var b="Sim: "+this.$b.t.Ug();this.$b.t.update(a.time);var c=this.r.Aj(),d=this.Ug();this.$a.B(a,this.Hf,b,c,d)};t.Ug=ea(l);t.kh=function(a,b){this.Wh[a]=b;this.e.va.kh(b)};
t.hj=function(a){if(a instanceof jj)this.Ac=a,this.Ac.vj=this;else if(a instanceof gj){var b=a.Zc();b.data=a;this.kk.push(a);b==oi(this.W)&&(this.ce=a,this.Ac.ce=a);this.cf()}};t.kj=function(a){a instanceof gj&&(D(this.kk,a),this.cf())};t.Sh=function(a){a.V(73,this.Zn,this);a.V(74,this.mo,this)};t.Im=function(a){var b=this.e;b.Sa.Ta||Rd(b.dg,"player_join",zd);this.$a.log(a.info.M+" ("+a.j+") connected on "+a.Yf.toString())};
t.Jm=function(a){$l(this.e);this.$a.log(a.info.M+" ("+a.j+") disconnected:",pi(a.Md))};t.Km=function(){this.cf()};
t.Zn=function(a,b,c){jg.x=Bh(c);jg.y=Bh(c);jg.K=Bh(c);if(!jg)return n;a=this.r;Hh||(Hh=new Gh);a:switch(a=a.za(jg.x,jg.y,jg.K),Ch(c)){case 1:b:{b=Bh(c);var d=Bh(c),e=Bh(c);a.x=b;a.y=d;a.K=e;var f=a.Lb,h=b+16,j=d+128,k=e+16;S(f.min,b,d,e);S(f.max,h,j,k);d=Ch(c);b=a.gc;switch(d){default:case 0:c.ba();d=0;for(e=c.offset;32768>d;d++,e+=2)b[d]=c.buffer[e+1]<<8|c.buffer[e];break;case 1:f=c.ba();d=c.buffer;e=c.offset;c=0;e=e?e:0;f=f?f:d.length;for(h=e;h<e+f;)if(j=d[h++],255==j)for(var j=d[h++]<<8|d[h++],
k=d[h++]<<8|d[h++],m=0;m<j;m++)b[c++]=k;else b[c++]=j<<8|d[h++];break;case 2:a=n;break b}a.Eg=n;a.state=2;a.map.ck(a);a=i}break a;default:a=n}return!a?n:i};t.mo=function(){return!kg?n:i};t.ol=z;t.tl=z;function bm(a,b,c){G.call(this);this.e=a;this.d=a.d;a=a.z.Ba;Dd?a=a.parentElement:(a=a.parentNode,a=la(a)&&1==a.nodeType?a:l);this.parentElement=a;this.O=new Hc(this);H(this,this.O);this.root=Tk(b,c,this.d)}C(bm,G);bm.prototype.b=function(){this.Pb();bm.a.b.call(this)};bm.prototype.ma=function(){this.d.appendChild(this.parentElement,this.root)};bm.prototype.Pb=function(){Kc(this.O);this.d.removeNode(this.root)};bm.prototype.Jf=function(a){this.root.style.display=a?"":"none"};function cm(a,b){var c=b||new $;c.append('<div class="',"i",'">');dm({id:"fullscreen",label:"Fullscreen"},c);dm({id:"settings",label:"Settings"},c);dm({id:"help",label:"Help"},c);c.append("</div>");return b?"":c.toString()}function dm(a,b){(b||new $).append('<div class="',"j",'" data-id="',Xk(a.id),'"><a class="',"blkMenubarButtonLabel",'">',Xk(a.label),"</a></div>")};function em(a){bm.call(this,a,cm,{});Ik(this.root)}C(em,bm);em.prototype.ma=function(){em.a.ma.call(this);var a=Fd("j",this.root||this.d.N);Ha(a,function(a){var c=a.getAttribute("data-id");this.O.listen(a,"click",function(){switch(c){case "fullscreen":this.e.Em();break;case "settings":fm(this.e);gm(this.e);break;case "help":fm(this.e),hm(this.e)}})},this)};function im(a,b){var c=b||new $;c.append('<div class="',"k",'"><div class="',"blkPlayerListingHeader",'"></div><div class="',"blkPlayerListingBody",'"></div><div class="',"blkPlayerListingFooter",'"></div></div>');return b?"":c.toString()}
function jm(a,b){var c=b||new $;c.append('<div class="',"l",'"><div class="',"m"," ",30>a.pa?"h":60>a.pa?"g":100>a.pa?"f":150>a.pa?"e":"d",'"></div><div class="',"n",'">',Xk(a.M),' <span class="',"o",'"> (',Xk(a.j),")</span></div></div>");return b?"":c.toString()};function km(a){bm.call(this,a.e,im,{});Ik(this.root);this.Qc=a;this.dl=Ld(this.d,"blkPlayerListingBody",this.root);this.vc=u.setInterval(B(function(){this.refresh()},this),3E3);this.refresh()}C(km,bm);km.prototype.b=function(){u.clearInterval(this.vc);km.a.b.call(this)};
km.prototype.refresh=function(){Id(this.dl);for(var a=this.Qc.kk,b=0;b<a.length;b++)a[b]={index:b,value:a[b]};var c=function(a,b){var c=a.Zc().info.M,d=b.Zc().info.M,c=String(c).toLowerCase(),d=String(d).toLowerCase();return c<d?-1:c==d?0:1}||Wa;Ma(a,function(a,b){return c(a.value,b.value)||a.index-b.index});for(b=0;b<a.length;b++)a[b]=a[b].value;for(b=0;b<a.length;b++){var d=a[b].Zc(),d=Tk(jm,{j:d.j,M:d.info.M,pa:d.t.Xk},this.d);this.dl.appendChild(d)}};function lm(a,b){Zl.call(this,a,b);this.Yh=new Nf(this.e.I.g,this.e.I.$h);H(this,this.Yh);this.Yh.restore();var c=this.uh=new km(this);this.Pm.push(c);H(this,c);c.ma();this.W.Zd()&&this.uh.Jf(n);c=this.Ho=new em(this.e);this.Pm.push(c);H(this,c);c.ma();this.$l=new og(this.e.Xa,this.e.va.context);H(this,this.$l);this.e.nh.Rh(this.$l);this.ui=l;this.om=new Ii;this.ue=l}C(lm,Zl);t=lm.prototype;
t.hj=function(a){lm.a.hj.call(this,a);a instanceof hk?(this.ui=a,this.ui.xk(this.r)):a instanceof Si&&a.km==oi(this.W)&&(a.xk(this.r),this.ue=new Og(this.e.I,this.r,a.ub),H(this,this.ue))};t.kj=function(a){lm.a.kj.call(this,a)};t.cf=function(){lm.a.cf.call(this);this.uh.refresh()};t.update=function(a){lm.a.update.call(this,a)};
t.hd=function(a,b){if(lm.a.hd.call(this,a,b))return i;var c=b.T;if(79 in c.Oa)return fm(this.e),gm(this.e),i;if(191 in c.Oa)return fm(this.e),hm(this.e),i;if(9 in c.Oa)return fm(this.e),c=this.uh,c.root.style.display="none"==c.root.style.display?"":"none",i;77 in c.Oa&&(fm(this.e),c=this.e.nh,c.Kj?c.stop():c.nm());var c=this.om,d=this.ce;if(d){var e=cj(T(d)),f=c.width/c.height;if(f!=e.Jb){e.Jb=f;var h=e.Ui(64);h.Zf=f;e.Da.fd.Xf(h)}if(!ij(T(d)).hd(a,b,c))return this.handleError("Input backup"),i}return n};
t.Li=function(a){lm.a.Li.call(this,a);this.e.I.reset(this.r.Uc.Am,i)};t.fj=function(a){lm.a.fj.call(this,a);var b=this.e.I.tm,c=this.om,d=this.e.z,e=this.ce;e?(e=cj(T(e)),Ki(c,16*e.ub.Y+16),Ji(c,d.tc()),e.Be(c)):(Ki(c,100),Ji(c,d.tc()));this.ue&&this.ue.B(a,c);this.ui&&this.ui.B(a,c,b);b.flush(c)};
t.ej=function(a,b){lm.a.ej.call(this,a,b);var c=this.e.I,d=this.Hf,e=c.Kk,f=this.Yh;f.clear();var h=mm;if(b.H.Q){var j=d.width/2/2-8,k=d.height/2/2-8;oe(e,11,h);f.add(h[0],h[1],h[2]-h[0],h[3]-h[1],4294967295,j,k,16,16)}h=nm;Ue(h,2,2,1,0,0,0,0,1);bg(c,e);f.mc(d.wf,h);if(c=this.ce){hj(c);j=[];c=this.e.I;d=this.Hf;e=c.Ha;f=this.Yh;f.clear();for(var k=0,h=17*j.length,m=mm,p=0;p<j.length;p++)oe(e,j[p].Vk,m),f.add(m[0],m[1],m[2]-m[0],m[3]-m[1],0==p?4294967295:4286019447,k,0,16,16),k+=17;j=nm;Ue(j,2,2,1,
0,d.width/2-h,d.height-32-2,0,1);bg(c,e);f.mc(d.wf,j)}};t.Ug=function(){return this.ue?this.ue.Aj():l};var nm=Se(),mm=Q();function om(a,b){Ok.call(this,"game-url",14);this.hb=a;this.z=a.z;this.Qc=new lm(a,b);H(this,this.Qc)}C(om,Ok);t=om.prototype;t.ma=function(){om.a.ma.call(this);N(this.Qc.load(),function(){this.z.Jf(i);pm(this.hb)},ca(),this)};t.Pb=function(){this.z.Jf(n);am(this.hb);om.a.Pb.call(this)};t.pk=function(){this.Qc.pk()};t.update=function(a){om.a.update.call(this,a);this.Qc.update(a)};t.B=function(a){om.a.B.call(this,a);this.Qc.B(a)};function qm(a,b){var c=b||new $,d=new $;dl({rc:i},d);bl(Wk(a,{Wd:"Help",body:'Conceptualized and coded by <a href="http://twitter.com/benvanik" target="_blank">@benvanik</a> as a 20% project at Google.<br/>Copyright Google, Inc 2012.<br/><br/><a href="index.html" target="_blank">More information</a>, <a href="https://www.github.com/benvanik/blk-game" target="_blank">source code</a>.<br/><br/><span class="C">Controls:</span><table class="D"><tr><td>Movement</td><td>WSAD</td></tr><tr><td>Place block</td><td>Left click</td></tr><tr><td>Remove block</td><td>Right-click, ctrl-click</td></tr><tr><td>Change block type</td><td>1-5, mouse wheel</td></tr><tr><td>Chat</td><td>T</td></tr><tr><td>Start/stop music</td><td>M</td></tr><tr><td>Show player list</td><td>TAB</td></tr><tr><td>Toggle fullscreen</td><td>Alt-enter</td></tr><tr><td>Settings</td><td>O</td></tr><tr><td>Help</td><td>?</td></tr></table><br/>Use Chrome (or go fullscrene in Firefox) to get awesome FPS control goodness!',
o:d.toString()}),c);return b?"":c.toString()};function rm(a,b){Vk.call(this,"help",a,b,qm,{})}C(rm,Vk);function sm(a,b){var c=b||new $;c.append('<div class="',"E",'"><div class="',"F",'"><div class="',"G",'">BLK, by <a href="http://twitter.com/benvanik" target="_blank">@benvanik</a></div><div class="',"H",'">TODO: some awesome logo or something<br/>',"Welcome to my 20% project hacky game tech demo thingie!",'<br/><a href="." target="_blank">',"More Information",'</a><br/><table class="',"I",'"><tr><td class="',"blkMainMenuSinglePlayerButton",'">',"Single-player",'</td><td class="',"blkMainMenuMultiPlayerButton",
'">',"Multi-player",'</td></tr></table></div><table class="',"J",'"><tr><td class="',"blkMainMenuSettingsButton",'">',"Settings",'</td><td class="',"blkMainMenuHelpButton",'">',"Help","</td></tr></table></div></div>");return b?"":c.toString()};function tm(a,b){Ok.call(this,"",8);this.hb=a;this.cb=a.d;this.Ro=b;this.P=new Hc(this);H(this,this.P);this.Ac=Tk(sm,{},this.cb);this.Vd=this.cb.createElement("A");this.Vd.className="c";var c=this.Vd;if("textContent"in c)c.textContent="View on GitHub";else if(c.firstChild&&3==c.firstChild.nodeType){for(;c.lastChild!=c.firstChild;)c.removeChild(c.lastChild);c.firstChild.data="View on GitHub"}else Id(c),c.appendChild(Jd(c).createTextNode("View on GitHub"));this.Vd.href="http://github.com/benvanik/blk-game";
this.Vd.target="_blank"}C(tm,Ok);function um(a,b,c){b=Ld(a.cb,b,a.Ac);a.P.listen(b,"click",c,n,a)}
tm.prototype.ma=function(){tm.a.ma.call(this);this.cb.N.body.appendChild(this.Vd);this.cb.appendChild(this.Ro,this.Ac);um(this,"blkMainMenuSinglePlayerButton",function(){fm(this.hb);vm(this.hb,"local://blk-0")});um(this,"blkMainMenuMultiPlayerButton",function(){fm(this.hb);vm(this.hb,"ws://localhost:1337")});um(this,"blkMainMenuSettingsButton",function(){fm(this.hb);gm(this.hb)});um(this,"blkMainMenuHelpButton",function(){fm(this.hb);hm(this.hb)})};
tm.prototype.Pb=function(){this.cb.removeNode(this.Vd);Kc(this.P);this.cb.removeNode(this.Ac);this.Ac=l;tm.a.Pb.call(this)};function wm(a,b){var c=b||new $,d=new $,e=d||new $;cl(Wk({rc:i},{id:"save",label:"Save"}),e);dl({rc:n},d);bl(Wk(a,{Wd:"Settings",body:'<div class="K"><div class="blkSettingsLabel">Name:</div><div class="L"><input class="N blkSettingsNameValue" type="text"/></div></div><div class="K blkSettingsSensitivitySlider"><div class="blkSettingsLabel">Mouse:</div><div class="L"><div class="R T"><input type="checkbox" class="S"/>Mouse Lock</div><span class="M">Sensitivity: </span><input class="O" type="range" min="1" max="100" /><div class="P"></div> <div class="Q">reset</div></div></div>\x3c!--<div class="K blkSettingsDistanceSlider"><div class="blkSettingsLabel">View Distance:</div><div class="L"><input class="O" type="range" min="1" max="100" /><div class="P"></div> <div class="Q">reset</div></div></div>--\x3e<div class="K blkSettingsAudio"><div class="blkSettingsLabel">Audio:</div><div class="L"><div class="R blkSettingsSoundFx"><input type="checkbox" class="S"/>Sound FX</div><div class="R blkSettingsMusic"><input type="checkbox" class="S"/>Music</div></div></div>',
o:d.toString()}),c);return b?"":c.toString()};function xm(a,b,c){Vk.call(this,"settings",a,b,wm,{});this.zm=c}C(xm,Vk);xm.prototype.ma=function(){xm.a.ma.call(this);var a=this.zm;Ld(this.d,"blkSettingsNameValue",this.root).value=a.userName;ym(this,"blkSettingsSensitivitySlider",100,50,50*a.ea,function(a){return Ea(a/50,2)});zm(this,"T",a.jb);ym(this,"blkSettingsDistanceSlider",16,8,a.tb,function(a){return Ea(a)});zm(this,"blkSettingsSoundFx",!a.Ta);zm(this,"blkSettingsMusic",!a.Sb)};
function ym(a,b,c,d,e,f){function h(){k.innerHTML=f(Number(j.value))}if(b=Ld(a.d,b)){var j=Ld(a.d,"O",b);if(j){j.min="1";j.max=String(c);j.value=String(e);var k=Ld(a.d,"P",b);h();a.O.listen(j,"change",h);c=Ld(a.d,"Q",b);a.O.listen(c,"click",function(){j.value=String(d);h()})}}}function Am(a,b){var c=Ld(a.d,b);if(c)return c=Ld(a.d,"O",c),!c?g:Number(c.value)}
function zm(a,b,c){if(b=Ld(a.d,b)){var d=Ld(a.d,"S",b);d&&(Ik(b),d.checked=c,a.O.listen(b,"click",function(a){a.target!=d&&(d.checked=!d.checked)}))}}function Bm(a,b){var c=Ld(a.d,b);if(c)return c=Ld(a.d,"S",c),!c?g:c.checked}
xm.prototype.Yk=function(a){if("save"==a){a=this.zm;var b=Ld(this.d,"blkSettingsNameValue",this.root).value,b=xi(b);a.userName=b;b=Am(this,"blkSettingsSensitivitySlider");x(b)&&(a.ea=b/50);b=Bm(this,"T");x(b)&&(a.jb=b);b=Am(this,"blkSettingsDistanceSlider");x(b)&&(a.tb=b);b=Bm(this,"blkSettingsSoundFx");x(b)&&(a.Ta=!b);b=Bm(this,"blkSettingsMusic");x(b)&&(a.Sb=!b);a.save()}};function Cm(a,b){var c=b||new $;c.append('<div class="',"U",'"><div class="',"V",'">Loading...</div></div>');return b?"":c.toString()};function Dm(a,b){Vk.call(this,"",a,b,Cm,{})}C(Dm,Vk);function Em(){this.Ep=this.ei=this.time=this.Qd=0}Em.prototype.uc=function(a,b,c,d){this.Qd=a;this.time=b;this.ei=c;this.Ep=d};function Fm(){this.Fp=dc();this.Fe=this.pa=this.gb=0;this.Gl=n}function Gm(a){return(dc()-a.Fp)/1E3}function mi(a){return!a.Gl?0:Gm(a)+a.Fe};function Hm(a,b){G.call(this);this.Pj=a;this.S=b||new Fm;this.Ge=[];this.aq=l}C(Hm,G);Hm.prototype.b=function(){ic(this.Ge);this.Ge.length=0;Hm.a.b.call(this)};Hm.prototype.getTime=function(){return mi(this.S)};function Im(){this.ei=this.time=this.Qd=0;this.hasFocus=n}Im.prototype.uc=function(a,b,c,d){this.Qd=a;this.time=b;this.ei=c;this.hasFocus=d};function Jm(a,b,c,d){G.call(this);this.P=new Hc(this);H(this,this.P);this.Qk=a;this.Ri=this.ie=this.aj=l;if(!b){if(a=u.requestAnimationFrame||u.webkitRequestAnimationFrame||u.mozRequestAnimationFrame||u.oRequestAnimationFrame||u.msRequestAnimationFrame)this.ie=a;if(a=u.cancelAnimationFrame||u.webkitCancelAnimationFrame||u.mozCancelAnimationFrame||u.oCancelAnimationFrame||u.msCancelAnimationFrame)this.Ri=a}this.od=0;this.vc=l;this.Lj=0;this.oe=i;this.rj=d||0;this.Th=l;c&&(this.P.listen(u,"blur",function(){this.oe=
n}),this.P.listen(u,"focus",function(){this.oe||(this.oe=i,this.od&&this.start(i))}))}C(Jm,G);Jm.prototype.b=function(){this.stop(i);this.aj=l;Jm.a.b.call(this)};Jm.prototype.hasFocus=q("oe");
Jm.prototype.start=function(a){if(!a&&(this.od++,1<this.od))return;if(this.oe){var b=this;this.vc=this.ie?this.ie.call(u,function(){Km(b)},this.aj):u.setTimeout(function(){Km(b)},62.5)}this.Qk(dc());this.rj&&(b=this,this.Th=u.setInterval(function(){var a=b;if(dc()-a.Lj>=a.rj&&a.od){var d=dc();a.Lj=d;a.Qk(d)}},this.rj))};
Jm.prototype.stop=function(a){if(a||this.od)a||this.od--,this.od||(a=this.vc,this.Ri?this.Ri.call(u,a):this.ie||u.clearTimeout(a),this.vc=l,this.Th!==l&&(u.clearInterval(this.Th),this.Th=l))};function Km(a){if(a.vc!==l){a.vc=l;a.oe&&(a.vc=a.ie?a.ie.call(u,function(){Km(a)},a.aj):u.setTimeout(function(){Km(a)},16));var b=dc();a.Lj=b;a.Qk(b)}};function Lm(a,b){Hm.call(this,a,b);this.O=new Hc(this);H(this,this.O);this.nf=Gm(this.S);this.yn=i;this.zn=0.01;this.qe=0;this.Jp=new Im;this.Ip=0;this.ep=new Em;this.dp=0;var c=this;this.Ff=new Jm(function(){var a=Gm(c.S),b=a-c.nf;c.nf=a;0.25<b&&(b=0.25);c.qe+=b;a=1;if(c.yn){for(a=c.zn;c.qe>=a;){Mm(c,c.S.gb,a);var f=c.S;f.gb+=a;c.qe-=a;if(!c.Mf)break}a=c.qe/a}else Mm(c,c.S.gb,b),f=c.S,f.gb+=b;if(c.Ff.hasFocus()){var f=mi(c.S),h=c.ep;h.uc(c.dp++,f,b,a);c.B(h)}},g,g,500);H(this,this.Ff);this.Mf=n}
C(Lm,Hm);function pm(a){a.Mf||(a.Mf=i,a.Ff.start())}function am(a){a.Mf&&(a.Mf=n,a.Ff.stop())}function Mm(a,b,c){var d=a.Jp;d.uc(a.Ip++,b,c,a.Ff.hasFocus());a.update(d)}Lm.prototype.update=z;Lm.prototype.B=z;function Nm(a,b){Vh.call(this,a);this.d=b||l}C(Nm,Vh);Nm.prototype.load=function(a){var b=new qf(function(){a.cancel()},this);a.load(b);return b};function Om(a){G.call(this);this.context=a;this.Ub=R()}C(Om,G);Om.prototype.update=function(a){if(this.context){var b=this.context.listener;if(a){var c=Pm[0],d=Pm[1];S(c,0,0,0);Ze(a,c,c);b.setPosition(c[0],c[1],c[2]);Le(this.Ub,c);S(c,0,0,1);$e(a,c,c);S(d,0,1,0);$e(a,d,d);b.setOrientation(-c[0],-c[1],-c[2],d[0],d[1],d[2])}else b.setPosition(0,0,0),b.setOrientation(0,0,1,0,1,0);b.setVelocity(0,0,0)}};var Pm=[R(),R()];function Qm(a,b){Vh.call(this,a);this.d=b;this.context=l;u.webkitAudioContext?this.context=new window.webkitAudioContext:u.AudioContext&&(this.context=new window.AudioContext);this.listener=new Om(this.context);H(this,this.listener);this.cg=[];this.gi=[]}C(Qm,Vh);Qm.prototype.b=function(){Ha(this.cg,K);this.cg.length=0;Ha(this.gi,K);this.gi.length=0;Qm.a.b.call(this)};Qm.prototype.kh=function(a){this.cg.push(a);a.load()};function Rm(a,b){G.call(this);this.Xa=a;this.va=b;this.Kj=this.fh=n;this.nb=this.tf=l}C(Rm,G);Rm.prototype.b=function(){this.Rh(l);Rm.a.b.call(this)};Rm.prototype.Rh=function(a){if(a!=this.nb){if(this.nb){this.stop();var b=this.nb;D(this.va.gi,b);K(b)}if(this.nb=a)a=this.nb,this.va.gi.push(a),a.load(),this.fh||Sm(this,0)}};function Sm(a,b){var c=10+60*Math.random(),c=b+1E3*c;Nc.clearTimeout(a.tf);a.tf=Oc(a.nm,c,a)}
Rm.prototype.nm=function(){if(!this.fh&&this.nb){this.stop();var a=l,b=this.nb,c=[],d;for(d in b.Pf)c.push(b.Pf[d]);c.length&&(a=c[0]);a&&(this.nb.play(a),this.Kj=i,Sm(this,a.duration))}};Rm.prototype.stop=function(){this.nb&&(this.tf!==l&&(Nc.clearTimeout(this.tf),this.tf=l),ng(this.nb),this.Kj=n)};var Tm="fullscreen_changed_"+Gc++,Um="orientation_changed_"+Gc++;function Vm(a){G.call(this);this.Ad=a||window;this.jh=yc(this.Ad,"resize",this.no,n,this);this.ac=Hd(this.Ad||window);if(vb&&pb||tb&&this.Ad.self!=this.Ad.top)this.si=window.setInterval(B(this.ml,this),Wm)}C(Vm,Mc);var Xm={},Wm=500;t=Vm.prototype;t.jh=l;t.Ad=l;t.ac=l;t.si=l;t.tc=function(){return this.ac?this.ac.q():l};t.b=function(){Vm.a.b.call(this);this.jh&&(Cc(this.jh),this.jh=l);this.si&&(window.clearInterval(this.si),this.si=l);this.ac=this.Ad=l};t.no=function(){this.ml()};
t.ml=function(){var a=Hd(this.Ad||window);if(!(a==this.ac||(!a||!this.ac?0:a.width==this.ac.width&&a.height==this.ac.height)))this.ac=a,this.dispatchEvent("resize")};function Ym(a,b){G.call(this);this.d=a;var c=a.N,d=c.body;this.parentElement=b||d;this.P=new Hc(this);H(this,this.P);d=a.createElement("DIV");Ek(d,{position:"absolute",left:0,top:0,right:0,bottom:0});a.appendChild(this.parentElement,d);var e=a.createElement("DIV");Ek(e,{position:"absolute",left:0,top:0,right:0,bottom:0});a.appendChild(d,e);this.Ba=d;this.canvas=new Zm(a,e);H(this,this.canvas);this.Pl=i;this.eh=this.Rd=n;this.orientation=$m;this.sq=u.devicePixelRatio||1;var e=a.N.parentWindow||a.N.defaultView||
window,f=ma(e),e=Xm[f]=Xm[f]||new Vm(e);this.P.listen(e,"resize",function(){this.be()});this.P.listen(a.N.body,"orientationchange",B(function(){this.orientation=window.orientation;this.be();this.dispatchEvent(Um)},this));this.be();if((this.Rd=!(!d.requestFullScreen&&!d.mozRequestFullScreen&&!d.webkitRequestFullScreen))&&(c.fullScreenEnabled!==g||c.mozFullScreenEnabled!==g))this.Rd=c.fullScreenEnabled||c.mozFullScreenEnabled;this.Rd&&this.P.listen(c,["fullscreenchange","mozfullscreenchange","webkitfullscreenchange"],
function(){this.eh=!!c.fullScreenElement||c.mozFullScreen||c.webkitIsFullScreen;this.be();this.dispatchEvent(Tm)})}C(Ym,Mc);var $m=0;Ym.prototype.tc=function(){return this.canvas.size};Ym.prototype.Jf=function(a){a!=this.Pl&&(this.Pl=a,this.canvas.Tc.style.display=a?"":"none")};Ym.prototype.be=function(){this.canvas.be()};
function Zm(a,b){G.call(this);this.parentElement=b;this.Tc=a.createElement("CANVAS");Ik(this.Tc);Ek(this.Tc,{position:"absolute",left:0,top:0,right:0,bottom:0,cursor:"crosshair","-webkit-tap-highlight-color":"rgba(0,0,0,0)","-webkit-touch-callout":"none"});a.appendChild(b,this.Tc);this.size=new Ed(1,1)}C(Zm,G);
Zm.prototype.be=function(){var a;a=this.parentElement;var b;b:{b=Jd(a);if(b.defaultView&&b.defaultView.getComputedStyle&&(b=b.defaultView.getComputedStyle(a,l))){b=b.display||b.getPropertyValue("display")||"";break b}b=""}if("none"!=(b||(a.currentStyle?a.currentStyle.display:l)||a.style&&a.style.display))a=Gk(a);else{b=a.style;var c=b.display,d=b.visibility,e=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";a=Gk(a);b.display=c;b.position=e;b.visibility=d}this.Tc.width=a.width;
this.Tc.height=a.height;this.size.width=a.width;this.size.height=a.height};var an="context_lost_"+Gc++,bn="context_restored_"+Gc++;function cn(){this.Ej=n;this.Dg=this.Zi=l;this.zd=[]};function dn(a){cn.call(this);this.Z=a;this.Bm=this.Ak=n}C(dn,cn);function en(a){var b=a.Z.d.createElement("IMG");if(!b)return a.Ak=n,xf();var c=new qf;a=B(function(){this.Ak=2==b.height;b.onload=l;b.onerror=l;c.w(l)},a);b.addEventListener("load",a,n);b.addEventListener("error",a,n);b.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA";return c};function fn(a,b){G.call(this);this.d=a||(b?new Kd(Jd(b)):Bd||(Bd=new Kd));this.canvas=b;this.Ed={};this.Rj=0;this.lk=this.Jc=this.Bp=this.Cg=this.lg=this.Ah=l;this.Bi=0;this.td=[];this.fp=l;this.vq=[l];this.P=new Hc(this);H(this,this.P);this.sg=n;this.P.listen(b,"webglcontextcreationerror",function(a){M("error creating gl context: ",a.statusMessage||"?")});this.P.listen(b,"webglcontextlost",function(a){a.preventDefault();this.u();this.dispatchEvent(an)});this.P.listen(b,"webglcontextrestored",function(){this.restore();
this.dispatchEvent(bn)});this.f=l;this.Ng=new Ud;this.pj=new dn(this)}C(fn,Mc);t=fn.prototype;t.b=function(){this.Rj&&Xa(this.Ed,K);this.Ed={};this.u();fn.a.b.call(this)};t.u=function(){this.sg=n;Xa(this.Ed,function(a){a.u()});this.Bp=this.Cg=this.lg=this.Ah=l;this.Jc&&(this.Jc.reset(),this.Jc=l);this.lk=l;for(var a=this.Bi=0;a<this.td.length;a++)this.td[a]=l;this.fp=l};
t.restore=function(){this.td=Array(this.f.getParameter(34930));for(var a=0;a<this.td.length;a++)this.td[a]=l;Xa(this.Ed,function(a){a.restore()});this.sg=i};
t.le=function(a){if(this.f)return xf();var b=new qf;if(u.WebGLRenderingContext){for(var c=l,d=["webgl","experimental-webgl"],e=0;e<d.length;e++){try{c=this.canvas.getContext(d[e],a)}catch(f){continue}if(c)break}a=c}else a=l;a?(this.f=a,this.Ng.le(a),a=this.pj,c=new qf,a.Ej?a.Dg?c.A(a.Dg):c.w(l):(a.zd.push(c),a.Zi||(d=[],d.push(en(a)),a.Bm=a.Z.Ng.isSupported(8),d=new Qf(d),a.Zi=d,N(a.Zi,function(){this.Ej=i;this.Dg=l;for(var a=0;a<this.zd.length;a++)this.zd[a].w(l);this.zd.length=0},function(a){this.Ej=
i;this.Dg=a;for(var b=0;b<this.zd.length;b++)this.zd[b].A(a);this.zd.length=0},a))),N(c,function(){this.restore();b.w(l)},function(a){b.A(a)},this)):(this.sg=n,b.A("Unable to create the WebGL context"));return b};t.flush=function(){this.f.flush()};function gf(a,b){a.lg!=b&&(b&&a.f&&b.dd(a.f,a.lg),a.lg=b)}function jf(a,b){a.Cg!=b&&(b&&a.f&&b.dd(a.f,a.Cg),a.Cg=b)}function mf(a,b){a.Jc!=b&&(b?b.dd(a.Jc):a.Jc&&a.Jc.reset(),a.Jc=b)}
function lf(a,b){var c=b instanceof ye?b.handle:b;a.lk!=c&&(a.f.useProgram(c),a.lk=c)}function re(a,b){var c=a.f;a.td[0]!=b&&(0!=a.Bi&&(c.activeTexture(33984),a.Bi=0),(a.td[0]=b)?b.bind():a.f.bindTexture(c.TEXTURE_2D,l))}t.Ki=function(){return!this.sg?n:i};t.end=ca();function gn(a){Hc.call(this);this.Aa=a;this.enabled=i}C(gn,Hc);gn.prototype.Ra=z;gn.prototype.ca=da("enabled");function hn(a){gn.call(this,a)}C(hn,gn);function jn(){this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=n;this.h={};this.Oa={};this.ae={};this.wc=this.$d=0}jn.prototype.q=function(){var a=new jn;a.ctrlKey=this.ctrlKey;a.altKey=this.altKey;a.shiftKey=this.shiftKey;a.metaKey=this.metaKey;a.h=bb(this.h);a.Oa=bb(this.Oa);a.ae=bb(this.ae);a.$d=this.$d;a.wc=this.wc;return a};jn.prototype.reset=function(){this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=n;this.$d&&($a(this.h),this.$d=0);this.wc&&($a(this.Oa),$a(this.ae),this.wc=0)};
jn.prototype.Ra=function(){this.wc&&($a(this.Oa),$a(this.ae),this.wc=0)};jn.prototype.update=function(a,b){var c=a.pc.keyIdentifier,d=a.keyCode;d?(25==d&&a.shiftKey&&(d=9),ub&&d in kn&&(d=kn[d])):c&&c in ln&&(d=ln[c]);b?this.h[d]||(this.h[d]=i,this.Oa[d]=i,this.$d++,this.wc++):this.h[d]&&(delete this.h[d],this.ae[d]=i,this.$d--,this.wc++);switch(d){case 17:this.ctrlKey=b;break;case 18:this.altKey=b;break;case 16:this.shiftKey=b;break;case 91:case 92:this.metaKey=b}};
var ln={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},kn={61:187,59:186,224:91};function mn(a){gn.call(this,a);this.uj=l;this.c=new jn;this.enabled=n;this.ca(i)}C(mn,gn);function nn(a){if(a.ctrlKey||a.metaKey){switch(a.keyCode){case 82:return i;case 73:return i}if(a.shiftKey)switch(a.keyCode){case 74:return i}}else switch(a.keyCode){case 27:case 116:return i}return n}t=mn.prototype;t.Cj=function(a){nn(a)||(a.preventDefault(),this.c.update(a,i),13 in this.c.Oa&&(this.c.altKey||this.c.metaKey)&&this.uj&&this.uj())};t.eo=function(a){nn(a)||(a.preventDefault(),this.c.update(a,n))};
t.co=function(){this.c.reset()};t.Eb=q("c");t.reset=function(){this.c.reset()};t.Ra=function(){this.c.Ra()};t.ca=function(a){this.enabled!=a&&(mn.a.ca.call(this,a),a?(a=Jd(this.Aa),this.listen(a,"keydown",this.Cj),this.listen(a,"keyup",this.eo),this.listen(a?a.parentWindow||a.defaultView:window,["focus","blur"],this.co)):Kc(this))};function on(){this.ka=this.Ja=this.o=this.Nd=this.oc=this.nc=this.clientY=this.clientX=this.screenY=this.screenX=0;this.Q=n}on.prototype.q=function(){var a=new on;a.screenX=this.screenX;a.screenY=this.screenY;a.nc=this.nc;a.oc=this.oc;a.Nd=this.Nd;a.o=this.o;a.Ja=this.Ja;a.ka=this.ka;a.Q=this.Q;return a};on.prototype.reset=function(){this.ka=this.Ja=this.o=this.Nd=this.oc=this.nc=this.screenY=this.screenX=0;this.Q=n};on.prototype.Ra=function(){this.ka=this.Ja=this.Nd=this.oc=this.nc=0};
on.prototype.update=function(a,b){var c=a.pc,d=a.screenX,e=a.screenY,f=0,h=0;c.webkitMovementX!==g?(f=c.webkitMovementX,h=c.webkitMovementY):c.mozMovementX!==g?"mousemove"==a.type?(f=c.mozMovementX,h=c.mozMovementY):f=h=0:c.movementX!==g?(f=c.movementX,h=c.movementY):(f=d-this.screenX,h=e-this.screenY);this.screenX=d;this.screenY=e;this.clientX=a.clientX;this.clientY=a.clientY;this.nc+=f*b;this.oc+=h*b};function pn(a){gn.call(this,a);this.c=new on;this.ai=!(!a.requestPointerLock&&!a.mozRequestPointerLock&&!a.webkitRequestPointerLock);this.Oh=1;this.Hg=this.ri=this.Q=this.Xl=n;this.listen(a,"mousedown",this.fo);this.listen(a,"mousemove",this.bf);this.listen(a,"mouseover",this.io);this.listen(a,"mouseout",this.ho);this.listen(a,ub?"DOMMouseScroll":"mousewheel",this.jo);this.listen(a,["selectstart","contextmenu"],function(a){a.preventDefault()});this.ai&&(this.listen(document,["pointerlockchange","mozpointerlockchange",
"webkitpointerlockchange"],function(){this.Q=document.pointerLockElement===a||document.mozPointerLockElement===a||document.webkitPointerLockElement===a}),this.listen(document,["pointerlockerror","mozpointerlockerror","webkitpointerlockerror"],function(){this.Q=n}))}C(pn,gn);function qn(a){if(!a.ai||a.Q||!rn(a))return n;(a.Aa.requestPointerLock||a.Aa.mozRequestPointerLock||a.Aa.webkitRequestPointerLock).call(a.Aa);a.c.reset();return i}
function rn(a){return!a.enabled?n:a.Xl&&a.ai?ub&&!document.rq&&!document.mozFullScreenElement?n:i:n}function sn(a){a.ri=n;a.Q&&((document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock).call(document),a.c.reset())}t=pn.prototype;
t.fo=function(a){if(this.enabled&&(a.preventDefault(),!rn(this)||!qn(this))){this.c.update(a,this.Oh);switch(a.button){case 0:this.c.o|=1;this.c.Ja|=1;break;case 1:this.c.o|=2;this.c.Ja|=2;break;case 2:this.c.o|=4,this.c.Ja|=4}!this.Q&&(this.c.o&&!this.Hg)&&(this.Hg=i,this.listen(Jd(this.Aa),"mousemove",this.bf),this.listen(Jd(this.Aa),"mouseup",this.El),Jc(this,this.Aa,"mousemove",this.bf))}};
t.El=function(a){if(this.enabled&&(!rn(this)||this.Q)){a.preventDefault();this.c.update(a,this.Oh);switch(a.button){case 0:this.c.o&=-2;this.c.ka|=1;break;case 1:this.c.o&=-3;this.c.ka|=2;break;case 2:this.c.o&=-5,this.c.ka|=4}!this.Q&&(!this.c.o&&this.Hg)&&(this.Hg=n,Jc(this,Jd(this.Aa),"mousemove",this.bf),Jc(this,Jd(this.Aa),"mouseup",this.El),this.listen(this.Aa,"mousemove",this.bf))}};t.bf=function(a){if(this.enabled&&(!rn(this)||this.Q))a.preventDefault(),this.c.update(a,this.Oh)};
t.io=function(a){this.enabled&&a.preventDefault()};t.ho=function(a){this.enabled&&a.preventDefault()};t.jo=function(a){if(this.enabled){a.preventDefault();var b=0;a=a.pc;x(a.wheelDelta)?(b=a.wheelDelta/120,tb&&(b=-b)):x(a.detail)&&(b=-a.detail/3);this.c.Nd+=b}};t.Eb=function(){this.c.Q=this.Q;return this.c};t.Ra=function(){this.c.Ra()};t.ca=function(a){a!=this.enabled&&(pn.a.ca.call(this,a),a?this.ri&&(qn(this),this.ri=n):this.Q&&(sn(this),this.ri=i))};function tn(a){gn.call(this,a)}C(tn,gn);function un(a,b){Vh.call(this,a);this.Aa=b;this.Sd=this.re=this.H=this.T=l;this.T=new mn(b);H(this,this.T);this.H=new pn(b);H(this,this.H);this.re=new tn(b);H(this,this.re);this.Sd=new hn(b);H(this,this.Sd)}C(un,Vh);un.prototype.Ra=function(){this.T&&this.T.Ra();this.H&&this.H.Ra();this.re&&this.re.Ra();this.Sd&&this.Sd.Ra()};un.prototype.ca=function(a){this.T&&this.T.ca(a);this.H&&this.H.ca(a);this.re&&this.re.ca(a);this.Sd&&this.Sd.ca(a)};function vn(){G.call(this);this.type="none"}C(vn,G);function wn(){this.df=Array(256)}wn.prototype.V=function(a,b,c){b=c?B(b,c):b;this.df[a]=b};function xn(a,b){var c=Fh();c.Ki(b.data,0);if(c.offset+1<=c.buffer.length){var d=Ch(c),e=a.df[d];e&&e(b,d,c)}};function yn(a,b,c){G.call(this);this.Pa=new wn;this.S=new Fm;this.id=a;this.type=b;this.tq=c;this.info=new rl;this.Zp=new vn;this.state=0;this.Ga=[];this.Ib={};this.ni=Array(256);this.Ca=[]}C(yn,G);yn.prototype.b=function(){this.Ca.length=0;yn.a.b.call(this)};yn.prototype.we=function(a){this.Ga.push(a);this.Ib[a.j]=a;this.ni[a.dc]=a;for(var b=0;b<this.Ca.length;b++)this.Ca[b].Im(a)};yn.prototype.Dh=function(a){if(ab(this.Ib,a.j)){this.ni[a.dc]=l;D(this.Ga,a);for(var b=0;b<this.Ca.length;b++)this.Ca[b].Jm(a)}};function zn(a){this.timestamp=sa();this.Hc=l;this.data=a};function An(a){G.call(this);this.Jg=a;this.Zd=n;this.state=Bn;this.rg=n;this.Zb=0;this.Dc=l;this.Ef=[];this.vi=[]}C(An,G);An.prototype.b=function(){this.close();An.a.b.call(this)};var Bn=0;An.prototype.read=function(){if(!this.Ef.length)return l;var a=this.Ef[0];a.timestamp<=sa()?this.Ef.shift():a=l;this.Ef.length||(this.rg=n);return a};
An.prototype.write=function(a){a=new zn(a);this.Zb?(a.timestamp+=this.Zb+(Math.random()-0.5)*this.Zb/2,this.Dc===l&&(this.Dc=u.setInterval(B(function(){1==this.state&&this.flush()},this),5))):this.Dc!==l&&(u.clearInterval(this.Dc),this.Dc=l);this.vi.push(a);1==this.state&&this.flush()};function Cn(a,b){a.Zb&&(b.timestamp+=a.Zb+(Math.random()-0.5)*a.Zb/2);a.Ef.push(b);a.rg=i}An.prototype.flush=function(a){for(var b=sa();this.vi.length;){var c=this.vi[0];if(c.timestamp>b&&!a)break;this.vi.shift();this.Sm(c.data)}};
An.prototype.close=function(){2!=this.state&&(this.Dc!==l&&(u.clearInterval(this.Dc),this.Dc=l),this.state=2)};function Dn(a,b,c,d){yn.call(this,"none",a.Zd?0:1,b);this.Pa.V(2,this.lo,this);this.Pa.V(3,this.oo,this);this.Pa.V(6,this.so,this);this.Pa.V(7,this.to,this);this.Pa.V(8,this.ro,this);this.Pa.V(4,this.ao,this);this.Pa.V(5,this.bo,this);this.Ea=a;H(this,this.Ea);this.Md=0;this.vg=new qf;a=new si;a.Pk=qb()||"";a.type=tb?"opera":F?"ie":ub?"gecko":vb?"webkit":ti;a.platform=ob?"mac":pb?"windows":zb?"linux":ui;a.fe=ri;a.Ld=Gf?"chrome":Df?"iphone":Ef?"ipad":Ff?"android":wb?"mobile":vi;this.send(El(b,new yi("none",
0,0,d,a)));this.Sj=l}C(Dn,yn);t=Dn.prototype;t.Zd=function(){return this.Ea.Zd};function oi(a){a.Sj||(a.Sj=a.Ib[a.id]||l);return a.Sj}t.Eb=function(a){if(0==this.state)for(;this.Ea.rg;){var b=this.Ea.read();if(!b)return;xn(this.Pa,b);return}else for(var c=dc();this.Ea.rg;){b=this.Ea.read();if(!b)break;oi(this).t.fn+=b.data.byteLength;xn(this.Pa,b);if(a&&dc()-c>=a)break}2==this.Ea.state&&En(this,1)};
t.lo=function(a,b,c){a:{zl.If=c.ba();zl.Ee=c.ba();a=c.ba();zl.Rf.length=a;for(b=0;b<a;b++){zl.Rf[b]=new sl;var d=c,e=zl.Rf[b]||tl;e.dc=Ch(d);e.pa=Dh(d);if(!e){c=l;break a}}c=zl}if(!c)return n;d=Gm(this.S)-c.Ee/1E3;a=this.S;b=c.If/1E3;d=Math.abs(d)/2;a.pa=d;b+=d;b<a.gb&&(b=a.gb);a.gb=b;b=Gm(a);b=a.gb-b;d=b-a.Fe;a.Fe=0.3<Math.abs(d)?b:0<d?a.Fe+0.0010:a.Fe-0.0010;a.Gl=i;for(a=0;a<c.Rf.length;a++)if(b=c.Rf[a],d=this.ni[b.dc]||l)d.t.Xk=b.pa;return i};
t.oo=function(a,b,c){a:{a=Al.info||new rl;a.Jg=c.s();a.name=c.s();a.location=c.s();a.wj=c.s();a.xj=c.s();a.Wj=c.ba();a.yh={};b=c.ba();for(var d=0;d<b;d++){var e,f;e=c.s();f=c.s();a.yh[e]=f}if(a){a=c.ba();Al.Ga.length=a;for(b=0;b<a;b++)if(Al.Ga[b]=new yi,!wl(c,Al.Ga[b])){c=l;break a}c=Al}else c=l}if(!c)return n;this.info=c.info.q();for(a=0;a<c.Ga.length;a++)this.we(zi(c.Ga[a]));this.state=1;this.vg.w(this);c=B(function(){if(2!=this.state){var a=mi(this.S)+this.S.pa,b=Gm(this.S),c=Math.min(65535,1E3*
this.S.pa|0);this.send(yl(1E3*a|0,1E3*b|0,c))}2==this.state&&u.clearInterval(h)},this);var h=u.setInterval(c,500);c();for(c=0;c<this.Ca.length;c++)this.Ca[c].ol();return i};t.so=function(a,b,c){a=!wl(c,Jl.Hc)?l:Jl;if(!a)return n;this.we(zi(a.Hc));return i};t.to=function(a,b,c){Kl.j=c.s();Kl.reason=c.ba();if(!Kl)return n;a=this.Ib[Kl.j]||l;if(!a)return i;a.Md=Kl.reason;this.Dh(a);return i};
t.ro=function(a,b,c){Ml.j=c.s();b=!ul(c,Ml.info)?l:Ml;if(!b)return n;a=this.Ib[b.j]||l;if(!a)return i;b=b.info.M;b=xi(b);a.info.M=b;for(b=0;b<this.Ca.length;b++)this.Ca[b].Km(a);return i};t.ao=function(a,b,c){Cl.Bk=Dh(c);Cl.Di=Dh(c);a=!wl(c,Cl.Hc)?l:Cl;if(!a)return n;this.id=a.Hc.j;return i};t.bo=function(a,b,c){Gl.reason=c.ba();if(!Gl)return n;M("disconnected by server",Gl.reason);En(this,Gl.reason);return i};
function En(a,b){a.state=2;a.Md=b;K(a.Ea);for(var c=0;c<a.Ca.length;c++)a.Ca[c].tl();a.vg.yb||a.vg.A(a.Md)}t.disconnect=function(){this.send(Il());this.Ea.flush(i);En(this,0)};t.send=function(a){a&&(2==this.Ea.state?En(this,1):2!=this.state&&(1==this.state&&(oi(this).t.gn+=a.byteLength),this.Ea.write(a)))};function Fn(a,b){if(!a)return n;for(var c=a.constructor,d=0;d<b.length;d++){var e=b[d];if(c==e||c.name==e)return i;A(e)&&(e=u[e]);if(e&&(c==e||c.name==e.name))return i}return n}function Gn(a){for(var b=new Uint8Array(2*a.length),c=0,d=0;d<a.length;d++){for(var e=a.charCodeAt(d);255<e;)b[c++]=e,e>>=8;b[c++]=e}return b.subarray(0,c).buffer}function Hn(a){a=new Uint8Array(a);for(var b=Array(a.length),c=0;c<b.length;c++)b[c]=a[c];return String.fromCharCode.apply(l,b)};function In(a){An.call(this,a);this.C=new WebSocket(a);this.C.binaryType="arraybuffer";this.hl=B(this.ko,this);this.fl=B(this.af,this);this.el=B(this.$n,this);this.gl=B(this.Dj,this);this.C.addEventListener("open",this.hl,n);this.C.addEventListener("error",this.fl,n);this.C.addEventListener("close",this.el,n);this.C.addEventListener("message",this.gl,n)}C(In,An);t=In.prototype;t.ko=function(){this.state=1;this.flush()};t.af=function(a){M("error",a)};t.$n=function(a){M("close",a);this.close()};
t.Dj=function(a){a=a.data;var b=l;a instanceof ArrayBuffer?b=new zn(a):A(a)&&(b=new zn(Gn(a)));b&&Cn(this,b)};t.Sm=function(a){1!=this.C.readyState?this.close():this.C.send(a)};t.close=function(){this.C.removeEventListener("open",this.hl,n);this.C.removeEventListener("error",this.fl,n);this.C.removeEventListener("close",this.el,n);this.C.removeEventListener("message",this.gl,n);this.C.close();In.a.close.call(this)};function Jn(a,b){An.call(this,a);this.Zd=i;this.state=1;this.C=b;this.Cp=!!b.webkitPostMessage&&!Fn(b,["MessagePort"]);this.kn=!tb;var c=this;this.C.onmessage=function(a){c.Dj(a)};this.C.onerror=function(a){M("port error",a)};this.il=B(this.qo,this);u.addEventListener("unload",this.il,n)}C(Jn,An);Jn.prototype.Dj=function(a){a=a.data;var b=l;a instanceof ArrayBuffer?b=new zn(a):A(a)?b=new zn(Gn(a)):a&&a.close&&this.close();b&&Cn(this,b)};Jn.prototype.qo=function(){this.close()};
Jn.prototype.Sm=function(a){this.Cp?this.C.webkitPostMessage(a,[a]):this.kn?this.C.postMessage(a):this.C.postMessage(Hn(a))};Jn.prototype.close=function(){this.C.onmessage=l;u.removeEventListener("unload",this.il,n);try{this.C.postMessage({close:i}),this.C.close&&this.C.close()}catch(a){}Jn.a.close.call(this)};function Kn(a,b){var c=l;if(Fn(a,["Worker","SharedWorker","MessagePort"]))c=new Jn(a,a);else if(A(a))c=new In(a);else return c=new qf,c.A(l),c;var d=new Dn(c,7,0,b),c=d.vg,e=u.setInterval(function(){0==d.state&&d.Eb();0!=d.state&&u.clearInterval(e)},16);return c};function Ln(a){G.call(this);this.d=a;this.ga=[];this.Xd=l}C(Ln,G);Ln.prototype.b=function(){this.Xd&&(Ac(this.Xd,"navigate",this.yo,n,this),K(this.Xd),this.Xd=l);for(;this.ga.length;){var a=this.ga.pop();a.J=l;K(a)}Ln.a.b.call(this)};Ln.prototype.yo=function(a){M("navigate: ",a.Bq,a.lq)};function Mn(a){if(a.Xd){for(var b=[],c=0;c<a.ga.length;c++)b.push(a.ga[c].wo);b=b.join("/");a.Xd.wq(b)}}function Nn(a,b){On(a,i);ll(a,b,i);Mn(a)}function ll(a,b,c){b.J=a;a.ga.push(b);Pn(a);b.ma();c||Mn(a)}
function Pk(a,b){var c=a.ga.pop();c.J=l;K(c);Pn(a);b||Mn(a)}function On(a,b){for(;a.ga.length;)Pk(a,i);b||Mn(a)}function Pn(a){for(var b=i,c=i,d=a.ga.length-1;0<=d;d--){var e=a.ga[d];e.setActive(b);e.Bn=c;e.p&6&&(c=b=n);e.p&8&&(c=n)}}Ln.prototype.update=function(a){for(var b=0;b<this.ga.length;b++)this.ga[b].update(a)};Ln.prototype.B=function(a){for(var b=0;b<this.ga.length;b++){var c=this.ga[b];c.Nl()&&c.B(a)}};function Qn(a,b,c){Lm.call(this,b);this.d=a;this.Sa=c;this.Xa=new Nm(this,this.d);H(this,this.Xa);this.Ge.push(this.Xa);this.z=new Ym(this.d);H(this,this.z);this.z.Jf(n);this.v=new un(this,this.z.Ba);H(this,this.v);this.Ge.push(this.v);a=B(this.Em,this);this.v.T.uj=a;this.Z=new fn(this.d,this.z.canvas.Tc);H(this,this.Z);this.I=new Rf(0,this.Xa,this.Z);H(this,this.I);this.va=new Qm(this,this.d);H(this,this.va);this.Ge.push(this.va);this.nh=new Rm(this.Xa,this.va);H(this,this.nh);this.dg=new Sd(this.Xa,
this.va.context);this.va.kh(this.dg);this.J=new Ln(this.d);H(this,this.J);this.Bb=n}C(Qn,Lm);t=Qn.prototype;t.b=function(){Qn.a.b.call(this)};function Rn(a){var b=a.v,c=b.H,d=a.Sa.ea,d=Math.min(Math.max(d,0.1),10);c.Oh=d;b.H.Xl=a.Sa.jb;a.Bb&&a.Sa.jb?qn(b.H):sn(b.H);b=a.nh;c=a.Sa.Sb;b.fh!=c&&(c&&b.stop(),b.fh=c);if(a.Bb){var e=l;a=a.J;b=function(a){if(a instanceof om)return e=a,n};for(c=0;c<a.ga.length&&b.call(u,a.ga[c])!==n;c++);a=e}else a=l;a&&a.pk()}
t.start=function(){Rn(this);var a=new Dm(this.d,this.z.Ba);Nn(this.J,a);N(this.Z.le({alpha:n,antialias:n}),function(){N(this.I.le(),function(){On(this.J);pm(this);if(this.Pj.host)vm(this,this.Pj.host);else{this.Bb&&(this.Bb=n);var a=new tm(this,this.z.Ba);Nn(this.J,a)}},function(a){Sn(this,"Unable to setup graphics resources",a)},this)},function(a){Sn(this,"Unable to create the graphics context",a)},this)};
function Sn(a,b,c){On(a.J);a=kl(a.J,a.z.Ba,"setup",b,c||l);N(a,function(a){"reload"==a&&window.location.reload()},l,g)}t.update=function(a){this.J.update(a)};t.B=function(a){this.J.B(a)};function fm(a){a.Sa.Ta||Rd(a.dg,"click",zd)}function $l(a){a.Sa.Ta||Rd(a.dg,"player_leave",zd)}
t.Em=function(){fm(this);var a=!this.z.eh,b=this.z;if(b.eh){if(b.Rd){var c=b.d.N;(c.cancelFullScreen||c.mozCancelFullScreen||c.webkitCancelFullScreen).call(c);b.eh=n}}else b.Rd&&(b=b.Ba,(b.requestFullScreen||b.mozRequestFullScreen||b.webkitRequestFullScreen).call(b,Element.ALLOW_KEYBOARD_INPUT));this.Bb&&(a&&this.v.H.ai&&this.Sa.jb)&&qn(this.v.H)};function gm(a){a.Bb&&a.v.ca(n);var b=new xm(a.d,a.z.Ba,a.Sa);ll(a.J,b);N(b.Ob,function(a){fm(this);"save"==a&&Rn(this);this.Bb&&this.v.ca(i)},l,a)}
function hm(a){function b(){fm(this);this.Bb&&this.v.ca(i)}a.Bb&&a.v.ca(n);var c=new rm(a.d,a.z.Ba);ll(a.J,c);N(c.Ob,b,b,a)}
function vm(a,b){var c,d=a.J,e=new jl(d.d,a.z.Ba,gl,{lp:b});ll(d,e);c=e.Ob;var f=new qf,h=new Mb(b);""!=h.Xb&&""!=h.Sc&&""!=h.Bf||f.A('Invalid address format: "'+b+'"');var j=new wi;j.M=xi(a.Sa.userName);if(!f.yb)switch(h.Xb){case "ws":d=Kn(h.toString(),j);N(d,f.w,f.A,f);break;case "local":var k=function(){if(u.Worker){var a="server-"+h.Sc+"",b;Gf&&u.SharedWorker?(a=new SharedWorker("worker-server.js",a),b=a.port):b=a=new Worker("worker-server.js");a.onerror=function(a){M("Error in worker: "+a.message+
"("+a.filename+":"+a.nq+")")};N(Kn(b,j),function(a){b.addEventListener("message",function(a){if(a.data instanceof Object&&"gf_log"==a.data.type){var b=a.data.args;b.unshift("{server}");window.console.log.apply(window.console,b);a.stopPropagation()}},i);f.w(a)},function(a){f.A(a)})}else f.A("Workers not supported")};if(Gf){var m=new qf;u.webkitStorageInfo?u.webkitStorageInfo.requestQuota(1,4294967296,function(a){m.w(a)},function(a){m.A(a)}):m.A(l);N(m,function(a){4294967296>a?f.A(l):k.call(this)},
function(){M("unable to get quota - no saving!");k.call(this)},a)}else k.call(a);break;default:f.A('Unsupported scheme "'+h.Xb+'"')}N(f,function(a){M("Connection established to "+b);c.cancel();this.Bb=i;a=new om(this,a);Nn(this.J,a)},function(a){M("Error connecting to "+b,a);c.cancel();var d=this.J;a=new jl(d.d,this.z.Ba,hl,{reason:a});ll(d,a);N(a.Ob,function(a){"reload"==a&&window.location.reload()},l,g)},a)};function Tn(a){this.N=a}var Un=/\s*;\s*/;t=Tn.prototype;t.set=function(a,b,c,d,e,f){/[;=\s]/.test(a)&&ba(Error('Invalid cookie name "'+a+'"'));/[;\r\n]/.test(b)&&ba(Error('Invalid cookie value "'+b+'"'));x(c)||(c=-1);e=e?";domain="+e:"";d=d?";path="+d:"";f=f?";secure":"";c=0>c?"":0==c?";expires="+(new Date(1970,1,1)).toUTCString():";expires="+(new Date(sa()+1E3*c)).toUTCString();this.N.cookie=a+"="+b+e+d+c+f};
t.get=function(a,b){for(var c=a+"=",d=(this.N.cookie||"").split(Un),e=0,f;f=d[e];e++){if(0==f.lastIndexOf(c,0))return f.substr(c.length);if(f==a)return""}return b};t.remove=function(a,b,c){var d=this.kc(a);this.set(a,"",0,b,c);return d};t.Yc=function(){return Vn(this).keys};t.Ab=function(){return Vn(this).Lp};t.ib=function(){return!this.N.cookie?0:(this.N.cookie||"").split(Un).length};t.kc=function(a){return x(this.get(a))};t.clear=function(){for(var a=Vn(this).keys,b=a.length-1;0<=b;b--)this.remove(a[b])};
function Vn(a){a=(a.N.cookie||"").split(Un);for(var b=[],c=[],d,e,f=0;e=a[f];f++)d=e.indexOf("="),-1==d?(b.push(""),c.push(e)):(b.push(e.substring(0,d)),c.push(e.substring(d+1)));return{keys:b,Lp:c}};function Wn(a){this.cb=a;this.userName="User";this.ea=1;this.jb=i;this.tb=8;this.Sb=this.Ta=n}Wn.prototype.q=function(){var a=new Wn(this.cb);a.userName=this.userName;a.ea=this.ea;a.jb=this.jb;a.tb=this.tb;a.Ta=this.Ta;a.Sb=this.Sb;return a};Wn.prototype.reset=function(){this.userName="User";this.ea=1;this.jb=i;this.tb=8;this.Sb=this.Ta=n};
Wn.prototype.load=function(){var a=new Tn(this.cb.N);this.userName=a.get("s_un",this.userName);this.userName=decodeURIComponent(this.userName.replace(/\+/g," "));1>this.userName.length&&(this.userName="User");this.ea=Number(a.get("s_ms",String(this.ea)));if(0>=this.ea||10<this.ea)this.ea=1;this.jb="true"==a.get("s_ml",String(this.jb));this.tb=Number(a.get("s_vd",String(this.tb)))|0;if(1>=this.tb||16<this.tb)this.tb=8;this.Ta="true"==a.get("s_sm",String(this.Ta));this.Sb="true"==a.get("s_mm",String(this.Sb))};
Wn.prototype.save=function(){var a=new Tn(this.cb.N);a.set("s_un",encodeURIComponent(String(this.userName)));a.set("s_ms",String(this.ea));a.set("s_ml",String(this.jb));a.set("s_vd",String(this.tb));a.set("s_sm",String(this.Ta));a.set("s_mm",String(this.Sb))};ga("blk.client.start",function(a,b,c,d){a=new Kd(a);c=new cc(c,d);d=new Wn(a);d.load();(new Qn(a,c,d)).start()});
