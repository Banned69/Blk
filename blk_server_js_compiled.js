function h(a){throw a;}var i=void 0,m=!0,n=null,p=!1;function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function s(a){return function(){return this[a]}}function ca(a){return function(){return a}}var t,ea=ea||{},u=this;function fa(a,b){var c=a.split("."),d=u;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&ga(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function ha(a){a=a.split(".");for(var b=u,c;c=a.shift();)if(b[c]!=n)b=b[c];else return n;return b}function v(){}
function ia(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ga(a){return a!==i}function ka(a){return"array"==ia(a)}function la(a){var b=ia(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ma(a){return"string"==typeof a}function na(a){return"function"==ia(a)}function oa(a){var b=typeof a;return"object"==b&&a!=n||"function"==b}function pa(a){return a[qa]||(a[qa]=++ra)}var qa="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),ra=0;
function sa(a,b,c){return a.call.apply(a.bind,arguments)}function ta(a,b,c){a||h(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function x(a,b,c){x=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?sa:ta;return x.apply(n,arguments)}var ua=Date.now||function(){return+new Date};
function z(a,b){function c(){}c.prototype=b.prototype;a.d=b.prototype;a.prototype=new c;a.prototype.constructor=a};function va(a,b){this.attributes=[new wa(3,0),new wa(2,24)];this.ll=a;this.vl=b}function wa(a,b){this.size=a;this.type=5126;this.Fl=p;this.Ll=32;this.offset=b};function xa(){};function ya(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}ya.prototype.BYTES_PER_ELEMENT=4;ya.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};ya.prototype.toString=Array.prototype.join;"undefined"==typeof Float32Array&&(ya.BYTES_PER_ELEMENT=4,ya.prototype.BYTES_PER_ELEMENT=ya.prototype.BYTES_PER_ELEMENT,ya.prototype.set=ya.prototype.set,ya.prototype.toString=ya.prototype.toString,fa("Float32Array",ya));function za(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}za.prototype.BYTES_PER_ELEMENT=8;za.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};za.prototype.toString=Array.prototype.join;if("undefined"==typeof Float64Array){try{za.BYTES_PER_ELEMENT=8}catch(Ia){}za.prototype.BYTES_PER_ELEMENT=za.prototype.BYTES_PER_ELEMENT;za.prototype.set=za.prototype.set;za.prototype.toString=za.prototype.toString;fa("Float64Array",za)};function A(){return new Float32Array(3)}function Ja(a,b,c){var d=A();B(d,a,b,c);return d}function B(a,b,c,d){a[0]=b;a[1]=c;a[2]=d}function Ka(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2]}function La(a,b,c){c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2]}function Ma(a,b,c){c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b}function Na(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)}function Oa(a,b){var c=a[0]-b[0],d=a[1]-b[1],e=a[2]-b[2];return c*c+d*d+e*e}
function Pa(a,b,c){var d=b[0]-a[0],e=b[1]-a[1];a=b[2]-a[2];(b=Math.sqrt(d*d+e*e+a*a))?(b=1/b,c[0]=d*b,c[1]=e*b,c[2]=a*b):c[0]=c[1]=c[2]=0}function Qa(a,b){return a.length==b.length&&a[0]==b[0]&&a[1]==b[1]&&a[2]==b[2]};function Ra(){var a=A(),b=A();this.min=a;this.max=b}function Sa(a,b,c,d,e,f){var g=new Ra;g.min[0]=a<d?a:d;g.min[1]=b<e?b:e;g.min[2]=c<f?c:f;g.max[0]=a<d?d:a;g.max[1]=b<e?e:b;g.max[2]=c<f?f:c;return g}
function Ta(a,b,c){var d=a.min;a=a.max;var e=Ua[0];e[0]=Math.abs(b[3]);e[1]=Math.abs(b[4]);e[2]=Math.abs(b[5]);var f=0,g=1,k=2;e[0]<e[2]&&(f=2,k=0);e[1]<e[k]?(g=k,k=1):e[1]>e[f]&&(g=f,f=1);var j=0,l=Number.MAX_VALUE,r=b[3+f],q=(d[f]-b[f])/r,f=(a[f]-b[f])/r;q>f&&(r=q,q=f,f=r);if(!(q>l||f<j)){q>j&&(j=q);f<l&&(l=f);if(1E-6>e[g]){if(b[g]<d[g]||b[g]>a[g]||b[k]<d[k]||b[k]>a[k])return}else{r=b[3+g];q=(d[g]-b[g])/r;f=(a[g]-b[g])/r;q>f&&(r=q,q=f,f=r);if(q>l||f<j)return;q>j&&(j=q);f<l&&(l=f);if(1E-6>e[k]){if(b[k]<
d[k]||b[k]>a[k])return}else{r=b[3+k];q=(d[k]-b[k])/r;f=(a[k]-b[k])/r;q>f&&(r=q,q=f,f=r);if(q>l||f<j)return;q>j&&(j=q)}}c&&(c[0]=b[0]+b[3]*j,c[1]=b[1]+b[4]*j,c[2]=b[2]+b[5]*j)}}var Ua=[A(),A(),A()];function C(){return new Float32Array(4)}function Va(a,b,c,d){var e=C();Wa(e,a,b,c,d);return e}function Wa(a,b,c,d,e){a[0]=b;a[1]=c;a[2]=d;a[3]=e}function Xa(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3]}function Ya(a,b){var c=1/256;b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c;b[3]=a[3]*c};function Za(){var a=new Float32Array(16);a[0]=a[5]=a[10]=a[15]=1;return a}function $a(a,b,c,d,e,f,g,k,j){a[0]=b;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=d;a[11]=e;a[12]=f;a[13]=g;a[14]=k;a[15]=j}
function ab(a,b,c){var d=a[0],e=a[1],f=a[2],g=a[3],k=a[4],j=a[5],l=a[6],r=a[7],q=a[8],w=a[9],y=a[10],G=a[11],I=a[12],E=a[13],F=a[14];a=a[15];var K=b[0],da=b[1],X=b[2],ja=b[3],Aa=b[4],Ba=b[5],Ca=b[6],Da=b[7],Ea=b[8],Fa=b[9],Ga=b[10],Ha=b[11],H=b[12],zd=b[13],Ad=b[14];b=b[15];c[0]=d*K+k*da+q*X+I*ja;c[1]=e*K+j*da+w*X+E*ja;c[2]=f*K+l*da+y*X+F*ja;c[3]=g*K+r*da+G*X+a*ja;c[4]=d*Aa+k*Ba+q*Ca+I*Da;c[5]=e*Aa+j*Ba+w*Ca+E*Da;c[6]=f*Aa+l*Ba+y*Ca+F*Da;c[7]=g*Aa+r*Ba+G*Ca+a*Da;c[8]=d*Ea+k*Fa+q*Ga+I*Ha;c[9]=e*Ea+
j*Fa+w*Ga+E*Ha;c[10]=f*Ea+l*Fa+y*Ga+F*Ha;c[11]=g*Ea+r*Fa+G*Ga+a*Ha;c[12]=d*H+k*zd+q*Ad+I*b;c[13]=e*H+j*zd+w*Ad+E*b;c[14]=f*H+l*zd+y*Ad+F*b;c[15]=g*H+r*zd+G*Ad+a*b}
function bb(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],k=a[5],j=a[6],l=a[7],r=a[8],q=a[9],w=a[10],y=a[11],G=a[12],I=a[13],E=a[14],F=a[15],K=c*k-d*g,da=c*j-e*g,X=c*l-f*g,ja=d*j-e*k,Aa=d*l-f*k,Ba=e*l-f*j,Ca=r*I-q*G,Da=r*E-w*G,Ea=r*F-y*G,Fa=q*E-w*I,Ga=q*F-y*I,Ha=w*F-y*E,H=K*Ha-da*Ga+X*Fa+ja*Ea-Aa*Da+Ba*Ca;0!=H&&(H=1/H,b[0]=(k*Ha-j*Ga+l*Fa)*H,b[1]=(-d*Ha+e*Ga-f*Fa)*H,b[2]=(I*Ba-E*Aa+F*ja)*H,b[3]=(-q*Ba+w*Aa-y*ja)*H,b[4]=(-g*Ha+j*Ea-l*Da)*H,b[5]=(c*Ha-e*Ea+f*Da)*H,b[6]=(-G*Ba+E*X-F*da)*H,b[7]=(r*Ba-w*
X+y*da)*H,b[8]=(g*Ga-k*Ea+l*Ca)*H,b[9]=(-c*Ga+d*Ea-f*Ca)*H,b[10]=(G*Aa-I*X+F*K)*H,b[11]=(-r*Aa+q*X-y*K)*H,b[12]=(-g*Fa+k*Da-j*Ca)*H,b[13]=(c*Fa-d*Da+e*Ca)*H,b[14]=(-G*ja+I*da-E*K)*H,b[15]=(r*ja-q*da+w*K)*H)}function cb(a,b,c){var d=b[0],e=b[1];b=b[2];var f=1/(d*a[3]+e*a[7]+b*a[11]+a[15]);c[0]=(d*a[0]+e*a[4]+b*a[8]+a[12])*f;c[1]=(d*a[1]+e*a[5]+b*a[9]+a[13])*f;c[2]=(d*a[2]+e*a[6]+b*a[10]+a[14])*f}new Float64Array(3);new Float64Array(3);new Float64Array(4);new Float64Array(4);new Float64Array(4);new Float64Array(16);function db(){this.name=n;this.index=0;this.parent=n;this.children=[];this.transform=Za();this.Va=new Ra;this.sd=C()};function eb(a){this.Ph=a;a=a.qd;this.Qi=new Float32Array(16*a.length);this.hl=new Float32Array(16*a.length);this.Tk=m;this.reset()}eb.prototype.reset=function(){this.Tk=m;for(var a=this.Ph.qd,b=0,c=0;b<a.length;b++,c+=16)for(var d=a[b],e=0;16>e;e++)this.Qi[c+e]=d.transform[e]};function D(){0!=fb&&(this.tl=Error().stack,gb[pa(this)]=this)}var fb=0,gb={};D.prototype.xf=p;D.prototype.Ac=function(){if(!this.xf&&(this.xf=m,this.b(),0!=fb)){var a=pa(this);delete gb[a]}};function J(a,b){a.Id||(a.Id=[]);a.Id.push(b)}D.prototype.b=function(){this.Id&&hb.apply(n,this.Id);if(this.Wh)for(;this.Wh.length;)this.Wh.shift()()};function L(a){a&&"function"==typeof a.Ac&&a.Ac()}function hb(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];la(d)?hb.apply(n,d):L(d)}};function ib(a){Error.captureStackTrace?Error.captureStackTrace(this,ib):this.stack=Error().stack||"";a&&(this.message=String(a))}z(ib,Error);ib.prototype.name="CustomError";function jb(a,b){for(var c=1;c<arguments.length;c++){var d=String(arguments[c]).replace(/\$/g,"$$$$");a=a.replace(/\%s/,d)}return a}function kb(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function lb(a){if(!mb.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(nb,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(ob,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(pb,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(qb,"&quot;"));return a}var nb=/&/g,ob=/</g,pb=/>/g,qb=/\"/g,mb=/[&<>\"]/;Math.random();function rb(a){D.call(this);this.id=a;this.Va=new Ra;this.sd=C();this.oj=n;this.pk=[];this.qd=[];this.ol={}}z(rb,D);rb.prototype.Gd=function(){return new eb(this)};function sb(){this.dk=new xa;this.primitiveType=4;this.wl=this.ej=0};function tb(){var a=new rb("pumpkin"),b=a.Va,c=[-0.5,-1,0,0.5,1,0.5],d=b.min,b=b.max;if(c.length){var e=0;B(d,c[e],c[e+1],c[e+2]);B(b,c[e],c[e+1],c[e+2]);e++;for(var f=1;f<c.length/3;f++,e++)c[e]<d[0]?d[0]=c[e]:c[e]>b[0]&&(b[0]=c[e]),c[e+1]<d[1]?d[1]=c[e+1]:c[e+1]>b[1]&&(b[1]=c[e+1]),c[e+2]<d[2]?d[2]=c[e+2]:c[e+2]>b[2]&&(b[2]=c[e+2])}else B(d,0,0,0),B(b,0,0,0);Wa(a.sd,0,0,0,1);c=Va(96,112,112,128);d=Va(112,112,128,128);b=Va(96,96,112,112);Ya(c,c);Ya(d,d);Ya(b,b);c=new Float32Array([-0.5,-1,0.5,0,
0,1,c[2],c[3],0.5,-1,0.5,0,0,1,c[0],c[3],0.5,1,0.5,0,0,1,c[0],c[1],-0.5,1,0.5,0,0,1,c[2],c[1],-0.5,-1,-0.5,0,0,-1,d[0],d[3],-0.5,1,-0.5,0,0,-1,d[0],d[1],0.5,1,-0.5,0,0,-1,d[2],d[1],0.5,-1,-0.5,0,0,-1,d[2],d[3],-0.5,1,-0.5,0,1,0,b[2],b[1],-0.5,1,0.5,0,1,0,b[2],b[3],0.5,1,0.5,0,1,0,b[0],b[3],0.5,1,-0.5,0,1,0,b[0],b[1],-0.5,-1,-0.5,0,-1,0,c[0],c[1],0.5,-1,-0.5,0,-1,0,c[2],c[1],0.5,-1,0.5,0,-1,0,c[2],c[3],-0.5,-1,0.5,0,-1,0,c[0],c[3],0.5,-1,-0.5,1,0,0,c[0],c[3],0.5,1,-0.5,1,0,0,c[0],c[1],0.5,1,0.5,1,
0,0,c[2],c[1],0.5,-1,0.5,1,0,0,c[2],c[3],-0.5,-1,-0.5,-1,0,0,c[2],c[3],-0.5,-1,0.5,-1,0,0,c[0],c[3],-0.5,1,0.5,-1,0,0,c[0],c[1],-0.5,1,-0.5,-1,0,0,c[2],c[1]]);d=new Uint16Array(36);for(f=e=b=0;6>b;b++,e+=6,f+=4)d[e+0]=0+f,d[e+1]=1+f,d[e+2]=2+f,d[e+3]=0+f,d[e+4]=2+f,d[e+5]=3+f;a.oj=new va(c.buffer,d);c=new sb;a.pk.push(c);c.primitiveType=4;c.ej=36;c=new db;c.index=a.qd.length;c.name=n;c.parent=n;a.qd.push(c);d=c.Va;b=a.Va;Ka(d.min,b.min);Ka(d.max,b.max);Xa(c.sd,a.sd);return a};var ub=Array.prototype,vb=ub.indexOf?function(a,b,c){return ub.indexOf.call(a,b,c)}:function(a,b,c){c=c==n?0:0>c?Math.max(0,a.length+c):c;if(ma(a))return!ma(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},wb=ub.forEach?function(a,b,c){ub.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ma(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},xb=ub.filter?function(a,b,c){return ub.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=
0,g=ma(a)?a.split(""):a,k=0;k<d;k++)if(k in g){var j=g[k];b.call(c,j,k,a)&&(e[f++]=j)}return e},yb=ub.map?function(a,b,c){return ub.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=ma(a)?a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e},zb=ub.some?function(a,b,c){return ub.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ma(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return m;return p};
function Ab(a){if(!ka(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0}function Bb(a,b){var c=vb(a,b),d;(d=0<=c)&&ub.splice.call(a,c,1);return d}function Cb(a){return ub.concat.apply(ub,arguments)}function Db(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function Eb(a,b){ub.sort.call(a,b||Fb)}function Fb(a,b){return a>b?1:a<b?-1:0};var Gb=u.postMessage?[u]:[];function M(a){for(var b=0;b<Gb.length;b++){for(var c=Array(arguments.length),d=0;d<c.length;d++)c[d]=arguments[d];try{Gb[b].postMessage({type:"gf_log",args:c},n)}catch(e){}}}if(u.console)var Hb=u.console,M=x(Hb.log,Hb);function Ib(){D.call(this);this.Rc={}}z(Ib,D);Ib.prototype.b=function(){for(var a in this.Rc)L(this.Rc[a]);this.Rc={};Ib.d.b.call(this)};Ib.prototype.update=aa();function Jb(a){Ib.call(this);this.rc=a;this.Rh={}}z(Jb,Ib);function Kb(a){Jb.call(this,a);this.Rh.pumpkin={id:"pumpkin",bj:tb}}z(Kb,Jb);function Lb(){this.wh="improved";this.te=0};function Mb(){this.p=Array(256)}function Nb(a,b){a.p[b.id]=b};function Ob(a,b,c,d,e,f,g){this.Bd=a;this.Pg=b;this.Qg=c;this.Rg=d;this.U=e;this.yf=f;this.ai=g};function Pb(a,b,c,d){this.map=a;this.x=b;this.y=c;this.k=d;this.Va=Sa(b,c,d,b+16,c+128,d+16);this.state=Qb;this.Qb=m;this.version=this.Ca=0;this.U=new Uint16Array(32768);this.Hl=n}var Qb=0;Pb.prototype.fill=function(a){for(var b=0;32768>b;b++)this.U[b]=a[b];this.Qb=m;this.state=2;this.map.ce(this);this.map.Ve(this)};Pb.prototype.ma=function(a,b,c,d){b=(a&15)+16*(c&15)+256*(b&127);a=this.U[b];this.U[b]=d;a!=d&&!this.Qb&&(d=this.Qb,this.Qb=m,d||this.map.Ve(this));return a};
Pb.prototype.Rf=function(a){var b=Rb[0];Ta(this.Va,a,b);var c=Math.floor(b[0]),d=Math.floor(b[1]),e=Math.floor(b[2]),f=0==a[3]?0:0>a[3]?-1:1,g=0==a[4]?0:0>a[4]?-1:1,k=0==a[5]?0:0>a[5]?-1:1,j=(c+(0<f?1:0)-b[0])/a[3],l=(d+(0<g?1:0)-b[1])/a[4],r=(e+(0<k?1:0)-b[2])/a[5];isNaN(j)&&(j=Number.POSITIVE_INFINITY);isNaN(l)&&(l=Number.POSITIVE_INFINITY);isNaN(r)&&(r=Number.POSITIVE_INFINITY);var q=f/a[3],w=g/a[4],y=k/a[5];isNaN(q)&&(q=Number.POSITIVE_INFINITY);isNaN(w)&&(w=Number.POSITIVE_INFINITY);isNaN(y)&&
(y=Number.POSITIVE_INFINITY);for(var G=this.U,I=b=0;256>I;I++){var E=c-this.x,F=d-this.y,K=e-this.k;if(0<=E&&(16>E&&0<=F&&128>F&&0<=K&&16>K)&&(b=G[E+16*K+256*F],b>>8))break;j<l&&j<r?(j+=q,c+=f):l<r?(l+=w,d+=g):(r+=y,e+=k)}return b?(f=Sb,g=c+1,k=d+1,j=e+1,B(f.min,c,d,e),B(f.max,g,k,j),f=A(),Ta(Sb,a,f),new Ob(this,c,d,e,b,Math.sqrt(Oa(a,f)),f)):n};var Rb=[A(),A()],Sb=new Ra;function Tb(){D.call(this);this.wa={};this.Kb=[];this.Fe=this.Ci=0}z(Tb,D);t=Tb.prototype;t.b=function(){this.Kb.length=0;Tb.d.b.call(this)};t.update=function(){for(;this.Kb.length;){var a=this.Kb.shift();Ub(this,a)}};t.get=function(a,b,c){return 0!=b>>7?n:this.wa[(a>>4&65535)<<16|c>>4&65535]||n};t.add=function(a){this.wa[(a.x>>4&65535)<<16|a.k>>4&65535]=a;0<a.Ca||this.Kb.push(a);this.Ci++;this.Fe+=65792};t.remove=function(a){Ub(this,a);0<a.Ca||Bb(this.Kb,a)};
function Ub(a,b){delete a.wa[(b.x>>4&65535)<<16|b.k>>4&65535];a.Fe-=65792;a.Ci--}t.ae=function(a){this.Kb.push(a)};t.be=function(a){Bb(this.Kb,a)};function Vb(){D.call(this);this.Mk=Ja(0,191/255,1);this.jl=Ja(110/255,110/255,110/255);this.Nl=Ja(1,1,-0.5);this.Ml=Ja(130/255,130/255,130/255);this.kj=Ja(1,1,1);Ka(this.kj,this.Mk)}z(Vb,D);Vb.prototype.update=aa();function Wb(a,b,c,d,e){this.id=a;this.name=b;this.dk=c;this.t=d;this.Kl=0;this.yl=1;this.Ol=0;this.kl=e};function Xb(a,b,c,d,e){Wb.call(this,a,b,c,d,e)}z(Xb,Wb);function Yb(a,b){var c=Va(0,0,0,0);this.t=a;this.il=b||n;this.Jl=n;this.color=c||C()};var Zb=new Yb(17,"block_gravel"),$b=new Yb(17,"block_stone"),ac=new Yb(17,"block_wood"),bc=new Yb(97,"block_stone"),cc=new Yb(17,"block_cloth");function dc(){Wb.call(this,6,"Red Cloth",cc,17,129)}z(dc,Xb);function ec(){Wb.call(this,7,"Green Cloth",cc,17,145)}z(ec,Xb);function fc(){Wb.call(this,8,"Yellow Cloth",cc,17,162)}z(fc,Xb);function gc(){Wb.call(this,9,"Blue Cloth",cc,17,177)}z(gc,Xb);function hc(){Wb.call(this,3,"Brick",$b,17,7)}z(hc,Xb);function ic(){Wb.call(this,1,"Dirt",Zb,17,2)}z(ic,Xb);function jc(){Wb.call(this,5,"Glass",bc,17,49)}z(jc,Xb);function kc(){Wb.call(this,2,"Stone",$b,17,1)}z(kc,Xb);function lc(){Wb.call(this,4,"Wood",ac,17,4)}z(lc,Xb);function mc(){D.call(this);this.u=new Mb;Nb(this.u,new ic);Nb(this.u,new kc);Nb(this.u,new hc);Nb(this.u,new lc);Nb(this.u,new jc);Nb(this.u,new dc);Nb(this.u,new ec);Nb(this.u,new fc);Nb(this.u,new gc);this.ph=new Vb;J(this,this.ph);this.Sa=[];this.ob=new Tb;J(this,this.ob)}z(mc,D);t=mc.prototype;t.b=function(){mc.d.b.call(this)};t.update=function(a){this.ph.update(a);this.ob.update(a)};
t.Sd=function(a,b,c){var d=this.ob.get(a,b,c);if(d)return d;d=new Pb(this,a&-16,b&-128,c&-16);this.ob.add(d);this.qe(d);return d};t.ce=function(a){for(var b=0;b<this.Sa.length;b++){var c=this.Sa[b],d=c.Wa,e=a.Va,f=d.min,d=d.max,g=e.min,e=e.max;-1!=(d[0]<g[0]||f[0]>e[0]||d[1]<g[1]||f[1]>e[1]||d[2]<g[2]||f[2]>e[2]?-1:f[0]>g[0]||e[0]>d[0]||f[1]>g[1]||e[1]>d[1]||f[2]>g[2]||e[2]>d[2]?0:1)&&c.ce(a)}};t.Ve=v;t.ae=function(a){this.ob.ae(a)};t.be=function(a){this.ob.be(a)};t.qe=v;
t.ma=function(a,b,c,d){var e=this.ob.get(a,b,c);if(e){if(2!=e.state)return M("setBlock before chunk fully loaded - inconsistent state!"),0}else return 0;e=e.ma(a,b,c,d);if(e!=d)for(d=0;d<this.Sa.length;d++)for(var f=this.Sa[d],g=a,k=b,j=c,l=0;l<f.m.length;l++)f.m[l].Dh(g,k,j,0);return e};function nc(a,b){this.Lh=a;this.u=b}nc.prototype.Od=v;function oc(a,b){nc.call(this,a,b)}z(oc,nc);oc.prototype.Od=function(a,b,c,d,e){if(0>=c&&0<=c){a=b+16;for(c=d+16;b<a;b++)for(var f=d;f<c;f++)e.ma(b,0,f,256)}};function pc(a){this.Db=qc(32);this.Eb=qc(32);this.Fb=qc(32);this.Yg=1;a=ga(a)?a:ua();this.Db-=qc(a);0>this.Db&&(this.Db+=1);this.Eb-=qc(a);0>this.Eb&&(this.Eb+=1);this.Fb-=qc(a);0>this.Fb&&(this.Fb+=1);for(a=0;100>a;a++)this.random()}function qc(a){a=a.toString();for(var b=4022871197,c=0;c<a.length;c++)var b=b+a.charCodeAt(c),d=0.02519603282416938*b,b=d>>>0,d=d-b,d=d*b,b=d>>>0,d=d-b,b=b+4294967296*d;return 2.3283064365386963E-10*(b>>>0)}
pc.prototype.random=function(){var a=2091639*this.Db+2.3283064365386963E-10*this.Yg;this.Db=this.Eb;this.Eb=this.Fb;return this.Fb=a-(this.Yg=a|0)};function rc(a){this.Vb=new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);this.bc=new Uint8Array(512);for(var b=0;256>b;b++)this.bc[b]=this.bc[256+b]=~~(255*a.random())}function sc(a,b,c,d){a=a.Vb;return a[3*b]*c+a[3*b+1]*d}
rc.prototype.kb=function(a,b){var c,d,e;e=(a+b)*0.5*(Math.sqrt(3)-1);var f=Math.floor(a+e),g=Math.floor(b+e),k=(3-Math.sqrt(3))/6;e=(f+g)*k;c=a-(f-e);var j=b-(g-e),l,r;c>j?(l=1,r=0):(l=0,r=1);d=c-l+k;var q=j-r+k;e=c-1+2*k;var k=j-1+2*k,w=f&255,g=g&255,y=this.bc,f=y[w+y[g]]%12;l=y[w+l+y[g+r]]%12;r=y[w+1+y[g+1]]%12;w=0.5-c*c-j*j;0>w?c=0:(w*=w,c=w*w*sc(this,f,c,j));j=0.5-d*d-q*q;0>j?d=0:(j*=j,d=j*j*sc(this,l,d,q));q=0.5-e*e-k*k;0>q?e=0:(q*=q,e=q*q*sc(this,r,e,k));return 70*(c+d+e)};function tc(a,b){nc.call(this,a,b);var c=new pc(a.te);this.$f=new rc(c)}z(tc,nc);tc.prototype.Od=function(a,b,c,d,e){a=this.$f;for(c=0;16>c;c++)for(var f=b+c,g=0;16>g;g++){var k=d+g,j=0.5*a.kb(0.0010*f,0.0010*k),j=j+0.25*a.kb(0.0020*(f+100),0.0020*k),j=j+0.25*a.kb(0.01*(f+100),0.01*k),l=25.6*j+64|0;1>l&&(l=1);e.ma(c,l,g,257);var k=e,r=c&15,j=0,l=l-1&127,q=g&15;if(j>l)var w=j,j=l,l=w;for(r=r+16*q+256*j;j<=l;j++,r+=256)k.U[r]=256}};function uc(a,b){this.zh=b||15;this.Vb=new Float32Array(512);this.bc=new Uint8Array(256);for(var c=0;256>c;c++){var d=2*Math.PI*a.random();this.Vb[c]=Math.cos(d);this.Vb[256+c]=Math.sin(d);this.bc[c]=~~(255*a.random())}}
uc.prototype.kb=function(a,b){for(var c=a/this.zh,d=b/this.zh,e=~~c,f=~~d,g=0;4>g;g++){var k=e+g%2,j=f+~~(g/2),l=j+this.bc[k]&255;vc[g]=this.Vb[l]*(c-k)+this.Vb[256+l]*(d-j)}c-=~~c;d-=~~d;c=3*Math.pow(c,2)-2*Math.pow(c,3);e=vc[0]+c*(vc[1]-vc[0]);return e+(3*Math.pow(d,2)-2*Math.pow(d,3))*(vc[2]+c*(vc[3]-vc[2])-e)};var vc=new Float32Array(4);function wc(a,b){nc.call(this,a,b);var c=new pc(a.te);this.$f=new uc(c,15)}z(wc,nc);wc.prototype.Od=function(a,b,c,d,e){a=this.$f;c=b+16;for(var f=d+16;b<c;b++)for(var g=d;g<f;g++){var k;k=a;var j=b+1E3,l=g+1E3;k=(k.kb(j+16,l+16)*(16-j)*(16-l)+k.kb(j,l+16)*j*(16-l)+k.kb(j,l)*j*l+k.kb(j+16,l)*(16-j)*l)/256;k=Math.max(0,Math.min(15,k/1E3|0));for(j=0;j<=64+k;j++)l=256,j>=64+k&&(l|=1),e.ma(b,j,g,l)}};var xc={flat:oc,noise:wc,improved:tc};function yc(){this.U=new Uint16Array(32768);this.fl=new Uint16Array(32768)}yc.prototype.da=function(){this.U.set(this.fl)};yc.prototype.end=s("U");yc.prototype.ma=function(a,b,c,d){this.U[(a&15)+16*(c&15)+256*(b&127)]=d};var N=u.performance&&u.performance.webkitNow?function(){return u.performance.webkitNow()}:ua;function zc(a,b){for(var c in a)b.call(i,a[c],c,a)}function Ac(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function Bc(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function Cc(a){var b={},c;for(c in a)b[c]=a[c];return b}var Dc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function Ec(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Dc.length;f++)c=Dc[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function Fc(a){if("function"==typeof a.ra)return a.ra();if(ma(a))return a.split("");if(la(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Ac(a)}function Gc(a,b,c){if("function"==typeof a.forEach)a.forEach(b,c);else if(la(a)||ma(a))wb(a,b,c);else{var d;if("function"==typeof a.eb)d=a.eb();else if("function"!=typeof a.ra)if(la(a)||ma(a)){d=[];for(var e=a.length,f=0;f<e;f++)d.push(f)}else d=Bc(a);else d=i;for(var e=Fc(a),f=e.length,g=0;g<f;g++)b.call(c,e[g],d&&d[g],a)}};function Hc(a,b){this.Gh=a;this.Lg=b}Hc.prototype.getKey=s("Gh");Hc.prototype.s=function(){return new Hc(this.Gh,this.Lg)};function Ic(a){this.Aa=[];if(a)a:{var b,c;if(a instanceof Ic){if(b=a.eb(),c=a.ra(),0>=a.za()){a=this.Aa;for(var d=0;d<b.length;d++)a.push(new Hc(b[d],c[d]));break a}}else b=Bc(a),c=Ac(a);for(d=0;d<b.length;d++)Jc(this,b[d],c[d])}}function Jc(a,b,c){var d=a.Aa;d.push(new Hc(b,c));b=d.length-1;a=a.Aa;for(c=a[b];0<b;)if(d=b-1>>1,a[d].getKey()>c.getKey())a[b]=a[d],b=d;else break;a[b]=c}t=Ic.prototype;
t.remove=function(){var a=this.Aa,b=a.length,c=a[0];if(!(0>=b)){if(1==b)Ab(a);else{a[0]=a.pop();for(var a=0,b=this.Aa,d=b.length,e=b[a];a<d>>1;){var f=2*a+1,g=2*a+2,f=g<d&&b[g].getKey()<b[f].getKey()?g:f;if(b[f].getKey()>e.getKey())break;b[a]=b[f];a=f}b[a]=e}return c.Lg}};t.ra=function(){for(var a=this.Aa,b=[],c=a.length,d=0;d<c;d++)b.push(a[d].Lg);return b};t.eb=function(){for(var a=this.Aa,b=[],c=a.length,d=0;d<c;d++)b.push(a[d].getKey());return b};
t.qb=function(a){return zb(this.Aa,function(b){return b.getKey()==a})};t.s=function(){return new Ic(this)};t.za=function(){return this.Aa.length};t.clear=function(){Ab(this.Aa)};function Kc(){Ic.call(this)}z(Kc,Ic);Kc.prototype.Kd=function(a,b){Jc(this,a,b)};function Lc(a,b,c){D.call(this);this.xh=b;this.$d=c;this.Qd=new Kc;this.dc=p;this.Wc=n;this.jf=new yc}z(Lc,D);Lc.prototype.b=function(){this.dc&&(this.dc=p,u.clearTimeout(this.Wc),this.Wc=n);Lc.d.b.call(this)};Lc.prototype.update=aa();Lc.prototype.qe=function(a,b){var c=ga(b)?b:Number.MAX_VALUE;a.state=1;var d=this.$d,e=new O,f=new Mc(e,Nc,a.x,a.y,a.k);f.Bd=a;f.cc=c;d.ka.push(f);d.ac||Oc(d);d.Xf=m;P(e,aa(),function(){this.Qd.Kd(c,a);this.dc||(this.dc=m,this.Wc=u.setTimeout(x(this.ei,this),5))},this)};
Lc.prototype.ei=function(){for(var a=N();this.Qd.za();){var b=this.Qd.remove(),c=new pc(this.xh.Lh.te);this.jf.da();this.xh.Od(c,b.x,b.y,b.k,this.jf);b.fill(this.jf.end());if(16<N()-a)break}this.Qd.za()?(this.dc=m,this.Wc=u.setTimeout(x(this.ei,this),5)):(this.dc=p,this.Wc=n)};function Pc(){D.call(this)}z(Pc,D);Pc.prototype.update=aa();/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
function O(a,b){this.ue=[];this.Vh=a;this.ih=b||n}t=O.prototype;t.ub=p;t.Hc=p;t.df=p;t.Pi=p;t.wg=p;t.ef=0;t.cancel=function(a){if(this.ub)this.$c instanceof O&&this.$c.cancel();else{if(this.M){var b=this.M;delete this.M;a?b.cancel(a):(b.ef--,0>=b.ef&&b.cancel())}this.Vh?this.Vh.call(this.ih,this):this.wg=m;this.ub||this.a(new Qc(this))}};t.dh=function(a,b){this.df=p;Rc(this,a,b)};function Rc(a,b,c){a.ub=m;a.$c=c;a.Hc=!b;Sc(a)}function Tc(a){a.ub&&(a.wg||h(new Uc(a)),a.wg=p)}
t.e=function(a){Tc(this);Rc(this,m,a)};t.a=function(a){Tc(this);Rc(this,p,a)};function P(a,b,c,d){a.ue.push([b,c,d]);a.ub&&Sc(a);return a}function Vc(a){return zb(a.ue,function(a){return na(a[1])})}
function Sc(a){a.Fg&&(a.ub&&Vc(a))&&(u.clearTimeout(a.Fg),delete a.Fg);a.M&&(a.M.ef--,delete a.M);for(var b=a.$c,c=p,d=p;a.ue.length&&!a.df;){var e=a.ue.shift(),f=e[0],g=e[1],e=e[2];if(f=a.Hc?g:f)try{var k=f.call(e||a.ih,b);ga(k)&&(a.Hc=a.Hc&&(k==b||k instanceof Error),a.$c=b=k);b instanceof O&&(d=m,a.df=m)}catch(j){b=j,a.Hc=m,Vc(a)||(c=m)}}a.$c=b;d&&(P(b,x(a.dh,a,m),x(a.dh,a,p)),b.Pi=m);c&&(a.Fg=u.setTimeout(function(){h(b)},0))}function Wc(a){var b=new O;b.e(a);return b}
function Xc(a){var b=new O;b.a(a);return b}function Uc(a){ib.call(this);this.ea=a}z(Uc,ib);Uc.prototype.message="Deferred has already fired";Uc.prototype.name="AlreadyCalledError";function Qc(a){ib.call(this);this.ea=a}z(Qc,ib);Qc.prototype.message="Deferred was cancelled";Qc.prototype.name="CancelledError";function Yc(a,b,c,d,e,f){O.call(this,e,f);this.p=a;this.rf=[];this.uh=!!b;this.gj=!!c;this.$i=!!d;for(b=0;b<a.length;b++)P(a[b],x(this.Ah,this,b,m),x(this.Ah,this,b,p));0==a.length&&!this.uh&&this.e(this.rf)}z(Yc,O);Yc.prototype.Uh=0;Yc.prototype.Ah=function(a,b,c){this.Uh++;this.rf[a]=[b,c];this.ub||(this.uh&&b?this.e([a,c]):this.gj&&!b?this.a(c):this.Uh==this.p.length&&this.e(this.rf));this.$i&&!b&&(c=n);return c};Yc.prototype.a=function(a){Yc.d.a.call(this,a);wb(this.p,function(a){a.cancel()})};function Zc(a,b){mc.call(this);var c;(c=xc[a.wh])||(c=xc.flat);c=new c(a,this.u);this.Lh=a;this.$d=b;J(this,this.$d);this.Gb=new Pc;J(this,this.Gb);this.lf=new Lc(0,c,b);J(this,this.lf);this.Jd=[]}z(Zc,mc);Zc.prototype.update=function(a){Zc.d.update.call(this,a);this.Gb.update(a);this.lf.update(a);this.flush()};Zc.prototype.Ve=function(a){this.Jd.push(a);a.Ca||a.map.be(a);a.Ca++};
Zc.prototype.flush=function(){for(var a=[],b=0;b<this.Jd.length;b++){var c=this.Jd[b];a.push($c(this.$d,c));c.Qb=p;c.Ca--;c.Ca||c.map.ae(c)}this.Jd.length=0;return new Yc(a)};Zc.prototype.qe=function(a){for(var b=Number.MAX_VALUE,c=0;c<this.Sa.length;c++){var d=this.Sa[c],e=a.x-d.va[0],d=a.k-d.va[2],e=e*e+d*d;e<b&&(b=e)}b==Number.MAX_VALUE&&(b=i);this.lf.qe(a,b)};function ad(a){this.factory=a;this.pa=this.Ee=0}ad.prototype.getTime=s("Ee");ad.prototype.read=function(a){var b=this.factory.t;b&2&&(this.Ee=a.Pa()/1E3);b&4||(this.pa=a.Pa())};ad.prototype.write=function(a){var b=this.factory.t;b&2&&a.w(1E3*this.Ee|0);b&4||a.w(this.pa)};ad.prototype.ke=function(){this.factory.ke(this)};function bd(a){ad.call(this,a);this.Ag=0;this.Mf=p}z(bd,ad);bd.prototype.read=function(a){bd.d.read.call(this,a);this.Ag=a.Pa()/1E3;this.Mf=p};
bd.prototype.write=function(a){bd.d.write.call(this,a);a.w(1E3*this.Ag|0)};function cd(a){ad.call(this,a);this.cg=0}z(cd,ad);cd.prototype.read=function(a){cd.d.read.call(this,a);this.cg=a.Pa()};cd.prototype.write=function(a){cd.d.write.call(this,a);a.w(this.cg)};function Q(a,b,c,d){D.call(this);this.S=a;this.factory=b;this.ja=n;this.z=c;this.Rb=d;this.M=n;this.G=[];this.fa=0;b.Be.length?(a=b.Be.pop(),a.reset(this)):a=new b.Nk(this);this.g=a;this.Ai=[]}z(Q,D);t=Q.prototype;t.b=function(){var a=this.getParent();a&&(Bb(a.G,this),a.Mb(this));this.factory.Be.push(this.g);for(a=0;a<this.Ai.length;a++)this.factory.Be.push(this.Ai[a]);Q.d.b.call(this)};
function dd(a,b){for(var c="",d=0;d<b;d++)c+="..";M(c+"Entity "+a.z+" / type "+a.factory.Ha+(a.ja?" / owner "+a.ja.c:""));if(a.G.length)for(d=0;d<a.G.length;d++)dd(a.G[d],b+1)}t.$=s("S");t.getParent=s("M");function ed(a,b){if(a.M!=b){var c=a.M;a.M=b;if(!(a.Rb&fd)){var d=a.qf(0);d.cg=b?b.z:0;gd(a.S,d)}a.ag(c,b);c&&(Bb(c.G,a),c.Mb(a));b&&b.Ue(a)}}t.Ue=function(a){this.G.push(a);this.Ad(a)};t.ag=v;t.Ad=v;t.Mb=v;t.Hf=ca(n);t.read=function(a){this.g.read(a)};t.write=function(a){this.g.write(a)};t.Ng=function(a){this.g.Ng(a)};
t.qf=function(a){a=hd(this.S.Ya[a]||n);a.pa=this.z;return a};t.ga=aa();function id(a,b,c){a.xf||jd(a.S.Gb,b,c===i?0:c,a.update,a)}t.tk=v;t.ng=function(){this.fa=0;this.g.ng()};var fd=1;function kd(){this.ld=[];this.f=0}kd.prototype.compact=aa();kd.prototype.za=s("f");kd.prototype.qc=function(a){this.ld[this.f++]=a};function ld(a){for(var b=0;b<a.f;b++){var c=a.ld[b];c.factory.ke(c)}a.f=0};function md(){this.buffer=new Uint8Array(512);this.offset=0;this.Q=new Float32Array(16);this.Z=new Uint8Array(this.Q.buffer);this.jj=(this.Cc=u.Float64Array?new Float64Array(1):n)?new Uint8Array(this.Cc.buffer):n}t=md.prototype;t.bb=function(){this.offset=0};t.finish=function(){for(var a=new Uint8Array(this.offset),b=0;b<this.offset;b++)a[b]=this.buffer[b];this.offset=0;return a.buffer};
function nd(a,b){if(a.offset+b>a.buffer.length){var c=a.offset+b,d=a.buffer.length;do d+=1024;while(d<c);c=new Uint8Array(d);for(d=0;d<a.offset;d++)c[d]=a.buffer[d];a.buffer=c}}function od(a,b){nd(a,2);a.buffer[a.offset++]=b>>8;a.buffer[a.offset++]=b}function pd(a,b){nd(a,4);a.buffer[a.offset++]=b>>24;a.buffer[a.offset++]=b>>16;a.buffer[a.offset++]=b>>8;a.buffer[a.offset++]=b}function R(a,b){nd(a,1);a.buffer[a.offset++]=b}function qd(a,b){nd(a,2);a.buffer[a.offset++]=b>>8;a.buffer[a.offset++]=b}
t.J=function(a){nd(this,4);this.buffer[this.offset++]=a>>24;this.buffer[this.offset++]=a>>16;this.buffer[this.offset++]=a>>8;this.buffer[this.offset++]=a};t.w=function(a){nd(this,5);for(a&=4294967295;a&4294967168;)this.buffer[this.offset++]=a&127|128,a>>>=7;this.buffer[this.offset++]=a&127};t.Re=function(a){this.w(a<<1^a>>31)};
t.Ii=function(a){nd(this,4);this.Q[0]=a;this.buffer[this.offset++]=this.Z[0];this.buffer[this.offset++]=this.Z[1];this.buffer[this.offset++]=this.Z[2];this.buffer[this.offset++]=this.Z[3]};t.dl=function(a){nd(this,12);this.Q[0]=a[0];this.Q[1]=a[1];this.Q[2]=a[2];for(a=0;12>a;a++)this.buffer[this.offset++]=this.Z[a]};t.el=function(a){nd(this,16);this.Q[0]=a[0];this.Q[1]=a[1];this.Q[2]=a[2];this.Q[3]=a[3];for(a=0;16>a;a++)this.buffer[this.offset++]=this.Z[a]};
t.n=function(a){65535<=a.length&&(a=a.substr(0,65535));nd(this,4+3*a.length);qd(this,a.length);var b=this.offset;this.offset+=2;for(var c=0,d=0;d<a.length;d++){var e=a.charCodeAt(d);128>e?(this.buffer[this.offset++]=e,c++):2048>e?(this.buffer[this.offset++]=e>>6|192,this.buffer[this.offset++]=e&63|128,c+=2):(this.buffer[this.offset++]=e>>12|224,this.buffer[this.offset++]=e>>6&63|128,this.buffer[this.offset++]=e&63|128,c+=3)}a=this.offset;this.offset=b;qd(this,c);this.offset=a};var rd=n;
function S(){rd||(rd=new md);return rd};function sd(){this.Xg=this.ud=this.Sl=this.ul=this.Nh=this.Oh=this.pd=0}sd.prototype.s=function(){return new sd};sd.prototype.toString=ca("[stats]");var td,ud,vd,wd,xd;function yd(){return u.navigator?u.navigator.userAgent:n}wd=vd=ud=td=p;var Bd;if(Bd=yd()){var Cd=u.navigator;td=0==Bd.indexOf("Opera");ud=!td&&-1!=Bd.indexOf("MSIE");vd=!td&&-1!=Bd.indexOf("WebKit");wd=!td&&!vd&&"Gecko"==Cd.product}var Dd=td,Ed=ud,Fd=wd,Gd=vd,Hd,Id=u.navigator;Hd=Id&&Id.platform||"";xd=-1!=Hd.indexOf("Mac");var Jd=-1!=Hd.indexOf("Win");function Kd(){var a=u.document;return a?a.documentMode:i}var Ld;
a:{var Md="",Nd;if(Dd&&u.opera)var Od=u.opera.version,Md="function"==typeof Od?Od():Od;else if(Fd?Nd=/rv\:([^\);]+)(\)|;)/:Ed?Nd=/MSIE\s+([^\);]+)(\)|;)/:Gd&&(Nd=/WebKit\/(\S+)/),Nd)var Pd=Nd.exec(yd()),Md=Pd?Pd[1]:"";if(Ed){var Qd=Kd();if(Qd>parseFloat(Md)){Ld=String(Qd);break a}}Ld=Md}var Rd={};
function Sd(a){var b;if(!(b=Rd[a])){b=0;for(var c=kb(String(Ld)).split("."),d=kb(String(a)).split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",k=d[f]||"",j=RegExp("(\\d*)(\\D*)","g"),l=RegExp("(\\d*)(\\D*)","g");do{var r=j.exec(g)||["","",""],q=l.exec(k)||["","",""];if(0==r[0].length&&0==q[0].length)break;b=((0==r[1].length?0:parseInt(r[1],10))<(0==q[1].length?0:parseInt(q[1],10))?-1:(0==r[1].length?0:parseInt(r[1],10))>(0==q[1].length?0:parseInt(q[1],10))?1:0)||((0==r[2].length)<
(0==q[2].length)?-1:(0==r[2].length)>(0==q[2].length)?1:0)||(r[2]<q[2]?-1:r[2]>q[2]?1:0)}while(0==b)}b=Rd[a]=0<=b}return b}var Td=u.document,Ud=!Td||!Ed?i:Kd()||("CSS1Compat"==Td.compatMode?parseInt(Ld,10):5);(function(){var a;return Jd?(a=/Windows NT ([0-9.]+)/,(a=a.exec(yd()))?a[1]:"0"):xd?(a=/10[_.][0-9_.]+/,(a=a.exec(yd()))?a[0].replace(/_/g,"."):"10"):""})();function Vd(){this.Fi="";this.type=Wd;this.platform=Xd;this.Uc="";this.zc=Yd}Vd.prototype.s=function(){var a=new Vd;a.Fi=this.Fi;a.type=this.type;a.platform=this.platform;a.Uc=this.Uc;a.zc=this.zc;return a};Vd.prototype.toString=function(){return[this.type,this.platform+this.Uc,this.zc].join("/")};var Wd="unknown",Xd="other",Yd="desktop";function Zd(){this.nd="none";this.md="0";this.qa="User"}Zd.prototype.s=function(){var a=new Zd;a.nd=this.nd;a.md=this.md;a.qa=this.qa;return a};Zd.prototype.toString=ca("[user]");function $d(a,b,c,d,e){this.c=a||"";this.N=b||0;this.t=c||0;this.info=d||new Zd;this.jd=e||new Vd;this.uf=0;this.na=new sd;this.data=this.ca=n}$d.prototype.toString=function(){return this.info.qa+" ("+this.c+"/"+this.N+")"};function ae(a){return new $d(a.c,a.N,a.t,a.info.s(),a.jd.s())};function be(a){this.oa=a;this.Za=0;this.Cd=[];this.pb=0;this.Fd=[];this.rb=0;this.Ge=[];this.Lb=0;this.Hd=[];this.sb=0}be.prototype.da=ba("Za");be.prototype.qc=function(a){this.Cd[this.pb++]=a};
be.prototype.finish=function(a){var b=S();R(b,30);var c=0;b.w(1E3*a|0);b.w(this.Za);b.w(this.rb);b.w(this.Lb);b.w(this.sb);b.w(this.pb);for(a=0;a<this.rb;a++){var d=this.Fd[a];this.Fd[a]=n;c=b.offset;b.w(d.z>>1);b.w(d.factory.Ha);b.w(d.Rb);var e=d.ja;b.w(e?e.N:0);e=d.getParent();b.w(e?e.z:0);d.write(b);this.oa.lh++;this.oa.Ld+=b.offset-c}for(a=this.rb=0;a<this.Lb;a++)d=this.Ge[a],this.Ge[a]=n,c=b.offset,b.w(d.z>>1),d.Ng(b),this.oa.oh++,this.oa.Nd+=b.offset-c;for(a=this.Lb=0;a<this.sb;a++)d=this.Hd[a],
this.Hd[a]=n,c=b.offset,b.w(d.z>>1),this.oa.mh++,this.oa.Md+=b.offset-c;for(a=this.sb=0;a<this.pb;a++)d=this.Cd[a],this.Cd[a]=n,c=b.offset,b.w(d.factory.Ha),d.write(b),this.oa.Zh++,this.oa.de+=b.offset-c;this.pb=0;return b.finish()};be.prototype.bb=function(){for(var a=this.Za=0;a<this.rb;a++)this.Fd[a]=n;for(a=this.rb=0;a<this.Lb;a++)this.Ge[a]=n;for(a=this.Lb=0;a<this.sb;a++)this.Hd[a]=n;for(a=this.sb=0;a<this.pb;a++)this.Cd[a]=n;this.pb=0};function ce(a,b,c){D.call(this);this.Fa=a;this.Qa=b;this.nc=c;this.Za=this.Jh=0;this.Kc=new kd;this.Tc=new kd;this.Dg={};this.Ie={};this.He=[];this.$j=0;this.O=new be(a.na)}z(ce,D);ce.prototype.zb=s("nc");ce.prototype.compact=function(){this.Kc.compact();this.Tc.compact()};function de(a,b){var c=b.Rb;if(!(c&fd)&&!(c&64&&b.ja!=a.nc)){var c=b.z,d=0;a.Dg[c]||(d|=1,a.Dg[c]=m);var e=a.Ie[c]|0,d=e|d|b.fa;e||a.He.push(b);e!=d&&(a.Ie[c]=d)}}
ce.prototype.flush=function(a){this.$j=a;var b=this.O;b.da(this.Za);var c=this.Za!=this.Jh;this.Jh=this.Za;var d=this.Tc.ld,e=this.Tc.za();if(e){for(var f=0;f<e;f++){var g=d[f];(0==g.pa||this.Dg[g.pa])&&b.qc(g)}this.Tc.f=0}for(f=0;f<this.He.length;f++)d=this.He[f],e=d.z,g=this.Ie[e],delete this.Ie[e],g&&5!=(g&5)&&(g&4?b.Hd[b.sb++]=d:g&1?b.Fd[b.rb++]=d:g&2&&(b.Ge[b.Lb++]=d));c||0<b.pb+b.rb+b.Lb+b.sb?this.Qa.send(b.finish(a),this.nc):b.bb();this.He.length=0};function ee(a,b,c){ce.call(this,a,b,c)}z(ee,ce);var fe=new function(){this.k=this.y=this.x=0};function ge(){var a=S();R(a,74);return a.finish()};function he(a){D.call(this);this.Il=a}z(he,D);function ie(a){D.call(this);this.Fk=a;this.og=[[],[],[],[],[]];this.Di=[]}z(ie,D);function jd(a,b,c,d,e){var f=a.Di.pop()||new je;f.cc=b;f.mg=a.Fk.H.wb;f.De=-1==c?0:0==c?f.mg+0.0010:c;f.e=d;f.gf=e||u;a=a.og[b];b=0;for(c=a.length;b<c;)d=b+c>>1,0<f.De-a[d].De?b=d+1:c=d;a.splice(b,0,f)}var ke=Number.MAX_VALUE;
ie.prototype.update=function(a){a=a.time;for(var b=N(),c=this.og.length-1;0<=c;c--){for(var d=this.og[c];d.length;){var e=d[0];if(e.De>a)break;d.shift();var f=a-e.mg,g=e.e,k=e.gf;e.e=e.gf=n;this.Di.push(e);g.call(k,a,f)}if(N()-b>=ke)break}};function je(){this.cc=le;this.De=this.mg=0;this.gf=this.e=n}var le=0;function me(){this.Pc=this.Ba=this.Vd=this.ok=this.Uj=this.de=this.Zh=this.Wd=this.Qf=this.Md=this.mh=this.Nd=this.oh=this.Ld=this.lh=0}me.prototype.update=function(a){this.Ba+=this.Ld;this.Ba+=this.Nd;this.Ba+=this.Md;this.Vd+=this.Wd;this.Ba+=this.de;1<=a-this.Pc&&(this.Pc=a,this.Uj=this.Vd,this.ok=this.Ba,this.Ba=this.Vd=0);this.Zh=this.de=this.Qf=this.Wd=this.mh=this.Md=this.oh=this.Nd=this.lh=this.Ld=0};function ne(a,b,c){this.Ha=a;this.Yi=b;this.t=c;this.Gg=[]}function hd(a){return a.Gg.length?(a=a.Gg.pop(),a.pa=0,a):new a.Yi(a)}ne.prototype.ke=function(a){this.Gg.push(a)};function oe(a,b){he.call(this,a);this.na=new me;this.Gb=new ie(a);J(this,this.Gb);this.Ul=[];this.Ya={};this.nh={};this.Zf=b;this.C={};this.hc=n;this.Pb=Array(256);this.Ob=0;var c=new ne(0,cd,0);this.Ya[c.Ha]=c}z(oe,he);function pe(a,b){a.nh[b.Ha]=b}function qe(a){var b=a.Zf;a.Zf+=2;return b}t=oe.prototype;t.xa=function(a,b){var c=this.nh[a].xa(this,qe(this),b);this.We(c);return c};t.We=function(a){this.C[a.z]=a;var b=!!a.fa;a.fa|=1;b||(this.Pb[this.Ob++]=a);a.Rb&128&&(this.hc=a)};
t.Zc=function(a,b){if(!(a.fa&4)){switch(b||re){default:case re:for(var c=a.G.length-1;0<=c;c--){var d=a.G[c];a.Mb(d);a.S.Zc(d)}if(d=a.Hf())for(c=0;c<d.length;c++)a.S.Zc(d[c]);break;case se:for(c=0;c<a.G.length;c++)ed(a.G[c],n);if(d=a.Hf())for(c=0;c<d.length;c++)ed(d[c],n);case te:}delete this.C[a.z];c=!!a.fa;a.fa|=4;c||(this.Pb[this.Ob++]=a);L(a)}};t.qf=function(a){a=hd(this.Ya[a]||n);a.pa=0;return a};t.ga=v;t.ci=v;
t.hg=function(){for(var a=0;a<this.Ob;a++){var b=this.Pb[a];this.Pb[a]=n;b.ng()}this.Ob=0};var re=0,se=1,te=2;function ue(a,b,c){oe.call(this,a,2);this.Qa=b;this.Qa.R.push(this);ve(this.Qa.$b,31,this.Mj,this);this.lk=c;this.m=[];this.dd={};this.mf=new kd}z(ue,oe);t=ue.prototype;t.b=function(){hb(this.m);ue.d.b.call(this)};t.zb=function(a){return this.Qa.oc[a]||n};t.Xe=function(a){function b(b){de(a,b)}this.m.push(a);var c=a.zb();c&&(this.dd[c.c]=a);for(var d in this.C)b.call(this||u,this.C[Number(d)])};t.ii=function(a){var b=a.zb();b&&delete this.dd[b.c];Bb(this.m,a);L(a)};
t.update=function(a){for(var b=0;b<this.m.length;b++){for(var c=this.m[b],d=c.Fa,e=c.Kc.ld,f=c.Kc.za(),g=0;g<f;g++){var k=e[g],j=k.pa;0==j?d.ga(k):(j=d.C[j]||n)&&j.ga(k);k instanceof bd&&(k.Mf=m)}ld(c.Kc)}this.Gb.update(a);for(b=0;b<this.Ob;b++)c=this.Pb[b],c.tk(a),this.ci(a,c);this.hg(a);if(!(15>a.time-this.Zj)){this.Zj=a.time;this.mf.compact();for(a=0;a<this.m.length;a++)this.m[a].compact()}};t.ga=aa();
function gd(a,b,c){for(var d=0;d<a.m.length;d++){var e=a.m[d];if(!(c&&e.zb()==c))a:{if(0!=b.pa){var f=e.Fa.C[b.pa]||n;if(f.Rb&64&&f.ja!=e.nc)break a}e.Tc.qc(b)}}a.mf.qc(b)}t.ci=function(a,b){if(!(b.Rb&fd))for(var c=0;c<this.m.length;c++)de(this.m[c],b)};t.hg=function(a){for(var b=0;b<this.m.length;b++)this.m[b].flush(a.time);ld(this.mf);ue.d.hg.call(this,a)};t.$a=v;t.vf=v;t.Ig=function(a){var b=this.dd[a.c]||n;b||(b=new this.lk(this,this.Qa,a),this.Xe(b))};t.Jg=function(a){(a=this.dd[a.c]||n)&&this.ii(a)};
t.Kg=v;t.Mj=function(a,b,c){if(!a.F)return p;b=this.dd[a.F.c]||n;if(!b)return p;var d=c.Pa(),e=c.Pa();this.na.Qf+=e;this.na.Wd+=a.data.length;for(var f=0;f<e;f++){var g=c.Pa(),g=this.Ya[g]||n;if(!g)return p;g=hd(g);g.read(c);var k=0==g.pa;k||(k=this.C[g.pa]||n,k=!k||k.ja!=a.F);if(k)return g.ke(),p;b.Kc.qc(g)}b.Za=d;return m};function we(a){return xe(a.S.hc.g)};function ye(a,b,c,d){Q.call(this,a,b,c,d);this.vh=n}z(ye,Q);function ze(a){bd.call(this,a);this.Ck=this.eg=this.Og=this.qg=this.pg=this.mb=this.Eg=0}z(ze,bd);var Ae=360*(1/32767)*Math.PI/180;ze.prototype.read=function(a){ze.d.read.call(this,a);this.Eg=Be(a);this.mb=Be(a);this.mb&1&&(this.pg=Ce(a),this.qg=Ce(a));this.Og=De(a);this.eg=De(a)};ze.prototype.write=function(a){ze.d.write.call(this,a);R(a,this.Eg);R(a,this.mb);this.mb&1&&(qd(a,this.pg),qd(a,this.qg));od(a,this.Og);od(a,this.eg)};function Ee(a){ad.call(this,a);this.$e=0}z(Ee,ad);Ee.prototype.read=function(a){Ee.d.read.call(this,a);this.$e=a.hi()};Ee.prototype.write=function(a){Ee.d.write.call(this,a);a.Ii(this.$e)};function Fe(a){ad.call(this,a);this.data=this.k=this.y=this.x=0}z(Fe,ad);Fe.prototype.read=function(a){Fe.d.read.call(this,a);this.x=a.je();this.y=a.je();this.k=a.je();this.data=Ce(a)};Fe.prototype.write=function(a){Fe.d.write.call(this,a);a.Re(this.x);a.Re(this.y);a.Re(this.k);qd(a,this.data)};function Ge(a){bd.call(this,a);this.Cg=0}z(Ge,bd);Ge.prototype.read=function(a){Ge.d.read.call(this,a);this.Cg=a.ba()};Ge.prototype.write=function(a){Ge.d.write.call(this,a);a.J(this.Cg)};var He=bd.gl;function Ie(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=2*c,k=2*d,j=2*e,l=g*f,r=k*f,f=j*f,g=g*c,q=k*c,c=j*c,k=k*d,d=j*d,e=j*e;b[0]=1-(k+e);b[1]=q+f;b[2]=c-r;b[3]=0;b[4]=q-f;b[5]=1-(g+e);b[6]=d+l;b[7]=0;b[8]=c+r;b[9]=d-l;b[10]=1-(g+k);b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1}
function Je(a,b,c,d){var e=a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3];if(1<e||-1>e)return Xa(d,b),d;var f=1;0>e&&(f=-1,e=-e);var g=Math.acos(e);if(1E-6>=g)return Xa(d,b),d;var k=1/Math.sin(g),e=Math.sin((1-c)*g)*k;c=f*Math.sin(c*g)*k;d[0]=a[0]*e+b[0]*c;d[1]=a[1]*e+b[1]*c;d[2]=a[2]*e+b[2]*c;d[3]=a[3]*e+b[3]*c;return d};function Ke(a,b,c,d){Q.call(this,a,b,c,d);this.Jb=m;this.sc=C();this.Sk=new Float32Array(16);this.g.ui(Ja(1,1,1))}z(Ke,Q);
function Le(a,b){if(a.Jb&&a.Jb){a.Jb=p;var c=a.g,d=c.Gc(),e=c.Da,f=c.se;a.sc[0]=d[0];a.sc[1]=d[1];a.sc[2]=d[2];a.sc[3]=c.rd*Math.max(f[0],Math.max(f[1],f[2]));c=a.Sk;Ie(e,c);var e=f[0],g=f[1],f=f[2],k=c[1],j=c[2],l=c[3],r=c[4],q=c[5],w=c[6],y=c[7],G=c[8],I=c[9],E=c[10],F=c[11],K=c[12],da=c[13],X=c[14],ja=c[15];c[0]*=e;c[1]=k*e;c[2]=j*e;c[3]=l*e;c[4]=r*g;c[5]=q*g;c[6]=w*g;c[7]=y*g;c[8]=G*f;c[9]=I*f;c[10]=E*f;c[11]=F*f;c[12]=K;c[13]=da;c[14]=X;c[15]=ja;e=d[0];g=d[1];d=d[2];f=c[1];k=c[2];j=c[3];l=c[4];
r=c[5];q=c[6];w=c[7];y=c[8];G=c[9];I=c[10];E=c[11];F=c[12];K=c[13];da=c[14];X=c[15];c[0]+=e*j;c[1]=f+g*j;c[2]=k+d*j;c[3]=j;c[4]=l+e*w;c[5]=r+g*w;c[6]=q+d*w;c[7]=w;c[8]=y+e*E;c[9]=G+g*E;c[10]=I+d*E;c[11]=E;c[12]=F+e*X;c[13]=K+g*X;c[14]=da+d*X;c[15]=X;a.getParent()}Xa(b,a.sc)}
Ke.prototype.wd=function(a){var b=this.g,c=a.Ne,d=b.Gc();Ie(b.Da,c);if(c==c){var b=c[1],e=c[2],f=c[3],g=c[6],k=c[7],j=c[11];c[1]=c[4];c[2]=c[8];c[3]=c[12];c[4]=b;c[6]=c[9];c[7]=c[13];c[8]=e;c[9]=g;c[11]=c[14];c[12]=f;c[13]=k;c[14]=j}else c[0]=c[0],c[1]=c[4],c[2]=c[8],c[3]=c[12],c[4]=c[1],c[5]=c[5],c[6]=c[9],c[7]=c[13],c[8]=c[2],c[9]=c[6],c[10]=c[10],c[11]=c[14],c[12]=c[3],c[13]=c[7],c[14]=c[11],c[15]=c[15];b=-d[0];e=-d[1];d=-d[2];f=c[1]*b+c[5]*e+c[9]*d+c[13];g=c[2]*b+c[6]*e+c[10]*d+c[14];k=c[3]*b+
c[7]*e+c[11]*d+c[15];c[12]=c[0]*b+c[4]*e+c[8]*d+c[12];c[13]=f;c[14]=g;c[15]=k;a.ee&&(a.ee=p,c=2/a.width,d=2/-a.height,$a(a.nk,c,d,1,0,-1,1,0,1),c=a.Ua===i?a.width/a.height:a.Ua,d=a.jk,b=a.Cf,f=Math.PI/4/2,e=b-d,g=Math.sin(f),0==e||(0==g||0==c)||(f=Math.cos(f)/g,$a(a.jg,f/c,f,-(b+d)/e,-1,0,0,-(2*d*b)/e,0)),ab(a.jg,a.Ne,a.ed),bb(a.ed,a.Xb));ab(a.jg,a.Ne,a.ed);bb(a.Ne,a.Eh);bb(a.ed,a.Xb);d=a.ed;c=a.mj;Wa(c[0],d[3]+d[0],d[7]+d[4],d[11]+d[8],d[15]+d[12]);Wa(c[1],d[3]-d[0],d[7]-d[4],d[11]-d[8],d[15]-d[12]);
Wa(c[2],d[3]-d[1],d[7]-d[5],d[11]-d[9],d[15]-d[13]);Wa(c[3],d[3]+d[1],d[7]+d[5],d[11]+d[9],d[15]+d[13]);Wa(c[4],d[3]+d[2],d[7]+d[6],d[11]+d[10],d[15]+d[14]);Wa(c[5],d[3]-d[2],d[7]-d[6],d[11]-d[10],d[15]-d[14]);for(d=0;d<c.length;d++)b=c[d],e=1/Math.sqrt(b[0]*b[0]+b[1]*b[1]+b[2]*b[2]),b[0]*=e,b[1]*=e,b[2]*=e,b[3]*=e;B(a.position,0,0,0);c=a.Eh;d=f=a.position;b=f[0];e=f[1];f=f[2];d[0]=b*c[0]+e*c[4]+f*c[8]+c[12];d[1]=b*c[1]+e*c[5]+f*c[9]+c[13];d[2]=b*c[2]+e*c[6]+f*c[10]+c[14];c=2*(0.5/a.width)-1;d=1-
2*(0.5/a.height);b=Me[0];e=Me[1];B(b,c,d,-1);B(e,c,d,1);cb(a.Xb,b,b);cb(a.Xb,e,e);Pa(b,e,a.direction);a=c=a.direction;a[0]=-c[0];a[1]=-c[1];a[2]=-c[2]};function Ne(a,b,c,d){Ke.call(this,a,b,c,d);this.hb=n;this.le=p}z(Ne,Ke);Ne.prototype.b=function(){L(this.hb);this.hb=n;Ne.d.b.call(this)};Ne.prototype.zk=function(){var a=this.g.Fc();if(this.le){this.hb&&(L(this.hb),this.hb=n);if(a){a:{var b=this.S.hc.vh.Qh,c=b.Rc[a];if(!c){c=b.Rh[a];c=!c?n:c.bj(b.rc);if(!c){a=n;break a}b.Rc[a]=c}a=c.Gd()}this.hb=a}this.le=p}};Ne.prototype.Fc=function(){return this.g.Fc()};
Ne.prototype.ze=function(a){this.g.ze(a);a=this.g.Fc();a=a.length?a:n;if(a!=(this.hb?this.hb.Ph.id:n)&&!this.le)this.le=m,jd(this.S.Gb,le,0,this.zk,this)};function Oe(a,b,c,d){Ne.call(this,a,b,c,d)}z(Oe,Ne);function Pe(){this.buffer=new Uint8Array(0);this.offset=0;this.Q=new Float32Array(16);this.Z=new Uint8Array(this.Q.buffer);this.jj=(this.Cc=u.Float64Array?new Float64Array(1):n)?new Uint8Array(this.Cc.buffer):n}t=Pe.prototype;t.da=function(a,b){this.buffer=a instanceof Uint8Array?a:new Uint8Array(a);this.offset=b};function De(a){var b=a.buffer[a.offset++];a=a.buffer[a.offset++];b=b<<8|a;return 32767<b?b-65536:b}
function Qe(a){var b=a.buffer[a.offset++],c=a.buffer[a.offset++],d=a.buffer[a.offset++];a=a.buffer[a.offset++];b=b<<24|c<<16|d<<8|a;return 2147483647<b?b-4294967296:b}function Be(a){return a.buffer[a.offset++]}function Ce(a){var b=a.buffer[a.offset++];a=a.buffer[a.offset++];return b<<8|a}t.ba=function(){var a=this.buffer[this.offset++],b=this.buffer[this.offset++],c=this.buffer[this.offset++],d=this.buffer[this.offset++];return a<<24|b<<16|c<<8|d};
t.Pa=function(){for(var a=0,b=0,c;(c=this.buffer[this.offset++]&255)&128;)a|=(c&127)<<b,b+=7;return a|c<<b};t.je=function(){var a=this.Pa();return(a<<31>>31^a)>>1^a&-2147483648};t.hi=function(){this.Z[0]=this.buffer[this.offset++];this.Z[1]=this.buffer[this.offset++];this.Z[2]=this.buffer[this.offset++];this.Z[3]=this.buffer[this.offset++];return this.Q[0]};t.xk=function(){for(var a=0;12>a;a++)this.Z[a]=this.buffer[this.offset++];return this.Q};
t.yk=function(){for(var a=0;16>a;a++)this.Z[a]=this.buffer[this.offset++];return this.Q};t.D=function(){var a=Ce(this);Ce(this);for(var b=Array(a),c=0;c<a;){var d=this.buffer[this.offset++];if(128>d)b[c++]=String.fromCharCode(d);else if(191<d&&224>d){var e=this.buffer[this.offset++];b[c++]=String.fromCharCode((d&31)<<6|e&63)}else{var e=this.buffer[this.offset++],f=this.buffer[this.offset++];b[c++]=String.fromCharCode((d&15)<<12|(e&63)<<6|f&63)}}return b.join("")};var Re=n;
function Se(){Re||(Re=new Pe);return Re};function Te(a,b,c){var d=a>>24&255,e=a>>16&255,f=a>>8&255;a&=255;return(d+c*((b>>24&255)-d)&255)<<24|(e+c*((b>>16&255)-e)&255)<<16|(f+c*((b>>8&255)-f)&255)<<8|a+c*((b&255)-a)&255};function T(a,b){this.Ra=a;this.Sc=0;this.t=b}T.prototype.yh=function(a){var b=U(a,this.i);return"target."+U(a,this.j)+"(source."+b+"());"};T.prototype.Tb=function(a){var b=U(a,this.i);return"result."+U(a,this.j)+"(target."+b+"());"};var V=0;function Ue(a,b){return(b.t&Ve)-(a.t&Ve)||a.Sc-b.Sc}function U(a,b){for(var c in a)if(a[c]===b)return c;return n}var Ve=1;function We(a,b,c,d){T.call(this,a,b);this.i=c;this.j=d}z(We,T);t=We.prototype;t.s=function(){return new We(this.Ra,this.t,this.i,this.j)};
t.Ma=function(a){a=U(a,this.j);var b=Se(),b=U(b,b.je);return"target."+a+"(reader."+b+"());"};t.Na=function(a){a=U(a,this.i);var b=S();return"writer."+U(b,b.Re)+"(target."+a+"() | 0);"};t.yh=function(a){var b=U(a,this.i);return"target."+U(a,this.j)+"(source."+b+"() | 0);"};t.Tb=function(a){var b=U(a,this.i);a=U(a,this.j);return"var _s = source."+b+"();var _t = target."+b+"();target."+a+"((_s + t * (_t - _s)) | 0);"};function Xe(a,b,c,d){T.call(this,a,b);this.i=c;this.j=d}z(Xe,T);
Xe.prototype.s=function(){return new Xe(this.Ra,this.t,this.i,this.j)};Xe.prototype.Ma=function(a){a=U(a,this.j);var b=Se(),b=U(b,b.hi);return"target."+a+"(reader."+b+"());"};Xe.prototype.Na=function(a){a=U(a,this.i);var b=S();return"writer."+U(b,b.Ii)+"(target."+a+"());"};Xe.prototype.Tb=function(a){var b=U(a,this.i);a=U(a,this.j);return"var _s = source."+b+"();var _t = target."+b+"();result."+a+"((_s + t * (_t - _s)));"};function Ye(a,b,c,d){T.call(this,a,b);this.i=c;this.j=d}z(Ye,T);
Ye.prototype.s=function(){return new Ye(this.Ra,this.t,this.i,this.j)};Ye.prototype.Ma=function(a){a=U(a,this.j);var b=Se(),b=U(b,b.xk);return"target."+a+"(reader."+b+"());"};Ye.prototype.Na=function(a){a=U(a,this.i);var b=S();return"writer."+U(b,b.dl)+"(target."+a+"());"};
Ye.prototype.Tb=function(a){var b=U(a,this.i),c=U(a,this.j);a=U(a,Ze);return"var _sv3 = source."+b+"();var _tv3 = target."+b+"();var _rv3 = source."+a+";_rv3[0] = (_tv3[0] - _sv3[0]) * t + _sv3[0];_rv3[1] = (_tv3[1] - _sv3[1]) * t + _sv3[1];_rv3[2] = (_tv3[2] - _sv3[2]) * t + _sv3[2];result."+c+"(_rv3);"};function $e(a,b,c,d,e){T.call(this,a,b);this.i=c;this.j=d;this.kk=e}z($e,T);$e.prototype.s=function(){return new $e(this.Ra,this.t,this.i,this.j,this.kk)};
$e.prototype.Ma=function(a){a=U(a,this.j);var b=Se(),b=U(b,b.yk);return"target."+a+"(reader."+b+"());"};$e.prototype.Na=function(a){a=U(a,this.i);var b=S();return"writer."+U(b,b.el)+"(target."+a+"());"};$e.prototype.Tb=function(a){var b=U(a,this.i),c=U(a,this.j),d=U(a,af);a=U(a,Je);return"var _rq = source."+d+";source."+a+"(source."+b+"(), target."+b+"(), t, _rq);result."+c+"(_rq);"};function bf(a,b,c,d){T.call(this,a,b);this.i=c;this.j=d}z(bf,T);
bf.prototype.s=function(){return new bf(this.Ra,this.t,this.i,this.j)};bf.prototype.Ma=function(a){a=U(a,this.j);var b=Se(),b=U(b,b.ba);return"target."+a+"(reader."+b+"());"};bf.prototype.Na=function(a){a=U(a,this.i);var b=S();return"writer."+U(b,b.J)+"(target."+a+"());"};bf.prototype.Tb=function(a){var b=U(a,this.i),c=U(a,this.j);a=U(a,Te);return"result."+c+"(source."+a+"(source."+b+"(), target."+b+"(), t));"};function cf(a,b,c,d){T.call(this,a,b);this.i=c;this.j=d}z(cf,T);
cf.prototype.s=function(){return new cf(this.Ra,this.t,this.i,this.j)};cf.prototype.Ma=function(a){a=U(a,this.j);var b=Se(),b=U(b,b.D);return"target."+a+"(reader."+b+"());"};cf.prototype.Na=function(a){a=U(a,this.i);var b=S();return"writer."+U(b,b.n)+"(target."+a+"());"};function df(a,b,c,d){T.call(this,a,b);this.i=c;this.j=d}z(df,T);df.prototype.s=function(){return new df(this.Ra,this.t,this.i,this.j)};
df.prototype.Ma=function(a){a=U(a,this.j);var b=Se(),b=U(b,b.D);return"target."+a+"(reader."+b+"());"};df.prototype.Na=function(a){a=U(a,this.i);var b=S();return"writer."+U(b,b.n)+"(target."+a+"());"};function ef(a,b,c,d){T.call(this,a,b);this.i=c;this.j=d}z(ef,T);ef.prototype.s=function(){return new ef(this.Ra,this.t,this.i,this.j)};ef.prototype.Ma=function(a){a=U(a,this.j);var b=Se(),b=U(b,b.Pa);return"target."+a+"(reader."+b+"());"};
ef.prototype.Na=function(a){a=U(a,this.i);var b=S();return"writer."+U(b,b.w)+"(target."+a+"());"};var Ze=A(),af=C();function ff(a,b){for(var c=0;c<a.length;c++)a[c].Sc=c;a.sort(Ue);this.Yh={};this.wk=Array(a.length);this.Ki=Array(a.length);var d="",e="",f="",g="",k="",j="",l="",r="";this.Hi=Array(a.length);for(c=0;c<a.length;c++){var q=a[c].s();this.Hi[c]=q;this.Yh[q.Ra]=q;q.Sc=c;this.wk[c]=new Function("target","reader",q.Ma(b));this.Ki[c]=new Function("target","writer",q.Na(b));var d=d+q.Ma(b),e=e+q.Na(b),w=q.yh(b),f=f+w;q.t&6||(g+=w);q.t&2&&(j+=w);if(q.t&4){var y=q.Tb(b),l=l+y,k=k+w;q.t&2||(r+=y)}}this.vk=new Function("target",
"reader",d);this.bl=new Function("target","writer",e);this.sl=new Function("source","target",f);this.eh=new Function("source","target",g);this.fh=new Function("source","target",k);this.gh=new Function("source","target",j);this.Bl=new Function("source","target","t","result",l);this.Al=new Function("source","target","t","result",r)}ff.prototype.za=function(){return this.Hi.length};function W(a,b){return a.Yh[b].Sc}function gf(a,b,c,d,e){for(a=a.Ki;c;){if(c&1)a[b](d,e);c>>=1;b++}};function Y(a,b){this.L=a;this.time=0;this.ua=b;this.ab=this.tb=0}t=Y.prototype;t.reset=function(a){this.L=a;this.ab=this.tb=this.time=0};function hf(a,b){if(!a.ua){var c=[];a(c);a.ua=new ff(c,b)}return a.ua}function Z(a,b){var c=a.tb||a.ab;31>=b?a.tb|=1<<b:a.ab|=1<<b-32;if(!c){var c=a.L,d=!!c.fa;c.fa|=2;d||(d=c.S,d.Pb[d.Ob++]=c)}}t.ng=function(){this.tb=this.ab=0};t.read=function(a){this.ua.vk(this,a)};t.write=function(a){this.ua.bl(this,a)};
t.Ng=function(a){a.w(this.tb);gf(this.ua,0,this.tb,this,a);this.ab&&31<this.ua.za()&&(a.w(this.ab),gf(this.ua,32,this.ab,this,a))};t.eh=function(a){this.ua.eh(this,a)};t.gh=function(a){this.ua.gh(this,a)};t.fh=function(a){this.ua.fh(this,a)};t.Bi=Ze;t.Bg=af;t.uk=Je;t.Xi=Te;Y.prototype.Bi[0]=Y.prototype.Bi[1];Y.prototype.uk(Y.prototype.Bg,Y.prototype.Bg,0,Y.prototype.Bg);Y.prototype.Xi(0,0,0);function $(a,b){var c=b||hf(jf,this);Y.call(this,a,c);this.gg=A();this.sk=W(c,kf);this.Da=C();this.Ek=W(c,lf);this.se=A();this.Gk=W(c,mf);this.rd=0;this.Ri=W(c,nf);this.Me=A();this.Yk=W(c,of)}z($,Y);var kf=V++,lf=V++,mf=V++,nf=V++,of=V++;t=$.prototype;t.Gc=s("gg");t.setPosition=function(a){Qa(this.gg,a)||(Ka(this.gg,a),Z(this,this.sk),this.L.Jb=m)};t.zj=s("Da");
t.ti=function(a){this.Da.length==a.length&&this.Da[0]==a[0]&&this.Da[1]==a[1]&&this.Da[2]==a[2]&&this.Da[3]==a[3]||(Xa(this.Da,a),Z(this,this.Ek),this.L.Jb=m)};t.Aj=s("se");t.ui=function(a){Qa(this.se,a)||(Ka(this.se,a),Z(this,this.Gk),this.L.Jb=m)};t.rj=s("rd");t.Kk=function(a){this.rd!=a&&(this.rd=a,Z(this,this.Ri),this.L.Jb=m)};t.Dj=s("Me");t.setVelocity=function(a){Qa(this.Me,a)||(Ka(this.Me,a),Z(this,this.Yk))};
function jf(a){a.push(new Ye(kf,Ve|6,$.prototype.Gc,$.prototype.setPosition));a.push(new $e(lf,Ve|6,$.prototype.zj,$.prototype.ti,m));a.push(new Ye(mf,Ve|6,$.prototype.Aj,$.prototype.ui));a.push(new Xe(nf,Ve|4,$.prototype.rj,$.prototype.Kk));a.push(new Ye(of,Ve|2,$.prototype.Dj,$.prototype.setVelocity))};function pf(a,b){var c=b||hf(qf,this);$.call(this,a,c);this.Wf="";this.gk=W(c,rf);this.Vf=0;this.fk=W(c,sf);this.af=0;this.Ni=W(c,tf)}z(pf,$);var rf=V++,sf=V++,tf=V++;t=pf.prototype;t.Fc=s("Wf");t.ze=function(a){this.Wf!=a&&(this.Wf=a,Z(this,this.gk))};t.xj=s("Vf");t.Lk=function(a){this.Vf!=a&&(this.Vf=a,Z(this,this.fk))};t.qj=s("af");t.Jk=function(a){this.af!=a&&(this.af=a,Z(this,this.Ni))};
function qf(a){jf(a);a.push(new cf(rf,0,pf.prototype.Fc,pf.prototype.ze));a.push(new bf(sf,Ve|4,pf.prototype.xj,pf.prototype.Lk));a.push(new We(tf,0,pf.prototype.qj,pf.prototype.Jk))};function uf(a,b){var c=b||hf(vf,this);pf.call(this,a,c);this.Jc=0;this.Td=i;this.Sj=W(c,wf)}z(uf,pf);var wf=V++;uf.prototype.uj=s("Jc");uf.prototype.sg=function(a){this.Jc!=a&&(this.Jc=a,Z(this,this.Sj),this.Td=i)};function vf(a){qf(a);a.push(new ef(wf,0,uf.prototype.uj,uf.prototype.sg))};A();A();function xf(){this.height=this.width=1;this.Ua=i;this.jk=0.1;this.Cf=100;this.ee=m;this.nk=Za();this.jg=Za();this.Ne=Za();this.Eh=Za();this.ed=Za();this.Xb=Za();this.position=A();this.direction=A();this.mj=[C(),C(),C(),C(),C(),C()]}var Me=[A(),A(),A(),A(),A(),A(),A(),A()];function yf(a,b){D.call(this);this.map=a;this.P=Math.min(Math.max(Math.floor(b),1),16);this.Ga=2*this.P+1;this.wa=Array(1*this.Ga*this.Ga);this.va=A();this.K=new Int32Array(3);this.Wa=Sa(this.va[0]-16*this.P,0,this.va[2]-16*this.P,this.va[0]+16*this.P,128,this.va[2]+16*this.P);this.m=[];this.Rj=p}z(yf,D);t=yf.prototype;t.b=function(){hb(this.m);yf.d.b.call(this)};t.Xe=function(a){this.m.push(a)};t.ii=function(a){Bb(this.m,a)};
t.update=function(a){Ka(this.va,a);var b=a[0]>>4,c=a[2]>>4;a=b-this.K[0];var d=c-this.K[2];if(a||d){var b=b<<4,c=c<<4,e=this.Wa,f=b+16*this.P,g=c+16*this.P;B(e.min,b-16*this.P,0,c-16*this.P);B(e.max,f,0,g);this.Wa.max[0]+=16;this.Wa.max[1]+=128;this.Wa.max[2]+=16;this.K[0]+=a;this.K[1]+=0;this.K[2]+=d;zf(this)}};
function zf(a){a.K[0]=a.va[0]>>4;a.K[1]=0;a.K[2]=a.va[2]>>4;for(var b=a.K[0]-a.P,c=a.K[2]-a.P,d=a.Ga,e=a.Ga,f=b;f<b+d;f++)for(var g=c;g<c+e;g++){var k=a,j=k.Sb(f,0,g);if(!(0>j||j>k.wa.length)){var l=k.map.Sd(f<<4,0,g<<4);if(l!=k.wa[j]){var r=k.wa[j];if(r){for(var q=0;q<k.m.length;q++)k.m[q].Vi(r);r.Ca--;r.Ca||r.map.ae(r)}l.Ca||l.map.be(l);l.Ca++;k.wa[j]=l;for(q=0;q<k.m.length;q++)2==l.state&&k.m[q].Kd(l)}}}}
t.Sb=function(a,b,c){a%=this.Ga;c%=this.Ga;0>a&&(a=this.Ga+a);0>c&&(c=this.Ga+c);return a+c*this.Ga};t.ce=function(a){for(var b=0;b<this.m.length;b++)this.m[b].Kd(a),this.m[b].Vj(a.x,a.y,a.k,a.x+16-1,a.y+128-1,a.k+16-1,3)};t.Sd=function(a,b,c){if(0>b||128<=b)return n;a>>=4;b>>=7;c>>=4;var d=Math.abs(c-this.K[2]);if(Math.abs(a-this.K[0])>this.P||0!=b||d>this.P)return n;a=this.Sb(a,b,c);return 0>a||a>this.wa.length?n:this.wa[a]};
t.Rf=function(a,b){var c=n,d=Math.floor(a[0]),e=Math.floor(a[1]),f=Math.floor(a[2]),g=0==a[3]?0:0>a[3]?-1:1,k=0==a[4]?0:0>a[4]?-1:1,j=0==a[5]?0:0>a[5]?-1:1,l=(d+(0<g?1:0)-a[0])/a[3],r=(e+(0<k?1:0)-a[1])/a[4],q=(f+(0<j?1:0)-a[2])/a[5];isNaN(l)&&(l=Number.POSITIVE_INFINITY);isNaN(r)&&(r=Number.POSITIVE_INFINITY);isNaN(q)&&(q=Number.POSITIVE_INFINITY);var w=g/a[3],y=k/a[4],G=j/a[5];isNaN(w)&&(w=Number.POSITIVE_INFINITY);isNaN(y)&&(y=Number.POSITIVE_INFINITY);isNaN(G)&&(G=Number.POSITIVE_INFINITY);for(var I=
Math.min(b,16*this.Ga),E=0;E<I;E++){var F=this.Sd(d,e,f);if(F&&(c=F.Rf(a)))break;l<r&&l<q?(l+=w,d+=g):r<q?(r+=y,e+=k):(q+=G,f+=j)}return c&&c.yf>b?n:c};t.ma=function(a,b,c,d){var e=this.Sd(a,b,c);if(!e||!e.ma(a,b,c,d))return p;for(d=0;d<this.m.length;d++)this.m[d].Dh(a,b,c,0);return m};A();A();function Af(a){this.bh=ga(a)?a:1}Af.prototype.ve=function(a){var b=S();if(Bf(this,a,b))return b.finish();b.bb();return n};
function Bf(a,b,c){switch(1){case 1:R(c,1);a:{pd(c,b.x);pd(c,b.y);pd(c,b.k);R(c,a.bh);switch(a.bh){default:case 0:b=new Uint8Array(b.U.buffer);nd(c,4+b.length);c.J(b.length);for(a=0;a<b.length;a++)c.buffer[c.offset++]=b[a];break;case 1:nd(c,65668);a=c.offset+4;b=b.U;a=c.buffer.subarray(a,a+65664);for(var d=0,e=0,f=0,g=0;g<b.length;g++){var k=b[g];g&&k==e?f++:(e=k,f=1);if(g>=b.length-2||b[g+1]!=e)1<f||255==e>>8?(a[d++]=255,a[d++]=f>>8,a[d++]=f&255,a[d++]=e>>8,a[d++]=e&255):(a[d++]=k>>8,a[d++]=k&255)}b=
d;if(0>b){c=p;break a}c.J(b);c.offset+=b;break;case 2:c=p;break a}c=m}return c;default:return p}}var Cf=n;function Df(a,b){D.call(this);this.Qa=a;this.nc=b;this.Ea=[];this.Tf=-3;this.Ih=0}z(Df,D);Df.prototype.Kd=function(a){0<=vb(this.Ea,a)||(this.Ea.push(a),this.Tf=0)};Df.prototype.Vi=v;Df.prototype.Dh=v;Df.prototype.Vj=v;function Ef(a,b,c,d){Ke.call(this,a,b,c,d);this.Ua=i;this.Ea=this.Ia=this.r=n}z(Ef,Ke);t=Ef.prototype;t.b=function(){this.r&&this.Ia&&(Bb(this.r.Sa,this.Ia),L(this.Ia));Ef.d.b.call(this)};t.vg=function(a){this.r=a;this.Ia=new yf(a,16);a.Sa.push(this.Ia);id(this,1,0)};
t.update=function(a){var b=Ff,c=this.getParent();c instanceof Ke?Le(c,b):Le(this,b);this.Ia.update(b);var c=this.Ea,d=Math.min(1,c.Ea.length);if(3<a-c.Tf){c.Tf=a;var e=Rb[0];Eb(c.Ea,function(a,c){B(e,a.x+8,b[1],a.k+8);var d=Oa(b,e);B(e,c.x+8,b[1],c.k+8);return d-Oa(b,e)})}0.01<a-c.Ih?c.Ih=a:d=0;if(d){a=S();var f;Cf||(Cf=new Af(0));f=Cf;for(var g=0;g<d;g++){var k=c.Ea.shift();fe.x=k.x;fe.y=k.y;fe.k=k.k;var j=a;R(j,73);pd(j,fe.x);pd(j,fe.y);pd(j,fe.k);Bf(f,k,a)&&c.Qa.send(a.finish(),c.nc);a.bb()}}id(this,
1,0)};t.ga=function(a){Ef.d.ga.call(this,a);a instanceof Ee&&(this.Ua=a.$e)};t.Hb=function(a){var b=this.$(),c=we(this).r;this.vg(c);this.Ea=new Df(b.Qa,a);J(this,this.Ea);this.Ia.Xe(this.Ea);a=Ja(0,80,0);b=this.Ia;Ka(b.va,a);zf(b);b.Rj=m};t.wd=function(a){if(this.Ua){var b=this.Ua;a.Ua!==b&&(a.Ua=b,a.ee=m)}b=this.getParent();b instanceof Ke?b.wd(a):Ef.d.wd.call(this,a)};var Ff=C();function Gf(a,b){var c=b||hf(Hf,this);$.call(this,a,c)}z(Gf,$);function Hf(a){jf(a)};function If(a,b,c,d){Q.call(this,a,b,c,d)}z(If,Q);If.prototype.If=function(){return this.getParent()};If.prototype.Ad=function(a){If.d.Ad.call(this,a)};If.prototype.Mb=function(a){If.d.Mb.call(this,a)};If.prototype.ga=function(a){If.d.ga.call(this,a);if(a instanceof Ge){var b=this.If();a:{for(var c=0;c<this.G.length;c++)if(this.G[c].z==a.Cg){a=this.G[c];break a}a=n}a&&b.g.sg(a?a.z:0)}};function Jf(a,b){var c=b||hf(Kf,this);Y.call(this,a,c)}z(Jf,Y);function Kf(){};function Lf(){this.lj=m}
Lf.prototype.ga=function(a,b){var c=a.Ag,d=a.Og*Ae,e=a.eg*Ae,f=a.Ck*Ae,g=Mf,k=Math.sin(d/2),d=Math.cos(d/2),j=Math.sin(e/2),e=Math.cos(e/2),l=Math.sin(f/2),f=Math.cos(f/2);g[0]=d*j*f+k*e*l;g[1]=k*e*f-d*j*l;g[2]=d*e*l-k*j*f;g[3]=d*e*f+k*j*l;b.ti(Mf);if(this.lj){g=b.Gc();k=Nf[4];j=b.Da;d=b.Me;f=Nf[5];e=Na(d);1E-4<e?(l=Math.max(0,e-40*c),Ma(d,l/e,f)):B(f,0,0,0);d=a.Eg;e=Nf[0];e[0]=0;e[0]+=18*!!(d&1);e[0]-=18*!!(d&2);e[1]=0;e[1]+=18*!!(d&4);e[1]-=18*!!(d&8);e[2]=0;e[2]+=18*!!(d&16);e[2]-=18*!!(d&32);
var d=Nf[1],l=j[0]*(j[0]+j[0]),r=j[3]*(j[0]+j[0]),q=j[0]*(j[1]+j[1]),w=j[1]*(j[1]+j[1]),y=j[3]*(j[1]+j[1]),G=j[0]*(j[2]+j[2]),I=j[1]*(j[2]+j[2]),E=j[2]*(j[2]+j[2]),j=j[3]*(j[2]+j[2]),F=e[0],K=e[1],e=e[2];d[0]=F*(1-w-E)+K*(q-j)+e*(G+y);d[1]=F*(q+j)+K*(1-l-E)+e*(I-r);d[2]=F*(G-y)+K*(I+r)+e*(1-l-w);j=Nf[2];(e=Na(d))?Ma(d,1/e,j):B(j,0,0,0);e=Na(d);18<e&&(Ma(d,18/e,d),e=18);d=e-(f[0]*j[0]+f[1]*j[1]+f[2]*j[2]);0<d&&(e=20*e*c,e>d&&(e=d),Ma(j,e,j),La(j,f,f));d=Nf[3];Ma(f,c,d);La(g,d,k);b.setPosition(k);b.setVelocity(f)}};
var Nf=[A(),A(),A(),A(),A(),A()];C();C();C();new Float32Array(16);new Float32Array(6);var Mf=C();function Of(a,b,c,d){Q.call(this,a,b,c,d)}z(Of,Q);Of.prototype.If=function(){return this.getParent()};function Pf(a,b,c,d){Ne.call(this,a,b,c,d)}z(Pf,Ne);Pf.prototype.ag=function(a,b){Pf.d.ag.call(this,a,b)};Pf.prototype.dg=v;function Qf(a,b,c,d){Q.call(this,a,b,c,d);this.Zk=new xf;this.hk=new Lf}z(Qf,Of);
Qf.prototype.ga=function(a){Qf.d.ga.call(this,a);var b=this.If();if(b&&a instanceof ze){this.hk.ga(a,b.g);var c,d=this.g;d.ge===i&&(d.ge=d.Vc?d.L.$().C[d.Vc]||n:n);c=d.ge;var d=Rf(c.g),e=d.Ia,f=this.Zk,g=16*d.Ia.P+16;f.Cf!=g&&(f.Cf=g,f.ee=m);d.wd(f);if(a.mb&&(d=b.g,d.Td===i&&(d.Td=d.Jc?d.L.$().C[d.Jc]||n:n),d=d.Td)){g=Sf;g.time=a.getTime();g.viewport=f;g.ah=e;g.fg=c;g.Li=b;g.screenX=0.5;g.screenY=0.5;a.mb&1&&(g.screenX=a.pg/65535,g.screenY=a.qg/65535);var b=g.kg,k=2*(g.screenX/f.width)-1,j=1-2*(g.screenY/
f.height);c=Me[0];e=Me[1];B(c,k,j,-1);B(e,k,j,1);cb(f.Xb,c,c);cb(f.Xb,e,e);Pa(c,e,e);var f=c[1],k=c[2],j=e[0],l=e[1],e=e[2];b[0]=c[0];b[1]=f;b[2]=k;b[3]=j;b[4]=l;b[5]=e;a.Mf||(a=a.mb,a&4&&d.dg(g,0),a&32&&d.dg(g,1))}}};var Sf=new function(){this.time=0;this.Li=this.fg=this.ah=this.viewport=n;this.screenY=this.screenX=0;this.kg=new Float32Array(6)};function Tf(a,b,c,d){Ne.call(this,a,b,c,d)}z(Tf,Pf);Tf.prototype.Rd=function(){var a=this.g.Rd();return we(this).r.u.p[a]};Tf.prototype.ye=function(a){this.g.ye(a.id)};
Tf.prototype.dg=function(a,b){var c=a.ah.Rf(a.kg,100);if(c&&100>=c.yf)if(0==b){var d=c.Pg,e=c.Qg,f=c.Rg,g=0,k=0,j=0,c=c.ai;c[0]==d?g--:c[0]==d+1&&g++;c[1]==e?k--:c[1]==e+1&&k++;c[2]==f?j--:c[2]==f+1&&j++;c=d+g;e+=k;f+=j;k=this.Rd();j=a.fg;k=k?k.id<<8:0;we(this).ma(c,e,f,k,j)}else 1==b&&(f=c.Pg,j=c.Qg,c=c.Rg,e=a.fg,we(this).ma(f,j,c,0,e))};function Uf(a,b,c,d){Q.call(this,a,b,c,d)}z(Uf,Q);Uf.prototype.zb=function(){var a=this.g;a.Je===i&&(a.Je=a.cd?a.L.$().zb(a.cd):n);return a.Je};Uf.prototype.Hf=function(){var a=Vf(this.g),b=this.g;b.Ed===i&&(b.Ed=b.wc?b.L.$().C[b.wc]||n:n);var b=b.Ed,c=Rf(this.g),d=this.g;d.Xd===i&&(d.Xd=d.Lc?d.L.$().C[d.Lc]||n:n);return[a,b,c,d.Xd]};
Uf.prototype.Hb=function(a){var b=this.$(),c=this.g;this.ja=a;c.wi(a.c);var d=this.S.hc,e=xe(d.g).r;ed(this,d);d=b.xa(69,30);d.ja=a;d.ze("pumpkin");c.ni(d.z);var f=b.xa(68,66);f.ja=a;ed(f,d);f.g.si(this.z);c.pi(f.z);f=b.xa(66,66);f.ja=a;ed(f,d);f.Hb(a);c.oi(f.z);f=b.xa(70,0);f.ja=a;ed(f,d);c.qi(f.z);c=[e.u.p[1],e.u.p[2],e.u.p[3],e.u.p[4],e.u.p[5],e.u.p[6],e.u.p[7],e.u.p[8],e.u.p[9]];for(e=0;e<c.length;e++){var g=b.xa(72,0);g.ja=a;ed(g,f);g.ye(c[e]);0==e&&d.g.sg(g?g.z:0)}};function Wf(a,b){var c=b||hf(Xf,this);Y.call(this,a,c);this.cd="";this.Je=i;this.Xk=W(c,Yf);this.pc=0;this.hd=i;this.Mi=W(c,Zf);this.wc=0;this.Ed=i;this.aj=W(c,$f);this.tc=0;this.yd=i;this.Si=W(c,ag);this.Lc=0;this.Xd=i;this.Wj=W(c,bg)}z(Wf,Y);var Yf=V++,Zf=V++,$f=V++,ag=V++,bg=V++;t=Wf.prototype;t.Cj=s("cd");t.wi=function(a){this.cd!=a&&(this.cd=a,Z(this,this.Xk),this.Je=i)};t.pj=s("pc");function Vf(a){a.hd===i&&(a.hd=a.pc?a.L.$().C[a.pc]||n:n);return a.hd}
t.ni=function(a){this.pc!=a&&(this.pc=a,Z(this,this.Mi),this.hd=i)};t.tj=s("wc");t.pi=function(a){this.wc!=a&&(this.wc=a,Z(this,this.aj),this.Ed=i)};t.sj=s("tc");function Rf(a){a.yd===i&&(a.yd=a.tc?a.L.$().C[a.tc]||n:n);return a.yd}t.oi=function(a){this.tc!=a&&(this.tc=a,Z(this,this.Si),this.yd=i)};t.vj=s("Lc");t.qi=function(a){this.Lc!=a&&(this.Lc=a,Z(this,this.Wj),this.Xd=i)};
function Xf(a){a.push(new df(Yf,0,Wf.prototype.Cj,Wf.prototype.wi));a.push(new ef(Zf,0,Wf.prototype.pj,Wf.prototype.ni));a.push(new ef($f,0,Wf.prototype.tj,Wf.prototype.pi));a.push(new ef(ag,0,Wf.prototype.sj,Wf.prototype.oi));a.push(new ef(bg,0,Wf.prototype.vj,Wf.prototype.qi))};function cg(a,b){var c=b||hf(dg,this);Y.call(this,a,c);this.fd=0;this.Oe=i;this.al=W(c,eg)}z(cg,Y);var eg=V++;cg.prototype.Ej=s("fd");function xe(a){a.Oe===i&&(a.Oe=a.fd?a.L.$().C[a.fd]||n:n);return a.Oe}cg.prototype.xi=function(a){this.fd!=a&&(this.fd=a,Z(this,this.al),this.Oe=i)};function dg(a){a.push(new ef(eg,0,cg.prototype.Ej,cg.prototype.xi))};function fg(a,b,c,d,e){Q.call(this,a,b,c,d);this.zi=e}z(fg,Q);fg.prototype.Ad=function(a){a instanceof Ke&&this.zi.We(a)};fg.prototype.Mb=function(a){a instanceof Ke&&this.zi.Zc(a)};function gg(a){this.Pl=a||hg;this.Rl=[]}function hg(){this.kg=new Float32Array(6);this.end=this.start=this.Gl=0;this.L=this.Ql=n;this.ai=A();this.yf=0};function ig(){gg.call(this);this.C=[]}z(ig,gg);ig.prototype.We=function(a){this.C.push(a)};ig.prototype.Zc=function(a){Bb(this.C,a)};ig.prototype.forEach=function(a,b){for(var c=0;c<this.C.length&&a.call(b||u,this.C[c])!==p;c++);};C();function jg(a,b,c,d){fg.call(this,a,b,c,d,new ig);this.r=n}z(jg,fg);jg.prototype.vg=ba("r");jg.prototype.update=function(a){this.g.vi(a|0);id(this,2,a+1)};jg.prototype.ma=function(a,b,c,d,e){var f=this.r;d&&!f.u.p[d>>8]?M("unknown block type",d):f.ma(a,b,c,d)!=d&&(f=this.qf(66),f.x=a,f.y=b,f.k=c,f.data=d,a=e?e.zb():n,gd(this.S,f,a))};A();function kg(a,b){var c=b||hf(lg,this);Y.call(this,a,c)}z(kg,Y);function lg(){};function mg(a,b){var c=b||hf(ng,this);kg.call(this,a,c);this.xg=0;this.Pk=W(c,og)}z(mg,kg);var og=V++;mg.prototype.Bj=s("xg");mg.prototype.vi=function(a){this.xg!=a&&(this.xg=a,Z(this,this.Pk))};function ng(a){a.push(new Xe(og,0,mg.prototype.Bj,mg.prototype.vi))};function pg(a,b){var c=b||hf(qg,this);Y.call(this,a,c)}z(pg,Y);function qg(){};function rg(a,b){var c=b||hf(sg,this);pg.call(this,a,c);this.Vc=0;this.ge=i;this.rk=W(c,tg)}z(rg,pg);var tg=V++;rg.prototype.yj=s("Vc");rg.prototype.si=function(a){this.Vc!=a&&(this.Vc=a,Z(this,this.rk),this.ge=i)};function sg(a){a.push(new ef(tg,0,rg.prototype.yj,rg.prototype.si))};function ug(a,b){var c=b||hf(vg,this);pf.call(this,a,c)}z(ug,pf);function vg(a){qf(a)};function wg(a,b){var c=b||hf(xg,this);ug.call(this,a,c);this.cf=0;this.Oi=W(c,yg)}z(wg,ug);var yg=V++;wg.prototype.Rd=s("cf");wg.prototype.ye=function(a){this.cf!=a&&(this.cf=a,Z(this,this.Oi))};function xg(a){qf(a);a.push(new We(yg,0,wg.prototype.Rd,wg.prototype.ye))};function zg(a,b,c,d){Ne.call(this,a,b,c,d)}z(zg,Pf);function Ag(a,b){var c=b||hf(Bg,this);ug.call(this,a,c)}z(Ag,ug);function Bg(a){qf(a)};function Cg(a,b,c){this.Ha=a;this.fj=b;this.Nk=c;this.Be=[]}Cg.prototype.xa=function(a,b,c){return new this.fj(a,this,b,c)};function Dg(a,b,c,d,e,f){this.rl=a;this.type=b;this.Tl=c;this.userName=d;this.timestamp=e;this.value=f||n};function Eg(a){D.call(this);this.B=a;this.h=[];this.Bf=[]}z(Eg,D);Eg.prototype.Ye=function(a){if(0<=vb(this.h,a))return n;this.h.push(a);a=new Dg(this,0,a.c,a.info.qa,ua());this.Bf.push(a);return a};Eg.prototype.me=function(a){return Bb(this.h,a)?(a=new Dg(this,1,a.c,a.info.qa,ua()),this.Bf.push(a),a):n};Eg.prototype.postMessage=function(a,b){if(!(0<=vb(this.h,a)))return n;var c=new Dg(this,2,a.c,a.info.qa,ua(),b);this.Bf.push(c);return c};function Fg(a){D.call(this);this.ta=a;this.uc={};this.Yf=[];this.yi(a.$b)}z(Fg,D);t=Fg.prototype;t.b=function(){zc(this.uc,L);this.uc={};Fg.d.b.call(this)};t.yi=v;function Gg(a,b,c){var d=a.uc[b];!d&&c&&(d=new Eg(b),a.uc[b]=d);return d}t.bi=function(){if(this.Yf.length){var a=this.Yf;this.Yf=[];return a}return n};t.$a=v;t.vf=v;t.Ig=v;t.Jg=function(a){zc(this.uc,function(b){b.me(a)})};t.Kg=v;function Hg(){this.Ka="";this.name="Server";this.location="us";this.Dc="unknown";this.Ec="0";this.Zb=32;this.Bb={}}Hg.prototype.s=function(){var a=new Hg;a.Ka=this.Ka;a.name=this.name;a.location=this.location;a.Dc=this.Dc;a.Ec=this.Ec;a.Zb=this.Zb;a.Bb=Cc(this.Bb);return a};Hg.prototype.toString=ca("[server]");function Ig(){this.Yb=this.N=0}function Jg(a,b){var c=b||new Zd;c.nd=a.D();c.md=a.D();c.qa=a.D();return c}function Kg(a,b){a.n(b.nd);a.n(b.md);a.n(b.qa);return m}function Lg(a,b){a.n(b.c);R(a,b.N);a.J(b.t);var c;if(!(c=!Kg(a,b.info)))c=b.jd,a.n(c.type),a.n(c.platform),a.n(c.Uc),a.n(c.zc),c=p;return c?p:m}var Mg=new function(){this.Yb=this.vc=this.xe=0},Ng=new function(){this.vc=this.xe=0;this.Le=[]};
function Og(a,b){var c=Mg.vc,d=S();Ng.xe=a;Ng.vc=c;Ng.Le=b;R(d,2);d.J(Ng.xe);d.J(Ng.vc);d.J(Ng.Le.length);for(c=0;c<Ng.Le.length;c++){var e=d,f=Ng.Le[c];R(e,f.N);qd(e,f.Yb)}return d.finish()}var Pg=new function(){this.info=new Hg;this.h=[]};
function Qg(a,b){var c=S();Pg.info=a;Pg.h=b;var d;a:{R(c,3);d=Pg.info;c.n(d.Ka);c.n(d.name);c.n(d.location);c.n(d.Dc);c.n(d.Ec);c.J(d.Zb);var e=0,f;for(f in d.Bb)e++;c.J(e);for(var g in d.Bb)e=d.Bb[g],c.n(g),c.n(e);c.J(Pg.h.length);for(d=0;d<Pg.h.length;d++)if(!Lg(c,Pg.h[d])){d=p;break a}d=m}return!d?(c.bb(),n):c.finish()}function Rg(){this.kd=this.Ce=0;this.F=new $d}var Sg=new Rg,Tg=new Rg;
function Ug(a,b){var c=S();Tg.Ce=3;Tg.kd=a;Tg.F=b;R(c,4);qd(c,Tg.Ce);qd(c,Tg.kd);return!Lg(c,Tg.F)?(c.bb(),n):c.finish()}function Vg(){this.reason=0}var Wg=new Vg,Xg=new Vg,Yg=new function(){this.F=new $d};function Zg(a){var b=S();Yg.F=a;R(b,6);return!Lg(b,Yg.F)?(b.bb(),n):b.finish()}var $g=new function(){this.c="";this.reason=0};function ah(a,b){var c=S();$g.c=a;$g.reason=b;R(c,7);c.n($g.c);c.J($g.reason);return c.finish()}function bh(){this.c="";this.info=new Zd}var ch=new bh,dh=new bh;
function eh(a,b){var c=S();dh.c=a;dh.info=b;R(c,8);c.n(dh.c);return!Kg(c,dh.info)?(c.bb(),n):c.finish()}function fh(){this.B=this.c="";this.timestamp=0;this.mc=[]}var gh=new fh,hh=new fh;function ih(a,b,c,d){var e=S();hh.c=a;hh.B=b;hh.timestamp=c;hh.mc=d;R(e,20);e.n(hh.c);e.n(hh.B);e.J(hh.timestamp);e.J(hh.mc.length);for(a=0;a<hh.mc.length;a++)e.n(hh.mc[a]);return e.finish()}function jh(){this.B=this.c="";this.timestamp=0}var kh=new jh,lh=new jh;
function mh(){this.B=this.c="";this.timestamp=0;this.message=""}var nh=new mh,oh=new mh;function ph(a){Fg.call(this,a);this.we=a}z(ph,Fg);t=ph.prototype;t.join=function(a,b,c){if(b=Gg(this,b,m)){var d=ua();ga(c)&&1E3>d-c&&(d=c);b.Ye(a);var e=Array(b.h.length);for(c=0;c<b.h.length;c++){var f=b.h[c];e[c]=f.c}this.we.send(ih(f.c,b.B,d,e),a);d=ih(a.c,b.B,d,[]);for(c=0;c<b.h.length;c++)f=b.h[c],f!=a&&this.we.send(d,f)}};t.yi=function(a){ve(a,20,this.Fj,this);ve(a,21,this.Gj,this);ve(a,22,this.Hj,this)};
t.Fj=function(a,b,c){a=a.F;if(!a)return p;gh.c=c.D();gh.B=c.D();gh.timestamp=c.ba();b=c.ba();gh.mc.length=b;for(var d=0;d<b;d++)gh.mc[d]=c.D();if(!gh)return p;if(gh.c!=a.c)return M("user info mismatch"),p;this.join(a,gh.B,gh.timestamp);return m};
t.Gj=function(a,b,c){a=a.F;if(!a)return p;kh.c=c.D();kh.B=c.D();kh.timestamp=c.ba();if(!kh)return p;if(kh.c!=a.c)return M("user info mismatch"),p;b=kh.timestamp;if(c=Gg(this,kh.B,p)){var d=ua();ga(b)&&1E3>d-b&&(d=b);b=a.c;var e=c.B,f=S();lh.c=b;lh.B=e;lh.timestamp=d;R(f,21);f.n(lh.c);f.n(lh.B);f.J(lh.timestamp);b=f.finish();for(e=0;e<c.h.length;e++)this.we.send(b,c.h[e]);c.me(a)}return m};
t.Hj=function(a,b,c){a=a.F;if(!a)return p;nh.c=c.D();nh.B=c.D();nh.timestamp=c.ba();nh.message=c.D();if(!nh)return p;if(nh.c!=a.c)return M("user info mismatch"),p;c=Gg(this,nh.B,p);if(!c)return m;c.postMessage(a,nh.message);a=a.c;b=c.B;var d=ua(),e=nh.message,f=S();oh.c=a;oh.B=b;oh.timestamp=d;oh.message=e;R(f,22);f.n(oh.c);f.n(oh.B);f.J(oh.timestamp);f.n(oh.message);a=f.finish();for(b=0;b<c.h.length;b++)this.we.send(a,c.h[b]);return m};function qh(a,b,c){D.call(this);a.H=b.H;this.nj=a;this.ta=b;this.ta.R.push(this);this.$g=new ph(b);this.ta.R.push(this.$g);b=a.Kh;var d=new Lb;d.wh=b.ak;d.te=b.ck;this.r=new Zc(d,c);J(this,this.r);this.Fa=new ue(a,this.ta,ee);J(this,this.Fa);a=this.Fa;c=new ne(64,Ee,0);a.Ya[c.Ha]=c;c=new ne(65,ze,2);a.Ya[c.Ha]=c;c=new ne(66,Fe,0);a.Ya[c.Ha]=c;c=new ne(67,Ge,He);a.Ya[c.Ha]=c;a=this.Fa;pe(a,new Cg(64,ye,cg));pe(a,new Cg(65,jg,mg));pe(a,new Cg(66,Ef,Gf));pe(a,new Cg(67,Uf,Wf));pe(a,new Cg(68,Qf,rg));
pe(a,new Cg(69,Oe,uf));pe(a,new Cg(70,If,Jf));pe(a,new Cg(71,zg,Ag));pe(a,new Cg(72,Tf,wg));this.jb=n;this.$h=[];this.Qh=new Kb(this.nj.rc);J(this,this.Qh)}z(qh,D);t=qh.prototype;t.$=s("Fa");t.Ub=s("jb");t.Oj=v;
t.load=function(){var a=new O;this.jb=this.Fa.xa(64,128);this.jb.vh=this;var b=this.Ub();this.Pe=this.Fa.xa(65,0);ed(this.Pe,b);this.Pe.vg(this.r);b.g.xi(this.Pe.z);b=this.ta;b.lg=m;b.state=1;b.ca.da(x(b.Jf,b));for(var c=0;c<b.R.length;c++)b.R[c].$a();M("Server ready, listening on",b.ca.Ka.toString());a.e(n);return a};
t.Ig=function(a){M("client connected",a.c,a.info,a.jd);this.$g.join(a,"main");var b=this.$().xa(67,0);b.Hb(a);var c=Vf(b.g);ed(c,we(b));var d=Ja(0,80,0);c.g.setPosition(d);dd(b.S.hc,0);a.data=b;this.$h.push(b);this.ta.send(ge(),a);this.Oj()};t.Jg=function(a){M("client disconnected",a.c);if(a=a.data)this.$().Zc(a),dd(a.S.hc,0),Bb(this.$h,a),L(a)};t.Kg=v;t.update=function(a){2!=this.ta.state&&(this.ta.bi(5),2==this.ta.state?M("Server disconnected!?"):(this.r.update(a),this.Fa.update(a)))};t.ne=aa();
t.$a=v;t.vf=v;function rh(a,b,c){qh.call(this,a,b,c);this.Pe=n}z(rh,qh);function sh(){this.Qk=this.zg=this.time=this.Gf=0}sh.prototype.gb=function(a,b,c,d){this.Gf=a;this.time=b;this.zg=c;this.Qk=d};function th(a){this.pe=a}th.prototype.ve=function(a){var b=[];uh(this,a,b);return b.join("")};
function uh(a,b,c){switch(typeof b){case "string":vh(b,c);break;case "number":c.push(isFinite(b)&&!isNaN(b)?b:"null");break;case "boolean":c.push(b);break;case "undefined":c.push("null");break;case "object":if(b==n){c.push("null");break}if(ka(b)){var d=b.length;c.push("[");for(var e="",f=0;f<d;f++)c.push(e),e=b[f],uh(a,a.pe?a.pe.call(b,String(f),e):e,c),e=",";c.push("]");break}c.push("{");d="";for(f in b)Object.prototype.hasOwnProperty.call(b,f)&&(e=b[f],"function"!=typeof e&&(c.push(d),vh(f,c),c.push(":"),
uh(a,a.pe?a.pe.call(b,f,e):e,c),d=","));c.push("}");break;case "function":break;default:h(Error("Unknown type: "+typeof b))}}var wh={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"},xh=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;
function vh(a,b){b.push('"',a.replace(xh,function(a){if(a in wh)return wh[a];var b=a.charCodeAt(0),e="\\u";16>b?e+="000":256>b?e+="00":4096>b&&(e+="0");return wh[a]=e+b.toString(16)}),'"')};function yh(){this.ad=N();this.nf=this.Yb=this.wb=0;this.zl=p};function zh(a,b){D.call(this);this.Kh=a;this.H=b||new yh;this.of=[];this.pl=n}z(zh,D);zh.prototype.b=function(){hb(this.of);this.of.length=0;zh.d.b.call(this)};zh.prototype.getTime=function(){return(N()-this.H.ad)/1E3+this.H.nf};function Ah(){this.zg=this.time=this.Gf=0;this.hasFocus=p}Ah.prototype.gb=function(a,b,c,d){this.Gf=a;this.time=b;this.zg=c;this.hasFocus=d};var Bh;if(!(Bh=!Ed))Bh=Ed&&9<=Ud;var Ch=Bh,Dh=Ed&&!Sd("9");!Gd||Sd("528");Fd&&Sd("1.9b")||Ed&&Sd("8")||Dd&&Sd("9.5")||Gd&&Sd("528");Fd&&!Sd("8")||Ed&&Sd("9");function Eh(a,b){this.type=a;this.currentTarget=this.target=b}t=Eh.prototype;t.b=aa();t.Ac=aa();t.ec=p;t.defaultPrevented=p;t.re=m;t.preventDefault=function(){this.defaultPrevented=m;this.re=p};function Fh(a){Fh[" "](a);return a}Fh[" "]=v;function Gh(a,b){a&&this.gb(a,b)}z(Gh,Eh);t=Gh.prototype;t.target=n;t.relatedTarget=n;t.offsetX=0;t.offsetY=0;t.clientX=0;t.clientY=0;t.screenX=0;t.screenY=0;t.button=0;t.keyCode=0;t.charCode=0;t.ctrlKey=p;t.altKey=p;t.shiftKey=p;t.metaKey=p;t.qk=p;t.Af=n;
t.gb=function(a,b){var c=this.type=a.type;Eh.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(Fd){var e;a:{try{Fh(d.nodeName);e=m;break a}catch(f){}e=p}e||(d=n)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=Gd||a.offsetX!==i?a.offsetX:a.layerX;this.offsetY=Gd||a.offsetY!==i?a.offsetY:a.layerY;this.clientX=a.clientX!==i?a.clientX:a.pageX;this.clientY=a.clientY!==i?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.qk=xd?a.metaKey:a.ctrlKey;this.state=a.state;this.Af=a;a.defaultPrevented&&this.preventDefault();delete this.ec};
t.preventDefault=function(){Gh.d.preventDefault.call(this);var a=this.Af;if(a.preventDefault)a.preventDefault();else if(a.returnValue=p,Dh)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};t.b=aa();function Hh(){}var Ih=0;t=Hh.prototype;t.key=0;t.fc=p;t.xd=p;t.gb=function(a,b,c,d,e,f){na(a)?this.Fh=m:a&&a.handleEvent&&na(a.handleEvent)?this.Fh=p:h(Error("Invalid listener argument"));this.listener=a;this.gi=b;this.src=c;this.type=d;this.capture=!!e;this.Lf=f;this.xd=p;this.key=++Ih;this.fc=p};t.handleEvent=function(a){return this.Fh?this.listener.call(this.Lf||this.src,a):this.listener.handleEvent.call(this.listener,a)};var Jh={},Kh={},Lh={},Mh={};
function Nh(a,b,c,d,e){if(ka(b)){for(var f=0;f<b.length;f++)Nh(a,b[f],c,d,e);return n}a:{b||h(Error("Invalid event type"));d=!!d;var g=Kh;b in g||(g[b]={f:0,la:0});g=g[b];d in g||(g[d]={f:0,la:0},g.f++);var g=g[d],f=pa(a),k;g.la++;if(g[f]){k=g[f];for(var j=0;j<k.length;j++)if(g=k[j],g.listener==c&&g.Lf==e){if(g.fc)break;k[j].xd=p;a=k[j].key;break a}}else k=g[f]=[],g.f++;var l=Oh,r=Ch?function(a){return l.call(r.src,r.key,a)}:function(a){a=l.call(r.src,r.key,a);if(!a)return a},j=r;j.src=a;g=new Hh;
g.gb(c,j,a,b,d,e);g.xd=p;c=g.key;j.key=c;k.push(g);Jh[c]=g;Lh[f]||(Lh[f]=[]);Lh[f].push(g);a.addEventListener?(a==u||!a.hh)&&a.addEventListener(b,j,d):a.attachEvent(b in Mh?Mh[b]:Mh[b]="on"+b,j);a=c}return a}function Ph(a,b,c,d,e){if(ka(b))for(var f=0;f<b.length;f++)Ph(a,b[f],c,d,e);else{d=!!d;a:{f=Kh;if(b in f&&(f=f[b],d in f&&(f=f[d],a=pa(a),f[a]))){a=f[a];break a}a=n}if(a)for(f=0;f<a.length;f++)if(a[f].listener==c&&a[f].capture==d&&a[f].Lf==e){Qh(a[f].key);break}}}
function Qh(a){if(!Jh[a])return p;var b=Jh[a];if(b.fc)return p;var c=b.src,d=b.type,e=b.gi,f=b.capture;c.removeEventListener?(c==u||!c.hh)&&c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(d in Mh?Mh[d]:Mh[d]="on"+d,e);c=pa(c);Lh[c]&&(e=Lh[c],Bb(e,b),0==e.length&&delete Lh[c]);b.fc=m;if(b=Kh[d][f][c])b.Th=m,Rh(d,f,c,b);delete Jh[a];return m}
function Rh(a,b,c,d){if(!d.Zd&&d.Th){for(var e=0,f=0;e<d.length;e++)d[e].fc?d[e].gi.src=n:(e!=f&&(d[f]=d[e]),f++);d.length=f;d.Th=p;0==f&&(delete Kh[a][b][c],Kh[a][b].f--,0==Kh[a][b].f&&(delete Kh[a][b],Kh[a].f--),0==Kh[a].f&&delete Kh[a])}}function Sh(a,b,c,d,e){var f=1;b=pa(b);if(a[b]){a.la--;a=a[b];a.Zd?a.Zd++:a.Zd=1;try{for(var g=a.length,k=0;k<g;k++){var j=a[k];j&&!j.fc&&(f&=Th(j,e)!==p)}}finally{a.Zd--,Rh(c,d,b,a)}}return Boolean(f)}function Th(a,b){a.xd&&Qh(a.key);return a.handleEvent(b)}
function Oh(a,b){if(!Jh[a])return m;var c=Jh[a],d=c.type,e=Kh;if(!(d in e))return m;var e=e[d],f,g;if(!Ch){f=b||ha("window.event");var k=m in e,j=p in e;if(k){if(0>f.keyCode||f.returnValue!=i)return m;a:{var l=p;if(0==f.keyCode)try{f.keyCode=-1;break a}catch(r){l=m}if(l||f.returnValue==i)f.returnValue=m}}l=new Gh;l.gb(f,this);f=m;try{if(k){for(var q=[],w=l.currentTarget;w;w=w.parentNode)q.push(w);g=e[m];g.la=g.f;for(var y=q.length-1;!l.ec&&0<=y&&g.la;y--)l.currentTarget=q[y],f&=Sh(g,q[y],d,m,l);if(j){g=
e[p];g.la=g.f;for(y=0;!l.ec&&y<q.length&&g.la;y++)l.currentTarget=q[y],f&=Sh(g,q[y],d,p,l)}}else f=Th(c,l)}finally{q&&(q.length=0)}return f}d=new Gh(b,this);return f=Th(c,d)};function Uh(a){D.call(this);this.Qj=a;this.A=[]}z(Uh,D);var Vh=[];Uh.prototype.listen=function(a,b,c,d,e){ka(b)||(Vh[0]=b,b=Vh);for(var f=0;f<b.length;f++){var g=Nh(a,b[f],c||this,d||p,e||this.Qj||this);this.A.push(g)}return this};Uh.prototype.b=function(){Uh.d.b.call(this);wb(this.A,Qh);this.A.length=0};Uh.prototype.handleEvent=function(){h(Error("EventHandler.handleEvent not implemented"))};function Wh(a,b,c,d){D.call(this);this.cb=new Uh(this);J(this,this.cb);this.Hg=a;this.hf=this.gc=this.wf=n;if(!b){if(a=u.requestAnimationFrame||u.webkitRequestAnimationFrame||u.mozRequestAnimationFrame||u.oRequestAnimationFrame||u.msRequestAnimationFrame)this.gc=a;if(a=u.cancelAnimationFrame||u.webkitCancelAnimationFrame||u.mozCancelAnimationFrame||u.oCancelAnimationFrame||u.msCancelAnimationFrame)this.hf=a}this.Cb=0;this.Wb=n;this.Uf=0;this.kc=m;this.Ff=d||0;this.Ae=n;c&&(this.cb.listen(u,"blur",
function(){this.kc=p}),this.cb.listen(u,"focus",function(){this.kc||(this.kc=m,this.Cb&&this.start(m))}))}z(Wh,D);Wh.prototype.b=function(){this.stop(m);this.wf=n;Wh.d.b.call(this)};Wh.prototype.hasFocus=s("kc");
Wh.prototype.start=function(a){if(!a&&(this.Cb++,1<this.Cb))return;if(this.kc){var b=this;this.Wb=this.gc?this.gc.call(u,function(){Xh(b)},this.wf):u.setTimeout(function(){Xh(b)},62.5)}this.Hg(N());this.Ff&&(b=this,this.Ae=u.setInterval(function(){var a=b;if(N()-a.Uf>=a.Ff&&a.Cb){var d=N();a.Uf=d;a.Hg(d)}},this.Ff))};
Wh.prototype.stop=function(a){if(a||this.Cb)a||this.Cb--,this.Cb||(a=this.Wb,this.hf?this.hf.call(u,a):this.gc||u.clearTimeout(a),this.Wb=n,this.Ae!==n&&(u.clearInterval(this.Ae),this.Ae=n))};function Xh(a){if(a.Wb!==n){a.Wb=n;a.kc&&(a.Wb=a.gc?a.gc.call(u,function(){Xh(a)},a.wf):u.setTimeout(function(){Xh(a)},16));var b=N();a.Uf=b;a.Hg(b)}};function Yh(a,b){zh.call(this,a,b);this.dj=new Uh(this);J(this,this.dj);this.Pc=(N()-this.H.ad)/1E3;this.hj=m;this.ij=0.01;this.lc=0;this.Vk=new Ah;this.Uk=0;this.Bk=new sh;this.Ak=0;var c=this;this.oe=new Wh(function(){var a=(N()-c.H.ad)/1E3,b=a-c.Pc;c.Pc=a;0.25<b&&(b=0.25);c.lc+=b;a=1;if(c.hj){for(a=c.ij;c.lc>=a;){Zh(c,c.H.wb,a);var f=c.H;f.wb+=a;c.lc-=a;if(!c.yg)break}a=c.lc/a}else Zh(c,c.H.wb,b),f=c.H,f.wb+=b;if(c.oe.hasFocus()){var f=(N()-c.H.ad)/1E3+c.H.nf,g=c.Bk;g.gb(c.Ak++,f,b,a);c.ne(g)}},
i,i,500);J(this,this.oe);this.yg=p}z(Yh,zh);function Zh(a,b,c){var d=a.Vk;d.gb(a.Uk++,b,c,a.oe.hasFocus());a.update(d)}Yh.prototype.update=v;Yh.prototype.ne=v;function $h(a,b){he.call(this,a);this.cj=b||n}z($h,he);$h.prototype.load=function(a){var b=new O(function(){a.cancel()},this);a.load(b);return b};function ai(a,b,c,d){D.call(this);this.method=a;this.url=b;this.content=c||n;this.headers=d?Cc(d):{}}z(ai,D);function bi(a,b){this.statusCode=a;this.content=b||n};function ci(){D.call(this)}z(ci,D);t=ci.prototype;t.hh=m;t.bg=n;t.addEventListener=function(a,b,c,d){Nh(this,a,b,c,d)};t.removeEventListener=function(a,b,c,d){Ph(this,a,b,c,d)};
t.dispatchEvent=function(a){var b=a.type||a,c=Kh;if(b in c){if(ma(a))a=new Eh(a,this);else if(a instanceof Eh)a.target=a.target||this;else{var d=a;a=new Eh(b,this);Ec(a,d)}var d=1,e,c=c[b],b=m in c,f;if(b){e=[];for(f=this;f;f=f.bg)e.push(f);f=c[m];f.la=f.f;for(var g=e.length-1;!a.ec&&0<=g&&f.la;g--)a.currentTarget=e[g],d&=Sh(f,e[g],a.type,m,a)&&a.re!=p}if(p in c)if(f=c[p],f.la=f.f,b)for(g=0;!a.ec&&g<e.length&&f.la;g++)a.currentTarget=e[g],d&=Sh(f,e[g],a.type,p,a)&&a.re!=p;else for(e=this;!a.ec&&e&&
f.la;e=e.bg)a.currentTarget=e,d&=Sh(f,e,a.type,p,a)&&a.re!=p;a=Boolean(d)}else a=m;return a};t.b=function(){ci.d.b.call(this);var a=0;if(this!=n){var b=pa(this);if(Lh[b])for(var b=Lh[b],c=b.length-1;0<=c;c--)Qh(b[c].key),a++}else zc(Jh,function(b,c){Qh(c);a++});this.bg=n};var di=u.window;function ei(a,b){this.r={};this.A=[];var c=arguments.length;if(1<c){c%2&&h(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){a instanceof ei?(c=a.eb(),d=a.ra()):(c=Bc(a),d=Ac(a));for(var e=0;e<c.length;e++)this.set(c[e],d[e])}}t=ei.prototype;t.f=0;t.Mg=0;t.za=s("f");t.ra=function(){fi(this);for(var a=[],b=0;b<this.A.length;b++)a.push(this.r[this.A[b]]);return a};t.eb=function(){fi(this);return this.A.concat()};
t.qb=function(a){return gi(this.r,a)};t.clear=function(){this.r={};this.Mg=this.f=this.A.length=0};t.remove=function(a){return gi(this.r,a)?(delete this.r[a],this.f--,this.Mg++,this.A.length>2*this.f&&fi(this),m):p};function fi(a){if(a.f!=a.A.length){for(var b=0,c=0;b<a.A.length;){var d=a.A[b];gi(a.r,d)&&(a.A[c++]=d);b++}a.A.length=c}if(a.f!=a.A.length){for(var e={},c=b=0;b<a.A.length;)d=a.A[b],gi(e,d)||(a.A[c++]=d,e[d]=1),b++;a.A.length=c}}t.get=function(a,b){return gi(this.r,a)?this.r[a]:b};
t.set=function(a,b){gi(this.r,a)||(this.f++,this.A.push(a),this.Mg++);this.r[a]=b};t.s=function(){return new ei(this)};function gi(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function hi(a){return ii(a||arguments.callee.caller,[])}
function ii(a,b){var c=[];if(0<=vb(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(ji(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){0<e&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=String(f);break;case "boolean":f=f?"true":"false";break;case "function":f=(f=ji(f))?f:"[fn]";break;default:f=typeof f}40<f.length&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(ii(a.caller,b))}catch(g){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function ji(a){if(ki[a])return ki[a];a=String(a);if(!ki[a]){var b=/function ([^\(]+)/.exec(a);ki[a]=b?b[1]:"[Anonymous]"}return ki[a]}var ki={};function li(a,b,c,d,e){this.reset(a,b,c,d,e)}li.prototype.Hk=0;li.prototype.rh=n;li.prototype.qh=n;var mi=0;li.prototype.reset=function(a,b,c,d,e){this.Hk="number"==typeof e?e:mi++;this.Ee=d||ua();this.Qc=a;this.ik=b;this.El=c;delete this.rh;delete this.qh};li.prototype.ri=ba("Qc");function ni(a){this.Sh=a}ni.prototype.M=n;ni.prototype.Qc=n;ni.prototype.G=n;ni.prototype.Ic=n;function oi(a,b){this.name=a;this.value=b}oi.prototype.toString=s("name");var pi=new oi("SEVERE",1E3),qi=new oi("WARNING",900),ri=new oi("INFO",800),si=new oi("CONFIG",700),ti=new oi("FINE",500);t=ni.prototype;t.getName=s("Sh");t.getParent=s("M");t.ri=ba("Qc");function ui(a){return a.Qc?a.Qc:a.M?ui(a.M):n}
t.log=function(a,b,c){if(a.value>=ui(this).value){a=this.wj(a,b,c);b="log:"+a.ik;u.console&&(u.console.timeStamp?u.console.timeStamp(b):u.console.markTimeline&&u.console.markTimeline(b));u.msWriteProfilerMark&&u.msWriteProfilerMark(b);for(b=this;b;){c=b;var d=a;if(c.Ic)for(var e=0,f=i;f=c.Ic[e];e++)f(d);b=b.getParent()}}};
t.wj=function(a,b,c){var d=new li(a,String(b),this.Sh);if(c){d.rh=c;var e;var f=arguments.callee.caller;try{var g;var k=ha("window.location.href");if(ma(c))g={message:c,name:"Unknown error",lineNumber:"Not available",fileName:k,stack:"Not available"};else{var j,l,r=p;try{j=c.lineNumber||c.Cl||"Not available"}catch(q){j="Not available",r=m}try{l=c.fileName||c.filename||c.sourceURL||k}catch(w){l="Not available",r=m}g=r||!c.lineNumber||!c.fileName||!c.stack?{message:c.message,name:c.name,lineNumber:j,
fileName:l,stack:c.stack||"Not available"}:c}e="Message: "+lb(g.message)+'\nUrl: <a href="view-source:'+g.fileName+'" target="_new">'+g.fileName+"</a>\nLine: "+g.lineNumber+"\n\nBrowser stack:\n"+lb(g.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+lb(hi(f)+"-> ")}catch(y){e="Exception trying to expose exception! You win, we lose. "+y}d.qh=e}return d};t.info=function(a,b){this.log(ri,a,b)};function vi(a,b){a.log(ti,b,i)}t.Ue=function(a,b){this.G||(this.G={});this.G[a]=b};var wi={},xi=n;
function yi(a){xi||(xi=new ni(""),wi[""]=xi,xi.ri(si));var b;if(!(b=wi[a])){b=new ni(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=yi(a.substr(0,c));c.Ue(d,b);b.M=c;wi[a]=b}return b};function zi(){}zi.prototype.Zg=n;function Ai(a){var b;if(!(b=a.Zg))b={},Bi(a)&&(b[0]=m,b[1]=m),b=a.Zg=b;return b};var Ci;function Di(){}z(Di,zi);Di.prototype.Gd=function(){var a=Bi(this);return a?new ActiveXObject(a):new XMLHttpRequest};
function Bi(a){if(!a.Bh&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.Bh=d}catch(e){}}h(Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed"))}return a.Bh}Ci=new Di;var Ei=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function Fi(a){D.call(this);this.headers=new ei;this.Te=a||n}z(Fi,ci);Fi.prototype.aa=yi("goog.net.XhrIo");var Gi=/^https?$/i;t=Fi.prototype;t.Ta=p;t.q=n;t.Se=n;t.Yd="";t.Hh="";t.Nc=0;t.Oc="";t.zf=p;t.Ud=p;t.Of=p;t.Ab=p;t.bd=0;t.Ib=n;t.ji="";t.$k=p;
t.send=function(a,b,c,d){this.q&&h(Error("[goog.net.XhrIo] Object is active with another request="+this.Yd+"; newUri="+a));b=b?b.toUpperCase():"GET";this.Yd=a;this.Oc="";this.Nc=0;this.Hh=b;this.zf=p;this.Ta=m;this.q=this.Te?this.Te.Gd():Ci.Gd();this.Se=this.Te?Ai(this.Te):Ai(Ci);this.q.onreadystatechange=x(this.Xh,this);try{vi(this.aa,Hi(this,"Opening Xhr")),this.Of=m,this.q.open(b,a,m),this.Of=p}catch(e){vi(this.aa,Hi(this,"Error opening Xhr: "+e.message));Ii(this,e);return}a=c||"";var f=this.headers.s();
d&&Gc(d,function(a,b){f.set(b,a)});d=u.FormData&&a instanceof u.FormData;"POST"==b&&(!f.qb("Content-Type")&&!d)&&f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");Gc(f,function(a,b){this.q.setRequestHeader(b,a)},this);this.ji&&(this.q.responseType=this.ji);"withCredentials"in this.q&&(this.q.withCredentials=this.$k);try{this.Ib&&(di.clearTimeout(this.Ib),this.Ib=n),0<this.bd&&(vi(this.aa,Hi(this,"Will abort after "+this.bd+"ms if incomplete")),this.Ib=di.setTimeout(x(this.Rk,
this),this.bd)),vi(this.aa,Hi(this,"Sending request")),this.Ud=m,this.q.send(a),this.Ud=p}catch(g){vi(this.aa,Hi(this,"Send error: "+g.message)),Ii(this,g)}};t.Rk=function(){"undefined"!=typeof ea&&this.q&&(this.Oc="Timed out after "+this.bd+"ms, aborting",this.Nc=8,vi(this.aa,Hi(this,this.Oc)),this.dispatchEvent("timeout"),this.abort(8))};function Ii(a,b){a.Ta=p;a.q&&(a.Ab=m,a.q.abort(),a.Ab=p);a.Oc=b;a.Nc=5;Ji(a);Ki(a)}
function Ji(a){a.zf||(a.zf=m,a.dispatchEvent("complete"),a.dispatchEvent("error"))}t.abort=function(a){this.q&&this.Ta&&(vi(this.aa,Hi(this,"Aborting")),this.Ta=p,this.Ab=m,this.q.abort(),this.Ab=p,this.Nc=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ki(this))};t.b=function(){this.q&&(this.Ta&&(this.Ta=p,this.Ab=m,this.q.abort(),this.Ab=p),Ki(this,m));Fi.d.b.call(this)};t.Xh=function(){!this.Of&&!this.Ud&&!this.Ab?this.mk():Li(this)};t.mk=function(){Li(this)};
function Li(a){if(a.Ta&&"undefined"!=typeof ea)if(a.Se[1]&&4==a.yb()&&2==Mi(a))vi(a.aa,Hi(a,"Local request error detected and ignored"));else if(a.Ud&&4==a.yb())di.setTimeout(x(a.Xh,a),0);else if(a.dispatchEvent("readystatechange"),4==a.yb()){vi(a.aa,Hi(a,"Request complete"));a.Ta=p;try{if(Ni(a))a.dispatchEvent("complete"),a.dispatchEvent("success");else{a.Nc=6;var b;try{b=2<a.yb()?a.q.statusText:""}catch(c){vi(a.aa,"Can not get status: "+c.message),b=""}a.Oc=b+" ["+Mi(a)+"]";Ji(a)}}finally{Ki(a)}}}
function Ki(a,b){if(a.q){var c=a.q,d=a.Se[0]?v:n;a.q=n;a.Se=n;a.Ib&&(di.clearTimeout(a.Ib),a.Ib=n);b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){a.aa.log(pi,"Problem encountered resetting onreadystatechange: "+e.message,i)}}}
function Ni(a){var b=Mi(a),c;a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:c=m;break a;default:c=p}if(!c){if(b=0===b)a=String(a.Yd).match(Ei)[1]||n,!a&&self.location&&(a=self.location.protocol,a=a.substr(0,a.length-1)),b=!Gi.test(a?a.toLowerCase():"");c=b}return c}t.yb=function(){return this.q?this.q.readyState:0};function Mi(a){try{return 2<a.yb()?a.q.status:-1}catch(b){return a.aa.log(qi,"Can not get status: "+b.message,i),-1}}
function Hi(a,b){return b+" ["+a.Hh+" "+a.Yd+" "+Mi(a)+"]"};function Oi(a,b,c,d){ai.call(this,a,b,c,d)}z(Oi,ai);function Pi(a,b,c,d){a=new Oi(a,b,c,d);var e=new O,f=new Fi;f.bd=Math.max(0,2E4);var g=Nh(f,"complete",function(){var a=Mi(f),b;try{b=f.q?f.q.responseText:""}catch(c){vi(f.aa,"Can not get responseText: "+c.message),b=""}a=new bi(a,b);Qh(g);L(f);Ni(f)?e.e(a):e.a(a)});f.send(a.url,a.method,a.content,a.headers);return e};function Qi(a,b,c){D.call(this);this.nl=a;this.rg=a+"api/server/"+b;this.Nf={"X-GF-Version":"1","X-GF-Server-ID":b,"X-GF-Server-Key":c}}z(Qi,D);function Ri(a,b,c){Yh.call(this,a,b.H);this.rc=new $h(this,this.cj);J(this,this.rc);this.of.push(this.rc);this.Nb=new rh(this,b,c);J(this,this.Nb);this.Xa=n;1==b.type&&(a.ff&&a.ki&&a.mi)&&(this.Xa=new Qi(a.ff,a.ki,a.mi),J(this,this.Xa));this.td=n}z(Ri,Yh);t=Ri.prototype;t.b=function(){this.td&&(u.clearTimeout(this.td),this.td=n);if(this.Xa){var a=this.Xa;Pi("DELETE",a.rg,i,a.Nf)}Ri.d.b.call(this)};
t.Ei=function(){if(this.Xa){for(var a=this.Nb.ta,b=[],c=0;c<a.h.length;c++)b.push(a.h[c].info);for(var a=this.Xa,c=[],d=0;d<b.length;d++)c.push({display_name:b[d].qa});b=(new th(i)).ve({user_count:c.length,users:c});b=Pi("POST",a.rg,b,a.Nf);a=function(){this.td=u.setTimeout(x(this.Ei,this),5E3)};P(b,a,a,this)}};
t.load=function(){if(this.Xa){var a=this.Kh,b;b=this.Xa;var c=this.Nb.ta.li,d=[],e;for(e in c.Bb)d.push(e+"="+c.Bb[e]);c=(new th(i)).ve({endpoint:c.Ka,server_name:c.name,server_location:c.location,game_type:c.Dc,game_version:c.Ec,game_properties:d,user_max:c.Zb});b=Pi("PUT",b.rg,c,b.Nf);P(b,function(){M("Registered with server browser at "+a.ff);this.Ei()},function(a){M("Unable to register with server browser: ",a)},this)}return this.Nb.load()};t.update=function(a){this.Nb.update(a)};t.ne=function(a){this.Nb.ne(a)};function Si(){this.version=0};function Ti(){D.call(this);this.ka=[];this.Xf=p;this.Pf=0;this.ac=m;this.Wi=new Af}z(Ti,D);function Ui(a,b,c,d){Vi(a,b);a=new Si;!c&&d?b.ea.e(a):b.ea.a(c)}function Wi(a,b,c){Vi(a,b);c?b.ea.a(c):b.ea.e(n)}
function Xi(a,b,c,d){Vi(a,b);if(a=!c)if(a=d)if(a=b.Bd){a=b.Bd;var e=Se();e.da(d,0);a:switch(Be(e)){case 1:b:{d=Qe(e);var f=Qe(e),g=Qe(e);a.x=d;a.y=f;a.k=g;var k=a.Va,j=d+16,l=f+128,r=g+16;B(k.min,d,f,g);B(k.max,j,l,r);f=Be(e);d=a.U;switch(f){default:case 0:e.ba();f=0;for(g=e.offset;32768>f;f++,g+=2)d[f]=e.buffer[g+1]<<8|e.buffer[g];break;case 1:k=e.ba();f=e.buffer;g=e.offset;e=0;g=g?g:0;k=k?k:f.length;for(j=g;j<g+k;)if(l=f[j++],255==l)for(var l=f[j++]<<8|f[j++],r=f[j++]<<8|f[j++],q=0;q<l;q++)d[e++]=
r;else d[e++]=l<<8|f[j++];break;case 2:a=p;break b}a.Qb=p;a.state=2;a.map.ce(a);a=m}break a;default:a=p}}a?b.ea.e(n):b.ea.a(c)}function $c(a,b){var c=new O,d=new Mc(c,Yi,b.x,b.y,b.k);d.version=b.version;d.data=a.Wi.ve(b);d.data?(a.ka.push(d),a.ac||Oc(a)):c.a(n);return c}function Zi(a,b,c){Vi(a,b);c?b.ea.a(c):b.ea.e(n)}function $i(a,b,c){Vi(a,b);c?b.ea.a(c):b.ea.e(n)}
function Oc(a){if(!a.Pf&&a.ka.length){if(a.Xf){a.Xf=p;for(var b=a.ka.length-1,c=0;c<a.ka.length;c++)if(a.ka[c].cc==Number.MAX_VALUE){b=c-1;break}if(b)if(b==a.ka.length-1)Eb(a.ka,aj);else{b=a.ka.slice(0,b);Eb(b,aj);for(c=0;c<b.length;c++)a.ka[c]=b[c]}}c=a.ka[0];a.Pf++;a.ig(c)}}function Vi(a,b){a.Pf--;Bb(a.ka,b);a.ac||Oc(a)}var Nc=2,Yi=3;function Mc(a,b,c,d,e){this.ea=a;this.action=b;this.x=c;this.y=d;this.k=e;this.Bd=n;this.cc=Number.MAX_VALUE;this.version=0;this.data=n}
function aj(a,b){return a.cc-b.cc};function bj(a,b,c,d,e,f){D.call(this);this.x=a;this.y=b;this.k=c;this.key=d;this.Df=e;this.xl=f;this.Sf=ua();this.di=p;this.V=new Uint32Array(1024);this.I=[m];this.O=this.l=n}z(bj,D);function cj(a,b){return b.Sf-a.Sf}bj.prototype.b=function(){L(this.l);L(this.O);bj.d.b.call(this)};bj.prototype.Sb=function(a,b,c){return 32*(c>>4&31)+(a>>4&31)};bj.prototype.gd=function(a,b){var c=Array.prototype.slice.call(arguments,1);c.unshift(4096*a);return this.O.write.apply(this.O,c)};function dj(a,b){D.call(this);this.ek=a;this.vd={};this.p=[];this.Dk=b}z(dj,D);dj.prototype.b=function(){this.clear();dj.d.b.call(this)};
dj.prototype.get=function(a,b,c){var d=a>>9,e=c>>9,f=[d,0,e,"blkregion"].join("."),g=new O;(a=this.vd[f])?(a.Sf=ua(),g.e(a)):P(this.Dk.getFile(f,2),function(a){if(this.p.length>=this.ek&&this.p.length){Eb(this.p,cj);var b=this.p[this.p.length-1];delete this.vd[b.key];L(b);this.p.length--}var c=new bj(d<<9,0,e<<9,f,a,0);this.vd[f]=c;this.p.push(c);var r=new O;a=[c.Df.createReader(),c.Df.createWriter()];a=new Yc(a,p,m);P(a,function(a){return yb(a,function(a){return a[1]})},n,i);P(a,function(a){this.l=
a[0];this.O=a[1];this.l.fb()?P(this.l.read(0,4096,this.V.buffer),function(a){a!=this.V.buffer&&(this.V=new Uint32Array(a));a=this.O.fb()/4096;this.I.length=a;this.I[0]=m;for(a=1;a<this.I.length;a++)this.I[a]=p;for(a=0;a<this.V.length;a++){var b=this.V[a],c=b>>8,b=b&255;if(c)for(var d=0;d<b;d++)this.I[c+d]=m}this.di=m;r.e(n)},function(a){r.a(a)},this):P(this.gd(0,this.V.buffer),function(){this.di=m;r.e(n)},function(a){r.a(a)},this)},function(a){r.a(a)},c);P(r,function(){g.e(c)},function(a){g.a(a)},
this)},function(a){g.a(a)},this);return g};dj.prototype.clear=function(){wb(this.p,L);this.p.length=0;this.vd={}};function ej(a,b){D.call(this);this.type=a;this.size=b}z(ej,D);function fj(a,b){ib.call(this,b+": "+gj(a));this.code=a;this.action=b}z(fj,ib);
function gj(a){switch(a){case 1:return"File or directory not found";case 2:return"Insecure or disallowed operation";case 3:return"Operation aborted";case 4:return"File or directory not readable";case 5:return"Invalid encoding";case 6:return"Cannot modify file or directory";case 7:return"Invalid state";case 8:return"Invalid line-ending specifier";case 9:return"Invalid modification";case 10:return"Quota exceeded";case 11:return"Invalid filetype";case 12:return"File or directory already exists at specified path";
default:return"Unknown error"}};function hj(a,b){return new fj(a?a.code:0,b)};function ij(a,b){ib.call(this,jb("Error %s: %s",b,jj(a)));this.code=a}z(ij,ib);
function jj(a){switch(a){case 1:return"File or directory not found";case 2:return"Insecure or disallowed operation";case 3:return"Operation aborted";case 4:return"File or directory not readable";case 5:return"Invalid encoding";case 6:return"Cannot modify file or directory";case 7:return"Invalid state";case 8:return"Invalid line-ending specifier";case 9:return"Invalid modification";case 10:return"Quota exceeded";case 11:return"Invalid filetype";case 12:return"File or directory already exists at specified path";
default:return"Unrecognized error"}};function kj(a,b){Eh.call(this,a.type,b);this.Af=a}z(kj,Eh);function lj(){D.call(this);this.l=new FileReader;this.l.onloadstart=x(this.W,this);this.l.onprogress=x(this.W,this);this.l.onload=x(this.W,this);this.l.onabort=x(this.W,this);this.l.onerror=x(this.W,this);this.l.onloadend=x(this.W,this)}z(lj,ci);t=lj.prototype;t.abort=function(){try{this.l.abort()}catch(a){h(new ij(a.code,"aborting read"))}};t.yb=function(){return this.l.readyState};t.getError=function(){return this.l.error&&new ij(this.l.error.code,"reading file")};
t.W=function(a){this.dispatchEvent(new kj(a,this))};t.b=function(){lj.d.b.call(this);delete this.l};t.readAsArrayBuffer=function(a){this.l.readAsArrayBuffer(a)};function mj(a,b){D.call(this);this.Mh=b;this.vb=[];a>this.Mh&&h(Error("[goog.structs.SimplePool] Initial cannot be greater than max"));for(var c=0;c<a;c++)this.vb.push(this.xc?this.xc():{})}z(mj,D);mj.prototype.xc=n;mj.prototype.kh=n;function nj(a,b){if(a.kh)a.kh(b);else if(oa(b))if(na(b.Ac))b.Ac();else for(var c in b)delete b[c]}mj.prototype.b=function(){mj.d.b.call(this);for(var a=this.vb;a.length;)nj(this,a.pop());delete this.vb};function oj(a){D.call(this);this.nb=a;this.Oa=new mj(0,5);J(this,this.Oa);a=x(function(){return new pj(this.Oa)},this);this.Oa.xc=a}z(oj,D);oj.prototype.fb=function(){return this.nb.size};
oj.prototype.read=function(a,b){var c=this.nb.size,d=a||0;if(d>=c)return c=new O,c.a(new fj(7,"read file")),c;var e=d+(ga(b)?b:c);e>c&&(e=c);var e=e||0,f=n;0==d&&e==c?f=this.nb:this.nb.slice?f=this.nb.slice(d,e):this.nb.webkitSlice&&(f=this.nb.webkitSlice(d,e));return(this.Oa.vb.length?this.Oa.vb.pop():this.Oa.xc?this.Oa.xc():{}).da(f)};function pj(a){Uh.call(this,this);this.Oa=a;this.sf=n;this.l=new lj;J(this,this.l);this.listen(this.l,"loadend",this.Zi)}z(pj,Uh);
pj.prototype.da=function(a){var b=new O(this.Ui,this);this.sf=b;this.l.readAsArrayBuffer(a);return b};pj.prototype.Ui=function(){this.l.abort()};pj.prototype.Zi=function(){var a=this.sf;if(a){this.sf=n;var b=this.l.l.result,c=this.l.getError(),d=this.Oa;d.vb.length<d.Mh?d.vb.push(this):nj(d,this);b?a.e(b):a.a(hj(c,"read"))}};function qj(a){D.call(this);this.sa=a;this.sa.onwritestart=x(this.W,this);this.sa.onprogress=x(this.W,this);this.sa.onwrite=x(this.W,this);this.sa.onabort=x(this.W,this);this.sa.onerror=x(this.W,this);this.sa.onwriteend=x(this.W,this)}z(qj,ci);t=qj.prototype;t.abort=function(){try{this.sa.abort()}catch(a){h(new ij(a.code,"aborting save"))}};t.yb=function(){return this.sa.readyState};t.getError=function(){return this.sa.error&&new ij(this.sa.error.code,"saving file")};
t.W=function(a){this.dispatchEvent(new kj(a,this))};t.b=function(){delete this.sa;qj.d.b.call(this)};function rj(a){D.call(this);this.ia=a;J(this,this.ia);this.Ja=this.T=n;this.cb=new Uh(this);J(this,this.cb);this.cb.listen(this.ia,"writeend",function(){if(this.T){var a=this.T;this.Ja=this.T=n;a.e(n)}});this.cb.listen(this.ia,"error",function(){if(this.T&&this.Ja){var a=this.T,c=new fj(2,this.Ja);this.Ja=this.T=n;a.a(c)}});this.cb.listen(this.ia,"abort",function(){if(this.T&&this.Ja){var a=this.T,c=new fj(3,this.Ja);this.Ja=this.T=n;a.a(c)}})}z(rj,D);rj.prototype.fb=function(){return this.ia.fb()};
rj.prototype.ug=function(a){var b=new O;this.T?b.a(new fj(7,"overlapped set length")):a==this.fb()?b.e(n):(this.T=b,this.Ja="set length",this.ia.truncate(a));return b};
rj.prototype.write=function(a,b){var c=new O;if(this.T)return c.a(new fj(7,"overlapped write")),c;for(var d=Array.prototype.slice.call(arguments,1),e=0;e<d.length;e++)d[e]instanceof ArrayBuffer&&(d[e]=new Uint8Array(d[e]));var f=new Blob(d);a>this.fb()?P(this.ug(a+f.size),function(){this.T=c;this.Ja="write";this.ia.seek(a);this.ia.write(f)},function(a){c.a(a)},this):(this.T=c,this.Ja="write",this.ia.seek(a),this.ia.write(f));return c};function sj(a,b){this.Ef=a;this.fullPath=b.Y.fullPath;this.name=b.getName();this.type=b.isFile()?0:1;this.ia=b}sj.prototype.isFile=function(){return 0==this.type};sj.prototype.remove=function(){var a=new O;P(this.ia.remove(),function(){a.e(n)},function(b){a.a(hj(b,"remove "+this.fullPath))},this);return a};function tj(a,b){return b.isFile()?new uj(a.Ef,b):new vj(a.Ef,b)}function uj(a,b){sj.call(this,a,b);this.sh=b}z(uj,sj);
uj.prototype.createReader=function(){var a=new O;P(this.sh.file(),function(b){a.e(new oj(b))},function(b){a.a(hj(b,"create reader "+this.fullPath))},this);return a};uj.prototype.createWriter=function(){var a=new O;P(this.sh.createWriter(),function(b){a.e(new rj(b))},function(b){a.a(hj(b,"create writer "+this.fullPath))},this);return a};uj.prototype.read=function(){var a=new O;P(this.createReader(),function(b){P(b.read(),function(c){L(b);a.e(c)},function(c){L(b);a.a(c)})},function(b){a.a(b)});return a};
uj.prototype.write=function(a){var b=new O;P(this.createWriter(),function(c){P(c.ug(0),function(){P(c.write(a),function(){L(c);b.e(n)},function(a){L(c);b.a(a)})},function(a){L(c);b.a(a)})},function(a){b.a(a)});return b};function vj(a,b){sj.call(this,a,b);this.tf=b}z(vj,sj);vj.prototype.getFile=function(a,b){var c=new O;P(this.tf.getFile(a,b),function(a){c.e(tj(this,a))},function(b){c.a(hj(b,"get file "+a+" in "+this.fullPath))},this);return c};
vj.prototype.getDirectory=function(a,b){var c=new O;P(this.tf.getDirectory(a,b),function(a){c.e(tj(this,a))},function(b){c.a(hj(b,"get directory "+a+" in "+this.fullPath))},this);return c};vj.prototype.yc=function(a){var b=new O;P(this.tf.yc(a),function(a){b.e(tj(this,a))},function(c){b.a(hj(c,"create path "+a+" in "+this.fullPath))},this);return b};function wj(a){qj.call(this,a);this.O=a}z(wj,qj);t=wj.prototype;t.Gc=function(){return this.O.position};t.fb=function(){return this.O.length};t.write=function(a){try{this.O.write(a)}catch(b){h(new ij(b.code,"writing file"))}};t.seek=function(a){try{this.O.seek(a)}catch(b){h(new ij(b.code,"seeking in file"))}};t.truncate=function(a){try{this.O.truncate(a)}catch(b){h(new ij(b.code,"truncating file"))}};function xj(a){return a};function yj(a,b){this.La=a;this.Y=b}yj.prototype.isFile=function(){return this.Y.isFile};yj.prototype.getName=function(){return this.Y.name};yj.prototype.remove=function(){var a=new O;this.Y.remove(x(a.e,a,m),x(function(b){a.a(new ij(b.code,"removing "+this.Y.fullPath))},this));return a};yj.prototype.getParent=function(){var a=new O;this.Y.getParent(x(function(b){a.e(new zj(this.La,b))},this),x(function(b){a.a(new ij(b.code,"getting parent of "+this.Y.fullPath))},this));return a};
function zj(a,b){yj.call(this,a,b);this.jh=b}z(zj,yj);var Aj=2;zj.prototype.getFile=function(a,b){var c=new O;this.jh.getFile(a,Bj(b),x(function(a){c.e(new Cj(this.La,a))},this),x(function(b){c.a(new ij(b.code,"loading file "+a+" from "+this.Y.fullPath))},this));return c};zj.prototype.getDirectory=function(a,b){var c=new O;this.jh.getDirectory(a,Bj(b),x(function(a){c.e(new zj(this.La,a))},this),x(function(b){c.a(new ij(b.code,"loading directory "+a+" from "+this.Y.fullPath))},this));return c};
zj.prototype.yc=function(a){function b(a){if(!d.length)return Wc(a);var c=d.shift();a=".."==c?a.getParent():"."==c?Wc(a):a.getDirectory(c,Aj);return P(a,b,n,i)}if(0==a.lastIndexOf("/",0)){var c=this.La.Ub();if(this.Y.fullPath!=c.Y.fullPath)return c.yc(a)}var d=xb(a.split("/"),xj);return b(this)};function Bj(a){return a==Aj?{create:m}:3==a?{create:m,exclusive:m}:{}}function Cj(a,b){yj.call(this,a,b);this.th=b}z(Cj,yj);
Cj.prototype.createWriter=function(){var a=new O;this.th.createWriter(function(b){a.e(new wj(b))},x(function(b){a.a(new ij(b.code,"creating writer for "+this.Y.fullPath))},this));return a};Cj.prototype.file=function(){var a=new O;this.th.file(function(b){a.e(b)},x(function(b){a.a(new ij(b.code,"getting file for "+this.Y.fullPath))},this));return a};function Dj(a){this.La=a}Dj.prototype.getName=function(){return this.La.name};Dj.prototype.Ub=function(){return new zj(this,this.La.root)};function Ej(a,b,c){ej.call(this,a,b);this.Tj=c}z(Ej,ej);Ej.prototype.Ub=function(){return new vj(this,this.Tj.Ub())};function Fj(a){var b=new Buffer(a.byteLength);a=new Uint8Array(a);for(var c=0;c<a.length;c++)b[c]=a[c];return b};function Gj(a){Ti.call(this);this.bf=a;this.Yc=this.jb=this.La=n}z(Gj,Ti);
Gj.prototype.Hb=function(){var a=new O,b=new O,c=n;if(c=u.requestFileSystem||u.webkitRequestFileSystem,na(c)){var d=new O;c(1,1073741824,function(a){d.e(new Dj(a))},function(a){d.a(new ij(a.code,"requesting filesystem"))});c=d}else c=Xc(Error("File API unsupported"));c?P(c,function(a){b.e(new Ej(1,1073741824,a))},function(a){b.a(hj(a,"requesting filesystem"))}):b.a(n);P(b,function(b){this.La=b;P(b.Ub().yc(this.bf),function(b){this.jb=b;P(this.jb.yc("regions"),function(b){this.Yc=new dj(256,b);J(this,
this.Yc);this.ac=p;Oc(this);a.e(n)},function(b){a.a(b)},this)},function(b){a.a(b)},this)},function(b){a.a(b)},this);return a};
Gj.prototype.ig=function(a){switch(a.action){case 0:P(this.jb.getFile("info.bin"),function(b){P(b.read(),function(b){Ui(this,a,n,b)},function(b){Ui(this,a,b,n)},this)},function(b){Ui(this,a,b,n)},this);break;case 1:P(this.jb.getFile("info.bin"),function(b){P(b.write(a.data),function(){Wi(this,a,n)},function(b){Wi(this,a,b)},this)},function(b){Wi(this,a,b)},this);break;case Nc:P(this.Yc.get(a.x,a.y,a.k),function(b){var c=new O,d=b.V[b.Sb(a.x,a.y,a.k)],e=4096*(d&255);e?P(b.l.read(4096*(d>>8),e),function(a){c.e(a)},
function(a){c.a(a)},b):c.e(n);P(c,function(b){Xi(this,a,n,b)},function(b){Xi(this,a,b,n)},this)},function(b){Xi(this,a,b,n)},this);break;case Yi:P(this.Yc.get(a.x,a.y,a.k),function(b){var c=a.data,d=new O,e=b.Sb(a.x,a.y,a.k),f=b.V[e],g=f>>8,k=f&255,j=Math.ceil(c.byteLength/4096);if(255<j)d.a(n);else if(g&&k==j)P(b.gd(g,c),function(){d.e()},function(a){d.a(a)});else{if(g)for(var l=0;l<k;l++)b.I[g+l]=p;var r=new O,k=b.I.indexOf(p),l=0;if(1<j&&-1!=k)for(g=k;g<b.I.length&&!(l?b.I[g]?l=0:l++:b.I[g]||(k=
g,l=1),l>=j);g++);if(l>=j){for(g=0;g<j;g++)b.I[k+g]=m;r.e(k)}else{var q=Math.max(j,32),g=b.O.fb()+4096*q;P(b.O.ug(g),function(){var a=this.I.length;this.I.length+=q;for(var b=0;b<q;b++)this.I[a+b]=p;for(b=0;b<j;b++)this.I[a+b]=m;L(this.l);this.l=n;P(this.Df.createReader(),function(b){this.l=b;r.e(a)},function(a){r.a(a)},this)},function(a){r.a(a)},b)}P(r,function(a){f=a<<8|j;this.V[e]=f;P(this.gd(a,c),function(){P(this.gd(0,this.V.buffer),function(){d.e()},function(a){d.a(a)})},function(a){d.a(a)},
this)},function(a){d.a(a)},b)}P(d,function(){Zi(this,a,n)},function(b){Zi(this,a,b)},this)},function(b){Zi(this,a,b)},this);break;case 4:P(this.Yc.get(a.x,a.y,a.k),function(b){var c=b.Sb(a.x,a.y,a.k),d=b.V[c],e=d>>8,d=d&255;if(e){for(var f=0;f<d;f++)b.I[e+f]=p;b.V[c]=0;b=b.gd(0,b.V.buffer)}else b=Wc(n);P(b,function(){$i(this,a,n)},function(b){$i(this,a,b)},this)},function(b){$i(this,a,b)},this)}};function Hj(a){Ti.call(this);this.bf=a;this.ya=n}z(Hj,Ti);var Ij=u.indexedDB||u.mozIndexedDB||u.webkitIndexedDB||u.msIndexedDB;Hj.prototype.Hb=function(){if(!Ij)return Xc(n);var a=new O,b=Ij.open(this.bf,2);b.onerror=function(){a.a(n)};b.onsuccess=x(function(){this.ya=b.result;this.ya.onerror=function(a){M("idb error: "+a)};this.ac=p;Oc(this);a.e(n)},this);b.onupgradeneeded=function(a){a=a.target.result;a.createObjectStore("info");a.createObjectStore("chunks")};return a};
Hj.prototype.b=function(){this.ya&&(this.ya.close(),this.ya=n);Hj.d.b.call(this)};Hj.prototype.xb=function(a){return[a.x,a.y,a.k].join(".")};
Hj.prototype.ig=function(a){switch(a.action){case 0:var b=this.ya.transaction(["info"],"readonly").objectStore("info").get("info");b.onsuccess=x(function(){Ui(this,a,n,b.result)},this);b.onerror=x(function(b){b.preventDefault();Ui(this,a,b,n)},this);break;case 1:var c=this.ya.transaction(["info"],"readwrite").objectStore("info").put(a.data,"info");c.onsuccess=x(function(){Wi(this,a,n)},this);c.onerror=x(function(b){b.preventDefault();Wi(this,a,b)},this);break;case Nc:var d=this.ya.transaction(["chunks"],
"readonly").objectStore("chunks").get(this.xb(a));d.onsuccess=x(function(){Xi(this,a,n,d.result)},this);d.onerror=x(function(b){b.preventDefault();Xi(this,a,b,n)},this);break;case Yi:c=this.ya.transaction(["chunks"],"readwrite").objectStore("chunks").put(a.data,this.xb(a));c.onsuccess=x(function(){Zi(this,a,n)},this);c.onerror=x(function(b){b.preventDefault();Zi(this,a,b)},this);break;case 4:c=this.ya.transaction(["chunks"],"readwrite").objectStore("chunks")["delete"](this.xb(a)),c.onsuccess=x(function(){$i(this,
a,n)},this),c.onerror=x(function(b){b.preventDefault();$i(this,a,b)},this)}};function Jj(){Ti.call(this);this.Ch=n;this.kf={}}z(Jj,Ti);Jj.prototype.Hb=function(){this.ac=p;Oc(this);return Wc(n)};Jj.prototype.xb=function(a){return[a.x,a.y,a.k].join(".")};Jj.prototype.ig=function(a){switch(a.action){case 0:Ui(this,a,n,this.Ch);break;case 1:this.Ch=a.data;Wi(this,a,n);break;case Nc:var b=this.kf[this.xb(a)];Xi(this,a,n,b);break;case Yi:this.kf[this.xb(a)]=a.data;Zi(this,a,n);break;case 4:delete this.kf[this.xb(a)],$i(this,a,n)}};function Kj(a,b){var c;if(a instanceof Kj)this.ha=ga(b)?b:a.ha,Lj(this,a.ic),c=a.Ke,Mj(this),this.Ke=c,c=a.Bc,Mj(this),this.Bc=c,Nj(this,a.he),c=a.fe,Mj(this),this.fe=c,Oj(this,a.ib.s()),c=a.Pd,Mj(this),this.Pd=c;else if(a&&(c=String(a).match(Ei))){this.ha=!!b;Lj(this,c[1]||"",m);var d=c[2]||"";Mj(this);this.Ke=d?decodeURIComponent(d):"";d=c[3]||"";Mj(this);this.Bc=d?decodeURIComponent(d):"";Nj(this,c[4]);d=c[5]||"";Mj(this);this.fe=d?decodeURIComponent(d):"";Oj(this,c[6]||"",m);c=c[7]||"";Mj(this);
this.Pd=c?decodeURIComponent(c):""}else this.ha=!!b,this.ib=new Pj(n,0,this.ha)}t=Kj.prototype;t.ic="";t.Ke="";t.Bc="";t.he=n;t.fe="";t.Pd="";t.Yj=p;t.ha=p;
t.toString=function(){var a=[],b=this.ic;b&&a.push(Qj(b,Rj),":");if(b=this.Bc){a.push("//");var c=this.Ke;c&&a.push(Qj(c,Rj),"@");a.push(encodeURIComponent(String(b)));b=this.he;b!=n&&a.push(":",String(b))}if(b=this.fe)this.Bc&&"/"!=b.charAt(0)&&a.push("/"),a.push(Qj(b,"/"==b.charAt(0)?Sj:Tj));(b=this.ib.toString())&&a.push("?",b);(b=this.Pd)&&a.push("#",Qj(b,Uj));return a.join("")};t.s=function(){return new Kj(this)};
function Lj(a,b,c){Mj(a);a.ic=c?b?decodeURIComponent(b):"":b;a.ic&&(a.ic=a.ic.replace(/:$/,""))}function Nj(a,b){Mj(a);b?(b=Number(b),(isNaN(b)||0>b)&&h(Error("Bad port number "+b)),a.he=b):a.he=n}function Oj(a,b,c){Mj(a);b instanceof Pj?(a.ib=b,a.ib.tg(a.ha)):(c||(b=Qj(b,Vj)),a.ib=new Pj(b,0,a.ha))}function Mj(a){a.Yj&&h(Error("Tried to modify a read-only Uri"))}t.tg=function(a){this.ha=a;this.ib&&this.ib.tg(a);return this};function Qj(a,b){return ma(a)?encodeURI(a).replace(b,Wj):n}
function Wj(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Rj=/[#\/\?@]/g,Tj=/[\#\?:]/g,Sj=/[\#\?]/g,Vj=/[\#\?@]/g,Uj=/#/g;function Pj(a,b,c){this.X=a||n;this.ha=!!c}function Xj(a){if(!a.v&&(a.v=new ei,a.f=0,a.X))for(var b=a.X.split("&"),c=0;c<b.length;c++){var d=b[c].indexOf("="),e=n,f=n;0<=d?(e=b[c].substring(0,d),f=b[c].substring(d+1)):e=b[c];e=decodeURIComponent(e.replace(/\+/g," "));e=Yj(a,e);a.add(e,f?decodeURIComponent(f.replace(/\+/g," ")):"")}}t=Pj.prototype;
t.v=n;t.f=n;t.za=function(){Xj(this);return this.f};t.add=function(a,b){Xj(this);this.X=n;a=Yj(this,a);var c=this.v.get(a);c||this.v.set(a,c=[]);c.push(b);this.f++;return this};t.remove=function(a){Xj(this);a=Yj(this,a);return this.v.qb(a)?(this.X=n,this.f-=this.v.get(a).length,this.v.remove(a)):p};t.clear=function(){this.v=this.X=n;this.f=0};t.qb=function(a){Xj(this);a=Yj(this,a);return this.v.qb(a)};
t.eb=function(){Xj(this);for(var a=this.v.ra(),b=this.v.eb(),c=[],d=0;d<b.length;d++)for(var e=a[d],f=0;f<e.length;f++)c.push(b[d]);return c};t.ra=function(a){Xj(this);var b=[];if(a)this.qb(a)&&(b=Cb(b,this.v.get(Yj(this,a))));else{a=this.v.ra();for(var c=0;c<a.length;c++)b=Cb(b,a[c])}return b};t.set=function(a,b){Xj(this);this.X=n;a=Yj(this,a);this.qb(a)&&(this.f-=this.v.get(a).length);this.v.set(a,[b]);this.f++;return this};
t.get=function(a,b){var c=a?this.ra(a):[];return 0<c.length?String(c[0]):b};t.toString=function(){if(this.X)return this.X;if(!this.v)return"";for(var a=[],b=this.v.eb(),c=0;c<b.length;c++)for(var d=b[c],e=encodeURIComponent(String(d)),d=this.ra(d),f=0;f<d.length;f++){var g=e;""!==d[f]&&(g+="="+encodeURIComponent(String(d[f])));a.push(g)}return this.X=a.join("&")};t.s=function(){var a=new Pj;a.X=this.X;this.v&&(a.v=this.v.s(),a.f=this.f);return a};
function Yj(a,b){var c=String(b);a.ha&&(c=c.toLowerCase());return c}t.tg=function(a){a&&!this.ha&&(Xj(this),this.X=n,Gc(this.v,function(a,c){var d=c.toLowerCase();c!=d&&(this.remove(c),this.remove(d),0<a.length&&(this.X=n,this.v.set(Yj(this,d),Db(a)),this.f+=a.length))},this));this.ha=a};t.extend=function(a){for(var b=0;b<arguments.length;b++)Gc(arguments[b],function(a,b){this.add(b,a)},this)};function Zj(a,b,c){this.Ze=a;Ec(this.Ze,$j());this.uri=new Kj(b);this.ie=new Pj(i,0,m);(a=this.uri.ib)&&this.ie.extend(a);this.ie.extend(c);this.ql=ak(this,"buildServer")}function $j(){return{buildServer:{help:"Build server daemon address.",type:String,defaultValue:n}}}function bk(a,b){var c=parseFloat(a.Ze[b].defaultValue),d=a.ie.get(b,c);return!ga(d)?c:Number(d)}function ak(a,b){var c=a.Ze[b].defaultValue,d=a.ie.get(b,c);return!ga(d)||!d||!d.length||/^[\s\xa0]*$/.test(String(d))?c:String(d)};function ck(a,b){Zj.call(this,dk(),a,b);this.Dl=bk(this,"listenPort");this.Ef=ak(this,"fileSystem");this.bk=ak(this,"mapPath");this.ak=ak(this,"mapGenerator");this.ck=bk(this,"mapSeed");this.ff=ak(this,"browserUrl");this.ki=ak(this,"serverId");this.mi=ak(this,"serverKey");this.Ik=ak(this,"serverName");this.Wk=bk(this,"userCount")}z(ck,Zj);
function dk(){return{listenPort:{help:"Port to use for game connections.",type:Number,defaultValue:1337},fileSystem:{help:"File system root path.",type:String,defaultValue:"/tmp/blk/"},mapPath:{help:"Map path.",type:String,defaultValue:"/maps/map01/"},mapGenerator:{help:"Map generator name.",type:String,defaultValue:"improved"},mapSeed:{help:"Map generator random seed.",type:Number,defaultValue:0},browserUrl:{help:"Server browser base API URL.",type:String,defaultValue:"http://localhost:8081/"},serverId:{help:"Server registration UUID.",
type:String,defaultValue:n},serverKey:{help:"Server private key.",type:String,defaultValue:n},serverName:{help:"Human-readable server name.",type:String,defaultValue:n},userCount:{help:"Maximum simultaneous user count.",type:Number,defaultValue:8}}};function ek(){D.call(this);this.type="none"}z(ek,D);function fk(){this.Ic=Array(256)}function ve(a,b,c,d){c=d?x(c,d):c;a.Ic[b]=c};function gk(a,b,c){D.call(this);this.$b=new fk;this.H=new yh;this.id=a;this.type=b;this.fi=c;this.info=new Hg;this.ml=new ek;this.state=0;this.h=[];this.oc={};this.Gi=Array(256);this.R=[]}z(gk,D);gk.prototype.b=function(){this.R.length=0;gk.d.b.call(this)};gk.prototype.Ye=function(a){this.h.push(a);this.oc[a.c]=a;this.Gi[a.N]=a;for(var b=0;b<this.R.length;b++)this.R[b].Ig(a)};gk.prototype.me=function(a){var b=this.oc,c=a.c,d;(d=c in b)&&delete b[c];if(d){this.Gi[a.N]=n;Bb(this.h,a);for(b=0;b<this.R.length;b++)this.R[b].Jg(a)}};function hk(a){this.timestamp=ua();this.F=n;this.data=a};function ik(a){D.call(this);this.Ka=a;this.Xj=p;this.state=jk;this.zd=p;this.jc=0;this.lb=n;this.Xc=[];this.Qe=[]}z(ik,D);ik.prototype.b=function(){this.close();ik.d.b.call(this)};var jk=0;ik.prototype.read=function(){if(!this.Xc.length)return n;var a=this.Xc[0];a.timestamp<=ua()?this.Xc.shift():a=n;this.Xc.length||(this.zd=p);return a};
ik.prototype.write=function(a){a=new hk(a);if(this.jc){var b=this.jc+(Math.random()-0.5)*this.jc/2;a.timestamp+=b;this.lb===n&&(this.lb=u.setInterval(x(function(){1==this.state&&this.flush()},this),5))}else this.lb!==n&&(u.clearInterval(this.lb),this.lb=n);this.Qe.push(a);1==this.state&&this.flush()};function kk(a,b){if(a.jc){var c=a.jc+(Math.random()-0.5)*a.jc/2;b.timestamp+=c}a.Xc.push(b);a.zd=m}
ik.prototype.flush=function(a){for(var b=ua();this.Qe.length;){var c=this.Qe[0];if(c.timestamp>b&&!a)break;this.Qe.shift();this.Ji(c.data)}};ik.prototype.close=function(){2!=this.state&&(this.lb!==n&&(u.clearInterval(this.lb),this.lb=n),this.state=2)};function lk(a,b,c,d){gk.call(this,"0",0,b);ve(this.$b,1,this.Nj,this);ve(this.$b,8,this.Pj,this);ve(this.$b,5,this.Kj,this);this.ca=a;this.li=d;this.lg=p;this.Mc=[];this.od=Array(255);for(a=1;a<this.od.length;a++)this.od[a-1]=a}z(lk,gk);t=lk.prototype;t.b=function(){if(this.lg){this.lg=p;this.state=0;this.ca.da(n);for(var a=0;a<this.R.length;a++)this.R[a].vf()}lk.d.b.call(this)};t.Jf=function(a){var b=a.Ka;0<=vb(Gb,b)||Gb.push(b);this.Mc.push(a)};
function mk(a,b){if(b.ca&&(a.oc[b.c]||n)==b)b.ca.close(),a.me(b),a.send(ah(b.c,b.uf)),0!=b.N&&(a.od.push(b.N),b.N=0)}
t.bi=function(a){if(this.Mc.length)for(var b=Se(),c=0;c<this.Mc.length;c++){var d=this.Mc[c],e=p,f=p,g=1;if(2!=d.state)for(;d.zd;){var k=d.read();if(!k)break;b.da(k.data,0);if(4==Be(b)){var j=b,e=Sg;e.Ce=Ce(j);e.kd=Ce(j);k=e.F||new $d;k.c=j.D();k.N=Be(j);k.t=j.ba();var l;if(!(l=!Jg(j,k.info)))l=k.jd||new Vd,l.type=j.D(),l.platform=j.D(),l.Uc=j.D(),l.zc=j.D(),l=!l;e=!(l?0:k)?n:e;this.h.length+1>this.li.Zb&&(f=m,g=7);if(!f&&(3!=e.Ce||e.kd!=this.fi))f=m,g=2;if(!f){e=ae(e.F);for(e.ca=d;!(e.c=Math.floor(2147483648*
Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^ua()).toString(36),!this.oc[e.c]););e.N=this.od.shift();this.send(Zg(ae(e)));this.send(Ug(this.fi,e),e);k=yb(this.h,ae);k.push(ae(e));this.send(Qg(this.info.s(),k),e);this.Ye(e)}e=m}else f=e=m,g=3}else f=e=m,g=1;e&&(f&&(f=g,g=S(),Xg.reason=f,R(g,5),g.J(Xg.reason),(f=g.finish())&&d.write(f),L(d)),this.Mc.splice(c,1),c--)}b=N();for(c=0;c<this.h.length;c++){for(d=this.h[c];d.ca.zd;){g=d.ca.read();if(!g)break;g.F=d;d.Xg+=g.data.byteLength;
f=this.$b;e=Se();e.da(g.data,0);e.offset+1<=e.buffer.length&&(k=Be(e),(f=f.Ic[k])&&f(g,k,e))}if(!d.ca||2==d.ca.state)d.uf=1,mk(this,d);else if(a&&N()-b>=a)break}};
t.Nj=function(a,b,c){a=a.F;Mg.xe=c.ba();Mg.vc=c.ba();Mg.Yb=c.ba();if(!Mg)return p;c=a.na;b=Math.abs(Mg.Yb);c.pd=c.pd?(c.pd+b)/2:b;c.Oh=Math.min(c.Oh,b);c.Nh=Math.max(c.Nh,b);c=(N()-this.H.ad)/1E3+this.H.nf;b=Array(this.h.length);for(var d=0;d<this.h.length;d++)b[d]=new Ig,b[d].N=this.h[d].N,b[d].Yb=this.h[d].na.pd;this.send(Og(1E3*c|0,b),a);return m};
t.Pj=function(a,b,c){ch.c=c.D();c=!Jg(c,ch.info)?n:ch;if(!c)return p;b=this.oc[c.c]||n;if(!b)return m;if(b!=a.F)return p;a=c.info.qa;a=kb(a).replace(/\xa0|\s/g," ").replace(/\xa0|[ \t]+/g," ");a=!a.length?"User":a;b.info.qa=a;for(a=0;a<this.R.length;a++)this.R[a].Kg(b);this.send(eh(b.c,b.info));return m};t.Kj=function(a,b,c){a=a.F;Wg.reason=c.ba();if(!Wg)return p;M("["+a.c+"] disconnect req",Wg.reason);return m};
t.send=function(a,b){if(a)if(b){var c=b.ca;2!=c.state?(c.write(a),b.na.ud+=a.byteLength):mk(this,b)}else for(var d=0;d<this.h.length;d++){var e=this.h[d],c=e.ca;2!=c.state?(e.na.ud+=a.byteLength,c.write(a)):(e.uf=1,mk(this,e))}};function nk(a,b){if(!a)return p;for(var c=a.constructor,d=0;d<b.length;d++){var e=b[d];if(c==e||c.name==e)return m;ma(e)&&(e=u[e]);if(e&&(c==e||c.name==e.name))return m}return p}function ok(a){a=new Uint8Array(a);for(var b=Array(a.length),c=0;c<b.length;c++)b[c]=a[c];return String.fromCharCode.apply(n,b)};function pk(a,b){ik.call(this,a);this.Xj=m;this.state=1;this.o=b;this.Ok=!!b.webkitPostMessage&&!nk(b,["MessagePort"]);this.Ti=!Dd;var c=this;this.o.onmessage=function(a){c.Kf(a)};this.o.onerror=function(a){M("port error",a)}}z(pk,ik);
pk.prototype.Kf=function(a){a=a.data;var b=n;if(a instanceof ArrayBuffer)b=new hk(a);else if(ma(a)){for(var b=new Uint8Array(2*a.length),c=0,d=0;d<a.length;d++){for(var e=a.charCodeAt(d);255<e;)b[c++]=e,e>>=8;b[c++]=e}b=new hk(b.subarray(0,c).buffer)}else a&&a.close&&this.close();b&&kk(this,b)};pk.prototype.Ji=function(a){this.Ok?this.o.webkitPostMessage(a,[a]):this.Ti?this.o.postMessage(a):this.o.postMessage(ok(a))};
pk.prototype.close=function(){this.o.onmessage=n;try{this.o.postMessage({close:m}),this.o.close&&this.o.close()}catch(a){}pk.d.close.call(this)};function qk(a){D.call(this);this.Ka=a;this.$a=m;this.pf=[];this.Dd=n}z(qk,D);qk.prototype.b=function(){this.close();this.Dd=n;qk.d.b.call(this)};qk.prototype.da=function(a){if(this.Dd=a)for(;this.pf.length;){var b=this.pf.shift();a.call(n,b)}};function rk(a,b){a.Dd?a.Dd.call(n,b):a.pf.push(b)};function sk(a,b){qk.call(this,a);this.o=b;this.Tg=x(this.Jf,this);this.o.addEventListener("connect",this.Tg,p);if(nk(b,["DedicatedWorkerContext","DedicatedWorkerGlobalScope"])){var c=new pk(b,b);rk(this,c)}}z(sk,qk);sk.prototype.Jf=function(a){a=a.ports[0];a=new pk(a,a);rk(this,a)};sk.prototype.close=function(){this.$a&&(this.$a=p,this.o.removeEventListener("connect",this.Tg,p))};function tk(a,b){ik.call(this,a);this.state=1;this.o=b;this.Vg=x(this.Lj,this);this.Sg=x(this.Ij,this);this.Wg=x(this.Kf,this);this.cl={binary:m,mask:p};this.o.addListener("error",this.Vg);this.o.addListener("close",this.Sg);this.o.addListener("message",this.Wg)}z(tk,ik);t=tk.prototype;t.Lj=function(a){M("socket error",a)};t.Ij=function(a){M("socket closed",a.code);this.close()};t.Kf=function(a){for(var b=new Uint8Array(a.length),c=0;c<a.length;c++)b[c]=a[c];a=new hk(b.buffer);kk(this,a)};
t.Ji=function(a){this.o.send(Fj(a),this.cl)};t.close=function(){this.o.removeListener("error",this.Vg);this.o.removeListener("close",this.Sg);this.o.removeListener("message",this.Wg);this.o.close(1E3,"");tk.d.close.call(this)};function uk(a){qk.call(this,a);this.o=new (require("ws").Server)({host:i,port:Number(a)});this.Ug=x(this.Jj,this);this.o.addListener("connection",this.Ug)}z(uk,qk);uk.prototype.Jj=function(a){a=new tk(a,a);rk(this,a)};uk.prototype.close=function(){this.$a&&(this.$a=p,this.o.removeListener("connection",this.Ug),this.o.close())};fa("blk.server.start",function(a,b){function c(a,b,d){var e=new (b.shift())(a);P(e.Hb(),function(){d(e)},function(){c(a,b,d)})}for(var d=new O,e={},f=0;f<b.length;f++){var g=b[f];if(0==g.indexOf("--")){var g=g.split("="),k=g[1];e[g[0].substring(2)]=1<g.length?k:m}}if(e.help)return M("BLK game server","(release)"),M("gf:"),M($j()),M("blk:"),M(dk()),d.a("help query"),d;var j=new ck(a,e),e=new Hg;e.Ka="blk://local-0";e.name=j.Ik||"Server";e.Dc="blk";e.Ec="0.0.1";e.Zb=j.Wk;f=n;ma(u)?f=new uk(u):oa(u)&&
(f=new sk(u,u));e=new lk(f,7,0,e);e=Wc(e);P(e,function(a){c(j.bk,[Hj,Gj,Jj],function(b){var c=new Ri(j,a,b);P(c.load(),function(){c.yg||(c.yg=m,c.oe.start());d.e(c)},function(a){d.a(a)})})},function(a){d.a(a)});return d});
